PS F:\Documents\College\6th Semester\Project\ESP_Warp> python main.py
INFO:     Started server process [2728]
INFO:     Waiting for application startup.

============================================================
ðŸš€ Hotpin Prototype Server Starting...
============================================================

ðŸ“¡ Network Information:
   WiFi Network: wifi
   IP Address: 10.247.1.58
   Interface: WiFi
   Server URL: http://10.247.1.58:8000
   WebSocket URL: ws://10.247.1.58:8000/ws

âœ“ Groq AsyncClient initialized with model: openai/gpt-oss-20b
Loading Vosk model from: ./model
LOG (VoskAPI:ReadDataFiles():model.cc:213) Decoding params beam=10 max-active=3000 lattice-beam=2
LOG (VoskAPI:ReadDataFiles():model.cc:216) Silence phones 1:2:3:4:5:6:7:8:9:10
LOG (VoskAPI:RemoveOrphanNodes():nnet-nnet.cc:948) Removed 1 orphan nodes.
LOG (VoskAPI:RemoveOrphanComponents():nnet-nnet.cc:847) Removing 2 orphan components.
LOG (VoskAPI:Collapse():nnet-utils.cc:1488) Added 1 components, removed 2
LOG (VoskAPI:ReadDataFiles():model.cc:248) Loading i-vector extractor from ./model/ivector/final.ie
LOG (VoskAPI:ComputeDerivedVars():ivector-extractor.cc:183) Computing derived variables for iVector extractor
LOG (VoskAPI:ComputeDerivedVars():ivector-extractor.cc:204) Done.
LOG (VoskAPI:ReadDataFiles():model.cc:282) Loading HCL and G from ./model/graph/HCLr.fst ./model/graph/Gr.fst
LOG (VoskAPI:ReadDataFiles():model.cc:308) Loading winfo ./model/graph/phones/word_boundary.int
âœ“ Vosk model loaded successfully
   Model: ./model
   Format: 16000Hz, 1 channel, 16-bit
âœ“ pyttsx3 TTS engine test successful
============================================================
âœ“ Server ready at ws://0.0.0.0:8000/ws
============================================================

INFO:     Application startup complete.
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     10.247.1.214:65000 - "WebSocket /ws" [accepted]
ðŸ”Œ New WebSocket connection established
INFO:     connection open
âœ“ Session initialized: esp32-cam-hotpin
ðŸ“· [hotpin-998C64-17] Image received: image.jpg, 12895 bytes (12.59 KB)
ðŸ’¾ [hotpin-998C64-17] Image saved: captured_images/hotpin-998C64-17_20251014_005257.jpg
INFO:     10.247.1.214:65001 - "POST /image HTTP/1.1" 200 OK
ðŸ”Œ [esp32-cam-hotpin] WebSocket disconnect received (code=1006)
ðŸ§¹ [esp32-cam-hotpin] Session cleaned up
INFO:     connection closed
INFO:     10.247.1.214:56844 - "WebSocket /ws" [accepted]
ðŸ”Œ New WebSocket connection established
INFO:     connection open
âœ“ Session initialized: esp32-cam-hotpin
ERROR:    data transfer failed
Traceback (most recent call last):
  File "C:\Users\Vighnesh Nilajakar\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\legacy\protocol.py", line 945, in transfer_data
    message = await self.read_message()
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vighnesh Nilajakar\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\legacy\protocol.py", line 1015, in read_message
    frame = await self.read_data_frame(max_size=self.max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vighnesh Nilajakar\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\legacy\protocol.py", line 1090, in read_data_frame
    frame = await self.read_frame(max_size)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Vighnesh Nilajakar\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\legacy\protocol.py", line 1147, in read_frame
    frame = await Frame.read(
            ^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "C:\Users\Vighnesh Nilajakar\AppData\Local\Programs\Python\Python313\Lib\site-packages\websockets\legacy\framing.py", line 71, in read
    data = await reader(2)
           ^^^^^^^^^^^^^^^
  File "C:\Users\Vighnesh Nilajakar\AppData\Local\Programs\Python\Python313\Lib\asyncio\streams.py", line 769, in readexactly
    await self._wait_for_data('readexactly')
  File "C:\Users\Vighnesh Nilajakar\AppData\Local\Programs\Python\Python313\Lib\asyncio\streams.py", line 539, in _wait_for_data
    await self._waiter
  File "C:\Users\Vighnesh Nilajakar\AppData\Local\Programs\Python\Python313\Lib\asyncio\proactor_events.py", line 286, in _loop_reading
    length = fut.result()
  File "C:\Users\Vighnesh Nilajakar\AppData\Local\Programs\Python\Python313\Lib\asyncio\windows_events.py", line 804, in _poll
    value = callback(transferred, key, ov)
  File "C:\Users\Vighnesh Nilajakar\AppData\Local\Programs\Python\Python313\Lib\asyncio\windows_events.py", line 463, in finish_socket_func
    return ov.getresult()
           ~~~~~~~~~~~~^^
OSError: [WinError 121] The semaphore timeout period has expired
ðŸ”Œ [esp32-cam-hotpin] WebSocket disconnect received (code=1006)
ðŸ§¹ [esp32-cam-hotpin] Session cleaned up
INFO:     connection closed
