PS F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware> idf.py monitor
Executing action: monitor
Serial port COM7
Connecting.....................
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP32
Running idf_monitor in directory F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware
Executing "C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe C:\Espressif\frameworks\esp-idf-v5.4.2\tools/idf_monitor.py -p COM7 -b 115200 --toolchain-prefix xtensa-esp32-elf- --target esp32 --revision 0 F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware\build\hotpin_esp32_firmware.elf --force-color -m 'C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe' 'C:\Espressif\frameworks\esp-idf-v5.4.2\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM7 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM7 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
I (13) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (13) boot: compile time Nov  1 2025 12:54:31
I (13) boot: Multicore bootloader
I (14) boot: chip revision: v3.1
I (17) boot.esp32: SPI Speed      : 40MHz
I (21) boot.esp32: SPI Mode       : DIO
I (24) boot.esp32: SPI Flash Size : 2MB
I (28) boot: Enabling RNG early entropy source...
I (32) boot: Partition Table:
I (35) boot: ## Label            Usage          Type ST Offset   Length
I (41) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (48) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (54) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (61) boot:  3 factory          factory app      00 00 00010000 00180000
I (67) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (74) boot: End of partition table
I (77) boot: Defaulting to factory image
I (81) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=36each (224940) map
I (165) esp_image: segment 1: paddr=00046ed4 vaddr=3ff80000 size=0001ch (    28) load
I (165) esp_image: segment 2: paddr=00046ef8 vaddr=3ffb0000 size=09120h ( 37152) load
I (182) esp_image: segment 3: paddr=00050020 vaddr=400d0020 size=baf90h (765840) map
I (444) esp_image: segment 4: paddr=0010afb8 vaddr=3ffb9120 size=08ba4h ( 35748) load
I (458) esp_image: segment 5: paddr=00113b64 vaddr=40080000 size=1adf0h (110064) load
I (517) boot: Loaded app from partition at offset 0x10000
I (517) boot: Disabling RNG early entropy source...
I (527) quad_psram: This chip is ESP32-D0WD
I (528) esp_psram: Found 4MB PSRAM device
I (528) esp_psram: Speed: 40MHz
I (531) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (539) cpu_start: Multicore app
I (1433) esp_psram: SPI SRAM memory test OK
I (1441) cpu_start: Pro cpu start user code
I (1441) cpu_start: cpu freq: 240000000 Hz
I (1441) app_init: Application information:
I (1444) app_init: Project name:     hotpin_esp32_firmware
I (1450) app_init: App version:      cdbc30c-dirty
I (1456) app_init: Compile time:     Nov  1 2025 12:54:19
I (1462) app_init: ELF file SHA256:  874279265...
I (1467) app_init: ESP-IDF:          v5.4.2-dirty
I (1473) efuse_init: Min chip rev:     v0.0
I (1478) efuse_init: Max chip rev:     v3.99
I (1483) efuse_init: Chip rev:         v3.1
I (1488) heap_init: Initializing. RAM available for dynamic allocation:
I (1495) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1501) heap_init: At 3FFC9368 len 00016C98 (91 KiB): DRAM
I (1507) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1514) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1520) heap_init: At 4009ADF0 len 00005210 (20 KiB): IRAM
I (1527) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1535) spi_flash: detected chip: generic
I (1539) spi_flash: flash io: dio
W (1543) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1557) main_task: Started on CPU0
I (1560) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1569) main_task: Calling app_main()
I (1573) HOTPIN_MAIN: ====================================
I (1579) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1585) HOTPIN_MAIN: ====================================
W (1591) HOTPIN_MAIN: Brownout detector disabled
I (1596) HOTPIN_MAIN: Validating PSRAM...
I (1601) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1607) HOTPIN_MAIN: PSRAM validation passed
I (1613) HOTPIN_MAIN: ====================================
I (1619) HOTPIN_MAIN: System Information:
I (1623) HOTPIN_MAIN: Chip: esp32
I (1627) HOTPIN_MAIN: Cores: 2
I (1631) HOTPIN_MAIN: Silicon revision: 301
I (1636) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1641) HOTPIN_MAIN: Flash: 2 MB external
I (1646) HOTPIN_MAIN: Free heap: 4365124 bytes
I (1651) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1656) HOTPIN_MAIN: ====================================
I (1662) HOTPIN_MAIN: Initializing NVS...
I (1691) HOTPIN_MAIN: NVS initialized successfully
I (1692) event_dispatcher: System event queue ready (16 entries)
I (1693) HOTPIN_MAIN: Synchronization primitives created
I (1699) HOTPIN_MAIN: Initializing WiFi...
I (1708) wifi:wifi driver task: 3ffd9f60, prio:23, stack:6656, core=0
I (1720) wifi:wifi firmware version: bea31f3
I (1721) wifi:wifi certification version: v7.0
I (1721) wifi:config NVS flash: enabled
I (1721) wifi:config nano formatting: disabled
I (1726) wifi:Init data frame dynamic rx buffer num: 32
I (1731) wifi:Init static rx mgmt buffer num: 5
I (1735) wifi:Init management short buffer num: 32
I (1739) wifi:Init dynamic tx buffer num: 32
I (1744) wifi:Init static rx buffer size: 1600
I (1748) wifi:Init static rx buffer num: 10
I (1751) wifi:Init dynamic rx buffer num: 32
I (1757) wifi_init: rx ba win: 6
I (1759) wifi_init: accept mbox: 6
I (1763) wifi_init: tcpip mbox: 32
I (1767) wifi_init: udp mbox: 6
I (1771) wifi_init: tcp mbox: 6
I (1775) wifi_init: tcp tx win: 5760
I (1779) wifi_init: tcp rx win: 5760
I (1784) wifi_init: tcp mss: 1440
I (1788) wifi_init: WiFi IRAM OP enabled
I (1792) wifi_init: WiFi RX IRAM OP enabled
I (1799) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (1867) phy_init: Saving new calibration data due to checksum failure or outdated calibration data, mode(0)
I (1884) wifi:mode : sta (80:f3:da:99:8c:64)
I (1885) wifi:enable tsf
I (1888) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (1888) HOTPIN_MAIN: Waiting for WiFi connection...
I (1889) HOTPIN_MAIN: WiFi station started, connecting...
I (1911) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (1912) wifi:state: init -> auth (0xb0)
I (2813) wifi:state: auth -> assoc (0x0)
I (2822) wifi:state: assoc -> run (0x10)
I (2875) wifi:connected with wifi, aid = 2, channel 11, BW20, bssid = ee:d4:b9:ed:90:50
I (2875) wifi:security: WPA3-SAE, phy: bgn, rssi: -62
I (2879) wifi:pm start, type: 1

I (2880) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (2890) wifi:<ba-add>idx:0 (ifx:0, ee:d4:b9:ed:90:50), tid:0, ssn:0, winSize:64
I (2897) HOTPIN_MAIN: WiFi connected to AP
I (2976) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (2976) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (3922) esp_netif_handlers: sta ip: 10.143.111.214, mask: 255.255.255.0, gw: 10.143.111.248
I (3923) HOTPIN_MAIN: âœ… Got IP address: 10.143.111.214
I (3927) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (6902) HOTPIN_MAIN: Initializing button handler...
I (6902) BUTTON: Initializing button handler on GPIO 12
I (6903) gpio: GPIO[12]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (6912) BUTTON: Button FSM task started
I (6917) BUTTON: GPIO ISR service installed successfully
I (6922) BUTTON: Button handler initialized successfully (initial level=1, primed=1)
I (6931) HOTPIN_MAIN: Initializing LED controller...
I (6936) LED_CTRL: Initializing LED controller on GPIO 33
I (6943) LED_CTRL: LED controller ready
I (6947) LED_CTRL: LED pattern -> 2
I (6951) HOTPIN_MAIN: Initializing WebSocket client...
I (6957) WEBSOCKET: Initializing WebSocket client...
I (6963) WEBSOCKET: Server URI: ws://10.143.111.58:8000/ws
I (6969) WEBSOCKET: Authorization header configured
I (6975) WEBSOCKET: âœ… WebSocket client initialized
I (6980) WEBSOCKET: Status callback registered
I (6985) HOTPIN_MAIN: WebSocket status callback registered
I (6991) HOTPIN_MAIN: Initializing HTTP client...
I (6997) HTTP_CLIENT: Initializing HTTP client
I (7002) HTTP_CLIENT: Authorization token configured
I (7007) HTTP_CLIENT: HTTP client initialized (server: http://10.143.111.58:8000)
I (7016) HOTPIN_MAIN: Initializing STT pipeline...
I (7021) STT: Initializing STT pipeline...
I (7026) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7044) STT: â•‘ STT Ring Buffer Allocation (PSRAM)
I (7050) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7068) STT: [MEMORY] Pre-allocation state:
I (7073) STT:   Free internal RAM: 160907 bytes
I (7078) STT:   Free DMA-capable: 140635 bytes
I (7083) STT:   Free PSRAM: 4191564 bytes
I (7088) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (7096) STT:   âœ“ Ring buffer allocated at 0x3f800ab8 (PSRAM address)
I (7103) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (7112) STT: [MEMORY] Post-allocation state:
I (7117) STT:   Free internal RAM: 160907 bytes
I (7122) STT:   Free DMA-capable: 140635 bytes
I (7127) STT:   Free PSRAM: 4126024 bytes
I (7138) STT: [CORE AFFINITY] Creating persistent audio streaming task on Core 0
I (7140) STT: Persistent audio streaming task started on Core 0
I (7146) STT:   âœ“ Stream buffer allocated at 0x3ffd126c (with safety padding)
I (7155) STT: âœ… STT pipeline initialized
I (7159) HOTPIN_MAIN: Initializing TTS decoder...
I (7164) TTS: Initializing TTS decoder...
I (7171) TTS: Allocating 65536 byte PSRAM buffer for TTS stream
I (7183) WEBSOCKET: Audio callback registered
I (7184) TTS: âœ… TTS decoder initialized
I (7185) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (7193) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (7199) HOTPIN_MAIN: State manager task created on Core 1
I (7199) STATE_MGR: State manager task started on Core 1
I (7205) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (7211) STATE_MGR: Priority: 10
I (7218) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 1)...
I (7222) STATE_MGR: Starting in camera mode...
I (7229) WEBSOCKET: Connecting to WebSocket server...
I (7234) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (7245) STATE_MGR: Acquiring I2S mutex...
I (7249) websocket_client: Started
I (7250) STATE_MGR: Audio drivers already inactive; skipping deinit
I (7254) WEBSOCKET: WebSocket client started
I (7261) STATE_MGR: Initializing camera...
I (7205) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (7271) CAMERA: Initializing camera...
I (7278) HOTPIN_MAIN: Initializing task watchdog (30s timeout)...
I (7283) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
I (7290) HOTPIN_MAIN: State manager task added to watchdog
E (7299) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (7305) HOTPIN_MAIN: ====================================
I (7313) cam_hal: cam init ok
I (7319) HOTPIN_MAIN: System initialization complete!
I (7323) sccb-ng: pin_sda 26 pin_scl 27
I (7328) HOTPIN_MAIN: Entering camera standby mode...
I (7333) sccb-ng: sccb_i2c_port=1
I (7339) HOTPIN_MAIN: ====================================
I (7344) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (7392) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (7392) camera: Detected OV2640 camera
I (7392) camera: Detected camera at address=0x30
I (7472) cam_hal: PSRAM DMA mode disabled
I (7473) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (7477) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (7483) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (7490) cam_hal: cam config ok
I (7494) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (7576) CAMERA: Camera initialized successfully
I (7576) STATE_MGR: I2S mutex released
I (7576) STATE_MGR: âœ… Camera mode transition complete
I (7576) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7581) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (7599) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (7605) LED_CTRL: LED pattern -> 3
I (7611) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7606) WEBSOCKET: âœ… WebSocket connected to server
I (7633) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (7639) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (7646) AUDIO:   âœ“ I2S access mutex created successfully
I (7658) WEBSOCKET: Handshake sent successfully
I (7665) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (7665) STATE_MGR: WebSocket connected
I (7660) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7694) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (7701) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7717) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (7719) AUDIO: [DIAG] Pre-init state:
I (7729) WEBSOCKET: Server status: connected
I (7733) AUDIO:   Free heap: 3995900 bytes
I (7743) AUDIO:   Free internal RAM: 80367 bytes
I (7748) AUDIO:   Free DMA-capable: 60087 bytes
I (7754) AUDIO:   Free PSRAM: 3936032 bytes
I (7758) AUDIO:   Timestamp: 6232 ms
I (7763) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (7769) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (7777) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (7785) AUDIO:   DMA frame num (per desc): 1020
I (7791) AUDIO:   DMA total samples (effective): 4080
I (7796) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (7803) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (7810) AUDIO: âœ… I2S channels created (took 0 ms)
I (7815) AUDIO:   TX handle: 0x3ffe1334 | RX handle: 0x3ffe1480
I (7822) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (7828) AUDIO:   Sample rate: 16000 Hz
I (7833) AUDIO:   MCLK: DISABLED
I (7837) AUDIO:   BCLK: GPIO14 (shared)
I (7841) AUDIO:   WS:   GPIO15 (shared)
I (7846) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (7853) AUDIO: âœ… TX channel configured (took 1 ms)
I (7857) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (7864) AUDIO:   Sample rate: 16000 Hz
I (7868) AUDIO:   MCLK: DISABLED
I (7872) AUDIO:   BCLK: GPIO14 (shared)
I (7877) AUDIO:   WS:   GPIO15 (shared)
I (7881) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (7887) AUDIO: âœ… RX channel configured (took 0 ms)
I (7892) AUDIO: [STEP 4/6] Enabling TX channel...
I (7898) AUDIO: âœ… TX channel enabled (took 0 ms)
I (7903) AUDIO: [STEP 5/6] Enabling RX channel...
I (7909) AUDIO: âœ… RX channel enabled (took 0 ms)
I (7914) AUDIO: [STEP 6/6] Hardware stabilization...
I (7920) AUDIO:   Phase 1: Initial settle (50ms)
I (7673) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (7975) AUDIO:   Phase 2: DMA verification
I (7975) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (7975) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (8131) AUDIO: [DIAG] Post-init state:
I (8131) AUDIO:   Free heap: 3970112 bytes
I (8131) AUDIO:   Free internal RAM: 54359 bytes
I (8134) AUDIO:   Free DMA-capable: 34087 bytes
I (8139) AUDIO:   Free PSRAM: 3936032 bytes
I (8144) AUDIO:   Timestamp: 6618 ms
I (8149) AUDIO:   Total init time: 201 ms
I (8153) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8171) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (8177) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (8183) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (8191) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (8198) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8216) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8234) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (8240) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (8246) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (8253) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (8259) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9544) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9551) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (9558) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9576) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (9583) AUDIO: âœ… RX channel disabled (took 0 ms)
I (9588) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (9595) AUDIO: âœ… TX channel disabled (took 0 ms)
I (9600) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (9657) AUDIO: [STEP 4/5] Deleting RX channel...
I (9657) AUDIO: âœ… RX channel deleted (took 0 ms)
I (9657) AUDIO: [STEP 5/5] Deleting TX channel...
I (9662) AUDIO: âœ… TX channel deleted (took 0 ms)
I (9667) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (9725) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9731) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (9738) AUDIO: â•‘ Camera Can Now Initialize
I (9743) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9761) HOTPIN_MAIN: Main task exiting - system running
I (9767) main_task: Returned from app_main()
I (14161) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (14161) STATE_MGR: Double-click detected - triggering capture sequence
I (14164) STATE_MGR: Starting camera capture sequence
I (14170) LED_CTRL: LED pattern -> 6
I (14174) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14192) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (14199) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14217) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14235) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (14242) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14260) AUDIO: [DIAG] Pre-init state:
I (14265) AUDIO:   Free heap: 4000840 bytes
I (14270) AUDIO:   Free internal RAM: 85163 bytes
I (14275) AUDIO:   Free DMA-capable: 64891 bytes
I (14280) AUDIO:   Free PSRAM: 3936032 bytes
I (14285) AUDIO:   Timestamp: 12759 ms
I (14290) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (14297) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (14305) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (14313) AUDIO:   DMA frame num (per desc): 1020
I (14318) AUDIO:   DMA total samples (effective): 4080
I (14324) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (14331) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (14338) AUDIO: âœ… I2S channels created (took 0 ms)
I (14343) AUDIO:   TX handle: 0x3ffafc60 | RX handle: 0x3ffca6d8
I (14350) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (14356) AUDIO:   Sample rate: 16000 Hz
I (14361) AUDIO:   MCLK: DISABLED
I (14365) AUDIO:   BCLK: GPIO14 (shared)
I (14369) AUDIO:   WS:   GPIO15 (shared)
I (14374) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (14381) AUDIO: âœ… TX channel configured (took 1 ms)
I (14385) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (14392) AUDIO:   Sample rate: 16000 Hz
I (14397) AUDIO:   MCLK: DISABLED
I (14401) AUDIO:   BCLK: GPIO14 (shared)
I (14405) AUDIO:   WS:   GPIO15 (shared)
I (14410) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (14416) AUDIO: âœ… RX channel configured (took 0 ms)
I (14421) AUDIO: [STEP 4/6] Enabling TX channel...
I (14427) AUDIO: âœ… TX channel enabled (took 0 ms)
I (14432) AUDIO: [STEP 5/6] Enabling RX channel...
I (14438) AUDIO: âœ… RX channel enabled (took 0 ms)
I (14444) AUDIO: [STEP 6/6] Hardware stabilization...
I (14449) AUDIO:   Phase 1: Initial settle (50ms)
I (14505) AUDIO:   Phase 2: DMA verification
I (14505) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (14506) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (14662) AUDIO: [DIAG] Post-init state:
I (14662) AUDIO:   Free heap: 3974836 bytes
I (14662) AUDIO:   Free internal RAM: 59159 bytes
I (14666) AUDIO:   Free DMA-capable: 38887 bytes
I (14671) AUDIO:   Free PSRAM: 3936032 bytes
I (14676) AUDIO:   Timestamp: 13150 ms
I (14681) AUDIO:   Total init time: 201 ms
I (14685) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14703) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (14710) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (14715) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (14724) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (14730) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14748) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14766) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (14773) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (14779) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (14786) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (14792) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15142) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15149) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (15157) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15175) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (15182) AUDIO: âœ… RX channel disabled (took 0 ms)
I (15187) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (15194) AUDIO: âœ… TX channel disabled (took 0 ms)
I (15199) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (15256) AUDIO: [STEP 4/5] Deleting RX channel...
I (15257) AUDIO: âœ… RX channel deleted (took 0 ms)
I (15257) AUDIO: [STEP 5/5] Deleting TX channel...
I (15262) AUDIO: âœ… TX channel deleted (took 0 ms)
I (15267) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (15325) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15332) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (15339) AUDIO: â•‘ Camera Can Now Initialize
I (15344) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15362) STATE_MGR: Capturing frame from camera
I (15367) STATE_MGR: Frame captured: 11559 bytes
I (15373) JSON_PROTO: Generated session ID: hotpin-998C64-13
I (15379) STATE_MGR: Uploading image using session hotpin-998C64-13
I (15386) HTTP_CLIENT: Uploading image: session=hotpin-998C64-13, size=11559 bytes
I (15396) HTTP_CLIENT: POST body assembled: 11816 bytes
I (15401) HTTP_CLIENT: Sending POST request to http://10.143.111.58:8000/image
I (15501) HTTP_CLIENT: HTTP POST Status = 200, content_length = 199
I (15502) HTTP_CLIENT: Image uploaded successfully
I (15503) HTTP_CLIENT: Server response: {"status":"success","message":"Image received successfully","session":"hotpin-998C64-13","filename":"image.jpg","size_bytes":11559,"saved_path":"captured_images/hotpin-998C64-13_20251101_130837.jpg"}
I (15526) STATE_MGR: Image uploaded successfully
I (15531) LED_CTRL: LED pattern -> 3
I (15534) STATE_MGR: Camera capture sequence complete
I (15550) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (23654) BUTTON: Single click confirmed
I (23654) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (23655) STATE_MGR: Single click - mode toggle requested
I (23661) STATE_MGR: Switching: Camera â†’ Voice (count: 1)
I (23717) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (23717) STATE_MGR: Stopping camera...
I (23717) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23733) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (23740) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23756) STATE_MGR:   Timeout: 5000 ms
I (23760) STATE_MGR:   Timestamp: 22234 ms
I (23765) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (23771) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23787) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (23794) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23810) STATE_MGR:   Free heap before: 4000468 bytes
I (23816) STATE_MGR:   Free PSRAM before: 3936032 bytes
I (23822) CAMERA: Deinitializing camera...
I (23827) CAMERA: Camera deinitialized
I (23831) STATE_MGR:   âœ“ Camera deinitialized (took 9 ms)
I (23837) STATE_MGR:   Free heap after: 4161936 bytes
I (23843) STATE_MGR:   Free PSRAM after: 4060348 bytes
I (23849) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23865) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (23871) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23887) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (23995) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (24095) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (24145) STATE_MGR:   âœ“ Total stabilization: 250ms
I (24145) STATE_MGR:   Timestamp: 22619 ms
I (24145) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24161) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (24167) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24184) STATE_MGR:   Free heap before: 4161936 bytes
I (24190) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24208) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (24215) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24233) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24251) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (24258) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24276) AUDIO: [DIAG] Pre-init state:
I (24280) AUDIO:   Free heap: 4161936 bytes
I (24285) AUDIO:   Free internal RAM: 122867 bytes
I (24291) AUDIO:   Free DMA-capable: 102595 bytes
I (24296) AUDIO:   Free PSRAM: 4060348 bytes
I (24301) AUDIO:   Timestamp: 22775 ms
I (24305) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (24312) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (24320) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (24328) AUDIO:   DMA frame num (per desc): 1020
I (24334) AUDIO:   DMA total samples (effective): 4080
I (24340) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (24347) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (24353) AUDIO: âœ… I2S channels created (took 0 ms)
I (24359) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca8bc
I (24365) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (24372) AUDIO:   Sample rate: 16000 Hz
I (24376) AUDIO:   MCLK: DISABLED
I (24380) AUDIO:   BCLK: GPIO14 (shared)
I (24385) AUDIO:   WS:   GPIO15 (shared)
I (24390) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (24396) AUDIO: âœ… TX channel configured (took 1 ms)
I (24401) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (24408) AUDIO:   Sample rate: 16000 Hz
I (24412) AUDIO:   MCLK: DISABLED
I (24416) AUDIO:   BCLK: GPIO14 (shared)
I (24421) AUDIO:   WS:   GPIO15 (shared)
I (24426) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (24432) AUDIO: âœ… RX channel configured (took 0 ms)
I (24437) AUDIO: [STEP 4/6] Enabling TX channel...
I (24443) AUDIO: âœ… TX channel enabled (took 0 ms)
I (24448) AUDIO: [STEP 5/6] Enabling RX channel...
I (24454) AUDIO: âœ… RX channel enabled (took 0 ms)
I (24459) AUDIO: [STEP 6/6] Hardware stabilization...
I (24465) AUDIO:   Phase 1: Initial settle (50ms)
I (24520) AUDIO:   Phase 2: DMA verification
I (24520) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (24521) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (24677) AUDIO: [DIAG] Post-init state:
I (24677) AUDIO:   Free heap: 4135960 bytes
I (24677) AUDIO:   Free internal RAM: 96891 bytes
I (24681) AUDIO:   Free DMA-capable: 76619 bytes
I (24686) AUDIO:   Free PSRAM: 4060348 bytes
I (24691) AUDIO:   Timestamp: 23165 ms
I (24696) AUDIO:   Total init time: 201 ms
I (24700) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24718) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (24725) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (24730) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (24739) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (24745) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24763) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24781) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (24788) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (24794) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (24801) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (24807) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24825) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (24831) STATE_MGR:   Free heap after: 4135960 bytes
I (24837) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24853) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (24859) STATE_MGR: â•‘ Total transition time: 894 ms
I (24865) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24881) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24897) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (24904) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24920) STT: Starting STT pipeline...
I (24924) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (24933) STT: âœ… STT pipeline started
I (24933) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (24945) STT:   Current time: 23419 ms
I (24934) STT: Audio streaming session activated
I (24955) STT: Starting audio streaming to server...
I (24949) STT:   Free heap: 4127408 bytes
I (24988) TTS: ğŸµ Starting TTS decoder...
I (24988) TTS: Initializing TTS decoder...
W (24989) TTS: TTS decoder already initialized
I (24992) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (25002) TTS: âœ… TTS decoder started successfully
I (25007) TTS: ğŸµ TTS playback task started on Core 1
I (25013) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f820b48 (4096 bytes)
I (25165) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (25165) STT:   âœ“ Audio driver initialized
I (25166) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (25273) STT:   Total stabilization: 300ms
I (25273) STT:   Timestamp: 23747 ms
I (25273) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (25277) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe1670 (with safety padding)
I (25286) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25302) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (25307) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (25313) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25332) LED_CTRL: LED pattern -> 1
I (25334) STATE_MGR: âœ… Voice mode transition complete
I (25340) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (25355) STATE_MGR: STT pipeline reported start
I (25365) STATE_MGR: TTS playback start event received
I (27946) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (27946) BUTTON: Single click confirmed
W (27946) STATE_MGR: Guardrail soft override: stopping voice pipeline while busy
I (27955) STATE_MGR: Single click - mode toggle requested
I (27961) STATE_MGR: Switching: Voice â†’ Camera (count: 2)
I (28017) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (28017) STATE_MGR: Stopping voice mode components...
I (28018) STT: Stopping STT pipeline...
I (28022) STT: Draining ring buffer (1024 bytes pending) before shutdown...
I (28025) STT: Audio capture task stopped (captured 92160 bytes total)
I (28030) STT: Ring buffer drained successfully
I (28058) STT: Streaming task received stop signal
I (28058) STT: Sending EOS signal...
I (28058) WEBSOCKET: Sending EOS signal
I (28066) STT: Audio streaming session complete (streamed 90112 bytes in 22 chunks)
I (28083) STT: STT pipeline stopped
I (28306) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (28307) WEBSOCKET: Server status: processing
I (28310) WEBSOCKET: Server stage: transcription
I (28315) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (28888) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hello"}
I (28889) WEBSOCKET: Server status: processing
I (28893) WEBSOCKET: Server stage: llm
I (28898) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (29300) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "Hello, how can I assist you today?"}
I (29302) WEBSOCKET: Server status: processing
I (29307) WEBSOCKET: Server stage: tts
I (29312) WEBSOCKET: Pipeline stage changed: llm -> tts
I (29322) WEBSOCKET: Received binary audio data: 4096 bytes
I (29335) WEBSOCKET: Received binary audio data: 4096 bytes
I (29338) TTS: âœ… WAV header parsed successfully
I (29339) TTS: === WAV File Info ===
I (29342) WEBSOCKET: Received binary audio data: 4096 bytes
I (29348) TTS: Sample Rate: 16000 Hz
I (29352) TTS: Channels: 1
I (29354) WEBSOCKET: Received binary audio data: 4096 bytes
I (29366) WEBSOCKET: Received binary audio data: 4096 bytes
I (29374) WEBSOCKET: Received binary audio data: 4096 bytes
I (29377) TTS: Bits per Sample: 16
I (29379) TTS: Audio Format: 1 (PCM)
I (29380) WEBSOCKET: Received binary audio data: 1096 bytes
I (29391) WEBSOCKET: Received binary audio data: 3000 bytes
I (29401) WEBSOCKET: Received binary audio data: 4096 bytes
I (29406) WEBSOCKET: Received binary audio data: 1536 bytes
I (29410) WEBSOCKET: Received binary audio data: 2560 bytes
I (29414) TTS: Declared Data Size: 94360 bytes
I (29419) TTS: Block Align: 2
I (29421) WEBSOCKET: Received binary audio data: 4096 bytes
I (29434) WEBSOCKET: Received binary audio data: 4096 bytes
I (29439) WEBSOCKET: Received binary audio data: 756 bytes
I (29444) WEBSOCKET: Received binary audio data: 3340 bytes
I (29451) WEBSOCKET: Received binary audio data: 976 bytes
I (29456) WEBSOCKET: Received binary audio data: 3120 bytes
I (29464) WEBSOCKET: Received binary audio data: 1196 bytes
I (29468) WEBSOCKET: Received binary audio data: 2900 bytes
I (29478) WEBSOCKET: Received binary audio data: 4096 bytes
I (29465) TTS: Byte Rate: 32000
I (29485) WEBSOCKET: Received binary audio data: 4096 bytes
I (29494) WEBSOCKET: Received binary audio data: 4096 bytes
I (29499) WEBSOCKET: Received binary audio data: 636 bytes
I (29502) TTS: ====================
I (29506) WEBSOCKET: Received binary audio data: 3460 bytes
I (29519) WEBSOCKET: Received binary audio data: 4096 bytes
I (29522) WEBSOCKET: Received binary audio data: 1076 bytes
I (29528) WEBSOCKET: Received binary audio data: 3020 bytes
I (29536) WEBSOCKET: Received binary audio data: 4096 bytes
I (29541) WEBSOCKET: Received binary audio data: 1516 bytes
I (29545) WEBSOCKET: Received binary audio data: 2580 bytes
I (29555) WEBSOCKET: Received binary audio data: 4096 bytes
I (29559) WEBSOCKET: Received binary audio data: 196 bytes
I (29562) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=67248)
I (29564) WEBSOCKET: Received text message: {"status": "complete"}
I (29577) WEBSOCKET: Server status: complete
I (29581) WEBSOCKET: Pipeline stage changed: tts -> complete
I (29589) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block)
I (29633) STATE_MGR: Voice pipeline reported COMPLETE
I (29633) STATE_MGR: Waiting for TTS playback drain (~63392 bytes pending, timeout 10000 ms)
W (39637) STATE_MGR: TTS playback drain timed out after 66 checks; forcing shutdown
I (39637) TTS: â¹ï¸ Stopping TTS decoder...
I (39681) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (39681) TTS: ğŸµ TTS playback task exiting (played 67400 bytes, result: ESP_OK)
I (39686) TTS:   âœ“ DMA buffer freed from PSRAM
I (39700) TTS: â¹ï¸ TTS decoder stopped (played 67400 bytes)
I (39700) TTS: â¹ï¸ Stopping TTS decoder...
W (39703) TTS: TTS decoder not running
I (39808) STATE_MGR: Acquiring I2S mutex...
I (39808) STATE_MGR: Deinitializing audio drivers...
I (39809) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39826) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (39833) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39851) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (39858) AUDIO: âœ… RX channel disabled (took 0 ms)
I (39864) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (39870) AUDIO: âœ… TX channel disabled (took 0 ms)
I (39876) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (39932) AUDIO: [STEP 4/5] Deleting RX channel...
I (39933) AUDIO: âœ… RX channel deleted (took 0 ms)
I (39933) AUDIO: [STEP 5/5] Deleting TX channel...
I (39938) AUDIO: âœ… TX channel deleted (took 0 ms)
I (39943) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (40001) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40008) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (40015) AUDIO: â•‘ Camera Can Now Initialize
I (40020) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40088) STATE_MGR: Initializing camera...
I (40088) CAMERA: Initializing camera...
I (40089) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (40096) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (40105) cam_hal: cam init ok
W (40109) ledc: GPIO 0 is not usable, maybe conflict with others
I (40115) sccb-ng: pin_sda 26 pin_scl 27
I (40119) sccb-ng: sccb_i2c_port=1
I (40124) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (40167) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (40167) camera: Detected OV2640 camera
I (40167) camera: Detected camera at address=0x30
I (40247) cam_hal: PSRAM DMA mode disabled
I (40248) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (40252) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (40259) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (40266) cam_hal: cam config ok
I (40269) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (40351) CAMERA: Camera initialized successfully
I (40351) STATE_MGR: I2S mutex released
I (40352) STATE_MGR: âœ… Camera mode transition complete
I (40356) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40374) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (40381) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40399) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40417) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (40425) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40442) AUDIO: [DIAG] Pre-init state:
I (40447) AUDIO:   Free heap: 3991500 bytes
I (40452) AUDIO:   Free internal RAM: 76455 bytes
I (40457) AUDIO:   Free DMA-capable: 56183 bytes
I (40463) AUDIO:   Free PSRAM: 3936032 bytes
I (40467) AUDIO:   Timestamp: 38941 ms
I (40472) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (40479) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (40487) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (40495) AUDIO:   DMA frame num (per desc): 1020
I (40500) AUDIO:   DMA total samples (effective): 4080
I (40506) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (40513) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (40520) AUDIO: âœ… I2S channels created (took 0 ms)
I (40525) AUDIO:   TX handle: 0x3ffca924 | RX handle: 0x3ffca798
I (40532) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (40538) AUDIO:   Sample rate: 16000 Hz
I (40543) AUDIO:   MCLK: DISABLED
I (40547) AUDIO:   BCLK: GPIO14 (shared)
I (40551) AUDIO:   WS:   GPIO15 (shared)
I (40556) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (40563) AUDIO: âœ… TX channel configured (took 1 ms)
I (40567) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (40574) AUDIO:   Sample rate: 16000 Hz
I (40579) AUDIO:   MCLK: DISABLED
I (40583) AUDIO:   BCLK: GPIO14 (shared)
I (40588) AUDIO:   WS:   GPIO15 (shared)
I (40592) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (40598) AUDIO: âœ… RX channel configured (took 0 ms)
I (40603) AUDIO: [STEP 4/6] Enabling TX channel...
I (40609) AUDIO: âœ… TX channel enabled (took 0 ms)
I (40615) AUDIO: [STEP 5/6] Enabling RX channel...
I (40620) AUDIO: âœ… RX channel enabled (took 0 ms)
I (40626) AUDIO: [STEP 6/6] Hardware stabilization...
I (40631) AUDIO:   Phase 1: Initial settle (50ms)
I (40687) AUDIO:   Phase 2: DMA verification
I (40687) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (40688) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (40844) AUDIO: [DIAG] Post-init state:
I (40844) AUDIO:   Free heap: 3965572 bytes
I (40844) AUDIO:   Free internal RAM: 50479 bytes
I (40848) AUDIO:   Free DMA-capable: 30207 bytes
I (40853) AUDIO:   Free PSRAM: 3936032 bytes
I (40858) AUDIO:   Timestamp: 39332 ms
I (40862) AUDIO:   Total init time: 201 ms
I (40867) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40885) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (40891) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (40897) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (40905) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (40912) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40930) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40948) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (40954) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (40961) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (40968) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (40974) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41275) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41282) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (41290) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41308) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (41315) AUDIO: âœ… RX channel disabled (took 0 ms)
I (41320) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (41327) AUDIO: âœ… TX channel disabled (took 0 ms)
I (41332) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (41389) AUDIO: [STEP 4/5] Deleting RX channel...
I (41390) AUDIO: âœ… RX channel deleted (took 0 ms)
I (41390) AUDIO: [STEP 5/5] Deleting TX channel...
I (41395) AUDIO: âœ… TX channel deleted (took 0 ms)
I (41400) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (41458) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41465) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (41472) AUDIO: â•‘ Camera Can Now Initialize
I (41477) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41495) LED_CTRL: LED pattern -> 3
I (41499) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (41515) STATE_MGR: STT pipeline reported stop
I (41525) STATE_MGR: Pipeline stage event: transcription
I (41535) STATE_MGR: Pipeline stage event: llm
I (41545) STATE_MGR: Pipeline stage event: tts
I (41555) STATE_MGR: Pipeline stage event: complete
I (61076) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (61076) BUTTON: Single click confirmed
I (61076) STATE_MGR: Single click - mode toggle requested
I (61083) STATE_MGR: Switching: Camera â†’ Voice (count: 3)
I (61139) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (61139) STATE_MGR: Stopping camera...
I (61139) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61155) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (61162) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61178) STATE_MGR:   Timeout: 5000 ms
I (61182) STATE_MGR:   Timestamp: 59656 ms
I (61187) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (61193) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61209) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (61216) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61232) STATE_MGR:   Free heap before: 3991500 bytes
I (61238) STATE_MGR:   Free PSRAM before: 3936032 bytes
I (61244) CAMERA: Deinitializing camera...
I (61249) CAMERA: Camera deinitialized
I (61253) STATE_MGR:   âœ“ Camera deinitialized (took 9 ms)
I (61259) STATE_MGR:   Free heap after: 4153596 bytes
I (61265) STATE_MGR:   Free PSRAM after: 4060348 bytes
I (61271) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61287) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (61293) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61309) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (61417) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (61517) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (61567) STATE_MGR:   âœ“ Total stabilization: 250ms
I (61567) STATE_MGR:   Timestamp: 60041 ms
I (61567) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61583) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (61590) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61606) STATE_MGR:   Free heap before: 4153596 bytes
I (61612) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61630) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (61637) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61655) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61673) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (61680) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61698) AUDIO: [DIAG] Pre-init state:
I (61702) AUDIO:   Free heap: 4153596 bytes
I (61707) AUDIO:   Free internal RAM: 114527 bytes
I (61713) AUDIO:   Free DMA-capable: 94255 bytes
I (61718) AUDIO:   Free PSRAM: 4060348 bytes
I (61723) AUDIO:   Timestamp: 60197 ms
I (61727) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (61734) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (61742) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (61750) AUDIO:   DMA frame num (per desc): 1020
I (61756) AUDIO:   DMA total samples (effective): 4080
I (61762) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (61769) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (61775) AUDIO: âœ… I2S channels created (took 0 ms)
I (61780) AUDIO:   TX handle: 0x3ffafc3c | RX handle: 0x3ffca8bc
I (61787) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (61794) AUDIO:   Sample rate: 16000 Hz
I (61798) AUDIO:   MCLK: DISABLED
I (61802) AUDIO:   BCLK: GPIO14 (shared)
I (61807) AUDIO:   WS:   GPIO15 (shared)
I (61812) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (61818) AUDIO: âœ… TX channel configured (took 1 ms)
I (61823) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (61830) AUDIO:   Sample rate: 16000 Hz
I (61834) AUDIO:   MCLK: DISABLED
I (61838) AUDIO:   BCLK: GPIO14 (shared)
I (61843) AUDIO:   WS:   GPIO15 (shared)
I (61848) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (61854) AUDIO: âœ… RX channel configured (took 0 ms)
I (61859) AUDIO: [STEP 4/6] Enabling TX channel...
I (61865) AUDIO: âœ… TX channel enabled (took 0 ms)
I (61870) AUDIO: [STEP 5/6] Enabling RX channel...
I (61876) AUDIO: âœ… RX channel enabled (took 0 ms)
I (61881) AUDIO: [STEP 6/6] Hardware stabilization...
I (61887) AUDIO:   Phase 1: Initial settle (50ms)
I (61942) AUDIO:   Phase 2: DMA verification
I (61942) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (61943) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (62099) AUDIO: [DIAG] Post-init state:
I (62099) AUDIO:   Free heap: 4127612 bytes
I (62099) AUDIO:   Free internal RAM: 88543 bytes
I (62103) AUDIO:   Free DMA-capable: 68271 bytes
I (62108) AUDIO:   Free PSRAM: 4060348 bytes
I (62113) AUDIO:   Timestamp: 60587 ms
I (62118) AUDIO:   Total init time: 201 ms
I (62122) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62140) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (62147) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (62152) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (62161) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (62167) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62185) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62203) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (62210) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (62216) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (62223) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (62229) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62247) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (62253) STATE_MGR:   Free heap after: 4127612 bytes
I (62259) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62275) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (62281) STATE_MGR: â•‘ Total transition time: 894 ms
I (62287) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62303) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62319) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (62326) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62342) STT: Starting STT pipeline...
I (62346) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (62355) STT: âœ… STT pipeline started
I (62355) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (62367) STT:   Current time: 60841 ms
I (62356) STT: Audio streaming session activated
I (62377) STT: Starting audio streaming to server...
I (62371) STT:   Free heap: 4119060 bytes
I (62410) TTS: ğŸµ Starting TTS decoder...
I (62410) TTS: Initializing TTS decoder...
W (62411) TTS: TTS decoder already initialized
I (62414) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (62424) TTS: âœ… TTS decoder started successfully
I (62429) TTS: ğŸµ TTS playback task started on Core 1
I (62435) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f820b48 (4096 bytes)
I (62587) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (62587) STT:   âœ“ Audio driver initialized
I (62588) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (62695) STT:   Total stabilization: 300ms
I (62695) STT:   Timestamp: 61169 ms
I (62695) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (62699) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe1670 (with safety padding)
I (62708) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62724) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (62729) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (62735) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62754) LED_CTRL: LED pattern -> 1
I (62756) STATE_MGR: âœ… Voice mode transition complete
I (62762) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (62777) STATE_MGR: STT pipeline reported start
I (62787) STATE_MGR: TTS playback start event received
I (65575) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (65575) BUTTON: Single click confirmed
W (65575) STATE_MGR: Guardrail soft override: stopping voice pipeline while busy
I (65584) STATE_MGR: Single click - mode toggle requested
I (65590) STATE_MGR: Switching: Voice â†’ Camera (count: 4)
I (65646) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (65646) STATE_MGR: Stopping voice mode components...
I (65647) STT: Stopping STT pipeline...
I (65651) STT: Draining ring buffer (1024 bytes pending) before shutdown...
I (65659) STT: Ring buffer drained successfully
I (65702) STT: Audio capture task stopped (captured 100352 bytes total)
I (65702) STT: Streaming task received stop signal
I (65704) STT: Sending EOS signal...
I (65708) WEBSOCKET: Sending EOS signal
I (65718) STT: Audio streaming session complete (streamed 98304 bytes in 24 chunks)
I (65722) STT: STT pipeline stopped
I (65725) STATE_MGR: Voice pipeline reported COMPLETE
I (65731) STATE_MGR: Waiting for TTS playback drain (~0 bytes pending, timeout 10000 ms)
I (65839) STATE_MGR: TTS drain complete - pipeline finished after 0 checks
I (65839) TTS: â¹ï¸ Stopping TTS decoder...
I (65868) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (65868) TTS: ğŸµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (65873) TTS:   âœ“ DMA buffer freed from PSRAM
I (65881) TTS: â¹ï¸ TTS decoder stopped (played 0 bytes)
I (65962) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (65963) WEBSOCKET: Server status: processing
I (65966) WEBSOCKET: Server stage: transcription
I (65971) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (65985) STATE_MGR: Acquiring I2S mutex...
I (65985) STATE_MGR: Deinitializing audio drivers...
I (65989) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (66007) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (66014) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (66032) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (66039) AUDIO: âœ… RX channel disabled (took 0 ms)
I (66045) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (66051) AUDIO: âœ… TX channel disabled (took 0 ms)
I (66057) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (66113) AUDIO: [STEP 4/5] Deleting RX channel...
I (66114) AUDIO: âœ… RX channel deleted (took 0 ms)
I (66114) AUDIO: [STEP 5/5] Deleting TX channel...
I (66119) AUDIO: âœ… TX channel deleted (took 0 ms)
I (66124) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (66182) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (66189) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (66196) AUDIO: â•‘ Camera Can Now Initialize
I (66201) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (66269) STATE_MGR: Initializing camera...
I (66269) CAMERA: Initializing camera...
I (66270) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (66277) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (66286) cam_hal: cam init ok
W (66290) ledc: GPIO 0 is not usable, maybe conflict with others
I (66296) sccb-ng: pin_sda 26 pin_scl 27
I (66300) sccb-ng: sccb_i2c_port=1
I (66305) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (66348) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (66348) camera: Detected OV2640 camera
I (66348) camera: Detected camera at address=0x30
I (66428) cam_hal: PSRAM DMA mode disabled
I (66429) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (66433) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (66440) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (66447) cam_hal: cam config ok
I (66450) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (66533) CAMERA: Camera initialized successfully
I (66533) STATE_MGR: I2S mutex released
I (66533) STATE_MGR: âœ… Camera mode transition complete
I (66538) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (66556) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (66563) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (66573) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what is your name"}
I (66581) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (66593) WEBSOCKET: Server status: processing
I (66610) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (66615) WEBSOCKET: Server stage: llm
I (66623) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (66627) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (66645) AUDIO: [DIAG] Pre-init state:
I (66656) AUDIO:   Free heap: 3991504 bytes
I (66661) AUDIO:   Free internal RAM: 76459 bytes
I (66667) AUDIO:   Free DMA-capable: 56187 bytes
I (66672) AUDIO:   Free PSRAM: 3936032 bytes
I (66677) AUDIO:   Timestamp: 65151 ms
I (66681) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (66688) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (66696) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (66704) AUDIO:   DMA frame num (per desc): 1020
I (66710) AUDIO:   DMA total samples (effective): 4080
I (66716) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (66723) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (66729) AUDIO: âœ… I2S channels created (took 0 ms)
I (66734) AUDIO:   TX handle: 0x3ffca924 | RX handle: 0x3ffca798
I (66741) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (66748) AUDIO:   Sample rate: 16000 Hz
I (66752) AUDIO:   MCLK: DISABLED
I (66756) AUDIO:   BCLK: GPIO14 (shared)
I (66761) AUDIO:   WS:   GPIO15 (shared)
I (66766) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (66773) AUDIO: âœ… TX channel configured (took 1 ms)
I (66777) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (66784) AUDIO:   Sample rate: 16000 Hz
I (66786) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I'm Hotpin, your compact and helpful voice assistant."}
I (66788) AUDIO:   MCLK: DISABLED
I (66803) WEBSOCKET: Server status: processing
I (66807) AUDIO:   BCLK: GPIO14 (shared)
I (66812) WEBSOCKET: Server stage: tts
I (66817) AUDIO:   WS:   GPIO15 (shared)
I (66821) WEBSOCKET: Pipeline stage changed: llm -> tts
I (66826) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (66838) AUDIO: âœ… RX channel configured (took 0 ms)
I (66843) AUDIO: [STEP 4/6] Enabling TX channel...
I (66848) AUDIO: âœ… TX channel enabled (took 0 ms)
I (66854) AUDIO: [STEP 5/6] Enabling RX channel...
I (66859) AUDIO: âœ… RX channel enabled (took 0 ms)
I (66865) AUDIO: [STEP 6/6] Hardware stabilization...
I (66871) AUDIO:   Phase 1: Initial settle (50ms)
I (66926) AUDIO:   Phase 2: DMA verification
I (66926) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (66927) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (66996) WEBSOCKET: Received binary audio data: 1436 bytes
I (66999) WEBSOCKET: Received binary audio data: 2660 bytes
I (67009) WEBSOCKET: Received binary audio data: 4096 bytes
I (67014) WEBSOCKET: Received binary audio data: 1656 bytes
I (67016) WEBSOCKET: Received binary audio data: 2440 bytes
I (67022) WEBSOCKET: Received binary audio data: 4096 bytes
I (67028) WEBSOCKET: Received binary audio data: 4096 bytes
I (67035) WEBSOCKET: Received binary audio data: 4096 bytes
I (67042) WEBSOCKET: Received binary audio data: 4096 bytes
I (67048) WEBSOCKET: Received binary audio data: 4096 bytes
I (67053) WEBSOCKET: Received binary audio data: 4096 bytes
I (67059) WEBSOCKET: Received binary audio data: 4096 bytes
I (67068) WEBSOCKET: Received binary audio data: 4096 bytes
I (67073) WEBSOCKET: Received binary audio data: 4096 bytes
I (67080) WEBSOCKET: Received binary audio data: 3856 bytes
I (67082) WEBSOCKET: Received binary audio data: 240 bytes
I (67083) AUDIO: [DIAG] Post-init state:
I (67090) AUDIO:   Free heap: 3958752 bytes
I (67093) WEBSOCKET: Received binary audio data: 4096 bytes
I (67095) AUDIO:   Free internal RAM: 48731 bytes
I (67107) AUDIO:   Free DMA-capable: 26619 bytes
I (67107) WEBSOCKET: Received binary audio data: 4096 bytes
I (67112) AUDIO:   Free PSRAM: 3936168 bytes
I (67123) AUDIO:   Timestamp: 65597 ms
I (67124) WEBSOCKET: Received binary audio data: 4096 bytes
I (67128) AUDIO:   Total init time: 201 ms
I (67138) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67139) WEBSOCKET: Received binary audio data: 4096 bytes
I (67156) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (67168) WEBSOCKET: Received binary audio data: 4096 bytes
I (67169) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (67180) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (67182) WEBSOCKET: Received binary audio data: 4096 bytes
I (67189) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (67201) WEBSOCKET: Received binary audio data: 4096 bytes
I (67202) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67214) WEBSOCKET: Received binary audio data: 4096 bytes
I (67226) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67238) WEBSOCKET: Received binary audio data: 4096 bytes
I (67251) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (67262) WEBSOCKET: Received binary audio data: 4096 bytes
I (67263) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (67274) WEBSOCKET: Received binary audio data: 4096 bytes
I (67276) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (67289) WEBSOCKET: Received binary audio data: 4096 bytes
I (67289) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (67302) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67302) WEBSOCKET: Received binary audio data: 4096 bytes
I (67331) WEBSOCKET: Received binary audio data: 4096 bytes
I (67338) WEBSOCKET: Received binary audio data: 4096 bytes
I (67343) WEBSOCKET: Received binary audio data: 4096 bytes
I (67349) WEBSOCKET: Received binary audio data: 4096 bytes
I (67355) WEBSOCKET: Received binary audio data: 4096 bytes
I (67362) WEBSOCKET: Received binary audio data: 3794 bytes
W (67363) TTS: Stream buffer nearly full - dropping 3794 bytes (available: 4095, drops: 25)
I (67375) WEBSOCKET: Received text message: {"status": "complete"}
I (67379) WEBSOCKET: Server status: complete
I (67384) WEBSOCKET: Pipeline stage changed: tts -> complete
I (67603) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67610) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (67618) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67636) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (67643) AUDIO: âœ… RX channel disabled (took 0 ms)
I (67648) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (67655) AUDIO: âœ… TX channel disabled (took 0 ms)
I (67660) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (67717) AUDIO: [STEP 4/5] Deleting RX channel...
I (67718) AUDIO: âœ… RX channel deleted (took 0 ms)
I (67718) AUDIO: [STEP 5/5] Deleting TX channel...
I (67723) AUDIO: âœ… TX channel deleted (took 0 ms)
I (67728) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (67786) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67793) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (67800) AUDIO: â•‘ Camera Can Now Initialize
I (67805) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67823) LED_CTRL: LED pattern -> 3
I (67827) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (67843) STATE_MGR: STT pipeline reported stop
I (67853) STATE_MGR: Pipeline stage event: transcription
I (67863) STATE_MGR: Pipeline stage event: llm
I (67873) STATE_MGR: Pipeline stage event: tts
I (67883) STATE_MGR: Pipeline stage event: complete
I (70672) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (70672) BUTTON: Single click confirmed
I (70672) STATE_MGR: Single click - mode toggle requested
I (70679) STATE_MGR: Switching: Camera â†’ Voice (count: 5)
I (70735) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (70735) STATE_MGR: Stopping camera...
I (70735) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70751) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (70758) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70774) STATE_MGR:   Timeout: 5000 ms
I (70778) STATE_MGR:   Timestamp: 69252 ms
I (70783) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (70789) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70805) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (70812) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70828) STATE_MGR:   Free heap before: 3991504 bytes
I (70834) STATE_MGR:   Free PSRAM before: 3936032 bytes
I (70840) CAMERA: Deinitializing camera...
I (70845) CAMERA: Camera deinitialized
I (70849) STATE_MGR:   âœ“ Camera deinitialized (took 9 ms)
I (70855) STATE_MGR:   Free heap after: 4153596 bytes
I (70861) STATE_MGR:   Free PSRAM after: 4060348 bytes
I (70867) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70883) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (70889) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70905) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (71013) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (71113) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (71163) STATE_MGR:   âœ“ Total stabilization: 250ms
I (71163) STATE_MGR:   Timestamp: 69637 ms
I (71163) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71179) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (71186) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71202) STATE_MGR:   Free heap before: 4153596 bytes
I (71208) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71226) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (71233) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71251) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71269) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (71276) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71294) AUDIO: [DIAG] Pre-init state:
I (71298) AUDIO:   Free heap: 4153596 bytes
I (71303) AUDIO:   Free internal RAM: 114527 bytes
I (71309) AUDIO:   Free DMA-capable: 94255 bytes
I (71314) AUDIO:   Free PSRAM: 4060348 bytes
I (71319) AUDIO:   Timestamp: 69793 ms
I (71323) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (71330) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (71338) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (71346) AUDIO:   DMA frame num (per desc): 1020
I (71352) AUDIO:   DMA total samples (effective): 4080
I (71358) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (71365) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (71371) AUDIO: âœ… I2S channels created (took 0 ms)
I (71376) AUDIO:   TX handle: 0x3ffafc3c | RX handle: 0x3ffca8bc
I (71383) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (71390) AUDIO:   Sample rate: 16000 Hz
I (71394) AUDIO:   MCLK: DISABLED
I (71398) AUDIO:   BCLK: GPIO14 (shared)
I (71403) AUDIO:   WS:   GPIO15 (shared)
I (71408) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (71414) AUDIO: âœ… TX channel configured (took 1 ms)
I (71419) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (71426) AUDIO:   Sample rate: 16000 Hz
I (71430) AUDIO:   MCLK: DISABLED
I (71434) AUDIO:   BCLK: GPIO14 (shared)
I (71439) AUDIO:   WS:   GPIO15 (shared)
I (71444) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (71450) AUDIO: âœ… RX channel configured (took 0 ms)
I (71455) AUDIO: [STEP 4/6] Enabling TX channel...
I (71461) AUDIO: âœ… TX channel enabled (took 0 ms)
I (71466) AUDIO: [STEP 5/6] Enabling RX channel...
I (71472) AUDIO: âœ… RX channel enabled (took 0 ms)
I (71477) AUDIO: [STEP 6/6] Hardware stabilization...
I (71483) AUDIO:   Phase 1: Initial settle (50ms)
I (71538) AUDIO:   Phase 2: DMA verification
I (71538) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (71539) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (71695) AUDIO: [DIAG] Post-init state:
I (71695) AUDIO:   Free heap: 4127612 bytes
I (71695) AUDIO:   Free internal RAM: 88543 bytes
I (71699) AUDIO:   Free DMA-capable: 68271 bytes
I (71704) AUDIO:   Free PSRAM: 4060348 bytes
I (71709) AUDIO:   Timestamp: 70183 ms
I (71714) AUDIO:   Total init time: 201 ms
I (71718) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71736) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (71743) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (71748) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (71757) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (71763) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71781) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71799) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (71806) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (71812) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (71819) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (71825) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71843) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (71849) STATE_MGR:   Free heap after: 4127612 bytes
I (71855) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71871) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (71877) STATE_MGR: â•‘ Total transition time: 894 ms
I (71883) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71899) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71915) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (71922) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71938) STT: Starting STT pipeline...
I (71942) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (71951) STT: âœ… STT pipeline started
I (71951) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (71963) STT:   Current time: 70437 ms
I (71952) STT: Audio streaming session activated
I (71973) STT: Starting audio streaming to server...
I (71967) STT:   Free heap: 4119060 bytes
I (72006) TTS: ğŸµ Starting TTS decoder...
I (72006) TTS: Initializing TTS decoder...
W (72007) TTS: TTS decoder already initialized
I (72010) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (72020) TTS: âœ… TTS decoder started successfully
I (72025) TTS: ğŸµ TTS playback task started on Core 1
I (72031) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f820b48 (4096 bytes)
I (72041) TTS: âœ… WAV header parsed successfully
I (72044) TTS: === WAV File Info ===
I (72049) TTS: Sample Rate: 16000 Hz
I (72053) TTS: Channels: 1
I (72056) TTS: Bits per Sample: 16
I (72060) TTS: Audio Format: 1 (PCM)
I (72064) TTS: Declared Data Size: 130726 bytes
I (72070) TTS: Block Align: 2
I (72073) TTS: Byte Rate: 32000
I (72110) TTS: ====================
I (72111) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=0)
I (72183) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (72183) STT:   âœ“ Audio driver initialized
I (72184) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (72291) STT:   Total stabilization: 300ms
I (72291) STT:   Timestamp: 70764 ms
I (72291) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (72295) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe1670 (with safety padding)
I (72304) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (72320) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (72325) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (72331) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (72350) LED_CTRL: LED pattern -> 1
I (72352) STATE_MGR: âœ… Voice mode transition complete
I (72358) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (72373) STATE_MGR: STT pipeline reported start
I (72383) STATE_MGR: TTS playback start event received
I (79511) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (79511) BUTTON: Single click confirmed
W (79511) STATE_MGR: Guardrail soft override: stopping voice pipeline while busy
I (79520) STATE_MGR: Single click - mode toggle requested
I (79526) STATE_MGR: Switching: Voice â†’ Camera (count: 6)
I (79582) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (79582) STATE_MGR: Stopping voice mode components...
I (79583) STT: Stopping STT pipeline...
I (79587) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (79595) STT: Ring buffer drained successfully
I (79596) STT: Capture stopped and ring buffer drained; ending streaming loop
I (79608) STT: Sending EOS signal...
I (79612) WEBSOCKET: Sending EOS signal
I (79619) STT: Audio streaming session complete (streamed 196608 bytes in 48 chunks)
I (79633) STT: Audio capture task stopped (captured 200704 bytes total)
I (79633) STT: STT pipeline stopped
I (79637) STATE_MGR: Voice pipeline reported COMPLETE
I (79642) STATE_MGR: Waiting for TTS playback drain (~0 bytes pending, timeout 10000 ms)
I (79686) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (79687) WEBSOCKET: Server status: processing
I (79690) WEBSOCKET: Server stage: transcription
I (79695) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (80294) WEBSOCKET: Received text message: {"status": "error", "message": "Could not understand audio. Please try again."}
I (80296) WEBSOCKET: Server status: error
I (83646) BUTTON: Single click confirmed
W (89651) STATE_MGR: TTS playback drain timed out after 66 checks; forcing shutdown
I (89652) TTS: â¹ï¸ Stopping TTS decoder...
I (89658) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (89662) TTS: ğŸµ TTS playback task exiting (played 61396 bytes, result: ESP_OK)
I (89670) TTS:   âœ“ DMA buffer freed from PSRAM
I (89684) TTS: â¹ï¸ TTS decoder stopped (played 61396 bytes)
I (89684) TTS: â¹ï¸ Stopping TTS decoder...
W (89687) TTS: TTS decoder not running
I (89791) STATE_MGR: Acquiring I2S mutex...
I (89791) STATE_MGR: Deinitializing audio drivers...
I (89791) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (89809) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (89816) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (89834) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (89841) AUDIO: âœ… RX channel disabled (took 0 ms)
I (89847) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (89853) AUDIO: âœ… TX channel disabled (took 0 ms)
I (89859) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (89915) AUDIO: [STEP 4/5] Deleting RX channel...
I (89916) AUDIO: âœ… RX channel deleted (took 0 ms)
I (89916) AUDIO: [STEP 5/5] Deleting TX channel...
I (89921) AUDIO: âœ… TX channel deleted (took 0 ms)
I (89926) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (89984) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (89991) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (89998) AUDIO: â•‘ Camera Can Now Initialize
I (90003) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90071) STATE_MGR: Initializing camera...
I (90071) CAMERA: Initializing camera...
I (90072) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (90079) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (90088) cam_hal: cam init ok
W (90092) ledc: GPIO 0 is not usable, maybe conflict with others
I (90098) sccb-ng: pin_sda 26 pin_scl 27
I (90102) sccb-ng: sccb_i2c_port=1
I (90107) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (90150) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (90150) camera: Detected OV2640 camera
I (90150) camera: Detected camera at address=0x30
I (90230) cam_hal: PSRAM DMA mode disabled
I (90231) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (90235) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (90242) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (90249) cam_hal: cam config ok
I (90252) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (90336) CAMERA: Camera initialized successfully
I (90336) STATE_MGR: I2S mutex released
I (90336) STATE_MGR: âœ… Camera mode transition complete
I (90341) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90359) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (90366) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90384) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90402) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (90409) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90427) AUDIO: [DIAG] Pre-init state:
I (90432) AUDIO:   Free heap: 3991504 bytes
I (90437) AUDIO:   Free internal RAM: 76459 bytes
I (90442) AUDIO:   Free DMA-capable: 56187 bytes
I (90447) AUDIO:   Free PSRAM: 3936032 bytes
I (90452) AUDIO:   Timestamp: 88926 ms
I (90457) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (90463) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (90471) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (90480) AUDIO:   DMA frame num (per desc): 1020
I (90485) AUDIO:   DMA total samples (effective): 4080
I (90491) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (90498) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (90504) AUDIO: âœ… I2S channels created (took 0 ms)
I (90510) AUDIO:   TX handle: 0x3ffca924 | RX handle: 0x3ffca798
I (90516) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (90523) AUDIO:   Sample rate: 16000 Hz
I (90528) AUDIO:   MCLK: DISABLED
I (90532) AUDIO:   BCLK: GPIO14 (shared)
I (90536) AUDIO:   WS:   GPIO15 (shared)
I (90541) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (90547) AUDIO: âœ… TX channel configured (took 1 ms)
I (90552) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (90559) AUDIO:   Sample rate: 16000 Hz
I (90564) AUDIO:   MCLK: DISABLED
I (90568) AUDIO:   BCLK: GPIO14 (shared)
I (90572) AUDIO:   WS:   GPIO15 (shared)
I (90577) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (90583) AUDIO: âœ… RX channel configured (took 0 ms)
I (90588) AUDIO: [STEP 4/6] Enabling TX channel...
I (90594) AUDIO: âœ… TX channel enabled (took 0 ms)
I (90599) AUDIO: [STEP 5/6] Enabling RX channel...
I (90605) AUDIO: âœ… RX channel enabled (took 0 ms)
I (90610) AUDIO: [STEP 6/6] Hardware stabilization...
I (90616) AUDIO:   Phase 1: Initial settle (50ms)
I (90671) AUDIO:   Phase 2: DMA verification
I (90671) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (90672) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (90828) AUDIO: [DIAG] Post-init state:
I (90828) AUDIO:   Free heap: 3965572 bytes
I (90828) AUDIO:   Free internal RAM: 50479 bytes
I (90832) AUDIO:   Free DMA-capable: 30207 bytes
I (90837) AUDIO:   Free PSRAM: 3936032 bytes
I (90842) AUDIO:   Timestamp: 89316 ms
I (90847) AUDIO:   Total init time: 201 ms
I (90851) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90869) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (90876) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (90881) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (90890) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (90896) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90914) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90932) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (90939) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (90945) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (90952) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (90958) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91259) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91266) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (91274) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91292) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (91299) AUDIO: âœ… RX channel disabled (took 0 ms)
I (91304) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (91311) AUDIO: âœ… TX channel disabled (took 0 ms)
I (91316) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (91373) AUDIO: [STEP 4/5] Deleting RX channel...
I (91374) AUDIO: âœ… RX channel deleted (took 0 ms)
I (91374) AUDIO: [STEP 5/5] Deleting TX channel...
I (91379) AUDIO: âœ… TX channel deleted (took 0 ms)
I (91384) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (91442) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91449) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (91456) AUDIO: â•‘ Camera Can Now Initialize
I (91461) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91479) LED_CTRL: LED pattern -> 3
I (91483) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (91499) STATE_MGR: STT pipeline reported stop
I (91509) STATE_MGR: Pipeline stage event: transcription
I (91519) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
W (91519) STATE_MGR: Guardrail blocked request: audio pipeline busy
I (91522) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91540) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (91547) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91565) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91583) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (91591) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91609) AUDIO: [DIAG] Pre-init state:
I (91613) AUDIO:   Free heap: 3991504 bytes
I (91618) AUDIO:   Free internal RAM: 76459 bytes
I (91623) AUDIO:   Free DMA-capable: 56187 bytes
I (91629) AUDIO:   Free PSRAM: 3936032 bytes
I (91634) AUDIO:   Timestamp: 90107 ms
I (91638) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (91645) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (91653) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (91661) AUDIO:   DMA frame num (per desc): 1020
I (91666) AUDIO:   DMA total samples (effective): 4080
I (91672) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (91679) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (91686) AUDIO: âœ… I2S channels created (took 0 ms)
I (91691) AUDIO:   TX handle: 0x3ffca924 | RX handle: 0x3ffca798
I (91698) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (91704) AUDIO:   Sample rate: 16000 Hz
I (91709) AUDIO:   MCLK: DISABLED
I (91713) AUDIO:   BCLK: GPIO14 (shared)
I (91718) AUDIO:   WS:   GPIO15 (shared)
I (91722) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (91728) AUDIO: âœ… TX channel configured (took 0 ms)
I (91734) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (91740) AUDIO:   Sample rate: 16000 Hz
I (91745) AUDIO:   MCLK: DISABLED
I (91749) AUDIO:   BCLK: GPIO14 (shared)
I (91754) AUDIO:   WS:   GPIO15 (shared)
I (91758) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (91764) AUDIO: âœ… RX channel configured (took 0 ms)
I (91770) AUDIO: [STEP 4/6] Enabling TX channel...
I (91775) AUDIO: âœ… TX channel enabled (took 0 ms)
I (91781) AUDIO: [STEP 5/6] Enabling RX channel...
I (91786) AUDIO: âœ… RX channel enabled (took 0 ms)
I (91792) AUDIO: [STEP 6/6] Hardware stabilization...
I (91797) AUDIO:   Phase 1: Initial settle (50ms)
I (91853) AUDIO:   Phase 2: DMA verification
I (91853) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (91854) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (92010) AUDIO: [DIAG] Post-init state:
I (92010) AUDIO:   Free heap: 3965572 bytes
I (92010) AUDIO:   Free internal RAM: 50479 bytes
I (92014) AUDIO:   Free DMA-capable: 30207 bytes
I (92019) AUDIO:   Free PSRAM: 3936032 bytes
I (92024) AUDIO:   Timestamp: 90498 ms
I (92029) AUDIO:   Total init time: 200 ms
I (92033) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92051) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (92058) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (92063) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (92072) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (92078) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92096) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92114) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (92121) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (92127) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (92134) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (92140) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93529) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93536) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (93544) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93562) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (93569) AUDIO: âœ… RX channel disabled (took 0 ms)
I (93574) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (93581) AUDIO: âœ… TX channel disabled (took 0 ms)
I (93586) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (93643) AUDIO: [STEP 4/5] Deleting RX channel...
I (93644) AUDIO: âœ… RX channel deleted (took 0 ms)
I (93644) AUDIO: [STEP 5/5] Deleting TX channel...
I (93649) AUDIO: âœ… TX channel deleted (took 0 ms)
I (93654) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (93712) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93719) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (93726) AUDIO: â•‘ Camera Can Now Initialize
I (93731) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (111865) BUTTON: Long press detected (3000 ms)
I (111865) STATE_MGR: Button event received: 3 in state CAMERA_STANDBY
W (111867) STATE_MGR: Long press - shutdown requested
W (111872) STATE_MGR: Shutdown state reached
W (111877) STATE_MGR: === SYSTEM SHUTDOWN ===
I (111882) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (111900) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (111907) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (111926) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (111933) HOTPIN_MAIN: System shutdown detected, terminating WebSocket connection task
I (111944) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (111952) HOTPIN_MAIN: System shutdown detected, terminating WebSocket connection task
I (111960) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (111968) HOTPIN_MAIN: System shutdown detected, terminating WebSocket connection task
I (111986) AUDIO: [DIAG] Pre-init state:
I (111995) HOTPIN_MAIN: WebSocket connection task terminated
I (112000) AUDIO:   Free heap: 3991504 bytes
I (112011) AUDIO:   Free internal RAM: 80915 bytes
I (112016) AUDIO:   Free DMA-capable: 60643 bytes
I (112022) AUDIO:   Free PSRAM: 3936032 bytes
I (112027) AUDIO:   Timestamp: 110501 ms
I (112031) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (112038) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (112046) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (112055) AUDIO:   DMA frame num (per desc): 1020
I (112060) AUDIO:   DMA total samples (effective): 4080
I (112066) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (112073) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (112080) AUDIO: âœ… I2S channels created (took 0 ms)
I (112085) AUDIO:   TX handle: 0x3ffca924 | RX handle: 0x3ffca798
I (112092) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (112099) AUDIO:   Sample rate: 16000 Hz
I (112103) AUDIO:   MCLK: DISABLED
I (112107) AUDIO:   BCLK: GPIO14 (shared)
I (112112) AUDIO:   WS:   GPIO15 (shared)
I (112117) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (112124) AUDIO: âœ… TX channel configured (took 1 ms)
I (112128) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (112135) AUDIO:   Sample rate: 16000 Hz
I (112140) AUDIO:   MCLK: DISABLED
I (112144) AUDIO:   BCLK: GPIO14 (shared)
I (112149) AUDIO:   WS:   GPIO15 (shared)
I (112153) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (112160) AUDIO: âœ… RX channel configured (took 0 ms)
I (112165) AUDIO: [STEP 4/6] Enabling TX channel...
I (112171) AUDIO: âœ… TX channel enabled (took 0 ms)
I (112176) AUDIO: [STEP 5/6] Enabling RX channel...
I (112182) AUDIO: âœ… RX channel enabled (took 0 ms)
I (112187) AUDIO: [STEP 6/6] Hardware stabilization...
I (112193) AUDIO:   Phase 1: Initial settle (50ms)
I (112249) AUDIO:   Phase 2: DMA verification
I (112249) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (112250) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (112407) AUDIO: [DIAG] Post-init state:
I (112407) AUDIO:   Free heap: 3969676 bytes
I (112407) AUDIO:   Free internal RAM: 54939 bytes
I (112411) AUDIO:   Free DMA-capable: 34667 bytes
I (112417) AUDIO:   Free PSRAM: 3936032 bytes
I (112422) AUDIO:   Timestamp: 110895 ms
I (112426) AUDIO:   Total init time: 201 ms
I (112431) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112449) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (112455) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (112461) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (112470) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (112477) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112495) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112513) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (112519) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (112526) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (112533) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (112539) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113797) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113804) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (113812) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113830) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (113837) AUDIO: âœ… RX channel disabled (took 0 ms)
I (113843) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (113849) AUDIO: âœ… TX channel disabled (took 0 ms)
I (113855) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (113912) AUDIO: [STEP 4/5] Deleting RX channel...
I (113913) AUDIO: âœ… RX channel deleted (took 0 ms)
I (113913) AUDIO: [STEP 5/5] Deleting TX channel...
I (113918) AUDIO: âœ… TX channel deleted (took 0 ms)
I (113924) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (113981) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113988) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (113995) AUDIO: â•‘ Camera Can Now Initialize
I (114000) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114018) LED_CTRL: LED pattern -> 1
I (114622) LED_CTRL: LED pattern -> 3
I (115822) LED_CTRL: LED pattern -> 0
I (115822) STATE_MGR: Stopping all subsystems...
I (115823) STATE_MGR: Shutting down camera...
I (115826) CAMERA: Deinitializing camera...
I (115831) CAMERA: Camera deinitialized
I (115835) STT: Stopping STT pipeline...
W (115840) STT: STT pipeline already stopped
I (115845) TTS: â¹ï¸ Stopping TTS decoder...
W (115850) TTS: TTS decoder not running
I (115854) STATE_MGR: Stopping WebSocket client
I (115860) WEBSOCKET: Disconnecting from WebSocket server...
W (115881) websocket_client: Client was not started
W (115881) WEBSOCKET: WebSocket client stop reported ESP_FAIL, continuing cleanup
I (115884) WEBSOCKET: WebSocket disconnected
I (115889) WEBSOCKET: Force stopping WebSocket client
W (115894) websocket_client: Client was not started
W (115900) WEBSOCKET: Graceful close returned ESP_FAIL
I (115906) STATE_MGR: âœ… Shutdown complete
