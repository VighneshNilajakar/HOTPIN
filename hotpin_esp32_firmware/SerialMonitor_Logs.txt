PS F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware> idf.py monitor
Executing action: monitor
Serial port COM7
Connecting...............
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP32
Running idf_monitor in directory F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware
Executing "C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe C:\Espressif\frameworks\esp-idf-v5.4.2\tools/idf_monitor.py -p COM7 -b 115200 --toolchain-prefix xtensa-esp32-elf- --target esp32 --revision 0 F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware\build\hotpin_esp32_firmware.elf --force-color -m 'C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe' 'C:\Espressif\frameworks\esp-idf-v5.4.2\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM7 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM7 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:2
load:0x3fff0030,len:6276
load:0x40078000,len:15736
load:0x40080400,len:4
--- 0x40080400: _init at ??:?
load:0x40080404,len:3860
entry 0x4008063c
I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Nov  3 2025 22:40:12
I (30) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=3addch (241116) map
I (188) esp_image: segment 1: paddr=0004ae04 vaddr=3ff80000 size=0001ch (    28) load
I (188) esp_image: segment 2: paddr=0004ae28 vaddr=3ffb0000 size=051f0h ( 20976) load
I (199) esp_image: segment 3: paddr=00050020 vaddr=400d0020 size=be0ech (778476) map
I (465) esp_image: segment 4: paddr=0010e114 vaddr=3ffb51f0 size=0cad4h ( 51924) load
I (485) esp_image: segment 5: paddr=0011abf0 vaddr=40080000 size=1ad94h (109972) load
I (544) boot: Loaded app from partition at offset 0x10000
I (544) boot: Disabling RNG early entropy source...
I (554) quad_psram: This chip is ESP32-D0WD
I (555) esp_psram: Found 4MB PSRAM device
I (555) esp_psram: Speed: 40MHz
I (558) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (566) cpu_start: Multicore app
I (1460) esp_psram: SPI SRAM memory test OK
I (1468) cpu_start: Pro cpu start user code
I (1468) cpu_start: cpu freq: 240000000 Hz
I (1468) app_init: Application information:
I (1471) app_init: Project name:     hotpin_esp32_firmware
I (1477) app_init: App version:      40a7bbc
I (1482) app_init: Compile time:     Nov  3 2025 22:39:55
I (1488) app_init: ELF file SHA256:  fe41f5694...
--- Warning: Checksum mismatch between flashed and built applications. Checksum of built application is edd1851481ebbb215614ce12a935909ffb131aa167c6164fdb2713f113e223bf
I (1494) app_init: ESP-IDF:          v5.4.2-dirty
I (1499) efuse_init: Min chip rev:     v0.0
I (1504) efuse_init: Max chip rev:     v3.99
I (1509) efuse_init: Chip rev:         v3.1
I (1514) heap_init: Initializing. RAM available for dynamic allocation:
I (1521) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1527) heap_init: At 3FFC9478 len 00016B88 (90 KiB): DRAM
I (1533) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1540) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1546) heap_init: At 4009AD94 len 0000526C (20 KiB): IRAM
I (1553) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1561) spi_flash: detected chip: generic
I (1565) spi_flash: flash io: dio
W (1569) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1584) main_task: Started on CPU0
I (1587) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1596) main_task: Calling app_main()
I (1600) HOTPIN_MAIN: ====================================
I (1606) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1612) HOTPIN_MAIN: ====================================
W (1618) HOTPIN_MAIN: Brownout detector disabled
I (1623) HOTPIN_MAIN: Validating PSRAM...
I (1628) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1634) HOTPIN_MAIN: PSRAM validation passed
I (1640) HOTPIN_MAIN: ====================================
I (1646) HOTPIN_MAIN: System Information:
I (1650) HOTPIN_MAIN: Chip: esp32
I (1654) HOTPIN_MAIN: Cores: 2
I (1658) HOTPIN_MAIN: Silicon revision: 301
I (1663) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1668) HOTPIN_MAIN: Flash: 2 MB external
I (1673) HOTPIN_MAIN: Free heap: 4364852 bytes
I (1678) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1683) HOTPIN_MAIN: ====================================
I (1689) HOTPIN_MAIN: Initializing memory manager...
I (1694) MEM_MGR: Initializing memory manager...
I (1700) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1718) MEM_MGR: â•‘ Memory Manager Initialized
I (1723) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1742) MEM_MGR: â•‘ Baseline Memory State:
I (1747) MEM_MGR: â•‘   Internal RAM:     225135 bytes (219 KB)
I (1753) MEM_MGR: â•‘   DMA-capable:      204771 bytes (199 KB)
I (1760) MEM_MGR: â•‘   PSRAM:            4192016 bytes (4093 KB)
I (1767) MEM_MGR: â•‘   Total Heap:       4364756 bytes (4262 KB)
I (1773) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1792) MEM_MGR: â•‘ Configured Thresholds:
I (1797) MEM_MGR: â•‘   Internal RAM:     WARN=50KB, CRIT=20KB
I (1803) MEM_MGR: â•‘   DMA-capable:      WARN=35KB, CRIT=20KB
I (1810) MEM_MGR: â•‘   PSRAM:            WARN=500KB, CRIT=200KB
I (1816) MEM_MGR: â•‘   Fragmentation:    WARN=30%, CRIT=50%
I (1823) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1841) MEM_MGR: Starting memory monitoring (interval: 15000 ms)
I (1848) MEM_MGR: âœ… Memory monitoring started
I (1848) MEM_MGR: Memory monitor task started (interval: 15000 ms)
I (1853) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
W (1860) MEM_MGR: âš ï¸ WARNING: Memory fragmentation increasing! DMA:46% PSRAM:2%
I (1878) MEM_MGR: â•‘ Memory Statistics - System Boot
I (1892) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1910) MEM_MGR: â•‘ Internal RAM:
I (1915) MEM_MGR: â•‘   Free:             225135 bytes (219 KB)
I (1921) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1928) MEM_MGR: â•‘   Fragmentation:     51%
I (1933) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1951) MEM_MGR: â•‘ DMA-capable RAM:
I (1956) MEM_MGR: â•‘   Free:             204771 bytes (199 KB)
I (1962) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1969) MEM_MGR: â•‘   Fragmentation:     46%
I (1974) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1992) MEM_MGR: â•‘ PSRAM:
I (1996) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (2003) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (2009) MEM_MGR: â•‘   Fragmentation:      2%
I (2015) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2033) MEM_MGR: â•‘ Total Heap:
I (2037) MEM_MGR: â•‘   Free:             4364756 bytes (4262 KB)
I (2044) MEM_MGR: â•‘   Minimum Ever:     4364756 bytes (4262 KB)
I (2050) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2069) MEM_MGR: â•‘ Memory Delta from Baseline:
I (2074) MEM_MGR: â•‘   Internal RAM:          +0 bytes (  +0 KB)
I (2081) MEM_MGR: â•‘   DMA-capable:           +0 bytes (  +0 KB)
I (2088) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (2094) MEM_MGR: â•‘   Total Heap:            +0 bytes (  +0 KB)
I (2101) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2119) HOTPIN_MAIN: Initializing NVS...
I (2149) HOTPIN_MAIN: NVS initialized successfully
I (2150) event_dispatcher: System event queue ready (16 entries)
I (2151) HOTPIN_MAIN: Synchronization primitives created
I (2157) HOTPIN_MAIN: Initializing WiFi...
I (2166) wifi:wifi driver task: 3ffdaabc, prio:23, stack:6656, core=0
I (2178) wifi:wifi firmware version: bea31f3
I (2179) wifi:wifi certification version: v7.0
I (2179) wifi:config NVS flash: enabled
I (2179) wifi:config nano formatting: disabled
I (2184) wifi:Init data frame dynamic rx buffer num: 32
I (2189) wifi:Init static rx mgmt buffer num: 5
I (2193) wifi:Init management short buffer num: 32
I (2197) wifi:Init dynamic tx buffer num: 32
I (2202) wifi:Init static rx buffer size: 1600
I (2206) wifi:Init static rx buffer num: 10
I (2209) wifi:Init dynamic rx buffer num: 32
I (2215) wifi_init: rx ba win: 6
I (2217) wifi_init: accept mbox: 6
I (2221) wifi_init: tcpip mbox: 32
I (2225) wifi_init: udp mbox: 6
I (2229) wifi_init: tcp mbox: 6
I (2233) wifi_init: tcp tx win: 5760
I (2237) wifi_init: tcp rx win: 5760
I (2242) wifi_init: tcp mss: 1440
I (2246) wifi_init: WiFi IRAM OP enabled
I (2250) wifi_init: WiFi RX IRAM OP enabled
I (2257) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (2330) phy_init: Saving new calibration data due to checksum failure or outdated calibration data, mode(0)
I (2348) wifi:mode : sta (80:f3:da:99:8c:64)
I (2349) wifi:enable tsf
I (2351) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (2352) HOTPIN_MAIN: Waiting for WiFi connection...
I (2352) HOTPIN_MAIN: WiFi station started, connecting...
I (2489) wifi:new:<6,0>, old:<1,0>, ap:<255,255>, sta:<6,0>, prof:1, snd_ch_cfg:0x0
I (2491) wifi:state: init -> auth (0xb0)
I (3546) wifi:state: auth -> assoc (0x0)
I (3557) wifi:state: assoc -> run (0x10)
I (3603) wifi:connected with wifi, aid = 3, channel 6, BW20, bssid = ee:d4:b9:ed:90:50
I (3604) wifi:security: WPA3-SAE, phy: bgn, rssi: -62
I (3608) wifi:pm start, type: 1

I (3608) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (3619) HOTPIN_MAIN: WiFi connected to AP
I (3700) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (3701) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (3890) wifi:<ba-add>idx:0 (ifx:0, ee:d4:b9:ed:90:50), tid:0, ssn:0, winSize:64
I (5133) esp_netif_handlers: sta ip: 10.143.111.214, mask: 255.255.255.0, gw: 10.143.111.248
I (5134) HOTPIN_MAIN: âœ… Got IP address: 10.143.111.214
I (5138) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (7366) HOTPIN_MAIN: Initializing button handler...
I (7366) BUTTON: Initializing button handler on GPIO 12
I (7367) gpio: GPIO[12]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (7376) BUTTON: Button FSM task started
I (7381) BUTTON: GPIO ISR service installed successfully
I (7386) BUTTON: Button handler initialized successfully (initial level=1, primed=1)
I (7395) HOTPIN_MAIN: Initializing LED controller...
I (7400) LED_CTRL: Initializing LED controller on GPIO 33
I (7407) LED_CTRL: LED controller ready
I (7411) LED_CTRL: LED pattern -> 2
I (7415) HOTPIN_MAIN: Initializing WebSocket client...
I (7421) WEBSOCKET: Initializing WebSocket client...
I (7427) WEBSOCKET: Server URI: ws://10.143.111.58:8000/ws
I (7433) WEBSOCKET: Authorization header configured
I (7439) WEBSOCKET: âœ… WebSocket client initialized
I (7444) WEBSOCKET: Status callback registered
I (7449) HOTPIN_MAIN: WebSocket status callback registered
I (7455) HOTPIN_MAIN: Initializing HTTP client...
I (7461) HTTP_CLIENT: Initializing HTTP client
I (7466) HTTP_CLIENT: Authorization token configured
I (7471) HTTP_CLIENT: HTTP client initialized (server: http://10.143.111.58:8000)
I (7480) HOTPIN_MAIN: Initializing STT pipeline...
I (7485) STT: Initializing STT pipeline...
I (7490) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7508) STT: â•‘ STT Ring Buffer Allocation (PSRAM)
I (7514) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7532) STT: [MEMORY] Pre-allocation state:
I (7537) STT:   Free internal RAM: 166227 bytes
I (7542) STT:   Free DMA-capable: 145863 bytes
I (7547) STT:   Free PSRAM: 4126020 bytes
I (7552) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (7560) STT:   âœ“ Ring buffer allocated at 0x3f810ac0 (PSRAM address)
I (7567) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (7576) STT: [MEMORY] Post-allocation state:
I (7581) STT:   Free internal RAM: 166227 bytes
I (7586) STT:   Free DMA-capable: 145863 bytes
I (7591) STT:   Free PSRAM: 4060480 bytes
I (7602) STT: [CORE AFFINITY] Creating persistent audio streaming task on Core 0
I (7604) STT: Persistent audio streaming task started on Core 0
I (7610) STT:   âœ“ Stream buffer allocated at 0x3ffd1b74 (with safety padding)
I (7619) STT: âœ… STT pipeline initialized
I (7623) HOTPIN_MAIN: Initializing TTS decoder...
I (7628) TTS: Initializing TTS decoder...
I (7633) TTS: Allocating 196608 byte PSRAM buffer for TTS stream
I (7640) TTS:   PSRAM available: 4060480 bytes (3965 KB)
I (7646) TTS:   âœ“ TTS stream buffer allocated at 0x3f820ac4
I (7680) WEBSOCKET: Audio callback registered
I (7681) TTS: âœ… TTS decoder initialized
I (7681) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (7687) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (7693) HOTPIN_MAIN: State manager task created on Core 1
I (7693) STATE_MGR: State manager task started on Core 1
I (7699) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (7705) STATE_MGR: Priority: 10
I (7712) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 1)...
I (7716) STATE_MGR: Starting in camera mode...
I (7723) WEBSOCKET: Connecting to WebSocket server...
I (7728) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (7740) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7741) websocket_client: Started
I (7758) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (7762) WEBSOCKET: âœ… WebSocket health check task created
I (7769) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7775) WEBSOCKET: WebSocket client started
I (7793) MEM_MGR: â•‘ Internal RAM:
I (7762) WEBSOCKET: WebSocket health check task started
I (7803) MEM_MGR: â•‘   Free:             222727 bytes (217 KB)
I (7699) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (7815) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7822) HOTPIN_MAIN: Configuring task watchdog for critical tasks...
I (7828) MEM_MGR: â•‘   Fragmentation:     51%
I (7836) HOTPIN_MAIN: âœ… State manager task added to watchdog
I (7841) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7847) HOTPIN_MAIN: âœ… WebSocket connection task added to watchdog
I (7865) MEM_MGR: â•‘ DMA-capable RAM:
I (7873) HOTPIN_MAIN: Task watchdog configuration complete
I (7877) MEM_MGR: â•‘   Free:             202363 bytes (197 KB)
I (7883) HOTPIN_MAIN: ====================================
I (7890) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7896) HOTPIN_MAIN: System initialization complete!
I (7903) MEM_MGR: â•‘   Fragmentation:     46%
I (7908) HOTPIN_MAIN: Entering camera standby mode...
I (7913) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7919) HOTPIN_MAIN: ====================================
I (7937) MEM_MGR: â•‘ PSRAM:
I (7944) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7947) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (7965) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (7972) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (7979) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7986) MEM_MGR: â•‘   Fragmentation:      2%
I (8003) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (8009) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8016) AUDIO:   âœ“ I2S access mutex created successfully
I (8034) MEM_MGR: â•‘ Total Heap:
I (8040) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8044) MEM_MGR: â•‘   Free:             4362348 bytes (4260 KB)
I (8062) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (8069) MEM_MGR: â•‘   Minimum Ever:     4362348 bytes (4260 KB)
I (8076) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8083) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8101) AUDIO: [DIAG] Pre-init state:
I (8119) MEM_MGR: â•‘ Memory Delta from Baseline:
I (8124) AUDIO:   Free heap: 3963024 bytes
I (8129) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (8134) AUDIO:   Free internal RAM: 119679 bytes
I (8141) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (8146) AUDIO:   Free DMA-capable: 99315 bytes
I (8153) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (8158) AUDIO:   Free PSRAM: 3863732 bytes
I (8165) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (8170) AUDIO:   Timestamp: 6616 ms
I (8176) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8181) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (8199) STATE_MGR: Acquiring I2S mutex...
I (8206) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (8218) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (8226) AUDIO:   DMA frame num (per desc): 1020
I (8232) AUDIO:   DMA total samples (effective): 4080
I (8237) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (8244) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (8251) AUDIO: âœ… I2S channels created (took 0 ms)
I (8256) AUDIO:   TX handle: 0x3ffe1cf0 | RX handle: 0x3ffe1e3c
I (8263) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (8269) AUDIO:   Sample rate: 16000 Hz
I (8274) AUDIO:   MCLK: DISABLED
I (8278) AUDIO:   BCLK: GPIO14 (shared)
I (8282) AUDIO:   WS:   GPIO15 (shared)
I (8287) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (8295) AUDIO: âœ… TX channel configured (took 1 ms)
I (8298) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (8305) AUDIO:   Sample rate: 16000 Hz
I (8309) AUDIO:   MCLK: DISABLED
I (8313) AUDIO:   BCLK: GPIO14 (shared)
I (8318) AUDIO:   WS:   GPIO15 (shared)
I (8322) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (8328) AUDIO: âœ… RX channel configured (took 0 ms)
I (8333) AUDIO: [STEP 4/6] Enabling TX channel...
I (8339) AUDIO: âœ… TX channel enabled (took 0 ms)
I (8344) AUDIO: [STEP 5/6] Enabling RX channel...
I (8350) AUDIO: âœ… RX channel enabled (took 0 ms)
I (8355) AUDIO: [STEP 6/6] Hardware stabilization...
I (8361) AUDIO:   Phase 1: Initial settle (50ms)
I (8416) AUDIO:   Phase 2: DMA verification
I (8416) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (8416) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (8572) AUDIO: [DIAG] Post-init state:
I (8572) AUDIO:   Free heap: 3936916 bytes
I (8572) AUDIO:   Free internal RAM: 93555 bytes
I (8575) AUDIO:   Free DMA-capable: 73191 bytes
I (8581) AUDIO:   Free PSRAM: 3863732 bytes
I (8585) AUDIO:   Timestamp: 7032 ms
I (8590) AUDIO:   Total init time: 201 ms
I (8594) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8612) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (8618) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (8624) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (8632) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (8639) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8657) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8675) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (8681) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (8687) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (8694) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (8700) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9963) WEBSOCKET: âœ… WebSocket connected to server
I (9964) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (9969) WEBSOCKET: Handshake sent successfully
I (9971) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (9985) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9995) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (10003) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10021) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (10028) AUDIO: âœ… RX channel disabled (took 0 ms)
I (10033) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (10040) AUDIO: âœ… TX channel disabled (took 0 ms)
I (10045) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (10102) AUDIO: [STEP 4/5] Deleting RX channel...
I (10102) AUDIO: âœ… RX channel deleted (took 0 ms)
I (10102) AUDIO: [STEP 5/5] Deleting TX channel...
I (10107) AUDIO: âœ… TX channel deleted (took 0 ms)
I (10113) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (10143) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (10170) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10177) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (10183) AUDIO: â•‘ Camera Can Now Initialize
I (10188) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10206) STATE_MGR: Audio drivers already inactive; skipping deinit
I (10206) LED_CTRL: LED pattern -> 3
I (10213) STATE_MGR: Allowing memory stabilization (100ms)...
I (10217) HOTPIN_MAIN: Main task exiting - system running
I (10230) main_task: Returned from app_main()
I (10324) STATE_MGR: Camera will be initialized on-demand during capture
I (10324) STATE_MGR: I2S mutex released
I (10325) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10343) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (10350) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10369) MEM_MGR: â•‘ Internal RAM:
I (10373) MEM_MGR: â•‘   Free:             222727 bytes (217 KB)
I (10380) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10386) MEM_MGR: â•‘   Fragmentation:     51%
I (10392) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10410) MEM_MGR: â•‘ DMA-capable RAM:
I (10414) MEM_MGR: â•‘   Free:             202363 bytes (197 KB)
I (10421) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10428) MEM_MGR: â•‘   Fragmentation:     46%
I (10433) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10451) MEM_MGR: â•‘ PSRAM:
I (10455) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (10463) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (10469) MEM_MGR: â•‘   Fragmentation:      2%
I (10474) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10492) MEM_MGR: â•‘ Total Heap:
I (10497) MEM_MGR: â•‘   Free:             4362348 bytes (4260 KB)
I (10503) MEM_MGR: â•‘   Minimum Ever:     4362348 bytes (4260 KB)
I (10510) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10529) MEM_MGR: â•‘ Memory Delta from Baseline:
I (10534) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (10541) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (10548) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (10555) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (10562) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10580) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (10589) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (10605) STATE_MGR: WebSocket connected
I (10774) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (10774) WEBSOCKET: Server status: connected
I (12808) WEBSOCKET: WebSocket connection restored (cycle: 1, disconnects: 0, reconnects: 0)
I (13720) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (13720) BUTTON: Single click confirmed
I (13720) STATE_MGR: Single click - mode toggle requested
I (13726) STATE_MGR: Switching: Camera â†’ Voice (count: 1)
I (13783) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (13783) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13796) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (13803) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13822) MEM_MGR: â•‘ Internal RAM:
I (13826) MEM_MGR: â•‘   Free:             222727 bytes (217 KB)
I (13833) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (13839) MEM_MGR: â•‘   Fragmentation:     51%
I (13844) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13863) MEM_MGR: â•‘ DMA-capable RAM:
I (13867) MEM_MGR: â•‘   Free:             202363 bytes (197 KB)
I (13874) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (13881) MEM_MGR: â•‘   Fragmentation:     46%
I (13886) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13904) MEM_MGR: â•‘ PSRAM:
I (13908) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (13915) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (13922) MEM_MGR: â•‘   Fragmentation:      2%
I (13927) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13945) MEM_MGR: â•‘ Total Heap:
I (13949) MEM_MGR: â•‘   Free:             4362348 bytes (4260 KB)
I (13956) MEM_MGR: â•‘   Minimum Ever:     4362348 bytes (4260 KB)
I (13963) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13981) MEM_MGR: â•‘ Memory Delta from Baseline:
I (13987) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (13994) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (14001) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (14008) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (14014) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14033) STATE_MGR: Stopping camera...
I (14037) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14054) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (14060) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14077) STATE_MGR:   Timeout: 5000 ms
I (14081) STATE_MGR:   Timestamp: 12528 ms
I (14086) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (14092) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14108) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (14114) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14131) STATE_MGR:   Free heap before: 3967488 bytes
I (14136) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (14142) CAMERA: Deinitializing camera...
I (14147) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (14153) STATE_MGR:   Free heap after: 3967488 bytes
I (14159) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (14165) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14181) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (14187) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14204) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (14312) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (14412) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (14462) STATE_MGR:   âœ“ Total stabilization: 250ms
I (14462) STATE_MGR:   Timestamp: 12909 ms
I (14462) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14478) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (14485) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14501) STATE_MGR:   Free heap before: 3967488 bytes
I (14507) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14525) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (14532) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14550) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14568) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (14575) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14593) AUDIO: [DIAG] Pre-init state:
I (14597) AUDIO:   Free heap: 3967488 bytes
I (14602) AUDIO:   Free internal RAM: 124143 bytes
I (14608) AUDIO:   Free DMA-capable: 103779 bytes
I (14613) AUDIO:   Free PSRAM: 3863732 bytes
I (14618) AUDIO:   Timestamp: 13065 ms
I (14622) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (14629) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (14637) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (14645) AUDIO:   DMA frame num (per desc): 1020
I (14651) AUDIO:   DMA total samples (effective): 4080
I (14657) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (14664) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (14670) AUDIO: âœ… I2S channels created (took 0 ms)
I (14676) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7e8
I (14682) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (14689) AUDIO:   Sample rate: 16000 Hz
I (14693) AUDIO:   MCLK: DISABLED
I (14697) AUDIO:   BCLK: GPIO14 (shared)
I (14702) AUDIO:   WS:   GPIO15 (shared)
I (14707) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (14714) AUDIO: âœ… TX channel configured (took 1 ms)
I (14718) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (14725) AUDIO:   Sample rate: 16000 Hz
I (14729) AUDIO:   MCLK: DISABLED
I (14733) AUDIO:   BCLK: GPIO14 (shared)
I (14738) AUDIO:   WS:   GPIO15 (shared)
I (14743) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (14749) AUDIO: âœ… RX channel configured (took 0 ms)
I (14754) AUDIO: [STEP 4/6] Enabling TX channel...
I (14760) AUDIO: âœ… TX channel enabled (took 0 ms)
I (14765) AUDIO: [STEP 5/6] Enabling RX channel...
I (14771) AUDIO: âœ… RX channel enabled (took 0 ms)
I (14776) AUDIO: [STEP 6/6] Hardware stabilization...
I (14782) AUDIO:   Phase 1: Initial settle (50ms)
I (14837) AUDIO:   Phase 2: DMA verification
I (14837) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (14838) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (14994) AUDIO: [DIAG] Post-init state:
I (14994) AUDIO:   Free heap: 3941484 bytes
I (14994) AUDIO:   Free internal RAM: 98139 bytes
I (14998) AUDIO:   Free DMA-capable: 77775 bytes
I (15003) AUDIO:   Free PSRAM: 3863732 bytes
I (15008) AUDIO:   Timestamp: 13455 ms
I (15013) AUDIO:   Total init time: 201 ms
I (15017) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15035) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (15042) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (15047) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (15056) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (15062) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15080) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15098) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (15105) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (15111) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (15118) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (15124) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15142) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (15148) STATE_MGR:   Free heap after: 3941484 bytes
I (15154) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15170) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (15176) STATE_MGR: â•‘ Total transition time: 889 ms
I (15182) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15198) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15214) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (15220) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15237) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (15245) TTS: No pending audio to flush
I (15275) TTS: TTS decoder session reset for next audio stream
I (15275) TTS: âœ… TTS decoder flushed and reset for next session
I (15277) STT: Starting STT pipeline...
I (15282) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (15291) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (15298) STT:   Current time: 13745 ms
I (15301) STT: âœ… STT pipeline started
I (15303) STT:   Free heap: 3932932 bytes
I (15303) STT: Audio streaming session activated
I (15317) STT: Connection stabilization delay (500ms)...
I (15357) TTS: ğŸµ Starting TTS decoder...
I (15357) TTS: Initializing TTS decoder...
W (15357) TTS: TTS decoder already initialized
I (15387) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (15387) TTS: âœ… TTS decoder started successfully
I (15391) TTS: ğŸµ TTS playback task started on Core 1
I (15397) TTS: âœ… TTS playback task registered with watchdog
I (15404) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (15512) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (15512) STT:   âœ“ Audio driver initialized
I (15513) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (15620) STT:   Total stabilization: 300ms
I (15620) STT:   Timestamp: 14066 ms
I (15620) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (15624) STT:   âœ“ DMA-capable buffer allocated at 0x3fff1ee8 (with safety padding)
I (15633) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15649) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (15654) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (15660) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15716) LED_CTRL: LED pattern -> 1
I (15717) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15728) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (15735) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15753) MEM_MGR: â•‘ Internal RAM:
I (15757) MEM_MGR: â•‘   Free:             222727 bytes (217 KB)
I (15764) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (15771) MEM_MGR: â•‘   Fragmentation:     51%
I (15776) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15794) MEM_MGR: â•‘ DMA-capable RAM:
I (15799) MEM_MGR: â•‘   Free:             202363 bytes (197 KB)
I (15806) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (15812) MEM_MGR: â•‘   Fragmentation:     46%
I (15817) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15823) STT: Testing WebSocket transport health...
I (15836) MEM_MGR: â•‘ PSRAM:
I (15845) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (15848) STT: âœ… WebSocket transport verified healthy
I (15852) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (15865) MEM_MGR: â•‘   Fragmentation:      2%
I (15870) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15888) MEM_MGR: â•‘ Total Heap:
I (15892) MEM_MGR: â•‘   Free:             4362348 bytes (4260 KB)
I (15899) MEM_MGR: â•‘   Minimum Ever:     4362348 bytes (4260 KB)
I (15906) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15925) MEM_MGR: â•‘ Memory Delta from Baseline:
I (15930) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (15937) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (15944) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (15951) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (15958) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15958) STT: Starting audio streaming to server...
I (15976) STATE_MGR: âœ… Voice mode transition complete
I (15987) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (16003) STATE_MGR: STT pipeline reported start
I (16013) STATE_MGR: TTS playback start event received
I (16318) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 4112}
I (16320) WEBSOCKET: Server status: receiving
I (16398) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 12304}
I (16399) WEBSOCKET: Server status: receiving
I (16497) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 20496}
I (16498) WEBSOCKET: Server status: receiving
I (16576) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 28688}
I (16577) WEBSOCKET: Server status: receiving
E (16955) transport_ws: Error transport_poll_write
E (16956) websocket_client: esp_transport_write() returned 0, transport_error=ESP_OK, tls_error_code=0, tls_flags=0, errno=0
E (16962) WEBSOCKET: âŒ WebSocket error occurred
I (16967) TTS: Received audio chunk #1: 0 bytes
E (16972) HOTPIN_MAIN: âŒ WebSocket status callback: ERROR
E (16972) STATE_MGR: WebSocket error signalled
I (16984) LED_CTRL: LED pattern -> 5
W (16981) WEBSOCKET: âš ï¸ WebSocket disconnected
E (16988) STATE_MGR: WebSocket error occurred while in voice mode - triggering transition to camera
I (16993) TTS: Received audio chunk #2: 0 bytes
E (16982) websocket_client: esp_transport_poll_read() returned -1, transport_error=ESP_OK, tls_error_code=0, tls_flags=0, errno=9
I (17008) TTS: New audio session detected - resetting chunk counter
E (17013) STATE_MGR: WebSocket error signalled
W (17028) HOTPIN_MAIN: âš ï¸ WebSocket status callback: DISCONNECTED
W (17040) WEBSOCKET: WebSocket send buffer full (0 bytes sent), yielding and retrying (attempt 1/4)
W (17043) STATE_MGR: WebSocket disconnected
E (17040) WEBSOCKET: âŒ WebSocket error occurred
I (17054) LED_CTRL: LED pattern -> 4
I (17060) TTS: Received audio chunk #2: 0 bytes
I (17069) TTS: New audio session detected - resetting chunk counter
E (17076) STATE_MGR: WebSocket error signalled
E (17076) HOTPIN_MAIN: âŒ WebSocket status callback: ERROR
I (17081) LED_CTRL: LED pattern -> 5
E (17088) websocket_client: esp_websocket_client_abort_connection(239): Websocket already stop
E (17149) WEBSOCKET: WebSocket connection lost before send attempt 2
E (17149) STT: WebSocket disconnected during audio send - aborting stream
I (17152) STT: Streaming task received stop signal
W (17158) STT: Audio streaming aborted due to transport errors
W (17164) STT: Skipping EOS - WebSocket disconnected
I (17170) STT: Audio streaming session complete (streamed 32768 bytes in 8 chunks)
I (17178) STATE_MGR: STT pipeline reported stop
I (17183) LED_CTRL: LED pattern -> 1
I (17194) STT: Audio capture task stopped (captured 53248 bytes total)
W (17808) WEBSOCKET: WebSocket connection lost (cycle: 2, disconnects: 0, reconnects: 1)
W (18143) HOTPIN_MAIN: WebSocket link not healthy, restarting connection
I (18143) WEBSOCKET: Force stopping WebSocket client
W (18145) websocket_client: Client was not started
W (18150) WEBSOCKET: Graceful close returned ESP_FAIL
I (18156) WEBSOCKET: WebSocket health check task shutdown signal received
I (18163) WEBSOCKET: WebSocket health check task exiting (cycles: 2, disconnects: 1, reconnects: 1)
I (18712) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (18712) BUTTON: Single click confirmed
W (18712) STATE_MGR: Guardrail soft override: stopping voice pipeline (user cancellation)
I (18721) STATE_MGR: Single click - mode toggle requested
I (18727) STATE_MGR: Switching: Voice â†’ Camera (count: 2)
I (18756) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 2)...
I (18756) WEBSOCKET: Connecting to WebSocket server...
I (18759) websocket_client: Started
I (18763) WEBSOCKET: âœ… WebSocket health check task created
I (18763) WEBSOCKET: WebSocket health check task started
I (18769) WEBSOCKET: WebSocket client started
I (18783) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (18785) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18804) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (18811) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18829) MEM_MGR: â•‘ Internal RAM:
I (18833) MEM_MGR: â•‘   Free:              73539 bytes ( 71 KB)
I (18840) MEM_MGR: â•‘   Largest Block:     49152 bytes ( 48 KB)
I (18847) MEM_MGR: â•‘   Fragmentation:     34%
I (18852) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18870) MEM_MGR: â•‘ DMA-capable RAM:
I (18875) MEM_MGR: â•‘   Free:              53175 bytes ( 51 KB)
I (18882) MEM_MGR: â•‘   Largest Block:     49152 bytes ( 48 KB)
I (18888) MEM_MGR: â•‘   Fragmentation:      8%
I (18893) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18912) MEM_MGR: â•‘ PSRAM:
I (18915) MEM_MGR: â•‘   Free:             3859496 bytes (3769 KB)
I (18922) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (18929) MEM_MGR: â•‘   Fragmentation:      2%
I (18934) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18952) WEBSOCKET: âœ… WebSocket connected to server
I (18959) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (18967) MEM_MGR: â•‘ Total Heap:
I (18970) WEBSOCKET: Handshake sent successfully
I (18975) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (18980) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
E (18990) task_wdt: esp_task_wdt_reset(705): task not found
I (18982) MEM_MGR: â•‘   Free:             3912648 bytes (3820 KB)
I (19003) MEM_MGR: â•‘   Minimum Ever:     3905236 bytes (3813 KB)
I (19010) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19028) MEM_MGR: â•‘ Memory Delta from Baseline:
I (19033) MEM_MGR: â•‘   Internal RAM:     -151596 bytes (-148 KB)
I (19040) MEM_MGR: â•‘   DMA-capable:      -151596 bytes (-148 KB)
I (19047) MEM_MGR: â•‘   PSRAM:            -332520 bytes (-324 KB)
I (19054) MEM_MGR: â•‘   Total Heap:       -452108 bytes (-441 KB)
I (19061) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19079) STATE_MGR: Stopping voice mode components...
I (19085) STT: Stopping STT pipeline...
W (19090) STT: STT pipeline already stopped
I (19188) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (19188) WEBSOCKET: Server status: connected
I (20040) WEBSOCKET: Connecting to WebSocket server...
I (20594) STATE_MGR: Voice pipeline became idle at stage idle
I (20594) STATE_MGR: Waiting for TTS playback drain (~0 bytes pending, timeout 15000 ms)
I (20899) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (20899) STATE_MGR: TTS decoder confirmed idle
I (20902) STATE_MGR: Flushing and resetting TTS decoder for next session
I (20910) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (20918) TTS: Flushing pending audio before reset (~0 bytes)
E (20996) task_wdt: esp_task_wdt_reset(705): task not found
I (21224) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (21224) TTS: TTS decoder session reset for next audio stream
I (21229) TTS: âœ… TTS decoder flushed and reset for next session
I (21236) TTS: TTS playback task shutting down - is_running=0
I (21242) TTS: ğŸµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (21250) TTS:   âœ“ DMA buffer freed from PSRAM
I (21255) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (21435) TTS: â¹ï¸ Stopping TTS decoder...
W (21435) TTS: TTS decoder not running
I (21560) STATE_MGR: Acquiring I2S mutex...
I (21560) STATE_MGR: Deinitializing audio drivers...
I (21560) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21578) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (21585) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21603) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (21610) AUDIO: âœ… RX channel disabled (took 0 ms)
I (21616) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (21622) AUDIO: âœ… TX channel disabled (took 0 ms)
I (21628) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (21684) AUDIO: [STEP 4/5] Deleting RX channel...
I (21685) AUDIO: âœ… RX channel deleted (took 0 ms)
I (21685) AUDIO: [STEP 5/5] Deleting TX channel...
I (21690) AUDIO: âœ… TX channel deleted (took 0 ms)
I (21695) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (21753) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21760) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (21766) AUDIO: â•‘ Camera Can Now Initialize
I (21772) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21840) STATE_MGR: Allowing memory stabilization (100ms)...
I (21940) STATE_MGR: Camera will be initialized on-demand during capture
I (21940) STATE_MGR: I2S mutex released
I (21941) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21959) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (21966) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21982) WEBSOCKET: Connecting to WebSocket server...
I (21985) MEM_MGR: â•‘ Internal RAM:
I (21995) MEM_MGR: â•‘   Free:              73539 bytes ( 71 KB)
I (22001) MEM_MGR: â•‘   Largest Block:     49152 bytes ( 48 KB)
I (22008) MEM_MGR: â•‘   Fragmentation:     34%
I (22013) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22032) MEM_MGR: â•‘ DMA-capable RAM:
I (22036) MEM_MGR: â•‘   Free:              53175 bytes ( 51 KB)
I (22043) MEM_MGR: â•‘   Largest Block:     49152 bytes ( 48 KB)
I (22050) MEM_MGR: â•‘   Fragmentation:      8%
I (22055) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22073) MEM_MGR: â•‘ PSRAM:
I (22077) MEM_MGR: â•‘   Free:             3859496 bytes (3769 KB)
I (22084) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (22091) MEM_MGR: â•‘   Fragmentation:      2%
I (22096) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22114) MEM_MGR: â•‘ Total Heap:
I (22118) MEM_MGR: â•‘   Free:             3912648 bytes (3820 KB)
I (22125) MEM_MGR: â•‘   Minimum Ever:     3905236 bytes (3813 KB)
I (22132) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22150) MEM_MGR: â•‘ Memory Delta from Baseline:
I (22156) MEM_MGR: â•‘   Internal RAM:     -151596 bytes (-148 KB)
I (22163) MEM_MGR: â•‘   DMA-capable:      -151596 bytes (-148 KB)
I (22170) MEM_MGR: â•‘   PSRAM:            -332520 bytes (-324 KB)
I (22176) MEM_MGR: â•‘   Total Heap:       -452108 bytes (-441 KB)
I (22183) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22202) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (22211) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22229) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (22236) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22254) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22272) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (22279) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22297) AUDIO: [DIAG] Pre-init state:
I (22302) AUDIO:   Free heap: 3966916 bytes
I (22307) AUDIO:   Free internal RAM: 123671 bytes
I (22312) AUDIO:   Free DMA-capable: 103307 bytes
I (22318) AUDIO:   Free PSRAM: 3863732 bytes
I (22323) AUDIO:   Timestamp: 20769 ms
I (22327) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (22334) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (22342) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (22350) AUDIO:   DMA frame num (per desc): 1020
I (22355) AUDIO:   DMA total samples (effective): 4080
I (22361) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (22368) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (22375) AUDIO: âœ… I2S channels created (took 0 ms)
I (22380) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb424
I (22387) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (22393) AUDIO:   Sample rate: 16000 Hz
I (22398) AUDIO:   MCLK: DISABLED
I (22402) AUDIO:   BCLK: GPIO14 (shared)
I (22407) AUDIO:   WS:   GPIO15 (shared)
I (22411) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (22418) AUDIO: âœ… TX channel configured (took 1 ms)
I (22423) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (22429) AUDIO:   Sample rate: 16000 Hz
I (22434) AUDIO:   MCLK: DISABLED
I (22438) AUDIO:   BCLK: GPIO14 (shared)
I (22443) AUDIO:   WS:   GPIO15 (shared)
I (22447) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (22453) AUDIO: âœ… RX channel configured (took 0 ms)
I (22459) AUDIO: [STEP 4/6] Enabling TX channel...
I (22464) AUDIO: âœ… TX channel enabled (took 0 ms)
I (22470) AUDIO: [STEP 5/6] Enabling RX channel...
I (22475) AUDIO: âœ… RX channel enabled (took 0 ms)
I (22481) AUDIO: [STEP 6/6] Hardware stabilization...
I (22486) AUDIO:   Phase 1: Initial settle (50ms)
I (22542) AUDIO:   Phase 2: DMA verification
I (22542) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (22543) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (22699) AUDIO: [DIAG] Post-init state:
I (22699) AUDIO:   Free heap: 3940924 bytes
I (22699) AUDIO:   Free internal RAM: 97679 bytes
I (22703) AUDIO:   Free DMA-capable: 77315 bytes
I (22708) AUDIO:   Free PSRAM: 3863732 bytes
I (22713) AUDIO:   Timestamp: 21160 ms
I (22718) AUDIO:   Total init time: 201 ms
I (22722) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22740) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (22747) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (22752) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (22761) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (22767) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22785) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22803) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (22810) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (22816) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (22823) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (22829) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
E (22996) task_wdt: esp_task_wdt_reset(705): task not found
I (23130) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23137) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (23145) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23163) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (23170) AUDIO: âœ… RX channel disabled (took 0 ms)
I (23175) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (23182) AUDIO: âœ… TX channel disabled (took 0 ms)
I (23187) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (23244) AUDIO: [STEP 4/5] Deleting RX channel...
I (23245) AUDIO: âœ… RX channel deleted (took 0 ms)
I (23245) AUDIO: [STEP 5/5] Deleting TX channel...
I (23250) AUDIO: âœ… TX channel deleted (took 0 ms)
I (23255) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (23313) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23320) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (23327) AUDIO: â•‘ Camera Can Now Initialize
I (23332) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23350) LED_CTRL: LED pattern -> 3
I (23354) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (23370) STATE_MGR: WebSocket connected
I (23774) WEBSOCKET: WebSocket connection restored (cycle: 3, disconnects: 1, reconnects: 1)
E (24996) task_wdt: esp_task_wdt_reset(705): task not found
I (25030) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (25030) STATE_MGR: Double-click detected - triggering capture sequence
I (25034) STATE_MGR: Starting camera capture sequence
I (25039) LED_CTRL: LED pattern -> 6
I (25044) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25062) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (25069) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25087) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25105) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (25112) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25130) AUDIO: [DIAG] Pre-init state:
I (25134) AUDIO:   Free heap: 3966916 bytes
I (25139) AUDIO:   Free internal RAM: 123671 bytes
I (25145) AUDIO:   Free DMA-capable: 103307 bytes
I (25150) AUDIO:   Free PSRAM: 3863732 bytes
I (25155) AUDIO:   Timestamp: 23602 ms
I (25160) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (25166) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (25174) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (25183) AUDIO:   DMA frame num (per desc): 1020
I (25188) AUDIO:   DMA total samples (effective): 4080
I (25194) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (25201) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (25207) AUDIO: âœ… I2S channels created (took 0 ms)
I (25213) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb424
I (25219) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (25226) AUDIO:   Sample rate: 16000 Hz
I (25231) AUDIO:   MCLK: DISABLED
I (25235) AUDIO:   BCLK: GPIO14 (shared)
I (25239) AUDIO:   WS:   GPIO15 (shared)
I (25244) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (25250) AUDIO: âœ… TX channel configured (took 0 ms)
I (25255) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (25262) AUDIO:   Sample rate: 16000 Hz
I (25267) AUDIO:   MCLK: DISABLED
I (25271) AUDIO:   BCLK: GPIO14 (shared)
I (25275) AUDIO:   WS:   GPIO15 (shared)
I (25280) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (25286) AUDIO: âœ… RX channel configured (took 0 ms)
I (25291) AUDIO: [STEP 4/6] Enabling TX channel...
I (25297) AUDIO: âœ… TX channel enabled (took 0 ms)
I (25302) AUDIO: [STEP 5/6] Enabling RX channel...
I (25308) AUDIO: âœ… RX channel enabled (took 0 ms)
I (25313) AUDIO: [STEP 6/6] Hardware stabilization...
I (25319) AUDIO:   Phase 1: Initial settle (50ms)
I (25374) AUDIO:   Phase 2: DMA verification
I (25374) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (25374) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (25531) AUDIO: [DIAG] Post-init state:
I (25531) AUDIO:   Free heap: 3940924 bytes
I (25531) AUDIO:   Free internal RAM: 97679 bytes
I (25535) AUDIO:   Free DMA-capable: 77315 bytes
I (25540) AUDIO:   Free PSRAM: 3863732 bytes
I (25545) AUDIO:   Timestamp: 23992 ms
I (25550) AUDIO:   Total init time: 200 ms
I (25554) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25572) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (25578) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (25584) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (25593) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (25599) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25617) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25635) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (25642) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (25648) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (25655) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (25661) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26011) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26018) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (26026) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26044) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (26051) AUDIO: âœ… RX channel disabled (took 0 ms)
I (26056) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (26063) AUDIO: âœ… TX channel disabled (took 0 ms)
I (26068) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (26125) AUDIO: [STEP 4/5] Deleting RX channel...
I (26126) AUDIO: âœ… RX channel deleted (took 0 ms)
I (26126) AUDIO: [STEP 5/5] Deleting TX channel...
I (26131) AUDIO: âœ… TX channel deleted (took 0 ms)
I (26136) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (26194) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26201) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (26208) AUDIO: â•‘ Camera Can Now Initialize
I (26213) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26231) STATE_MGR: Capturing frame from camera
I (26236) CAMERA: Initializing camera...
I (26241) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (26250) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (26259) cam_hal: cam init ok
I (26263) sccb-ng: pin_sda 26 pin_scl 27
I (26266) sccb-ng: sccb_i2c_port=1
I (26272) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (26314) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (26314) camera: Detected OV2640 camera
I (26314) camera: Detected camera at address=0x30
I (26394) cam_hal: PSRAM DMA mode disabled
I (26395) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (26399) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (26406) cam_hal: cam config ok
I (26410) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (26493) CAMERA: Camera initialized successfully
I (26552) STATE_MGR: Frame captured: 10481 bytes
I (26553) JSON_PROTO: Generated session ID: hotpin-998C64-24
I (26553) STATE_MGR: Uploading image using session hotpin-998C64-24
I (26560) HTTP_CLIENT: Uploading image: session=hotpin-998C64-24, size=10481 bytes
I (26569) HTTP_CLIENT: POST body assembled: 10738 bytes
I (26575) HTTP_CLIENT: Sending POST request to http://10.143.111.58:8000/image
E (26996) task_wdt: esp_task_wdt_reset(705): task not found
E (28996) task_wdt: esp_task_wdt_reset(705): task not found
I (29060) HTTP_CLIENT: HTTP POST Status = 200, content_length = 245
I (29061) HTTP_CLIENT: Image uploaded successfully
I (29062) HTTP_CLIENT: Server response: {"status":"success","message":"Image received and stored for next voice interaction","session":"hotpin-998C64-24","filename":"image.jpg","size_bytes":10481,"saved_path":"captured_images/hotpin-998C64-24_20251103_231603.jpg","context_ready":true}
I (29089) CAMERA: Deinitializing camera...
I (29093) CAMERA: Camera deinitialized
I (29097) STATE_MGR: Camera deinitialized - DMA memory freed
I (29103) STATE_MGR: Image uploaded successfully
I (29109) LED_CTRL: LED pattern -> 3
I (29113) STATE_MGR: Camera capture sequence complete
I (29129) STATE_MGR: Capture complete event: success=1 (ESP_OK)
E (30996) task_wdt: esp_task_wdt_reset(705): task not found
W (31888) MEM_MGR: âš ï¸ WARNING: Memory fragmentation increasing! DMA:37% PSRAM:2%
E (32996) task_wdt: esp_task_wdt_reset(705): task not found
I (33898) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (33898) BUTTON: Single click confirmed
I (33898) STATE_MGR: Single click - mode toggle requested
I (33904) STATE_MGR: Switching: Camera â†’ Voice (count: 3)
I (33961) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (33961) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33974) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (33981) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34000) MEM_MGR: â•‘ Internal RAM:
I (34004) MEM_MGR: â•‘   Free:             123203 bytes (120 KB)
I (34010) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (34017) MEM_MGR: â•‘   Fragmentation:     47%
I (34022) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34041) MEM_MGR: â•‘ DMA-capable RAM:
I (34045) MEM_MGR: â•‘   Free:             102839 bytes (100 KB)
I (34052) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (34059) MEM_MGR: â•‘   Fragmentation:     37%
I (34064) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34082) MEM_MGR: â•‘ PSRAM:
I (34086) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (34093) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (34100) MEM_MGR: â•‘   Fragmentation:      2%
I (34105) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34123) MEM_MGR: â•‘ Total Heap:
I (34127) MEM_MGR: â•‘   Free:             3966448 bytes (3873 KB)
I (34134) MEM_MGR: â•‘   Minimum Ever:     3829064 bytes (3739 KB)
I (34141) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34159) MEM_MGR: â•‘ Memory Delta from Baseline:
I (34165) MEM_MGR: â•‘   Internal RAM:     -101932 bytes ( -99 KB)
I (34172) MEM_MGR: â•‘   DMA-capable:      -101932 bytes ( -99 KB)
I (34179) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (34185) MEM_MGR: â•‘   Total Heap:       -398308 bytes (-388 KB)
I (34192) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34211) STATE_MGR: Stopping camera...
I (34215) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34231) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (34238) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34255) STATE_MGR:   Timeout: 5000 ms
I (34259) STATE_MGR:   Timestamp: 32706 ms
I (34264) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (34270) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34286) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (34292) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34309) STATE_MGR:   Free heap before: 3966448 bytes
I (34314) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (34320) CAMERA: Deinitializing camera...
I (34325) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (34331) STATE_MGR:   Free heap after: 3966448 bytes
I (34337) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (34343) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34359) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (34365) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34382) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (34490) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (34590) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (34640) STATE_MGR:   âœ“ Total stabilization: 250ms
I (34640) STATE_MGR:   Timestamp: 33087 ms
I (34640) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34656) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (34663) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34679) STATE_MGR:   Free heap before: 3966448 bytes
I (34685) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34703) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (34710) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34728) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34746) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (34753) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34771) AUDIO: [DIAG] Pre-init state:
I (34775) AUDIO:   Free heap: 3966448 bytes
I (34780) AUDIO:   Free internal RAM: 123203 bytes
I (34786) AUDIO:   Free DMA-capable: 102839 bytes
I (34791) AUDIO:   Free PSRAM: 3863732 bytes
I (34796) AUDIO:   Timestamp: 33243 ms
I (34800) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (34807) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (34815) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (34823) AUDIO:   DMA frame num (per desc): 1020
I (34829) AUDIO:   DMA total samples (effective): 4080
I (34835) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (34842) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (34848) AUDIO: âœ… I2S channels created (took 0 ms)
I (34854) AUDIO:   TX handle: 0x3ffafccc | RX handle: 0x3ffcb238
I (34860) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (34867) AUDIO:   Sample rate: 16000 Hz
I (34871) AUDIO:   MCLK: DISABLED
I (34875) AUDIO:   BCLK: GPIO14 (shared)
I (34880) AUDIO:   WS:   GPIO15 (shared)
I (34885) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (34892) AUDIO: âœ… TX channel configured (took 1 ms)
I (34896) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (34903) AUDIO:   Sample rate: 16000 Hz
I (34907) AUDIO:   MCLK: DISABLED
I (34911) AUDIO:   BCLK: GPIO14 (shared)
I (34916) AUDIO:   WS:   GPIO15 (shared)
I (34921) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (34927) AUDIO: âœ… RX channel configured (took 0 ms)
I (34932) AUDIO: [STEP 4/6] Enabling TX channel...
I (34938) AUDIO: âœ… TX channel enabled (took 0 ms)
I (34943) AUDIO: [STEP 5/6] Enabling RX channel...
I (34949) AUDIO: âœ… RX channel enabled (took 0 ms)
I (34954) AUDIO: [STEP 6/6] Hardware stabilization...
I (34960) AUDIO:   Phase 1: Initial settle (50ms)
E (34996) task_wdt: esp_task_wdt_reset(705): task not found
I (35015) AUDIO:   Phase 2: DMA verification
I (35015) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (35016) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (35172) AUDIO: [DIAG] Post-init state:
I (35172) AUDIO:   Free heap: 3940472 bytes
I (35172) AUDIO:   Free internal RAM: 97227 bytes
I (35176) AUDIO:   Free DMA-capable: 76863 bytes
I (35181) AUDIO:   Free PSRAM: 3863732 bytes
I (35186) AUDIO:   Timestamp: 33633 ms
I (35191) AUDIO:   Total init time: 201 ms
I (35195) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35213) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (35220) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (35225) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (35234) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (35240) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35258) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35276) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (35283) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (35289) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (35296) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (35302) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35320) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (35326) STATE_MGR:   Free heap after: 3940472 bytes
I (35332) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35348) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (35354) STATE_MGR: â•‘ Total transition time: 889 ms
I (35360) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35376) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35392) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (35398) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35415) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (35423) TTS: No pending audio to flush
I (35452) TTS: TTS decoder session reset for next audio stream
I (35452) TTS: âœ… TTS decoder flushed and reset for next session
I (35454) STT: Starting STT pipeline...
I (35458) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (35468) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (35475) STT:   Current time: 33922 ms
I (35477) STT: âœ… STT pipeline started
I (35479) STT:   Free heap: 3931912 bytes
I (35479) STT: Audio streaming session activated
I (35494) STT: Connection stabilization delay (500ms)...
I (35534) TTS: ğŸµ Starting TTS decoder...
I (35534) TTS: Initializing TTS decoder...
W (35534) TTS: TTS decoder already initialized
I (35563) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (35563) TTS: âœ… TTS decoder started successfully
I (35567) TTS: ğŸµ TTS playback task started on Core 1
I (35573) TTS: âœ… TTS playback task registered with watchdog
I (35579) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (35688) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (35688) STT:   âœ“ Audio driver initialized
I (35689) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (35796) STT:   Total stabilization: 300ms
I (35796) STT:   Timestamp: 34243 ms
I (35796) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (35800) STT:   âœ“ DMA-capable buffer allocated at 0x3ffca9cc (with safety padding)
I (35809) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35825) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (35830) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (35836) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35892) LED_CTRL: LED pattern -> 1
I (35893) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35904) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (35911) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35929) MEM_MGR: â•‘ Internal RAM:
I (35933) MEM_MGR: â•‘   Free:             123203 bytes (120 KB)
I (35940) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (35947) MEM_MGR: â•‘   Fragmentation:     47%
I (35952) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35970) MEM_MGR: â•‘ DMA-capable RAM:
I (35975) MEM_MGR: â•‘   Free:             102839 bytes (100 KB)
I (35982) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (35988) MEM_MGR: â•‘   Fragmentation:     37%
I (35994) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36000) STT: Testing WebSocket transport health...
I (36012) MEM_MGR: â•‘ PSRAM:
I (36021) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (36024) STT: âœ… WebSocket transport verified healthy
I (36028) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (36041) MEM_MGR: â•‘   Fragmentation:      2%
I (36046) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36064) MEM_MGR: â•‘ Total Heap:
I (36069) MEM_MGR: â•‘   Free:             3966448 bytes (3873 KB)
I (36075) MEM_MGR: â•‘   Minimum Ever:     3829064 bytes (3739 KB)
I (36082) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36101) MEM_MGR: â•‘ Memory Delta from Baseline:
I (36106) MEM_MGR: â•‘   Internal RAM:     -101932 bytes ( -99 KB)
I (36113) MEM_MGR: â•‘   DMA-capable:      -101932 bytes ( -99 KB)
I (36120) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (36127) MEM_MGR: â•‘   Total Heap:       -398308 bytes (-388 KB)
I (36134) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36134) STT: Starting audio streaming to server...
I (36152) STATE_MGR: âœ… Voice mode transition complete
I (36163) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (36179) STATE_MGR: STT pipeline reported start
I (36189) STATE_MGR: TTS playback start event received
E (36429) transport_ws: Error transport_poll_write
E (36430) websocket_client: esp_transport_write() returned 0, transport_error=ESP_OK, tls_error_code=0, tls_flags=0, errno=0
E (36436) WEBSOCKET: âŒ WebSocket error occurred
I (36441) TTS: Received audio chunk #2: 0 bytes
I (36446) TTS: New audio session detected - resetting chunk counter
E (36453) STATE_MGR: WebSocket error signalled
E (36453) HOTPIN_MAIN: âŒ WebSocket status callback: ERROR
I (36458) LED_CTRL: LED pattern -> 5
W (36468) WEBSOCKET: âš ï¸ WebSocket disconnected
E (36469) STATE_MGR: WebSocket error occurred while in voice mode - triggering transition to camera
I (36474) TTS: Received audio chunk #2: 0 bytes
I (36489) TTS: New audio session detected - resetting chunk counter
E (36494) STATE_MGR: WebSocket error signalled
W (36496) HOTPIN_MAIN: âš ï¸ WebSocket status callback: DISCONNECTED
W (36509) WEBSOCKET: WebSocket send buffer full (0 bytes sent), yielding and retrying (attempt 1/4)
W (36511) STATE_MGR: WebSocket disconnected
I (36523) LED_CTRL: LED pattern -> 4
E (36618) WEBSOCKET: WebSocket connection lost before send attempt 2
E (36618) STT: WebSocket disconnected during audio send - aborting stream
I (36621) STT: Streaming task received stop signal
W (36627) STT: Audio streaming aborted due to transport errors
W (36633) STT: Skipping EOS - WebSocket disconnected
I (36639) STT: Audio streaming session complete (streamed 4096 bytes in 1 chunks)
I (36647) STATE_MGR: STT pipeline reported stop
I (36652) LED_CTRL: LED pattern -> 1
I (36671) STT: Audio capture task stopped (captured 30720 bytes total)
W (36996) HOTPIN_MAIN: WebSocket link not healthy, restarting connection
I (36996) WEBSOCKET: Force stopping WebSocket client
W (36998) websocket_client: Client was not started
W (37003) WEBSOCKET: Graceful close returned ESP_FAIL
I (37009) WEBSOCKET: WebSocket health check task shutdown signal received
I (37017) WEBSOCKET: WebSocket health check task exiting (cycles: 5, disconnects: 1, reconnects: 2)
E (37109) task_wdt: delete_entry(236): task not found
I (37609) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 3)...
I (37609) WEBSOCKET: Connecting to WebSocket server...
I (37617) websocket_client: Started
I (37618) WEBSOCKET: âœ… WebSocket health check task created
I (37618) WEBSOCKET: WebSocket health check task started
I (37622) WEBSOCKET: WebSocket client started
I (37896) WEBSOCKET: âœ… WebSocket connected to server
I (37897) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (37902) WEBSOCKET: Handshake sent successfully
I (37904) STATE_MGR: WebSocket connected
I (37905) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (38033) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
E (38033) task_wdt: esp_task_wdt_reset(705): task not found
I (38114) BUTTON: Single click confirmed
I (38114) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
W (38114) STATE_MGR: Guardrail soft override: stopping voice pipeline (user cancellation)
I (38123) STATE_MGR: Single click - mode toggle requested
I (38129) STATE_MGR: Switching: Voice â†’ Camera (count: 4)
I (38185) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (38185) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38198) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (38205) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38206) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (38224) MEM_MGR: â•‘ Internal RAM:
I (38234) WEBSOCKET: Server status: connected
I (38238) MEM_MGR: â•‘   Free:             123203 bytes (120 KB)
I (38250) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (38256) MEM_MGR: â•‘   Fragmentation:     47%
I (38262) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38280) MEM_MGR: â•‘ DMA-capable RAM:
I (38284) MEM_MGR: â•‘   Free:             102839 bytes (100 KB)
I (38291) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (38298) MEM_MGR: â•‘   Fragmentation:     37%
I (38303) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38321) MEM_MGR: â•‘ PSRAM:
I (38325) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (38332) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (38339) MEM_MGR: â•‘   Fragmentation:      2%
I (38344) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38362) MEM_MGR: â•‘ Total Heap:
I (38366) MEM_MGR: â•‘   Free:             3966448 bytes (3873 KB)
I (38373) MEM_MGR: â•‘   Minimum Ever:     3829064 bytes (3739 KB)
I (38380) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38399) MEM_MGR: â•‘ Memory Delta from Baseline:
I (38404) MEM_MGR: â•‘   Internal RAM:     -101932 bytes ( -99 KB)
I (38411) MEM_MGR: â•‘   DMA-capable:      -101932 bytes ( -99 KB)
I (38418) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (38425) MEM_MGR: â•‘   Total Heap:       -398308 bytes (-388 KB)
I (38431) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38450) STATE_MGR: Stopping voice mode components...
I (38456) STT: Stopping STT pipeline...
W (38460) STT: STT pipeline already stopped
I (39508) WEBSOCKET: Connecting to WebSocket server...
I (39965) STATE_MGR: Voice pipeline became idle at stage idle
I (39965) STATE_MGR: Waiting for TTS playback drain (~0 bytes pending, timeout 15000 ms)
E (40035) task_wdt: esp_task_wdt_reset(705): task not found
I (40270) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (40270) STATE_MGR: TTS decoder confirmed idle
I (40273) STATE_MGR: Flushing and resetting TTS decoder for next session
I (40281) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (40289) TTS: Flushing pending audio before reset (~0 bytes)
I (40595) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (40595) TTS: TTS decoder session reset for next audio stream
I (40600) TTS: âœ… TTS decoder flushed and reset for next session
I (40607) TTS: TTS playback task shutting down - is_running=0
I (40613) TTS: ğŸµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (40621) TTS:   âœ“ DMA buffer freed from PSRAM
I (40626) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (40806) TTS: â¹ï¸ Stopping TTS decoder...
W (40806) TTS: TTS decoder not running
I (40931) STATE_MGR: Acquiring I2S mutex...
I (40931) STATE_MGR: Deinitializing audio drivers...
I (40931) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40949) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (40956) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40974) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (40981) AUDIO: âœ… RX channel disabled (took 0 ms)
I (40987) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (40993) AUDIO: âœ… TX channel disabled (took 0 ms)
I (40999) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (41055) AUDIO: [STEP 4/5] Deleting RX channel...
I (41056) AUDIO: âœ… RX channel deleted (took 0 ms)
I (41056) AUDIO: [STEP 5/5] Deleting TX channel...
I (41061) AUDIO: âœ… TX channel deleted (took 0 ms)
I (41066) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (41124) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41131) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (41138) AUDIO: â•‘ Camera Can Now Initialize
I (41143) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41211) STATE_MGR: Allowing memory stabilization (100ms)...
I (41311) STATE_MGR: Camera will be initialized on-demand during capture
I (41311) STATE_MGR: I2S mutex released
I (41312) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41330) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (41337) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41356) MEM_MGR: â•‘ Internal RAM:
I (41360) MEM_MGR: â•‘   Free:             123203 bytes (120 KB)
I (41367) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (41373) MEM_MGR: â•‘   Fragmentation:     47%
I (41379) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41397) MEM_MGR: â•‘ DMA-capable RAM:
I (41401) MEM_MGR: â•‘   Free:             102839 bytes (100 KB)
I (41408) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (41415) MEM_MGR: â•‘   Fragmentation:     37%
I (41420) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41438) MEM_MGR: â•‘ PSRAM:
I (41442) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (41449) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (41456) MEM_MGR: â•‘   Fragmentation:      2%
I (41461) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41468) WEBSOCKET: Connecting to WebSocket server...
I (41479) MEM_MGR: â•‘ Total Heap:
I (41489) MEM_MGR: â•‘   Free:             3966448 bytes (3873 KB)
I (41496) MEM_MGR: â•‘   Minimum Ever:     3829064 bytes (3739 KB)
I (41503) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41521) MEM_MGR: â•‘ Memory Delta from Baseline:
I (41527) MEM_MGR: â•‘   Internal RAM:     -101932 bytes ( -99 KB)
I (41534) MEM_MGR: â•‘   DMA-capable:      -101932 bytes ( -99 KB)
I (41541) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (41547) MEM_MGR: â•‘   Total Heap:       -398308 bytes (-388 KB)
I (41554) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41573) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (41582) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41600) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (41607) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41625) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41643) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (41650) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41668) AUDIO: [DIAG] Pre-init state:
I (41673) AUDIO:   Free heap: 3966108 bytes
I (41678) AUDIO:   Free internal RAM: 122983 bytes
I (41683) AUDIO:   Free DMA-capable: 102619 bytes
I (41689) AUDIO:   Free PSRAM: 3863732 bytes
I (41694) AUDIO:   Timestamp: 40140 ms
I (41698) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (41705) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (41713) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (41721) AUDIO:   DMA frame num (per desc): 1020
I (41726) AUDIO:   DMA total samples (effective): 4080
I (41732) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (41739) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (41746) AUDIO: âœ… I2S channels created (took 0 ms)
I (41751) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcad5c
I (41758) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (41764) AUDIO:   Sample rate: 16000 Hz
I (41769) AUDIO:   MCLK: DISABLED
I (41773) AUDIO:   BCLK: GPIO14 (shared)
I (41778) AUDIO:   WS:   GPIO15 (shared)
I (41782) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (41789) AUDIO: âœ… TX channel configured (took 1 ms)
I (41794) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (41800) AUDIO:   Sample rate: 16000 Hz
I (41805) AUDIO:   MCLK: DISABLED
I (41809) AUDIO:   BCLK: GPIO14 (shared)
I (41814) AUDIO:   WS:   GPIO15 (shared)
I (41818) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (41824) AUDIO: âœ… RX channel configured (took 0 ms)
I (41830) AUDIO: [STEP 4/6] Enabling TX channel...
I (41835) AUDIO: âœ… TX channel enabled (took 0 ms)
I (41841) AUDIO: [STEP 5/6] Enabling RX channel...
I (41846) AUDIO: âœ… RX channel enabled (took 0 ms)
I (41852) AUDIO: [STEP 6/6] Hardware stabilization...
I (41857) AUDIO:   Phase 1: Initial settle (50ms)
I (41913) AUDIO:   Phase 2: DMA verification
I (41913) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (41914) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
E (42035) task_wdt: esp_task_wdt_reset(705): task not found
I (42070) AUDIO: [DIAG] Post-init state:
I (42070) AUDIO:   Free heap: 3940120 bytes
I (42070) AUDIO:   Free internal RAM: 96995 bytes
I (42074) AUDIO:   Free DMA-capable: 76631 bytes
I (42079) AUDIO:   Free PSRAM: 3863732 bytes
I (42084) AUDIO:   Timestamp: 40531 ms
I (42089) AUDIO:   Total init time: 201 ms
I (42093) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42111) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (42117) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (42123) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (42132) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (42138) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42156) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42174) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (42181) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (42187) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (42194) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (42200) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42501) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42508) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (42516) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42534) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (42541) AUDIO: âœ… RX channel disabled (took 0 ms)
I (42546) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (42553) AUDIO: âœ… TX channel disabled (took 0 ms)
I (42558) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (42615) AUDIO: [STEP 4/5] Deleting RX channel...
I (42616) AUDIO: âœ… RX channel deleted (took 0 ms)
I (42616) AUDIO: [STEP 5/5] Deleting TX channel...
I (42621) AUDIO: âœ… TX channel deleted (took 0 ms)
I (42626) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (42684) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42691) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (42698) AUDIO: â•‘ Camera Can Now Initialize
I (42703) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42721) LED_CTRL: LED pattern -> 3
I (42725) STATE_MGR: âœ… Entered CAMERA_STANDBY state
E (44035) task_wdt: esp_task_wdt_reset(705): task not found
E (46035) task_wdt: esp_task_wdt_reset(705): task not found
W (46889) MEM_MGR: âš ï¸ WARNING: Memory fragmentation increasing! DMA:33% PSRAM:2%
I (47159) STATE_MGR: Button event received: 3 in state CAMERA_STANDBY
I (47159) BUTTON: Long press detected (3000 ms)
W (47159) STATE_MGR: Long press - shutdown requested
W (47166) STATE_MGR: Shutdown state reached
W (47170) STATE_MGR: === SYSTEM SHUTDOWN ===
I (47176) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (47193) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (47200) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (47218) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (47236) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (47244) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (47262) AUDIO: [DIAG] Pre-init state:
I (47266) AUDIO:   Free heap: 3966108 bytes
I (47271) AUDIO:   Free internal RAM: 122983 bytes
I (47277) AUDIO:   Free DMA-capable: 102619 bytes
I (47282) AUDIO:   Free PSRAM: 3863732 bytes
I (47287) AUDIO:   Timestamp: 45734 ms
I (47291) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (47298) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (47306) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (47314) AUDIO:   DMA frame num (per desc): 1020
I (47320) AUDIO:   DMA total samples (effective): 4080
I (47325) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (47332) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (47339) AUDIO: âœ… I2S channels created (took 0 ms)
I (47344) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcad5c
I (47351) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (47358) AUDIO:   Sample rate: 16000 Hz
I (47362) AUDIO:   MCLK: DISABLED
I (47366) AUDIO:   BCLK: GPIO14 (shared)
I (47371) AUDIO:   WS:   GPIO15 (shared)
I (47375) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (47382) AUDIO: âœ… TX channel configured (took 0 ms)
I (47387) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (47394) AUDIO:   Sample rate: 16000 Hz
I (47398) AUDIO:   MCLK: DISABLED
I (47402) AUDIO:   BCLK: GPIO14 (shared)
I (47407) AUDIO:   WS:   GPIO15 (shared)
I (47411) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (47418) AUDIO: âœ… RX channel configured (took 0 ms)
I (47423) AUDIO: [STEP 4/6] Enabling TX channel...
I (47428) AUDIO: âœ… TX channel enabled (took 0 ms)
I (47434) AUDIO: [STEP 5/6] Enabling RX channel...
I (47439) AUDIO: âœ… RX channel enabled (took 0 ms)
I (47445) AUDIO: [STEP 6/6] Hardware stabilization...
I (47451) AUDIO:   Phase 1: Initial settle (50ms)
I (47506) AUDIO:   Phase 2: DMA verification
I (47506) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (47506) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (47663) AUDIO: [DIAG] Post-init state:
I (47663) AUDIO:   Free heap: 3940120 bytes
I (47663) AUDIO:   Free internal RAM: 96995 bytes
I (47667) AUDIO:   Free DMA-capable: 76631 bytes
I (47672) AUDIO:   Free PSRAM: 3863732 bytes
I (47677) AUDIO:   Timestamp: 46124 ms
I (47682) AUDIO:   Total init time: 200 ms
I (47686) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (47704) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (47711) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (47716) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (47725) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (47731) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (47749) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (47767) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (47774) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (47780) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (47787) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (47793) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48035) HOTPIN_MAIN: System shutdown detected, terminating WebSocket connection task
I (48035) HOTPIN_MAIN: Unregistering WebSocket connection task from watchdog
E (48040) task_wdt: delete_entry(236): task not found
W (48046) HOTPIN_MAIN: Failed to unregister ws_connect task from watchdog: ESP_ERR_NOT_FOUND
I (48055) HOTPIN_MAIN: WebSocket connection task terminated
I (49055) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49062) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (49070) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49088) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (49095) AUDIO: âœ… RX channel disabled (took 0 ms)
I (49100) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (49107) AUDIO: âœ… TX channel disabled (took 0 ms)
I (49113) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (49169) AUDIO: [STEP 4/5] Deleting RX channel...
I (49170) AUDIO: âœ… RX channel deleted (took 0 ms)
I (49170) AUDIO: [STEP 5/5] Deleting TX channel...
I (49175) AUDIO: âœ… TX channel deleted (took 0 ms)
I (49180) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (49238) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49245) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (49252) AUDIO: â•‘ Camera Can Now Initialize
I (49257) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49275) LED_CTRL: LED pattern -> 1
I (49879) LED_CTRL: LED pattern -> 3
I (51079) LED_CTRL: LED pattern -> 0
I (51079) STATE_MGR: Stopping all subsystems...
I (51079) STATE_MGR: Shutting down camera...
I (51083) CAMERA: Deinitializing camera...
I (51087) STT: Stopping STT pipeline...
W (51092) STT: STT pipeline already stopped
I (51097) TTS: â¹ï¸ Stopping TTS decoder...
W (51102) TTS: TTS decoder not running
I (51131) STATE_MGR: Stopping WebSocket client
I (51131) WEBSOCKET: Disconnecting from WebSocket server...
W (51419) websocket_client: Client was not started
W (51419) WEBSOCKET: WebSocket client stop reported ESP_FAIL, continuing cleanup
I (51421) WEBSOCKET: WebSocket health check task shutdown signal received
I (51429) WEBSOCKET: WebSocket health check task exiting (cycles: 7, disconnects: 1, reconnects: 2)
I (51521) WEBSOCKET: WebSocket disconnected
I (51521) WEBSOCKET: Force stopping WebSocket client
W (51521) websocket_client: Client was not started
W (51526) WEBSOCKET: Graceful close returned ESP_FAIL
I (51532) STATE_MGR: âœ… Shutdown complete
