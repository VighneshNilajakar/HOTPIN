PS F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware> idf.py monitor
Executing action: monitor
Serial port COM7
Connecting..........
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP32
Running idf_monitor in directory F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware
Executing "C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe C:\Espressif\frameworks\esp-idf-v5.4.2\tools/idf_monitor.py -p COM7 -b 115200 --toolchain-prefix xtensa-esp32-elf- --target esp32 --revision 0 F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware\build\hotpin_esp32_firmware.elf --force-color -m 'C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe' 'C:\Espressif\frameworks\esp-idf-v5.4.2\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM7 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM7 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x3 (DOWNLOAD_BOOT(UART0/UART1/SDIO_REI_REO_V2))
waiting for download
ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
ï¿½load:0ï¿½gff0030,len:6276
load:0x40078000,len;ï¿½5736
load:0x40080400,len:4
--- 0x40080400: _init at ??:?
load:0x6>:9<406,len;3860
entry 0x4008463c
--- 0x4008463c: _xt_medint3 at C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa/xtensa_vectors.S:1409
I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Nov  3 2025 17:56:29
I (29) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=3a99ch (240028) map
I (187) esp_image: segment 1: paddr=0004a9c4 vaddr=3ff80000 size=0001ch (    28) load
I (188) esp_image: segment 2: paddr=0004a9e8 vaddr=3ffb0000 size=05630h ( 22064) load
I (199) esp_image: segment 3: paddr=00050020 vaddr=400d0020 size=bdebch (777916) map
I (465) esp_image: segment 4: paddr=0010dee4 vaddr=3ffb5630 size=0c694h ( 50836) load
I (484) esp_image: segment 5: paddr=0011a580 vaddr=40080000 size=1ad94h (109972) load
I (543) boot: Loaded app from partition at offset 0x10000
I (543) boot: Disabling RNG early entropy source...
I (554) quad_psram: This chip is ESP32-D0WD
I (554) esp_psram: Found 4MB PSRAM device
I (554) esp_psram: Speed: 40MHz
I (557) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (565) cpu_start: Multicore app
I (1459) esp_psram: SPI SRAM memory test OK
I (1467) cpu_start: Pro cpu start user code
I (1467) cpu_start: cpu freq: 240000000 Hz
I (1467) app_init: Application information:
I (1471) app_init: Project name:     hotpin_esp32_firmware
I (1477) app_init: App version:      7b189c4-dirty
I (1482) app_init: Compile time:     Nov  3 2025 17:56:12
I (1488) app_init: ELF file SHA256:  07b4b4fce...
I (1494) app_init: ESP-IDF:          v5.4.2-dirty
I (1499) efuse_init: Min chip rev:     v0.0
I (1504) efuse_init: Max chip rev:     v3.99
I (1509) efuse_init: Chip rev:         v3.1
I (1514) heap_init: Initializing. RAM available for dynamic allocation:
I (1521) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1527) heap_init: At 3FFC9478 len 00016B88 (90 KiB): DRAM
I (1534) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1540) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1547) heap_init: At 4009AD94 len 0000526C (20 KiB): IRAM
I (1553) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1561) spi_flash: detected chip: generic
I (1565) spi_flash: flash io: dio
W (1569) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1584) main_task: Started on CPU0
I (1587) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1596) main_task: Calling app_main()
I (1600) HOTPIN_MAIN: ====================================
I (1606) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1612) HOTPIN_MAIN: ====================================
W (1618) HOTPIN_MAIN: Brownout detector disabled
I (1623) HOTPIN_MAIN: Validating PSRAM...
I (1628) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1634) HOTPIN_MAIN: PSRAM validation passed
I (1640) HOTPIN_MAIN: ====================================
I (1646) HOTPIN_MAIN: System Information:
I (1650) HOTPIN_MAIN: Chip: esp32
I (1654) HOTPIN_MAIN: Cores: 2
I (1658) HOTPIN_MAIN: Silicon revision: 301
I (1663) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1668) HOTPIN_MAIN: Flash: 2 MB external
I (1673) HOTPIN_MAIN: Free heap: 4364852 bytes
I (1678) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1683) HOTPIN_MAIN: ====================================
I (1689) HOTPIN_MAIN: Initializing memory manager...
I (1694) MEM_MGR: Initializing memory manager...
I (1700) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1718) MEM_MGR: â•‘ Memory Manager Initialized
I (1723) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1742) MEM_MGR: â•‘ Baseline Memory State:
I (1747) MEM_MGR: â•‘   Internal RAM:     225135 bytes (219 KB)
I (1753) MEM_MGR: â•‘   DMA-capable:      204771 bytes (199 KB)
I (1760) MEM_MGR: â•‘   PSRAM:            4192016 bytes (4093 KB)
I (1766) MEM_MGR: â•‘   Total Heap:       4364756 bytes (4262 KB)
I (1773) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1792) MEM_MGR: â•‘ Configured Thresholds:
I (1797) MEM_MGR: â•‘   Internal RAM:     WARN=50KB, CRIT=20KB
I (1803) MEM_MGR: â•‘   DMA-capable:      WARN=35KB, CRIT=20KB
I (1810) MEM_MGR: â•‘   PSRAM:            WARN=500KB, CRIT=200KB
I (1816) MEM_MGR: â•‘   Fragmentation:    WARN=30%, CRIT=50%
I (1823) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1841) MEM_MGR: Starting memory monitoring (interval: 15000 ms)
I (1848) MEM_MGR: âœ… Memory monitoring started
I (1848) MEM_MGR: Memory monitor task started (interval: 15000 ms)
I (1853) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
W (1860) MEM_MGR: âš ï¸ WARNING: Memory fragmentation increasing! DMA:46% PSRAM:2%
I (1878) MEM_MGR: â•‘ Memory Statistics - System Boot
I (1892) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1910) MEM_MGR: â•‘ Internal RAM:
I (1915) MEM_MGR: â•‘   Free:             225135 bytes (219 KB)
I (1921) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1928) MEM_MGR: â•‘   Fragmentation:     51%
I (1933) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1951) MEM_MGR: â•‘ DMA-capable RAM:
I (1956) MEM_MGR: â•‘   Free:             204771 bytes (199 KB)
I (1962) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1969) MEM_MGR: â•‘   Fragmentation:     46%
I (1974) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1992) MEM_MGR: â•‘ PSRAM:
I (1996) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (2003) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (2009) MEM_MGR: â•‘   Fragmentation:      2%
I (2014) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2033) MEM_MGR: â•‘ Total Heap:
I (2037) MEM_MGR: â•‘   Free:             4364756 bytes (4262 KB)
I (2044) MEM_MGR: â•‘   Minimum Ever:     4364756 bytes (4262 KB)
I (2050) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2069) MEM_MGR: â•‘ Memory Delta from Baseline:
I (2074) MEM_MGR: â•‘   Internal RAM:          +0 bytes (  +0 KB)
I (2081) MEM_MGR: â•‘   DMA-capable:           +0 bytes (  +0 KB)
I (2088) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (2094) MEM_MGR: â•‘   Total Heap:            +0 bytes (  +0 KB)
I (2101) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2119) HOTPIN_MAIN: Initializing NVS...
I (2149) HOTPIN_MAIN: NVS initialized successfully
I (2149) event_dispatcher: System event queue ready (16 entries)
I (2150) HOTPIN_MAIN: Synchronization primitives created
I (2156) HOTPIN_MAIN: Initializing WiFi...
I (2165) wifi:wifi driver task: 3ffdaa38, prio:23, stack:6656, core=0
I (2178) wifi:wifi firmware version: bea31f3
I (2178) wifi:wifi certification version: v7.0
I (2178) wifi:config NVS flash: enabled
I (2179) wifi:config nano formatting: disabled
I (2183) wifi:Init data frame dynamic rx buffer num: 32
I (2188) wifi:Init static rx mgmt buffer num: 5
I (2192) wifi:Init management short buffer num: 32
I (2197) wifi:Init dynamic tx buffer num: 32
I (2201) wifi:Init static rx buffer size: 1600
I (2205) wifi:Init static rx buffer num: 10
I (2209) wifi:Init dynamic rx buffer num: 32
I (2214) wifi_init: rx ba win: 6
I (2217) wifi_init: accept mbox: 6
I (2221) wifi_init: tcpip mbox: 32
I (2225) wifi_init: udp mbox: 6
I (2229) wifi_init: tcp mbox: 6
I (2232) wifi_init: tcp tx win: 5760
I (2237) wifi_init: tcp rx win: 5760
I (2241) wifi_init: tcp mss: 1440
I (2245) wifi_init: WiFi IRAM OP enabled
I (2250) wifi_init: WiFi RX IRAM OP enabled
I (2256) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (2325) phy_init: Saving new calibration data due to checksum failure or outdated calibration data, mode(0)
I (2381) wifi:mode : sta (80:f3:da:99:8c:64)
I (2382) wifi:enable tsf
I (2384) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (2385) HOTPIN_MAIN: Waiting for WiFi connection...
I (2385) HOTPIN_MAIN: WiFi station started, connecting...
I (2408) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (2409) wifi:state: init -> auth (0xb0)
I (3486) wifi:state: auth -> assoc (0x0)
I (3497) wifi:state: assoc -> run (0x10)
I (3540) wifi:connected with wifi, aid = 2, channel 11, BW20, bssid = ee:d4:b9:ed:90:50
I (3541) wifi:security: WPA3-SAE, phy: bgn, rssi: -37
I (3544) wifi:pm start, type: 1

I (3545) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (3555) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (3561) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (3568) wifi:<ba-add>idx:0 (ifx:0, ee:d4:b9:ed:90:50), tid:0, ssn:0, winSize:64
I (3576) HOTPIN_MAIN: WiFi connected to AP
I (4682) esp_netif_handlers: sta ip: 10.143.111.214, mask: 255.255.255.0, gw: 10.143.111.248
I (4683) HOTPIN_MAIN: âœ… Got IP address: 10.143.111.214
I (4687) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (7399) HOTPIN_MAIN: Initializing button handler...
I (7399) BUTTON: Initializing button handler on GPIO 12
I (7400) gpio: GPIO[12]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (7409) BUTTON: Button FSM task started
I (7414) BUTTON: GPIO ISR service installed successfully
I (7419) BUTTON: Button handler initialized successfully (initial level=1, primed=1)
I (7428) HOTPIN_MAIN: Initializing LED controller...
I (7433) LED_CTRL: Initializing LED controller on GPIO 33
I (7440) LED_CTRL: LED controller ready
I (7444) LED_CTRL: LED pattern -> 2
I (7448) HOTPIN_MAIN: Initializing WebSocket client...
I (7454) WEBSOCKET: Initializing WebSocket client...
I (7460) WEBSOCKET: Server URI: ws://10.143.111.58:8000/ws
I (7466) WEBSOCKET: Authorization header configured
I (7472) WEBSOCKET: âœ… WebSocket client initialized
I (7477) WEBSOCKET: Status callback registered
I (7482) HOTPIN_MAIN: WebSocket status callback registered
I (7488) HOTPIN_MAIN: Initializing HTTP client...
I (7494) HTTP_CLIENT: Initializing HTTP client
I (7499) HTTP_CLIENT: Authorization token configured
I (7504) HTTP_CLIENT: HTTP client initialized (server: http://10.143.111.58:8000)
I (7513) HOTPIN_MAIN: Initializing STT pipeline...
I (7518) STT: Initializing STT pipeline...
I (7523) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7541) STT: â•‘ STT Ring Buffer Allocation (PSRAM)
I (7547) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7565) STT: [MEMORY] Pre-allocation state:
I (7570) STT:   Free internal RAM: 166231 bytes
I (7575) STT:   Free DMA-capable: 145867 bytes
I (7580) STT:   Free PSRAM: 4126020 bytes
I (7585) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (7593) STT:   âœ“ Ring buffer allocated at 0x3f810ac0 (PSRAM address)
I (7600) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (7609) STT: [MEMORY] Post-allocation state:
I (7614) STT:   Free internal RAM: 166231 bytes
I (7619) STT:   Free DMA-capable: 145867 bytes
I (7624) STT:   Free PSRAM: 4060480 bytes
I (7635) STT: [CORE AFFINITY] Creating persistent audio streaming task on Core 0
I (7637) STT: Persistent audio streaming task started on Core 0
I (7643) STT:   âœ“ Stream buffer allocated at 0x3ffd1b2c (with safety padding)
I (7652) STT: âœ… STT pipeline initialized
I (7656) HOTPIN_MAIN: Initializing TTS decoder...
I (7661) TTS: Initializing TTS decoder...
I (7666) TTS: Allocating 196608 byte PSRAM buffer for TTS stream
I (7673) TTS:   PSRAM available: 4060480 bytes (3965 KB)
I (7679) TTS:   âœ“ TTS stream buffer allocated at 0x3f820ac4
I (7711) WEBSOCKET: Audio callback registered
I (7712) TTS: âœ… TTS decoder initialized
I (7712) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (7718) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (7723) HOTPIN_MAIN: State manager task created on Core 1
I (7723) STATE_MGR: State manager task started on Core 1
I (7730) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (7736) STATE_MGR: Priority: 10
I (7742) HOTPIN_MAIN: ðŸ”Œ Attempting WebSocket connection (attempt 1)...
I (7746) STATE_MGR: Starting in camera mode...
I (7754) WEBSOCKET: Connecting to WebSocket server...
I (7759) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (7770) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7773) websocket_client: Started
I (7789) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (7793) WEBSOCKET: âœ… WebSocket health check task created
I (7800) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7806) WEBSOCKET: WebSocket client started
I (7824) MEM_MGR: â•‘ Internal RAM:
I (7793) WEBSOCKET: WebSocket health check task started
I (7833) MEM_MGR: â•‘   Free:             222727 bytes (217 KB)
I (7730) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (7846) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7853) HOTPIN_MAIN: Configuring task watchdog for critical tasks...
I (7859) MEM_MGR: â•‘   Fragmentation:     51%
I (7866) HOTPIN_MAIN: âœ… State manager task added to watchdog
I (7871) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7878) HOTPIN_MAIN: âœ… WebSocket connection task added to watchdog
I (7896) MEM_MGR: â•‘ DMA-capable RAM:
I (7903) HOTPIN_MAIN: Task watchdog configuration complete
I (7908) MEM_MGR: â•‘   Free:             202363 bytes (197 KB)
I (7914) HOTPIN_MAIN: ====================================
I (7920) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7927) HOTPIN_MAIN: System initialization complete!
I (7933) MEM_MGR: â•‘   Fragmentation:     46%
I (7939) HOTPIN_MAIN: Entering camera standby mode...
I (7944) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7950) HOTPIN_MAIN: ====================================
I (7968) MEM_MGR: â•‘ PSRAM:
I (7975) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7978) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (7996) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (8003) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (8010) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8016) MEM_MGR: â•‘   Fragmentation:      2%
I (8034) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (8039) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8047) AUDIO:   âœ“ I2S access mutex created successfully
I (8065) MEM_MGR: â•‘ Total Heap:
I (8071) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8075) MEM_MGR: â•‘   Free:             4362348 bytes (4260 KB)
I (8093) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (8100) MEM_MGR: â•‘   Minimum Ever:     4362348 bytes (4260 KB)
I (8107) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8114) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8132) AUDIO: [DIAG] Pre-init state:
I (8150) MEM_MGR: â•‘ Memory Delta from Baseline:
I (8160) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (8166) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (8154) AUDIO:   Free heap: 3962848 bytes
I (8173) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (8178) AUDIO:   Free internal RAM: 119583 bytes
I (8185) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (8190) AUDIO:   Free DMA-capable: 99219 bytes
I (8197) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8202) AUDIO:   Free PSRAM: 3863732 bytes
I (8221) STATE_MGR: Acquiring I2S mutex...
I (8225) AUDIO:   Timestamp: 6672 ms
I (8234) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (8241) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (8249) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (8257) AUDIO:   DMA frame num (per desc): 1020
I (8262) AUDIO:   DMA total samples (effective): 4080
I (8268) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (8275) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (8282) AUDIO: âœ… I2S channels created (took 0 ms)
I (8287) AUDIO:   TX handle: 0x3ffe1c94 | RX handle: 0x3ffe37fc
I (8293) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (8300) AUDIO:   Sample rate: 16000 Hz
I (8304) AUDIO:   MCLK: DISABLED
I (8308) AUDIO:   BCLK: GPIO14 (shared)
I (8313) AUDIO:   WS:   GPIO15 (shared)
I (8317) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (8324) AUDIO: âœ… TX channel configured (took 1 ms)
I (8329) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (8335) AUDIO:   Sample rate: 16000 Hz
I (8340) AUDIO:   MCLK: DISABLED
I (8344) AUDIO:   BCLK: GPIO14 (shared)
I (8348) AUDIO:   WS:   GPIO15 (shared)
I (8353) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (8360) AUDIO: âœ… RX channel configured (took 0 ms)
I (8365) AUDIO: [STEP 4/6] Enabling TX channel...
I (8370) AUDIO: âœ… TX channel enabled (took 0 ms)
I (8375) AUDIO: [STEP 5/6] Enabling RX channel...
I (8380) AUDIO: âœ… RX channel enabled (took 0 ms)
I (8386) AUDIO: [STEP 6/6] Hardware stabilization...
I (8391) AUDIO:   Phase 1: Initial settle (50ms)
I (8447) AUDIO:   Phase 2: DMA verification
I (8447) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (8447) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (8576) WEBSOCKET: âœ… WebSocket connected to server
I (8577) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (8582) WEBSOCKET: Handshake sent successfully
I (8584) HOTPIN_MAIN: ðŸŽ‰ WebSocket status callback: CONNECTED
I (8597) HOTPIN_MAIN: ðŸ“¡ WebSocket connection active - monitoring link
I (8604) AUDIO: [DIAG] Post-init state:
I (8604) AUDIO:   Free heap: 3933816 bytes
I (8607) AUDIO:   Free internal RAM: 90455 bytes
I (8612) AUDIO:   Free DMA-capable: 70091 bytes
I (8617) AUDIO:   Free PSRAM: 3863732 bytes
I (8622) AUDIO:   Timestamp: 7069 ms
I (8627) AUDIO:   Total init time: 201 ms
I (8631) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8641) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (8649) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (8659) WEBSOCKET: Server status: connected
I (8665) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (8675) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (8684) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (8691) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8708) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8726) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (8732) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (8739) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (8746) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (8752) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10016) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10023) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (10031) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10049) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (10055) AUDIO: âœ… RX channel disabled (took 0 ms)
I (10061) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (10067) AUDIO: âœ… TX channel disabled (took 0 ms)
I (10073) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (10130) AUDIO: [STEP 4/5] Deleting RX channel...
I (10130) AUDIO: âœ… RX channel deleted (took 0 ms)
I (10130) AUDIO: [STEP 5/5] Deleting TX channel...
I (10135) AUDIO: âœ… TX channel deleted (took 0 ms)
I (10141) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (10198) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10204) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (10211) AUDIO: â•‘ Camera Can Now Initialize
I (10216) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10234) STATE_MGR: Audio drivers already inactive; skipping deinit
I (10234) LED_CTRL: LED pattern -> 3
I (10241) STATE_MGR: Allowing memory stabilization (100ms)...
I (10245) HOTPIN_MAIN: Main task exiting - system running
I (10258) main_task: Returned from app_main()
I (10352) STATE_MGR: Camera will be initialized on-demand during capture
I (10352) STATE_MGR: I2S mutex released
I (10353) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10371) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (10378) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10397) MEM_MGR: â•‘ Internal RAM:
I (10401) MEM_MGR: â•‘   Free:             222727 bytes (217 KB)
I (10408) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10414) MEM_MGR: â•‘   Fragmentation:     51%
I (10420) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10438) MEM_MGR: â•‘ DMA-capable RAM:
I (10442) MEM_MGR: â•‘   Free:             202363 bytes (197 KB)
I (10449) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10456) MEM_MGR: â•‘   Fragmentation:     46%
I (10461) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10479) MEM_MGR: â•‘ PSRAM:
I (10483) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (10490) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (10497) MEM_MGR: â•‘   Fragmentation:      2%
I (10502) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10520) MEM_MGR: â•‘ Total Heap:
I (10524) MEM_MGR: â•‘   Free:             4362348 bytes (4260 KB)
I (10531) MEM_MGR: â•‘   Minimum Ever:     4362348 bytes (4260 KB)
I (10538) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10557) MEM_MGR: â•‘ Memory Delta from Baseline:
I (10562) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (10569) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (10576) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (10583) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (10590) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10608) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (10617) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (10633) STATE_MGR: WebSocket connected
I (12839) WEBSOCKET: WebSocket connection restored (cycle: 1, disconnects: 0, reconnects: 0)
I (16231) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (16231) BUTTON: Single click confirmed
I (16231) STATE_MGR: Single click - mode toggle requested
I (16237) STATE_MGR: Switching: Camera â†’ Voice (count: 1)
I (16294) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (16294) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16307) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (16314) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16333) MEM_MGR: â•‘ Internal RAM:
I (16337) MEM_MGR: â•‘   Free:             222727 bytes (217 KB)
I (16343) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (16350) MEM_MGR: â•‘   Fragmentation:     51%
I (16355) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16374) MEM_MGR: â•‘ DMA-capable RAM:
I (16378) MEM_MGR: â•‘   Free:             202363 bytes (197 KB)
I (16385) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (16392) MEM_MGR: â•‘   Fragmentation:     46%
I (16397) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16415) MEM_MGR: â•‘ PSRAM:
I (16419) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (16426) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (16433) MEM_MGR: â•‘   Fragmentation:      2%
I (16438) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16456) MEM_MGR: â•‘ Total Heap:
I (16460) MEM_MGR: â•‘   Free:             4362348 bytes (4260 KB)
I (16467) MEM_MGR: â•‘   Minimum Ever:     4362348 bytes (4260 KB)
I (16474) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16492) MEM_MGR: â•‘ Memory Delta from Baseline:
I (16498) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (16505) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (16512) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (16518) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (16525) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16544) STATE_MGR: Stopping camera...
I (16548) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16564) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (16571) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16588) STATE_MGR:   Timeout: 5000 ms
I (16592) STATE_MGR:   Timestamp: 15039 ms
I (16597) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (16603) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16619) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (16625) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16642) STATE_MGR:   Free heap before: 3967364 bytes
I (16647) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (16653) CAMERA: Deinitializing camera...
I (16658) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (16664) STATE_MGR:   Free heap after: 3967364 bytes
I (16670) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (16676) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16692) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (16698) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16715) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (16823) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (16923) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (16973) STATE_MGR:   âœ“ Total stabilization: 250ms
I (16973) STATE_MGR:   Timestamp: 15420 ms
I (16973) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16989) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (16995) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17012) STATE_MGR:   Free heap before: 3967364 bytes
I (17018) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17036) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (17043) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17061) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17079) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (17086) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17104) AUDIO: [DIAG] Pre-init state:
I (17108) AUDIO:   Free heap: 3967364 bytes
I (17113) AUDIO:   Free internal RAM: 124147 bytes
I (17119) AUDIO:   Free DMA-capable: 103783 bytes
I (17124) AUDIO:   Free PSRAM: 3863732 bytes
I (17129) AUDIO:   Timestamp: 15576 ms
I (17133) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (17140) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (17148) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (17156) AUDIO:   DMA frame num (per desc): 1020
I (17162) AUDIO:   DMA total samples (effective): 4080
I (17168) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (17175) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (17181) AUDIO: âœ… I2S channels created (took 0 ms)
I (17187) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7e8
I (17193) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (17200) AUDIO:   Sample rate: 16000 Hz
I (17204) AUDIO:   MCLK: DISABLED
I (17208) AUDIO:   BCLK: GPIO14 (shared)
I (17213) AUDIO:   WS:   GPIO15 (shared)
I (17218) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (17225) AUDIO: âœ… TX channel configured (took 1 ms)
I (17229) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (17236) AUDIO:   Sample rate: 16000 Hz
I (17240) AUDIO:   MCLK: DISABLED
I (17244) AUDIO:   BCLK: GPIO14 (shared)
I (17249) AUDIO:   WS:   GPIO15 (shared)
I (17254) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (17260) AUDIO: âœ… RX channel configured (took 0 ms)
I (17265) AUDIO: [STEP 4/6] Enabling TX channel...
I (17271) AUDIO: âœ… TX channel enabled (took 0 ms)
I (17276) AUDIO: [STEP 5/6] Enabling RX channel...
I (17282) AUDIO: âœ… RX channel enabled (took 0 ms)
I (17287) AUDIO: [STEP 6/6] Hardware stabilization...
I (17293) AUDIO:   Phase 1: Initial settle (50ms)
I (17348) AUDIO:   Phase 2: DMA verification
I (17348) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (17349) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (17505) AUDIO: [DIAG] Post-init state:
I (17505) AUDIO:   Free heap: 3941360 bytes
I (17505) AUDIO:   Free internal RAM: 98143 bytes
I (17509) AUDIO:   Free DMA-capable: 77779 bytes
I (17514) AUDIO:   Free PSRAM: 3863732 bytes
I (17519) AUDIO:   Timestamp: 15966 ms
I (17524) AUDIO:   Total init time: 201 ms
I (17528) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17546) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (17552) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (17558) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (17567) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (17573) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17591) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17609) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (17616) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (17622) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (17629) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (17635) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17653) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (17659) STATE_MGR:   Free heap after: 3941360 bytes
I (17665) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17681) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (17687) STATE_MGR: â•‘ Total transition time: 889 ms
I (17693) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17709) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17725) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (17731) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17748) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (17756) TTS: No pending audio to flush
I (17788) TTS: TTS decoder session reset for next audio stream
I (17788) TTS: âœ… TTS decoder flushed and reset for next session
I (17790) STT: Starting STT pipeline...
I (17795) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (17804) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (17811) STT:   Current time: 16258 ms
I (17814) STT: âœ… STT pipeline started
I (17816) STT:   Free heap: 3932808 bytes
I (17816) STT: Audio streaming session activated
I (17830) STT: Connection stabilization delay (500ms)...
I (17870) TTS: ðŸŽµ Starting TTS decoder...
I (17870) TTS: Initializing TTS decoder...
W (17870) TTS: TTS decoder already initialized
I (17900) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (17900) TTS: âœ… TTS decoder started successfully
I (17904) TTS: ðŸŽµ TTS playback task started on Core 1
I (17910) TTS: âœ… TTS playback task registered with watchdog
I (17916) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (18025) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (18025) STT:   âœ“ Audio driver initialized
I (18026) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (18133) STT:   Total stabilization: 300ms
I (18133) STT:   Timestamp: 16579 ms
I (18133) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (18137) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37fc (with safety padding)
I (18146) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18162) STT: â•‘ ðŸŽ¤ STARTING AUDIO CAPTURE
I (18167) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (18173) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18229) LED_CTRL: LED pattern -> 1
I (18230) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18241) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (18248) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18266) MEM_MGR: â•‘ Internal RAM:
I (18270) MEM_MGR: â•‘   Free:             124147 bytes (121 KB)
I (18277) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (18284) MEM_MGR: â•‘   Fragmentation:     25%
I (18289) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18307) MEM_MGR: â•‘ DMA-capable RAM:
I (18312) MEM_MGR: â•‘   Free:             103783 bytes (101 KB)
I (18319) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (18325) MEM_MGR: â•‘   Fragmentation:     10%
I (18330) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18336) STT: Testing WebSocket transport health...
I (18349) MEM_MGR: â•‘ PSRAM:
I (18358) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (18362) STT: âœ… WebSocket transport verified healthy
I (18365) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (18378) MEM_MGR: â•‘   Fragmentation:      2%
I (18383) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18401) MEM_MGR: â•‘ Total Heap:
I (18405) MEM_MGR: â•‘   Free:             3967364 bytes (3874 KB)
I (18412) MEM_MGR: â•‘   Minimum Ever:     3933008 bytes (3840 KB)
I (18419) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18438) MEM_MGR: â•‘ Memory Delta from Baseline:
I (18443) MEM_MGR: â•‘   Internal RAM:     -100988 bytes ( -98 KB)
I (18450) MEM_MGR: â•‘   DMA-capable:      -100988 bytes ( -98 KB)
I (18457) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (18464) MEM_MGR: â•‘   Total Heap:       -397392 bytes (-388 KB)
I (18470) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18471) STT: Starting audio streaming to server...
I (18489) STATE_MGR: âœ… Voice mode transition complete
I (18500) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (18516) STATE_MGR: STT pipeline reported start
I (18527) STATE_MGR: TTS playback start event received
I (18670) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 5, "bytes_received": 16400}
I (18671) WEBSOCKET: Server status: receiving
I (19847) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 36880}
I (19848) WEBSOCKET: Server status: receiving
I (19913) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 15, "bytes_received": 57360}
I (19915) WEBSOCKET: Server status: receiving
I (21073) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 77840}
I (21074) WEBSOCKET: Server status: receiving
I (21878) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (21878) BUTTON: Single click confirmed
W (21878) STATE_MGR: Guardrail soft override: stopping voice pipeline (user cancellation)
I (21887) STATE_MGR: Single click - mode toggle requested
I (21893) STATE_MGR: Switching: Voice â†’ Camera (count: 2)
I (21950) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (21950) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21963) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (21970) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21989) MEM_MGR: â•‘ Internal RAM:
I (21993) MEM_MGR: â•‘   Free:             124147 bytes (121 KB)
I (22000) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (22006) MEM_MGR: â•‘   Fragmentation:     25%
I (22012) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22030) MEM_MGR: â•‘ DMA-capable RAM:
I (22034) MEM_MGR: â•‘   Free:             103783 bytes (101 KB)
I (22041) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (22048) MEM_MGR: â•‘   Fragmentation:     10%
I (22053) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22071) MEM_MGR: â•‘ PSRAM:
I (22075) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (22082) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (22090) MEM_MGR: â•‘   Fragmentation:      2%
I (22094) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22099) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 25, "bytes_received": 98320}
I (22112) MEM_MGR: â•‘ Total Heap:
I (22124) WEBSOCKET: Server status: receiving
I (22128) MEM_MGR: â•‘   Free:             3967364 bytes (3874 KB)
I (22140) MEM_MGR: â•‘   Minimum Ever:     3933008 bytes (3840 KB)
I (22146) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22165) MEM_MGR: â•‘ Memory Delta from Baseline:
I (22170) MEM_MGR: â•‘   Internal RAM:     -100988 bytes ( -98 KB)
I (22177) MEM_MGR: â•‘   DMA-capable:      -100988 bytes ( -98 KB)
I (22184) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (22191) MEM_MGR: â•‘   Total Heap:       -397392 bytes (-388 KB)
I (22198) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22216) STATE_MGR: Stopping voice mode components...
I (22222) STT: Stopping STT pipeline...
I (22226) STT: Draining ring buffer (23552 bytes pending) before shutdown...
I (22241) STT: Ring buffer drained and cleared successfully
I (22256) STT: Audio capture task stopped (captured 135168 bytes total)
I (22313) STT: Streaming task received stop signal
I (22313) STT: Sending EOS signal...
I (22313) WEBSOCKET: Sending EOS signal
I (22501) STT: Audio streaming session complete (streamed 110592 bytes in 27 chunks)
I (22525) STT: STT pipeline stopped
I (22712) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (22713) WEBSOCKET: Server status: processing
I (22716) WEBSOCKET: Server stage: transcription
I (22721) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (23525) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hello hello"}
I (23525) WEBSOCKET: Server status: processing
I (23530) WEBSOCKET: Server stage: llm
I (23534) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (24138) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "Hello, how can I assist you today?"}
I (24141) WEBSOCKET: Server status: processing
I (24146) WEBSOCKET: Server stage: tts
I (24150) WEBSOCKET: Pipeline stage changed: llm -> tts
I (24156) WEBSOCKET: Entering TTS stage - preparing for audio streaming
W (24163) WEBSOCKET: Ignoring TTS stage - not in voice mode (state=3)
W (24170) WEBSOCKET: Server response arrived after mode transition - audio will be discarded
I (24283) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 1, total: 4096)
I (24283) WEBSOCKET: ðŸŽ™ï¸ New audio session started (timestamp: 22730 ms, bytes: 4096)
I (24289) TTS: Received audio chunk #1: 4096 bytes
I (24294) TTS: Chunk #1 first 12 bytes: 52 49 46 46 BC 70 01 00 57 41 56 45
I (24302) TTS: ðŸŽ™ï¸ First real audio data received for session (4096 bytes)
I (24316) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 2, total: 8192)
I (24318) TTS: Received audio chunk #2: 4096 bytes
I (24323) TTS: Chunk #2 first 12 bytes: 9D FE 04 FF C8 FF 8C 00 DA 00 E6 00
I (24336) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 3, total: 12288)
I (24339) TTS: Received audio chunk #3: 4096 bytes
I (24345) TTS: Chunk #3 first 12 bytes: E4 04 E4 02 D8 01 72 FF E8 FB 1F F7
I (24357) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 4, total: 16384)
I (24361) TTS: Received audio chunk #4: 4096 bytes
I (24366) TTS: Chunk #4 first 12 bytes: 7A 0C 9F 0B 21 0A 77 07 B6 03 16 00
I (24379) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 5, total: 20480)
I (24382) TTS: Received audio chunk #5: 4096 bytes
I (24387) TTS: Chunk #5 first 12 bytes: C4 FF C4 FF C4 FF C1 FF BD FF BE FF
I (24400) TTS: Received audio chunk #6: 4096 bytes
I (24406) TTS: Received audio chunk #7: 4096 bytes
I (24412) TTS: Received audio chunk #8: 1316 bytes
I (24414) TTS: Received audio chunk #9: 2780 bytes
I (24422) TTS: âœ… WAV header parsed successfully
I (24422) TTS: === WAV File Info ===
I (24426) TTS: Received audio chunk #10: 4096 bytes
I (24437) TTS: Received audio chunk #11: 4096 bytes
I (24444) TTS: Received audio chunk #12: 536 bytes
I (24447) TTS: Received audio chunk #13: 3560 bytes
I (24454) TTS: Received audio chunk #14: 4096 bytes
I (24460) TTS: Received audio chunk #15: 4096 bytes
I (24467) TTS: Received audio chunk #16: 4096 bytes
I (24473) TTS: Received audio chunk #17: 4096 bytes
I (24478) TTS: Received audio chunk #18: 4096 bytes
I (24482) TTS: Received audio chunk #19: 416 bytes
I (24483) TTS: Sample Rate: 16000 Hz
I (24486) TTS: Channels: 1
I (24490) TTS: Bits per Sample: 16
I (24494) TTS: Audio Format: 1 (PCM)
I (24498) TTS: Received audio chunk #20: 3680 bytes
I (24506) TTS: Declared Data Size: 94360 bytes
I (24509) TTS: Block Align: 2
I (24511) TTS: Received audio chunk #21: 4096 bytes
I (24523) TTS: Received audio chunk #22: 4096 bytes
I (24529) TTS: Received audio chunk #23: 4096 bytes
I (24535) TTS: Received audio chunk #24: 4096 bytes
I (24542) TTS: Received audio chunk #25: 4096 bytes
I (24548) TTS: Received audio chunk #26: 296 bytes
I (24550) TTS: Received audio chunk #27: 3800 bytes
I (24554) TTS: Byte Rate: 32000
I (24554) TTS: Received audio chunk #28: 196 bytes
I (24563) WEBSOCKET: Received text message: {"status": "complete"}
I (24567) WEBSOCKET: Server status: complete
I (24572) WEBSOCKET: Pipeline stage changed: tts -> complete
I (24578) WEBSOCKET: Exiting TTS stage (transition to complete)
I (24585) TTS: ====================
I (24612) TTS: ðŸ”” Playback start feedback dispatched (bytes_received=94404)
I (24612) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (24664) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (24725) STATE_MGR: Voice pipeline reported COMPLETE
I (24725) STATE_MGR: Waiting for TTS playback drain (~90352 bytes pending, timeout 15000 ms)
I (24792) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (24919) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (25046) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (25174) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
W (25229) TTS: TTS wait for idle timeout after 500 ms
W (25229) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (25232) TTS:   Data: received=94404, header=0, played=20436, pending=73968
W (25240) STATE_MGR: TTS wait for idle timeout #1 (drain_checks=0)
I (25301) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (25429) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (25556) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (25684) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (25812) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
W (25847) TTS: TTS wait for idle timeout after 500 ms
W (25847) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (25850) TTS:   Data: received=94404, header=0, played=40916, pending=53488
W (25858) STATE_MGR: TTS wait for idle timeout #2 (drain_checks=1)
I (25939) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (26066) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (26194) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (26321) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (26449) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
W (26465) TTS: TTS wait for idle timeout after 500 ms
W (26465) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (26468) TTS:   Data: received=94404, header=0, played=61396, pending=33008
W (26476) STATE_MGR: TTS wait for idle timeout #3 (drain_checks=2)
I (26576) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (26704) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (26832) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (26959) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
W (27083) TTS: TTS wait for idle timeout after 500 ms
W (27083) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (27086) TTS:   Data: received=94404, header=0, played=77780, pending=16624
W (27094) STATE_MGR: TTS wait for idle timeout #4 (drain_checks=3)
I (27101) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (27214) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (27341) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (27469) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (27632) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (27632) TTS: ðŸŽµ TTS playback task exiting (played 94360 bytes, result: ESP_OK)
I (27637) TTS:   âœ“ DMA buffer freed from PSRAM
I (27643) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (27651) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (27651) TTS: TTS playback task handle is NULL - task already exited (after 9 checks)
I (27666) STATE_MGR: TTS decoder confirmed idle
I (27671) STATE_MGR: Flushing and resetting TTS decoder for next session
I (27679) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (27687) TTS: No pending audio to flush
I (27716) TTS: TTS decoder session reset for next audio stream
I (27716) TTS: âœ… TTS decoder flushed and reset for next session
I (27918) TTS: â¹ï¸ Stopping TTS decoder...
W (27918) TTS: TTS decoder not running
I (28044) STATE_MGR: Acquiring I2S mutex...
I (28044) STATE_MGR: Deinitializing audio drivers...
I (28044) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28062) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (28069) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28087) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (28094) AUDIO: âœ… RX channel disabled (took 0 ms)
I (28100) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (28106) AUDIO: âœ… TX channel disabled (took 0 ms)
I (28112) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (28168) AUDIO: [STEP 4/5] Deleting RX channel...
I (28169) AUDIO: âœ… RX channel deleted (took 0 ms)
I (28169) AUDIO: [STEP 5/5] Deleting TX channel...
I (28174) AUDIO: âœ… TX channel deleted (took 0 ms)
I (28179) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (28237) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28244) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (28250) AUDIO: â•‘ Camera Can Now Initialize
I (28256) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28324) STATE_MGR: Allowing memory stabilization (100ms)...
I (28424) STATE_MGR: Camera will be initialized on-demand during capture
I (28424) STATE_MGR: I2S mutex released
I (28425) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28443) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (28450) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28469) MEM_MGR: â•‘ Internal RAM:
I (28473) MEM_MGR: â•‘   Free:             124147 bytes (121 KB)
I (28480) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (28486) MEM_MGR: â•‘   Fragmentation:     25%
I (28492) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28510) MEM_MGR: â•‘ DMA-capable RAM:
I (28514) MEM_MGR: â•‘   Free:             103783 bytes (101 KB)
I (28521) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (28528) MEM_MGR: â•‘   Fragmentation:     10%
I (28533) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28551) MEM_MGR: â•‘ PSRAM:
I (28555) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (28562) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (28569) MEM_MGR: â•‘   Fragmentation:      2%
I (28574) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28592) MEM_MGR: â•‘ Total Heap:
I (28596) MEM_MGR: â•‘   Free:             3967364 bytes (3874 KB)
I (28603) MEM_MGR: â•‘   Minimum Ever:     3933008 bytes (3840 KB)
I (28610) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28629) MEM_MGR: â•‘ Memory Delta from Baseline:
I (28634) MEM_MGR: â•‘   Internal RAM:     -100988 bytes ( -98 KB)
I (28641) MEM_MGR: â•‘   DMA-capable:      -100988 bytes ( -98 KB)
I (28648) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (28655) MEM_MGR: â•‘   Total Heap:       -397392 bytes (-388 KB)
I (28662) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28680) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (28690) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28707) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (28714) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28732) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28750) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (28758) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28776) AUDIO: [DIAG] Pre-init state:
I (28780) AUDIO:   Free heap: 3964084 bytes
I (28785) AUDIO:   Free internal RAM: 120867 bytes
I (28790) AUDIO:   Free DMA-capable: 100503 bytes
I (28796) AUDIO:   Free PSRAM: 3863732 bytes
I (28801) AUDIO:   Timestamp: 27247 ms
I (28805) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (28812) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (28820) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (28828) AUDIO:   DMA frame num (per desc): 1020
I (28834) AUDIO:   DMA total samples (effective): 4080
I (28839) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (28846) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (28853) AUDIO: âœ… I2S channels created (took 0 ms)
I (28858) AUDIO:   TX handle: 0x3ffafc78 | RX handle: 0x3ffcb62c
I (28865) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (28872) AUDIO:   Sample rate: 16000 Hz
I (28876) AUDIO:   MCLK: DISABLED
I (28880) AUDIO:   BCLK: GPIO14 (shared)
I (28885) AUDIO:   WS:   GPIO15 (shared)
I (28889) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (28896) AUDIO: âœ… TX channel configured (took 1 ms)
I (28901) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (28908) AUDIO:   Sample rate: 16000 Hz
I (28912) AUDIO:   MCLK: DISABLED
I (28916) AUDIO:   BCLK: GPIO14 (shared)
I (28921) AUDIO:   WS:   GPIO15 (shared)
I (28925) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (28931) AUDIO: âœ… RX channel configured (took 0 ms)
I (28937) AUDIO: [STEP 4/6] Enabling TX channel...
I (28942) AUDIO: âœ… TX channel enabled (took 0 ms)
I (28948) AUDIO: [STEP 5/6] Enabling RX channel...
I (28953) AUDIO: âœ… RX channel enabled (took 0 ms)
I (28959) AUDIO: [STEP 6/6] Hardware stabilization...
I (28965) AUDIO:   Phase 1: Initial settle (50ms)
I (29020) AUDIO:   Phase 2: DMA verification
I (29020) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (29021) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (29177) AUDIO: [DIAG] Post-init state:
I (29177) AUDIO:   Free heap: 3941208 bytes
I (29178) AUDIO:   Free internal RAM: 97991 bytes
I (29181) AUDIO:   Free DMA-capable: 77627 bytes
I (29186) AUDIO:   Free PSRAM: 3863732 bytes
I (29191) AUDIO:   Timestamp: 27638 ms
I (29196) AUDIO:   Total init time: 201 ms
I (29201) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29219) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (29225) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (29230) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (29239) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (29246) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29263) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29281) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (29288) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (29294) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (29301) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (29307) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29608) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29615) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (29623) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29641) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (29648) AUDIO: âœ… RX channel disabled (took 0 ms)
I (29653) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (29660) AUDIO: âœ… TX channel disabled (took 0 ms)
I (29665) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (29722) AUDIO: [STEP 4/5] Deleting RX channel...
I (29723) AUDIO: âœ… RX channel deleted (took 0 ms)
I (29723) AUDIO: [STEP 5/5] Deleting TX channel...
I (29728) AUDIO: âœ… TX channel deleted (took 0 ms)
I (29733) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (29791) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29798) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (29804) AUDIO: â•‘ Camera Can Now Initialize
I (29810) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29828) LED_CTRL: LED pattern -> 3
I (29832) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (29848) STATE_MGR: STT pipeline reported stop
I (29858) STATE_MGR: Pipeline stage event: transcription
I (29868) STATE_MGR: Pipeline stage event: llm
I (29878) STATE_MGR: Pipeline stage event: tts
I (29888) STATE_MGR: TTS playback start event received
I (29898) STATE_MGR: Pipeline stage event: complete
I (33017) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (33017) BUTTON: Single click confirmed
I (33017) STATE_MGR: Single click - mode toggle requested
I (33023) STATE_MGR: Switching: Camera â†’ Voice (count: 3)
I (33080) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (33080) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33093) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (33100) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33119) MEM_MGR: â•‘ Internal RAM:
I (33123) MEM_MGR: â•‘   Free:             123987 bytes (121 KB)
I (33129) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (33136) MEM_MGR: â•‘   Fragmentation:     25%
I (33141) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33160) MEM_MGR: â•‘ DMA-capable RAM:
I (33164) MEM_MGR: â•‘   Free:             103623 bytes (101 KB)
I (33171) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (33178) MEM_MGR: â•‘   Fragmentation:     10%
I (33183) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33201) MEM_MGR: â•‘ PSRAM:
I (33205) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (33212) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (33219) MEM_MGR: â•‘   Fragmentation:      2%
I (33224) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33242) MEM_MGR: â•‘ Total Heap:
I (33246) MEM_MGR: â•‘   Free:             3967204 bytes (3874 KB)
I (33253) MEM_MGR: â•‘   Minimum Ever:     3898288 bytes (3806 KB)
I (33260) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33278) MEM_MGR: â•‘ Memory Delta from Baseline:
I (33284) MEM_MGR: â•‘   Internal RAM:     -101148 bytes ( -98 KB)
I (33291) MEM_MGR: â•‘   DMA-capable:      -101148 bytes ( -98 KB)
I (33298) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (33304) MEM_MGR: â•‘   Total Heap:       -397552 bytes (-388 KB)
I (33311) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33330) STATE_MGR: Stopping camera...
I (33334) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33351) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (33357) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33374) STATE_MGR:   Timeout: 5000 ms
I (33378) STATE_MGR:   Timestamp: 31825 ms
I (33383) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (33389) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33405) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (33411) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33428) STATE_MGR:   Free heap before: 3967204 bytes
I (33433) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (33439) CAMERA: Deinitializing camera...
I (33444) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (33450) STATE_MGR:   Free heap after: 3967204 bytes
I (33456) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (33462) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33478) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (33484) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33501) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (33609) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (33709) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (33759) STATE_MGR:   âœ“ Total stabilization: 250ms
I (33759) STATE_MGR:   Timestamp: 32206 ms
I (33759) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33775) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (33782) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33798) STATE_MGR:   Free heap before: 3967204 bytes
I (33804) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33822) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (33829) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33847) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33865) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (33872) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33890) AUDIO: [DIAG] Pre-init state:
I (33894) AUDIO:   Free heap: 3967204 bytes
I (33899) AUDIO:   Free internal RAM: 123987 bytes
I (33905) AUDIO:   Free DMA-capable: 103623 bytes
I (33910) AUDIO:   Free PSRAM: 3863732 bytes
I (33915) AUDIO:   Timestamp: 32362 ms
I (33919) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (33926) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (33934) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (33942) AUDIO:   DMA frame num (per desc): 1020
I (33948) AUDIO:   DMA total samples (effective): 4080
I (33954) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (33961) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (33967) AUDIO: âœ… I2S channels created (took 0 ms)
I (33973) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb62c
I (33979) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (33986) AUDIO:   Sample rate: 16000 Hz
I (33990) AUDIO:   MCLK: DISABLED
I (33994) AUDIO:   BCLK: GPIO14 (shared)
I (33999) AUDIO:   WS:   GPIO15 (shared)
I (34004) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (34010) AUDIO: âœ… TX channel configured (took 1 ms)
I (34015) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (34022) AUDIO:   Sample rate: 16000 Hz
I (34026) AUDIO:   MCLK: DISABLED
I (34030) AUDIO:   BCLK: GPIO14 (shared)
I (34035) AUDIO:   WS:   GPIO15 (shared)
I (34040) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (34046) AUDIO: âœ… RX channel configured (took 0 ms)
I (34051) AUDIO: [STEP 4/6] Enabling TX channel...
I (34057) AUDIO: âœ… TX channel enabled (took 0 ms)
I (34062) AUDIO: [STEP 5/6] Enabling RX channel...
I (34068) AUDIO: âœ… RX channel enabled (took 0 ms)
I (34073) AUDIO: [STEP 6/6] Hardware stabilization...
I (34079) AUDIO:   Phase 1: Initial settle (50ms)
I (34134) AUDIO:   Phase 2: DMA verification
I (34134) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (34134) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (34291) AUDIO: [DIAG] Post-init state:
I (34291) AUDIO:   Free heap: 3941220 bytes
I (34291) AUDIO:   Free internal RAM: 98003 bytes
I (34295) AUDIO:   Free DMA-capable: 77639 bytes
I (34300) AUDIO:   Free PSRAM: 3863732 bytes
I (34305) AUDIO:   Timestamp: 32752 ms
I (34310) AUDIO:   Total init time: 201 ms
I (34314) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34332) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (34338) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (34344) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (34353) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (34359) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34377) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34395) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (34402) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (34408) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (34415) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (34421) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34439) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (34445) STATE_MGR:   Free heap after: 3941220 bytes
I (34451) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34467) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (34473) STATE_MGR: â•‘ Total transition time: 889 ms
I (34479) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34495) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34511) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (34517) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34534) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (34542) TTS: No pending audio to flush
I (34571) TTS: TTS decoder session reset for next audio stream
I (34571) TTS: âœ… TTS decoder flushed and reset for next session
I (34573) STT: Starting STT pipeline...
I (34577) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (34587) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (34594) STT:   Current time: 33040 ms
I (34595) STT: âœ… STT pipeline started
I (34598) STT:   Free heap: 3932668 bytes
I (34598) STT: Audio streaming session activated
I (34613) STT: Connection stabilization delay (500ms)...
I (34653) TTS: ðŸŽµ Starting TTS decoder...
I (34653) TTS: Initializing TTS decoder...
W (34653) TTS: TTS decoder already initialized
I (34684) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (34684) TTS: âœ… TTS decoder started successfully
I (34688) TTS: ðŸŽµ TTS playback task started on Core 1
I (34694) TTS: âœ… TTS playback task registered with watchdog
I (34700) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (34807) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (34807) STT:   âœ“ Audio driver initialized
I (34808) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (34915) STT:   Total stabilization: 300ms
I (34915) STT:   Timestamp: 33361 ms
I (34915) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (34919) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37fc (with safety padding)
I (34928) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (34944) STT: â•‘ ðŸŽ¤ STARTING AUDIO CAPTURE
I (34949) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (34955) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35013) LED_CTRL: LED pattern -> 1
I (35014) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35025) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (35032) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35050) MEM_MGR: â•‘ Internal RAM:
I (35054) MEM_MGR: â•‘   Free:             123987 bytes (121 KB)
I (35061) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (35068) MEM_MGR: â•‘   Fragmentation:     25%
I (35073) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35091) MEM_MGR: â•‘ DMA-capable RAM:
I (35096) MEM_MGR: â•‘   Free:             103623 bytes (101 KB)
I (35103) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (35109) MEM_MGR: â•‘   Fragmentation:     10%
I (35114) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35119) STT: Testing WebSocket transport health...
I (35133) MEM_MGR: â•‘ PSRAM:
I (35142) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (35146) STT: âœ… WebSocket transport verified healthy
I (35149) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (35162) MEM_MGR: â•‘   Fragmentation:      2%
I (35167) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35185) MEM_MGR: â•‘ Total Heap:
I (35189) MEM_MGR: â•‘   Free:             3967204 bytes (3874 KB)
I (35196) MEM_MGR: â•‘   Minimum Ever:     3898288 bytes (3806 KB)
I (35203) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35222) MEM_MGR: â•‘ Memory Delta from Baseline:
I (35227) MEM_MGR: â•‘   Internal RAM:     -101148 bytes ( -98 KB)
I (35234) MEM_MGR: â•‘   DMA-capable:      -101148 bytes ( -98 KB)
I (35241) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (35248) MEM_MGR: â•‘   Total Heap:       -397552 bytes (-388 KB)
I (35255) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35255) STT: Starting audio streaming to server...
I (35273) STATE_MGR: âœ… Voice mode transition complete
I (35284) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (35300) STATE_MGR: STT pipeline reported start
I (35311) STATE_MGR: TTS playback start event received
I (35521) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 5, "bytes_received": 16400}
I (35522) WEBSOCKET: Server status: receiving
I (36020) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 36880}
I (36021) WEBSOCKET: Server status: receiving
I (37049) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 15, "bytes_received": 57360}
I (37050) WEBSOCKET: Server status: receiving
I (38073) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 77840}
I (38074) WEBSOCKET: Server status: receiving
I (38745) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (38745) BUTTON: Single click confirmed
I (38745) STATE_MGR: Single click - mode toggle requested
I (38752) STATE_MGR: Switching: Voice â†’ Camera (count: 4)
I (38808) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (38808) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38821) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (38828) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38847) MEM_MGR: â•‘ Internal RAM:
I (38851) MEM_MGR: â•‘   Free:             123987 bytes (121 KB)
I (38858) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (38864) MEM_MGR: â•‘   Fragmentation:     25%
I (38870) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38888) MEM_MGR: â•‘ DMA-capable RAM:
I (38892) MEM_MGR: â•‘   Free:             103623 bytes (101 KB)
I (38899) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (38906) MEM_MGR: â•‘   Fragmentation:     10%
I (38911) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38929) MEM_MGR: â•‘ PSRAM:
I (38933) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (38940) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (38947) MEM_MGR: â•‘   Fragmentation:      2%
I (38952) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38970) MEM_MGR: â•‘ Total Heap:
I (38975) MEM_MGR: â•‘   Free:             3967204 bytes (3874 KB)
I (38981) MEM_MGR: â•‘   Minimum Ever:     3898288 bytes (3806 KB)
I (38988) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39007) MEM_MGR: â•‘ Memory Delta from Baseline:
I (39012) MEM_MGR: â•‘   Internal RAM:     -101148 bytes ( -98 KB)
I (39019) MEM_MGR: â•‘   DMA-capable:      -101148 bytes ( -98 KB)
I (39026) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (39033) MEM_MGR: â•‘   Total Heap:       -397552 bytes (-388 KB)
I (39040) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39058) STATE_MGR: Stopping voice mode components...
I (39064) STT: Stopping STT pipeline...
I (39068) STT: Draining ring buffer (29696 bytes pending) before shutdown...
I (39086) STT: Ring buffer drained and cleared successfully
I (39107) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 25, "bytes_received": 98320}
I (39108) WEBSOCKET: Server status: receiving
I (39114) STT: Audio capture task stopped (captured 137216 bytes total)
I (39306) STT: Streaming task received stop signal
I (39306) STT: Sending EOS signal...
I (39306) WEBSOCKET: Sending EOS signal
I (39311) STT: Audio streaming session complete (streamed 107520 bytes in 27 chunks)
I (39327) STT: STT pipeline stopped
I (39327) STATE_MGR: Voice pipeline reported COMPLETE
I (39328) STATE_MGR: Waiting for TTS playback drain (~0 bytes pending, timeout 15000 ms)
I (39506) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (39507) WEBSOCKET: Server status: processing
I (39509) WEBSOCKET: Server stage: transcription
I (39515) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (39636) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (39637) STATE_MGR: TTS decoder confirmed idle
I (39640) STATE_MGR: Flushing and resetting TTS decoder for next session
I (39647) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (39655) TTS: Flushing pending audio before reset (~0 bytes)
I (39961) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (39961) TTS: TTS decoder session reset for next audio stream
I (39966) TTS: âœ… TTS decoder flushed and reset for next session
I (39986) TTS: TTS playback task shutting down - is_running=0
I (39986) TTS: ðŸŽµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (39990) TTS:   âœ“ DMA buffer freed from PSRAM
I (39995) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (40172) TTS: â¹ï¸ Stopping TTS decoder...
W (40172) TTS: TTS decoder not running
I (40297) STATE_MGR: Acquiring I2S mutex...
I (40297) STATE_MGR: Deinitializing audio drivers...
I (40297) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40315) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (40322) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40340) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (40347) AUDIO: âœ… RX channel disabled (took 0 ms)
I (40353) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (40359) AUDIO: âœ… TX channel disabled (took 0 ms)
I (40365) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (40421) AUDIO: [STEP 4/5] Deleting RX channel...
I (40422) AUDIO: âœ… RX channel deleted (took 0 ms)
I (40422) AUDIO: [STEP 5/5] Deleting TX channel...
I (40427) AUDIO: âœ… TX channel deleted (took 0 ms)
I (40432) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (40490) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40497) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (40503) AUDIO: â•‘ Camera Can Now Initialize
I (40509) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40523) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what's your name"}
I (40538) WEBSOCKET: Server status: processing
I (40543) WEBSOCKET: Server stage: llm
I (40548) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (40577) STATE_MGR: Allowing memory stabilization (100ms)...
I (40677) STATE_MGR: Camera will be initialized on-demand during capture
I (40677) STATE_MGR: I2S mutex released
I (40678) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40696) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (40703) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40722) MEM_MGR: â•‘ Internal RAM:
I (40726) MEM_MGR: â•‘   Free:             123987 bytes (121 KB)
I (40733) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (40739) MEM_MGR: â•‘   Fragmentation:     25%
I (40745) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40763) MEM_MGR: â•‘ DMA-capable RAM:
I (40767) MEM_MGR: â•‘   Free:             103623 bytes (101 KB)
I (40774) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (40781) MEM_MGR: â•‘   Fragmentation:     10%
I (40786) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40804) MEM_MGR: â•‘ PSRAM:
I (40808) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (40815) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (40822) MEM_MGR: â•‘   Fragmentation:      2%
I (40827) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40845) MEM_MGR: â•‘ Total Heap:
I (40849) MEM_MGR: â•‘   Free:             3967204 bytes (3874 KB)
I (40856) MEM_MGR: â•‘   Minimum Ever:     3898288 bytes (3806 KB)
I (40863) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40882) MEM_MGR: â•‘ Memory Delta from Baseline:
I (40887) MEM_MGR: â•‘   Internal RAM:     -101148 bytes ( -98 KB)
I (40894) MEM_MGR: â•‘   DMA-capable:      -101148 bytes ( -98 KB)
I (40901) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (40908) MEM_MGR: â•‘   Total Heap:       -397552 bytes (-388 KB)
I (40915) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40933) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (40943) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40960) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (40967) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40985) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41003) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (41011) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41029) AUDIO: [DIAG] Pre-init state:
I (41033) AUDIO:   Free heap: 3967204 bytes
I (41038) AUDIO:   Free internal RAM: 123987 bytes
I (41043) AUDIO:   Free DMA-capable: 103623 bytes
I (41049) AUDIO:   Free PSRAM: 3863732 bytes
I (41054) AUDIO:   Timestamp: 39500 ms
I (41058) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (41065) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (41073) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (41081) AUDIO:   DMA frame num (per desc): 1020
I (41087) AUDIO:   DMA total samples (effective): 4080
I (41092) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (41099) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (41106) AUDIO: âœ… I2S channels created (took 0 ms)
I (41111) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb62c
I (41118) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (41125) AUDIO:   Sample rate: 16000 Hz
I (41129) AUDIO:   MCLK: DISABLED
I (41133) AUDIO:   BCLK: GPIO14 (shared)
I (41138) AUDIO:   WS:   GPIO15 (shared)
I (41139) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I'm Hotpin, your compact and helpful voice assistant."}
I (41142) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (41157) WEBSOCKET: Server status: processing
I (41164) AUDIO: âœ… TX channel configured (took 1 ms)
I (41168) WEBSOCKET: Server stage: tts
I (41173) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (41178) WEBSOCKET: Pipeline stage changed: llm -> tts
I (41185) AUDIO:   Sample rate: 16000 Hz
I (41191) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (41195) AUDIO:   MCLK: DISABLED
W (41202) WEBSOCKET: Ignoring TTS stage - not in voice mode (state=3)
I (41206) AUDIO:   BCLK: GPIO14 (shared)
W (41213) WEBSOCKET: Server response arrived after mode transition - audio will be discarded
I (41218) AUDIO:   WS:   GPIO15 (shared)
I (41232) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
W (41235) TTS: Rejecting audio chunks - TTS decoder not running (chunks rejected: 1, last: 4096 bytes)
I (41238) AUDIO: âœ… RX channel configured (took 0 ms)
I (41253) AUDIO: [STEP 4/6] Enabling TX channel...
I (41259) AUDIO: âœ… TX channel enabled (took 0 ms)
I (41264) AUDIO: [STEP 5/6] Enabling RX channel...
I (41270) AUDIO: âœ… RX channel enabled (took 0 ms)
I (41275) AUDIO: [STEP 6/6] Hardware stabilization...
I (41281) AUDIO:   Phase 1: Initial settle (50ms)
I (41336) AUDIO:   Phase 2: DMA verification
I (41336) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (41337) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
W (41441) TTS: Rejecting audio chunks - TTS decoder not running (chunks rejected: 50, last: 3480 bytes)
I (41449) WEBSOCKET: Received text message: {"status": "complete"}
I (41450) WEBSOCKET: Server status: complete
I (41452) WEBSOCKET: Pipeline stage changed: tts -> complete
I (41459) WEBSOCKET: Exiting TTS stage (transition to complete)
I (41493) AUDIO: [DIAG] Post-init state:
I (41493) AUDIO:   Free heap: 3941156 bytes
I (41493) AUDIO:   Free internal RAM: 97803 bytes
I (41497) AUDIO:   Free DMA-capable: 77315 bytes
I (41502) AUDIO:   Free PSRAM: 3863868 bytes
I (41507) AUDIO:   Timestamp: 39954 ms
I (41512) AUDIO:   Total init time: 201 ms
I (41516) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41534) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (41540) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (41546) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (41555) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (41561) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41579) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41597) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (41604) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (41610) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (41617) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (41623) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41924) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41931) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (41939) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41957) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (41964) AUDIO: âœ… RX channel disabled (took 0 ms)
I (41969) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (41976) AUDIO: âœ… TX channel disabled (took 0 ms)
I (41981) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (42038) AUDIO: [STEP 4/5] Deleting RX channel...
I (42039) AUDIO: âœ… RX channel deleted (took 0 ms)
I (42039) AUDIO: [STEP 5/5] Deleting TX channel...
I (42044) AUDIO: âœ… TX channel deleted (took 0 ms)
I (42049) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (42107) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42114) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (42120) AUDIO: â•‘ Camera Can Now Initialize
I (42126) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42144) LED_CTRL: LED pattern -> 3
I (42148) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (42164) STATE_MGR: STT pipeline reported stop
I (42174) STATE_MGR: Pipeline stage event: transcription
I (42184) STATE_MGR: Pipeline stage event: llm
I (42194) STATE_MGR: Pipeline stage event: tts
I (42204) STATE_MGR: Pipeline stage event: complete
I (46034) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (46034) STATE_MGR: Double-click detected - triggering capture sequence
I (46037) STATE_MGR: Starting camera capture sequence
I (46043) LED_CTRL: LED pattern -> 6
I (46047) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46065) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (46072) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46090) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46108) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (46115) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46133) AUDIO: [DIAG] Pre-init state:
I (46138) AUDIO:   Free heap: 3967204 bytes
I (46143) AUDIO:   Free internal RAM: 123987 bytes
I (46148) AUDIO:   Free DMA-capable: 103623 bytes
I (46154) AUDIO:   Free PSRAM: 3863732 bytes
I (46158) AUDIO:   Timestamp: 44605 ms
I (46163) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (46170) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (46178) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (46186) AUDIO:   DMA frame num (per desc): 1020
I (46191) AUDIO:   DMA total samples (effective): 4080
I (46197) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (46204) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (46211) AUDIO: âœ… I2S channels created (took 0 ms)
I (46216) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb62c
I (46223) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (46229) AUDIO:   Sample rate: 16000 Hz
I (46234) AUDIO:   MCLK: DISABLED
I (46238) AUDIO:   BCLK: GPIO14 (shared)
I (46243) AUDIO:   WS:   GPIO15 (shared)
I (46247) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (46254) AUDIO: âœ… TX channel configured (took 1 ms)
I (46258) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (46265) AUDIO:   Sample rate: 16000 Hz
I (46270) AUDIO:   MCLK: DISABLED
I (46274) AUDIO:   BCLK: GPIO14 (shared)
I (46279) AUDIO:   WS:   GPIO15 (shared)
I (46283) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (46289) AUDIO: âœ… RX channel configured (took 0 ms)
I (46294) AUDIO: [STEP 4/6] Enabling TX channel...
I (46300) AUDIO: âœ… TX channel enabled (took 0 ms)
I (46306) AUDIO: [STEP 5/6] Enabling RX channel...
I (46311) AUDIO: âœ… RX channel enabled (took 0 ms)
I (46317) AUDIO: [STEP 6/6] Hardware stabilization...
I (46322) AUDIO:   Phase 1: Initial settle (50ms)
I (46378) AUDIO:   Phase 2: DMA verification
I (46378) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (46378) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (46535) AUDIO: [DIAG] Post-init state:
I (46535) AUDIO:   Free heap: 3941220 bytes
I (46535) AUDIO:   Free internal RAM: 98003 bytes
I (46539) AUDIO:   Free DMA-capable: 77639 bytes
I (46544) AUDIO:   Free PSRAM: 3863732 bytes
I (46549) AUDIO:   Timestamp: 44996 ms
I (46554) AUDIO:   Total init time: 201 ms
I (46558) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46576) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (46582) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (46588) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (46597) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (46603) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46621) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46639) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (46646) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (46652) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (46659) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (46665) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (47015) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (47022) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (47030) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (47048) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (47055) AUDIO: âœ… RX channel disabled (took 0 ms)
I (47060) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (47067) AUDIO: âœ… TX channel disabled (took 0 ms)
I (47072) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (47129) AUDIO: [STEP 4/5] Deleting RX channel...
I (47130) AUDIO: âœ… RX channel deleted (took 0 ms)
I (47130) AUDIO: [STEP 5/5] Deleting TX channel...
I (47135) AUDIO: âœ… TX channel deleted (took 0 ms)
I (47140) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (47198) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (47205) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (47211) AUDIO: â•‘ Camera Can Now Initialize
I (47217) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (47235) STATE_MGR: Capturing frame from camera
I (47240) CAMERA: Initializing camera...
I (47245) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (47254) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (47263) cam_hal: cam init ok
I (47267) sccb-ng: pin_sda 26 pin_scl 27
I (47270) sccb-ng: sccb_i2c_port=1
I (47276) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (47318) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (47318) camera: Detected OV2640 camera
I (47318) camera: Detected camera at address=0x30
I (47398) cam_hal: PSRAM DMA mode disabled
I (47399) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (47403) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (47410) cam_hal: cam config ok
I (47414) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (47496) CAMERA: Camera initialized successfully
I (47556) STATE_MGR: Frame captured: 8744 bytes
I (47557) JSON_PROTO: Generated session ID: hotpin-998C64-46
I (47557) STATE_MGR: Uploading image using session hotpin-998C64-46
I (47563) HTTP_CLIENT: Uploading image: session=hotpin-998C64-46, size=8744 bytes
I (47572) HTTP_CLIENT: POST body assembled: 9001 bytes
I (47579) HTTP_CLIENT: Sending POST request to http://10.143.111.58:8000/image
I (48713) HTTP_CLIENT: HTTP POST Status = 200, content_length = 198
I (48714) HTTP_CLIENT: Image uploaded successfully
I (48715) HTTP_CLIENT: Server response: {"status":"success","message":"Image received successfully","session":"hotpin-998C64-46","filename":"image.jpg","size_bytes":8744,"saved_path":"captured_images/hotpin-998C64-46_20251103_175839.jpg"}
I (48739) CAMERA: Deinitializing camera...
I (48742) CAMERA: Camera deinitialized
I (48746) STATE_MGR: Camera deinitialized - DMA memory freed
I (48752) STATE_MGR: Image uploaded successfully
I (48758) LED_CTRL: LED pattern -> 3
I (48762) STATE_MGR: Camera capture sequence complete
I (48778) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (53438) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (53438) BUTTON: Single click confirmed
I (53438) STATE_MGR: Single click - mode toggle requested
I (53445) STATE_MGR: Switching: Camera â†’ Voice (count: 5)
I (53501) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (53501) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53514) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (53521) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53540) MEM_MGR: â•‘ Internal RAM:
I (53544) MEM_MGR: â•‘   Free:              98003 bytes ( 95 KB)
I (53550) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (53557) MEM_MGR: â•‘   Fragmentation:     25%
I (53562) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53581) MEM_MGR: â•‘ DMA-capable RAM:
I (53585) MEM_MGR: â•‘   Free:              77639 bytes ( 75 KB)
I (53592) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (53599) MEM_MGR: â•‘   Fragmentation:      6%
I (53604) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53622) MEM_MGR: â•‘ PSRAM:
I (53626) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (53633) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (53640) MEM_MGR: â•‘   Fragmentation:      2%
I (53645) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53663) MEM_MGR: â•‘ Total Heap:
I (53667) MEM_MGR: â•‘   Free:             3941220 bytes (3848 KB)
I (53674) MEM_MGR: â•‘   Minimum Ever:     3898288 bytes (3806 KB)
I (53681) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53699) MEM_MGR: â•‘ Memory Delta from Baseline:
I (53705) MEM_MGR: â•‘   Internal RAM:     -127132 bytes (-124 KB)
I (53712) MEM_MGR: â•‘   DMA-capable:      -127132 bytes (-124 KB)
I (53719) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (53725) MEM_MGR: â•‘   Total Heap:       -423536 bytes (-413 KB)
I (53732) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53751) STATE_MGR: Stopping camera...
I (53755) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53771) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (53778) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53795) STATE_MGR:   Timeout: 5000 ms
I (53799) STATE_MGR:   Timestamp: 52246 ms
I (53804) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (53810) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53826) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (53832) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53849) STATE_MGR:   Free heap before: 3966732 bytes
I (53854) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (53860) CAMERA: Deinitializing camera...
I (53865) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (53871) STATE_MGR:   Free heap after: 3966732 bytes
I (53877) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (53883) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53899) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (53905) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53922) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (54030) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (54130) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (54180) STATE_MGR:   âœ“ Total stabilization: 250ms
I (54180) STATE_MGR:   Timestamp: 52627 ms
I (54180) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54196) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (54202) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54219) STATE_MGR:   Free heap before: 3966732 bytes
I (54225) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54243) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (54250) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54268) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54286) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (54293) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54311) AUDIO: [DIAG] Pre-init state:
I (54315) AUDIO:   Free heap: 3966608 bytes
I (54320) AUDIO:   Free internal RAM: 123391 bytes
I (54326) AUDIO:   Free DMA-capable: 103151 bytes
I (54331) AUDIO:   Free PSRAM: 3863732 bytes
I (54336) AUDIO:   Timestamp: 52783 ms
I (54340) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (54347) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (54355) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (54363) AUDIO:   DMA frame num (per desc): 1020
I (54369) AUDIO:   DMA total samples (effective): 4080
I (54375) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (54382) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (54388) AUDIO: âœ… I2S channels created (took 0 ms)
I (54394) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffcb68c
I (54400) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (54407) AUDIO:   Sample rate: 16000 Hz
I (54411) AUDIO:   MCLK: DISABLED
I (54415) AUDIO:   BCLK: GPIO14 (shared)
I (54420) AUDIO:   WS:   GPIO15 (shared)
I (54425) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (54432) AUDIO: âœ… TX channel configured (took 1 ms)
I (54436) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (54443) AUDIO:   Sample rate: 16000 Hz
I (54447) AUDIO:   MCLK: DISABLED
I (54451) AUDIO:   BCLK: GPIO14 (shared)
I (54456) AUDIO:   WS:   GPIO15 (shared)
I (54461) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (54467) AUDIO: âœ… RX channel configured (took 0 ms)
I (54472) AUDIO: [STEP 4/6] Enabling TX channel...
I (54478) AUDIO: âœ… TX channel enabled (took 0 ms)
I (54483) AUDIO: [STEP 5/6] Enabling RX channel...
I (54489) AUDIO: âœ… RX channel enabled (took 0 ms)
I (54494) AUDIO: [STEP 6/6] Hardware stabilization...
I (54500) AUDIO:   Phase 1: Initial settle (50ms)
I (54555) AUDIO:   Phase 2: DMA verification
I (54555) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (54556) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (54712) AUDIO: [DIAG] Post-init state:
I (54712) AUDIO:   Free heap: 3940748 bytes
I (54712) AUDIO:   Free internal RAM: 97531 bytes
I (54716) AUDIO:   Free DMA-capable: 77167 bytes
I (54721) AUDIO:   Free PSRAM: 3863732 bytes
I (54726) AUDIO:   Timestamp: 53173 ms
I (54731) AUDIO:   Total init time: 201 ms
I (54735) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54753) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (54759) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (54765) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (54774) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (54780) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54798) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54816) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (54823) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (54829) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (54836) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (54842) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54860) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (54866) STATE_MGR:   Free heap after: 3940748 bytes
I (54872) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54888) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (54894) STATE_MGR: â•‘ Total transition time: 889 ms
I (54900) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54916) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54932) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (54938) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54955) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (54963) TTS: No pending audio to flush
I (54992) TTS: TTS decoder session reset for next audio stream
I (54992) TTS: âœ… TTS decoder flushed and reset for next session
I (54994) STT: Starting STT pipeline...
I (54998) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (55008) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (55015) STT:   Current time: 53462 ms
I (55018) STT: âœ… STT pipeline started
I (55019) STT:   Free heap: 3932196 bytes
I (55019) STT: Audio streaming session activated
I (55034) STT: Connection stabilization delay (500ms)...
I (55074) TTS: ðŸŽµ Starting TTS decoder...
I (55074) TTS: Initializing TTS decoder...
W (55074) TTS: TTS decoder already initialized
I (55103) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (55103) TTS: âœ… TTS decoder started successfully
I (55107) TTS: ðŸŽµ TTS playback task started on Core 1
I (55113) TTS: âœ… TTS playback task registered with watchdog
I (55119) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (55228) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (55228) STT:   âœ“ Audio driver initialized
I (55229) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (55336) STT:   Total stabilization: 300ms
I (55336) STT:   Timestamp: 53783 ms
I (55336) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (55340) STT:   âœ“ DMA-capable buffer allocated at 0x3ffca9cc (with safety padding)
I (55349) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55365) STT: â•‘ ðŸŽ¤ STARTING AUDIO CAPTURE
I (55370) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (55376) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55432) LED_CTRL: LED pattern -> 1
I (55433) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55444) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (55451) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55469) MEM_MGR: â•‘ Internal RAM:
I (55473) MEM_MGR: â•‘   Free:              98003 bytes ( 95 KB)
I (55480) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (55487) MEM_MGR: â•‘   Fragmentation:     25%
I (55492) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55510) MEM_MGR: â•‘ DMA-capable RAM:
I (55515) MEM_MGR: â•‘   Free:              77639 bytes ( 75 KB)
I (55522) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (55528) MEM_MGR: â•‘   Fragmentation:      6%
I (55533) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55540) STT: Testing WebSocket transport health...
I (55552) MEM_MGR: â•‘ PSRAM:
I (55561) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (55565) STT: âœ… WebSocket transport verified healthy
I (55568) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (55581) MEM_MGR: â•‘   Fragmentation:      2%
I (55586) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55604) MEM_MGR: â•‘ Total Heap:
I (55608) MEM_MGR: â•‘   Free:             3941220 bytes (3848 KB)
I (55615) MEM_MGR: â•‘   Minimum Ever:     3898288 bytes (3806 KB)
I (55622) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55641) MEM_MGR: â•‘ Memory Delta from Baseline:
I (55646) MEM_MGR: â•‘   Internal RAM:     -127132 bytes (-124 KB)
I (55653) MEM_MGR: â•‘   DMA-capable:      -127132 bytes (-124 KB)
I (55660) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (55667) MEM_MGR: â•‘   Total Heap:       -423536 bytes (-413 KB)
I (55673) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55674) STT: Starting audio streaming to server...
I (55692) STATE_MGR: âœ… Voice mode transition complete
I (55703) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (55719) STATE_MGR: STT pipeline reported start
I (55730) STATE_MGR: TTS playback start event received
I (55835) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 5, "bytes_received": 16400}
I (55836) WEBSOCKET: Server status: receiving
I (56914) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 36880}
I (56915) WEBSOCKET: Server status: receiving
I (57938) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 15, "bytes_received": 57360}
I (57939) WEBSOCKET: Server status: receiving
I (58572) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 77840}
I (58573) WEBSOCKET: Server status: receiving
I (58655) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 25, "bytes_received": 98320}
I (58656) WEBSOCKET: Server status: receiving
I (59065) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 118800}
I (59066) WEBSOCKET: Server status: receiving
I (60191) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 35, "bytes_received": 139280}
I (60192) WEBSOCKET: Server status: receiving
I (60733) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (60733) BUTTON: Single click confirmed
I (60733) STATE_MGR: Single click - mode toggle requested
I (60740) STATE_MGR: Switching: Voice â†’ Camera (count: 6)
I (60797) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (60797) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60810) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (60817) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60835) MEM_MGR: â•‘ Internal RAM:
I (60840) MEM_MGR: â•‘   Free:              98003 bytes ( 95 KB)
I (60846) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (60853) MEM_MGR: â•‘   Fragmentation:     25%
I (60858) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60877) MEM_MGR: â•‘ DMA-capable RAM:
I (60881) MEM_MGR: â•‘   Free:              77639 bytes ( 75 KB)
I (60888) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (60894) MEM_MGR: â•‘   Fragmentation:      6%
I (60900) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60918) MEM_MGR: â•‘ PSRAM:
I (60922) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (60929) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (60935) MEM_MGR: â•‘   Fragmentation:      2%
I (60941) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60959) MEM_MGR: â•‘ Total Heap:
I (60963) MEM_MGR: â•‘   Free:             3941220 bytes (3848 KB)
I (60970) MEM_MGR: â•‘   Minimum Ever:     3898288 bytes (3806 KB)
I (60977) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60995) MEM_MGR: â•‘ Memory Delta from Baseline:
I (61001) MEM_MGR: â•‘   Internal RAM:     -127132 bytes (-124 KB)
I (61008) MEM_MGR: â•‘   DMA-capable:      -127132 bytes (-124 KB)
I (61014) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (61021) MEM_MGR: â•‘   Total Heap:       -423536 bytes (-413 KB)
I (61028) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61047) STATE_MGR: Stopping voice mode components...
I (61052) STT: Stopping STT pipeline...
I (61057) STT: Draining ring buffer (19456 bytes pending) before shutdown...
I (61072) STT: Ring buffer drained and cleared successfully
I (61120) STT: Audio capture task stopped (captured 188416 bytes total)
I (61216) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 40, "bytes_received": 159760}
I (61217) WEBSOCKET: Server status: receiving
I (61233) STT: Streaming task received stop signal
I (61233) STT: Sending EOS signal...
I (61233) WEBSOCKET: Sending EOS signal
I (61267) STT: Audio streaming session complete (streamed 167936 bytes in 41 chunks)
I (61276) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (61276) WEBSOCKET: Server status: processing
I (61279) WEBSOCKET: Server stage: transcription
I (61285) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (61289) STT: STT pipeline stopped
I (62232) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what's your name what's your name"}
I (62234) WEBSOCKET: Server status: processing
I (62239) WEBSOCKET: Server stage: llm
I (62244) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (62641) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I'm Hotpin, your compact and helpful voice assistant."}
I (62645) WEBSOCKET: Server status: processing
I (62650) WEBSOCKET: Server stage: tts
I (62654) WEBSOCKET: Pipeline stage changed: llm -> tts
I (62660) WEBSOCKET: Entering TTS stage - preparing for audio streaming
W (62667) WEBSOCKET: Ignoring TTS stage - not in voice mode (state=3)
W (62675) WEBSOCKET: Server response arrived after mode transition - audio will be discarded
I (62789) TTS: Received audio chunk #81: 4096 bytes
I (62790) TTS: New audio session detected - resetting chunk counter
I (62791) TTS: ðŸŽ™ï¸ First real audio data received for session (4096 bytes)
I (62805) TTS: Received audio chunk #2: 1436 bytes
I (62805) TTS: Chunk #2 first 12 bytes: EE EB 2C EB DA EE 93 F7 BA FF 9E 06
I (62839) TTS: Received audio chunk #3: 2660 bytes
I (62839) TTS: Chunk #3 first 12 bytes: 60 E8 AC EA EA EC 23 ED 2C ED E6 EE
I (62849) TTS: Received audio chunk #4: 4096 bytes
I (62849) TTS: Chunk #4 first 12 bytes: 40 FC 9E FB C1 FA 0C FA F5 F9 8A F9
I (62859) TTS: Received audio chunk #5: 4096 bytes
I (62860) TTS: Chunk #5 first 12 bytes: D9 EE C1 F4 1C FD 92 03 AF 0A 9B 0E
I (62871) TTS: Received audio chunk #6: 656 bytes
I (62874) TTS: âœ… WAV header parsed successfully
I (62878) TTS: === WAV File Info ===
I (62882) TTS: Sample Rate: 16000 Hz
I (62887) TTS: Channels: 1
I (62890) TTS: Bits per Sample: 16
I (62894) TTS: Audio Format: 1 (PCM)
I (62898) TTS: Declared Data Size: 130726 bytes
I (62904) TTS: Block Align: 2
I (62907) TTS: Byte Rate: 32000
I (62911) TTS: ====================
I (62913) TTS: Received audio chunk #7: 3440 bytes
I (62926) TTS: Received audio chunk #8: 4096 bytes
I (62931) TTS: Received audio chunk #9: 1096 bytes
I (62934) TTS: Received audio chunk #10: 3000 bytes
I (62941) TTS: Received audio chunk #11: 1316 bytes
I (62944) TTS: ðŸ”” Playback start feedback dispatched (bytes_received=29988)
I (62951) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (62980) TTS: Received audio chunk #12: 2780 bytes
I (62985) TTS: Received audio chunk #13: 1536 bytes
I (62991) TTS: Received audio chunk #14: 2560 bytes
I (62998) TTS: Received audio chunk #15: 4096 bytes
I (63002) TTS: Received audio chunk #16: 536 bytes
I (63051) TTS: Received audio chunk #17: 2880 bytes
I (63052) TTS: Received audio chunk #18: 680 bytes
I (63058) TTS: Received audio chunk #19: 4096 bytes
I (63062) TTS: Received audio chunk #20: 976 bytes
I (63066) TTS: Received audio chunk #21: 3120 bytes
I (63071) TTS: Received audio chunk #22: 1196 bytes
I (63115) TTS: Received audio chunk #23: 2900 bytes
I (63121) TTS: Received audio chunk #24: 4096 bytes
I (63127) TTS: Received audio chunk #25: 4096 bytes
I (63132) TTS: Received audio chunk #26: 416 bytes
I (63135) TTS: Received audio chunk #27: 3680 bytes
I (63139) TTS: Received audio chunk #28: 636 bytes
I (63184) TTS: Received audio chunk #29: 3460 bytes
I (63188) TTS: Received audio chunk #30: 856 bytes
I (63193) TTS: Received audio chunk #31: 3240 bytes
I (63199) TTS: Received audio chunk #32: 4096 bytes
I (63205) TTS: Received audio chunk #33: 4096 bytes
I (63210) TTS: Received audio chunk #34: 1516 bytes
I (63257) TTS: Received audio chunk #35: 2580 bytes
I (63263) TTS: Received audio chunk #36: 4096 bytes
I (63268) TTS: Received audio chunk #37: 516 bytes
I (63271) TTS: Received audio chunk #38: 3580 bytes
I (63275) TTS: Received audio chunk #39: 736 bytes
I (63321) TTS: Received audio chunk #40: 3360 bytes
I (63326) TTS: Received audio chunk #41: 956 bytes
I (63328) TTS: Received audio chunk #42: 3140 bytes
I (63336) TTS: Received audio chunk #43: 1176 bytes
I (63338) TTS: Received audio chunk #44: 2920 bytes
I (63342) TTS: Received audio chunk #45: 1396 bytes
I (63389) TTS: Received audio chunk #46: 2700 bytes
I (63394) TTS: Received audio chunk #47: 1616 bytes
I (63398) TTS: Received audio chunk #48: 2480 bytes
I (63405) TTS: Received audio chunk #49: 4096 bytes
I (63409) TTS: Received audio chunk #50: 616 bytes
I (63413) TTS: Received audio chunk #51: 3480 bytes
I (63417) TTS: Received audio chunk #52: 836 bytes
I (63460) TTS: Received audio chunk #53: 1440 bytes
I (63462) TTS: Received audio chunk #54: 1518 bytes
I (63465) WEBSOCKET: Received text message: {"status": "complete"}
I (63467) WEBSOCKET: Server status: complete
I (63472) WEBSOCKET: Pipeline stage changed: tts -> complete
I (63478) WEBSOCKET: Exiting TTS stage (transition to complete)
I (63486) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (63592) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (63597) STATE_MGR: Voice pipeline reported COMPLETE
I (63597) STATE_MGR: Waiting for TTS playback drain (~106238 bytes pending, timeout 15000 ms)
I (63720) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (63847) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (63975) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (64102) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
W (64105) TTS: TTS wait for idle timeout after 500 ms
W (64106) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (64114) TTS:   Data: received=130770, header=0, played=40916, pending=89854
W (64122) STATE_MGR: TTS wait for idle timeout #1 (drain_checks=0)
I (64230) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (64357) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (64485) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (64612) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
W (64728) TTS: TTS wait for idle timeout after 500 ms
W (64728) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (64731) TTS:   Data: received=130770, header=0, played=57300, pending=73470
W (64739) STATE_MGR: TTS wait for idle timeout #2 (drain_checks=1)
I (64746) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (64867) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (64995) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (65122) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (65250) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
W (65346) TTS: TTS wait for idle timeout after 500 ms
W (65346) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (65349) TTS:   Data: received=130770, header=0, played=77780, pending=52990
W (65357) STATE_MGR: TTS wait for idle timeout #3 (drain_checks=2)
I (65377) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (65505) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (65632) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (65760) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (65887) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
W (65964) TTS: TTS wait for idle timeout after 500 ms
W (65964) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (65967) TTS:   Data: received=130770, header=0, played=98260, pending=32510
W (65975) STATE_MGR: TTS wait for idle timeout #4 (drain_checks=3)
I (66015) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (66142) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (66270) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (66397) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
W (66582) TTS: TTS wait for idle timeout after 500 ms
W (66582) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (66585) TTS:   Data: received=130770, header=0, played=114644, pending=16126
W (66593) STATE_MGR: TTS wait for idle timeout #5 (drain_checks=4)
I (66600) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (66716) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (66843) TTS: âœ… All audio data received (130770 bytes, expected 130726 + 44 header)
I (67007) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (67007) TTS: ðŸŽµ TTS playback task exiting (played 130726 bytes, result: ESP_OK)
I (67013) TTS:   âœ“ DMA buffer freed from PSRAM
I (67018) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (67026) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (67050) TTS: TTS playback task handle is NULL - task already exited (after 7 checks)
I (67050) STATE_MGR: TTS decoder confirmed idle
I (67053) STATE_MGR: Flushing and resetting TTS decoder for next session
I (67060) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (67068) TTS: No pending audio to flush
I (67098) TTS: TTS decoder session reset for next audio stream
I (67098) TTS: âœ… TTS decoder flushed and reset for next session
I (67300) TTS: â¹ï¸ Stopping TTS decoder...
W (67300) TTS: TTS decoder not running
I (67426) STATE_MGR: Acquiring I2S mutex...
I (67426) STATE_MGR: Deinitializing audio drivers...
I (67426) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67444) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (67451) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67469) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (67476) AUDIO: âœ… RX channel disabled (took 0 ms)
I (67482) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (67488) AUDIO: âœ… TX channel disabled (took 0 ms)
I (67494) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (67550) AUDIO: [STEP 4/5] Deleting RX channel...
I (67551) AUDIO: âœ… RX channel deleted (took 0 ms)
I (67551) AUDIO: [STEP 5/5] Deleting TX channel...
I (67556) AUDIO: âœ… TX channel deleted (took 0 ms)
I (67561) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (67619) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67626) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (67632) AUDIO: â•‘ Camera Can Now Initialize
I (67638) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67706) STATE_MGR: Allowing memory stabilization (100ms)...
I (67806) STATE_MGR: Camera will be initialized on-demand during capture
I (67806) STATE_MGR: I2S mutex released
I (67807) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67825) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (67832) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67851) MEM_MGR: â•‘ Internal RAM:
I (67855) MEM_MGR: â•‘   Free:              88959 bytes ( 86 KB)
I (67862) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (67868) MEM_MGR: â•‘   Fragmentation:     38%
I (67874) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67892) MEM_MGR: â•‘ DMA-capable RAM:
I (67896) MEM_MGR: â•‘   Free:              68595 bytes ( 66 KB)
I (67903) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (67910) MEM_MGR: â•‘   Fragmentation:     20%
I (67915) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67933) MEM_MGR: â•‘ PSRAM:
I (67937) MEM_MGR: â•‘   Free:             3859632 bytes (3769 KB)
I (67944) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (67951) MEM_MGR: â•‘   Fragmentation:      2%
I (67956) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67974) MEM_MGR: â•‘ Total Heap:
I (67979) MEM_MGR: â•‘   Free:             3928076 bytes (3836 KB)
I (67985) MEM_MGR: â•‘   Minimum Ever:     3832160 bytes (3742 KB)
I (67992) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68011) MEM_MGR: â•‘ Memory Delta from Baseline:
I (68016) MEM_MGR: â•‘   Internal RAM:     -136176 bytes (-132 KB)
I (68023) MEM_MGR: â•‘   DMA-capable:      -136176 bytes (-132 KB)
I (68030) MEM_MGR: â•‘   PSRAM:            -332384 bytes (-324 KB)
I (68037) MEM_MGR: â•‘   Total Heap:       -436680 bytes (-426 KB)
I (68044) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68062) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (68072) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68089) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (68096) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68114) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68132) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (68140) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68158) AUDIO: [DIAG] Pre-init state:
I (68162) AUDIO:   Free heap: 3966740 bytes
I (68167) AUDIO:   Free internal RAM: 123523 bytes
I (68172) AUDIO:   Free DMA-capable: 103159 bytes
I (68178) AUDIO:   Free PSRAM: 3863732 bytes
I (68183) AUDIO:   Timestamp: 66630 ms
I (68187) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (68194) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (68202) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (68210) AUDIO:   DMA frame num (per desc): 1020
I (68216) AUDIO:   DMA total samples (effective): 4080
I (68221) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (68228) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (68235) AUDIO: âœ… I2S channels created (took 0 ms)
I (68240) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffca848
I (68247) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (68254) AUDIO:   Sample rate: 16000 Hz
I (68258) AUDIO:   MCLK: DISABLED
I (68262) AUDIO:   BCLK: GPIO14 (shared)
I (68267) AUDIO:   WS:   GPIO15 (shared)
I (68271) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (68278) AUDIO: âœ… TX channel configured (took 1 ms)
I (68283) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (68290) AUDIO:   Sample rate: 16000 Hz
I (68294) AUDIO:   MCLK: DISABLED
I (68298) AUDIO:   BCLK: GPIO14 (shared)
I (68303) AUDIO:   WS:   GPIO15 (shared)
I (68307) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (68313) AUDIO: âœ… RX channel configured (took 0 ms)
I (68319) AUDIO: [STEP 4/6] Enabling TX channel...
I (68324) AUDIO: âœ… TX channel enabled (took 0 ms)
I (68330) AUDIO: [STEP 5/6] Enabling RX channel...
I (68335) AUDIO: âœ… RX channel enabled (took 0 ms)
I (68341) AUDIO: [STEP 6/6] Hardware stabilization...
I (68347) AUDIO:   Phase 1: Initial settle (50ms)
I (68402) AUDIO:   Phase 2: DMA verification
I (68402) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (68402) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (68559) AUDIO: [DIAG] Post-init state:
I (68559) AUDIO:   Free heap: 3940744 bytes
I (68559) AUDIO:   Free internal RAM: 97527 bytes
I (68563) AUDIO:   Free DMA-capable: 77163 bytes
I (68568) AUDIO:   Free PSRAM: 3863732 bytes
I (68573) AUDIO:   Timestamp: 67020 ms
I (68578) AUDIO:   Total init time: 201 ms
I (68582) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68600) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (68606) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (68612) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (68621) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (68627) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68645) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68663) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (68670) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (68676) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (68683) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (68689) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68990) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68997) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (69005) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69023) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (69030) AUDIO: âœ… RX channel disabled (took 0 ms)
I (69035) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (69042) AUDIO: âœ… TX channel disabled (took 0 ms)
I (69047) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (69104) AUDIO: [STEP 4/5] Deleting RX channel...
I (69105) AUDIO: âœ… RX channel deleted (took 0 ms)
I (69105) AUDIO: [STEP 5/5] Deleting TX channel...
I (69110) AUDIO: âœ… TX channel deleted (took 0 ms)
I (69115) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (69173) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69180) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (69186) AUDIO: â•‘ Camera Can Now Initialize
I (69192) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69210) LED_CTRL: LED pattern -> 3
I (69214) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (69230) STATE_MGR: STT pipeline reported stop
I (69241) STATE_MGR: Pipeline stage event: transcription
I (69251) STATE_MGR: Pipeline stage event: llm
I (69261) STATE_MGR: Pipeline stage event: tts
I (69271) STATE_MGR: TTS playback start event received
I (69281) STATE_MGR: Pipeline stage event: complete
I (73552) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (73552) BUTTON: Single click confirmed
I (73552) STATE_MGR: Single click - mode toggle requested
I (73558) STATE_MGR: Switching: Camera â†’ Voice (count: 7)
I (73615) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (73615) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73628) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (73635) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73654) MEM_MGR: â•‘ Internal RAM:
I (73658) MEM_MGR: â•‘   Free:              88959 bytes ( 86 KB)
I (73664) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (73671) MEM_MGR: â•‘   Fragmentation:     38%
I (73676) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73695) MEM_MGR: â•‘ DMA-capable RAM:
I (73699) MEM_MGR: â•‘   Free:              68595 bytes ( 66 KB)
I (73706) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (73713) MEM_MGR: â•‘   Fragmentation:     20%
I (73718) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73736) MEM_MGR: â•‘ PSRAM:
I (73740) MEM_MGR: â•‘   Free:             3859632 bytes (3769 KB)
I (73747) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (73754) MEM_MGR: â•‘   Fragmentation:      2%
I (73759) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73777) MEM_MGR: â•‘ Total Heap:
I (73781) MEM_MGR: â•‘   Free:             3928076 bytes (3836 KB)
I (73788) MEM_MGR: â•‘   Minimum Ever:     3832160 bytes (3742 KB)
I (73795) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73813) MEM_MGR: â•‘ Memory Delta from Baseline:
I (73819) MEM_MGR: â•‘   Internal RAM:     -136176 bytes (-132 KB)
I (73826) MEM_MGR: â•‘   DMA-capable:      -136176 bytes (-132 KB)
I (73833) MEM_MGR: â•‘   PSRAM:            -332384 bytes (-324 KB)
I (73839) MEM_MGR: â•‘   Total Heap:       -436680 bytes (-426 KB)
I (73846) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73865) STATE_MGR: Stopping camera...
I (73869) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73886) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (73892) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73909) STATE_MGR:   Timeout: 5000 ms
I (73913) STATE_MGR:   Timestamp: 72360 ms
I (73918) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (73924) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73940) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (73946) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73963) STATE_MGR:   Free heap before: 3966740 bytes
I (73968) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (73974) CAMERA: Deinitializing camera...
I (73979) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (73985) STATE_MGR:   Free heap after: 3966740 bytes
I (73991) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (73997) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74013) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (74019) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74036) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (74144) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (74244) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (74294) STATE_MGR:   âœ“ Total stabilization: 250ms
I (74294) STATE_MGR:   Timestamp: 72741 ms
I (74294) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74310) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (74316) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74333) STATE_MGR:   Free heap before: 3966740 bytes
I (74339) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74357) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (74364) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74382) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74400) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (74407) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74425) AUDIO: [DIAG] Pre-init state:
I (74429) AUDIO:   Free heap: 3966740 bytes
I (74434) AUDIO:   Free internal RAM: 123523 bytes
I (74440) AUDIO:   Free DMA-capable: 103159 bytes
I (74445) AUDIO:   Free PSRAM: 3863732 bytes
I (74450) AUDIO:   Timestamp: 72897 ms
I (74454) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (74461) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (74469) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (74477) AUDIO:   DMA frame num (per desc): 1020
I (74483) AUDIO:   DMA total samples (effective): 4080
I (74489) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (74496) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (74502) AUDIO: âœ… I2S channels created (took 0 ms)
I (74508) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffca848
I (74514) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (74521) AUDIO:   Sample rate: 16000 Hz
I (74525) AUDIO:   MCLK: DISABLED
I (74529) AUDIO:   BCLK: GPIO14 (shared)
I (74534) AUDIO:   WS:   GPIO15 (shared)
I (74539) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (74545) AUDIO: âœ… TX channel configured (took 1 ms)
I (74550) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (74557) AUDIO:   Sample rate: 16000 Hz
I (74561) AUDIO:   MCLK: DISABLED
I (74565) AUDIO:   BCLK: GPIO14 (shared)
I (74570) AUDIO:   WS:   GPIO15 (shared)
I (74575) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (74581) AUDIO: âœ… RX channel configured (took 0 ms)
I (74586) AUDIO: [STEP 4/6] Enabling TX channel...
I (74592) AUDIO: âœ… TX channel enabled (took 0 ms)
I (74597) AUDIO: [STEP 5/6] Enabling RX channel...
I (74603) AUDIO: âœ… RX channel enabled (took 0 ms)
I (74608) AUDIO: [STEP 6/6] Hardware stabilization...
I (74614) AUDIO:   Phase 1: Initial settle (50ms)
I (74669) AUDIO:   Phase 2: DMA verification
I (74669) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (74670) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (74826) AUDIO: [DIAG] Post-init state:
I (74826) AUDIO:   Free heap: 3940744 bytes
I (74826) AUDIO:   Free internal RAM: 97527 bytes
I (74830) AUDIO:   Free DMA-capable: 77163 bytes
I (74835) AUDIO:   Free PSRAM: 3863732 bytes
I (74840) AUDIO:   Timestamp: 73287 ms
I (74845) AUDIO:   Total init time: 201 ms
I (74849) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74867) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (74873) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (74879) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (74888) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (74894) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74912) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74930) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (74937) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (74943) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (74950) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (74956) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74974) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (74980) STATE_MGR:   Free heap after: 3940744 bytes
I (74986) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75002) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (75008) STATE_MGR: â•‘ Total transition time: 889 ms
I (75014) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75030) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75046) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (75052) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75069) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (75077) TTS: No pending audio to flush
I (75106) TTS: TTS decoder session reset for next audio stream
I (75106) TTS: âœ… TTS decoder flushed and reset for next session
I (75108) STT: Starting STT pipeline...
I (75112) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (75122) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (75135) STT: âœ… STT pipeline started
I (75135) STT: Audio streaming session activated
I (75138) STT: Connection stabilization delay (500ms)...
I (75134) STT:   Current time: 73581 ms
I (75149) STT:   Free heap: 3932192 bytes
I (75185) TTS: ðŸŽµ Starting TTS decoder...
I (75185) TTS: Initializing TTS decoder...
W (75185) TTS: TTS decoder already initialized
I (75216) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (75216) TTS: âœ… TTS decoder started successfully
I (75220) TTS: ðŸŽµ TTS playback task started on Core 1
I (75226) TTS: âœ… TTS playback task registered with watchdog
I (75232) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (75354) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (75354) STT:   âœ“ Audio driver initialized
I (75355) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (75462) STT:   Total stabilization: 300ms
I (75462) STT:   Timestamp: 73908 ms
I (75462) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (75466) STT:   âœ“ DMA-capable buffer allocated at 0x3ffca9cc (with safety padding)
I (75475) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75491) STT: â•‘ ðŸŽ¤ STARTING AUDIO CAPTURE
I (75496) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (75502) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75545) LED_CTRL: LED pattern -> 1
I (75546) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75557) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (75564) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75582) MEM_MGR: â•‘ Internal RAM:
I (75586) MEM_MGR: â•‘   Free:              88959 bytes ( 86 KB)
I (75593) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (75600) MEM_MGR: â•‘   Fragmentation:     38%
I (75605) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75623) MEM_MGR: â•‘ DMA-capable RAM:
I (75628) MEM_MGR: â•‘   Free:              68595 bytes ( 66 KB)
I (75635) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (75641) MEM_MGR: â•‘   Fragmentation:     20%
I (75644) STT: Testing WebSocket transport health...
I (75647) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75659) STT: âœ… WebSocket transport verified healthy
I (75671) MEM_MGR: â•‘ PSRAM:
I (75680) MEM_MGR: â•‘   Free:             3859632 bytes (3769 KB)
I (75687) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (75694) MEM_MGR: â•‘   Fragmentation:      2%
I (75699) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75717) MEM_MGR: â•‘ Total Heap:
I (75721) MEM_MGR: â•‘   Free:             3928076 bytes (3836 KB)
I (75728) MEM_MGR: â•‘   Minimum Ever:     3832160 bytes (3742 KB)
I (75735) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75754) MEM_MGR: â•‘ Memory Delta from Baseline:
I (75759) MEM_MGR: â•‘   Internal RAM:     -136176 bytes (-132 KB)
I (75766) MEM_MGR: â•‘   DMA-capable:      -136176 bytes (-132 KB)
I (75773) MEM_MGR: â•‘   PSRAM:            -332384 bytes (-324 KB)
I (75776) STT: Starting audio streaming to server...
I (75780) MEM_MGR: â•‘   Total Heap:       -436680 bytes (-426 KB)
I (75792) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75811) STATE_MGR: âœ… Voice mode transition complete
I (75816) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (75833) STATE_MGR: STT pipeline reported start
I (75843) STATE_MGR: TTS playback start event received
I (76057) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 5, "bytes_received": 16400}
I (76058) WEBSOCKET: Server status: receiving
I (76545) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 36880}
I (76547) WEBSOCKET: Server status: receiving
I (76962) STT: [CAPTURE] âœ… Alive... 500 reads completed (Free Heap: 3912044 bytes)
I (78004) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 15, "bytes_received": 57360}
I (78005) WEBSOCKET: Server status: receiving
I (78038) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (78038) BUTTON: Single click confirmed
I (78038) STATE_MGR: Single click - mode toggle requested
I (78044) STATE_MGR: Switching: Voice â†’ Camera (count: 8)
I (78101) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (78101) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (78114) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (78121) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (78140) MEM_MGR: â•‘ Internal RAM:
I (78144) MEM_MGR: â•‘   Free:              73063 bytes ( 71 KB)
I (78151) MEM_MGR: â•‘   Largest Block:     49152 bytes ( 48 KB)
I (78157) MEM_MGR: â•‘   Fragmentation:     33%
I (78163) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (78181) MEM_MGR: â•‘ DMA-capable RAM:
I (78185) MEM_MGR: â•‘   Free:              52699 bytes ( 51 KB)
I (78192) MEM_MGR: â•‘   Largest Block:     49152 bytes ( 48 KB)
I (78199) MEM_MGR: â•‘   Fragmentation:      7%
I (78205) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (78222) MEM_MGR: â•‘ PSRAM:
I (78226) MEM_MGR: â•‘   Free:             3859496 bytes (3769 KB)
I (78233) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (78240) MEM_MGR: â•‘   Fragmentation:      2%
I (78245) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (78263) MEM_MGR: â•‘ Total Heap:
I (78268) MEM_MGR: â•‘   Free:             3912044 bytes (3820 KB)
I (78274) MEM_MGR: â•‘   Minimum Ever:     3832160 bytes (3742 KB)
I (78281) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (78300) MEM_MGR: â•‘ Memory Delta from Baseline:
I (78305) MEM_MGR: â•‘   Internal RAM:     -152072 bytes (-148 KB)
I (78312) MEM_MGR: â•‘   DMA-capable:      -152072 bytes (-148 KB)
I (78319) MEM_MGR: â•‘   PSRAM:            -332520 bytes (-324 KB)
I (78326) MEM_MGR: â•‘   Total Heap:       -452712 bytes (-442 KB)
I (78333) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (78351) STATE_MGR: Stopping voice mode components...
I (78357) STT: Stopping STT pipeline...
I (78361) STT: Draining ring buffer (21504 bytes pending) before shutdown...
I (78365) STT: Audio capture task stopped (captured 96256 bytes total)
I (78376) STT: Ring buffer drained and cleared successfully
I (78428) STT: Streaming task received stop signal
I (78428) STT: Sending EOS signal...
I (78428) WEBSOCKET: Sending EOS signal
I (78616) STT: Audio streaming session complete (streamed 73728 bytes in 18 chunks)
I (78629) STT: STT pipeline stopped
I (78629) STATE_MGR: Voice pipeline reported COMPLETE
I (78630) STATE_MGR: Waiting for TTS playback drain (~0 bytes pending, timeout 15000 ms)
I (78670) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (78671) WEBSOCKET: Server status: processing
I (78674) WEBSOCKET: Server stage: transcription
I (78679) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (78937) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (78938) STATE_MGR: TTS decoder confirmed idle
I (78941) STATE_MGR: Flushing and resetting TTS decoder for next session
I (78948) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (78956) TTS: Flushing pending audio before reset (~0 bytes)
I (79262) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (79262) TTS: TTS decoder session reset for next audio stream
I (79267) TTS: âœ… TTS decoder flushed and reset for next session
I (79276) TTS: TTS playback task shutting down - is_running=0
I (79280) TTS: ðŸŽµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (79288) TTS:   âœ“ DMA buffer freed from PSRAM
I (79293) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (79435) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hi"}
I (79436) WEBSOCKET: Server status: processing
I (79439) WEBSOCKET: Server stage: llm
I (79444) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (79473) TTS: â¹ï¸ Stopping TTS decoder...
W (79473) TTS: TTS decoder not running
I (79544) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "It's nice to chat with you."}
I (79546) WEBSOCKET: Server status: processing
I (79551) WEBSOCKET: Server stage: tts
I (79555) WEBSOCKET: Pipeline stage changed: llm -> tts
I (79561) WEBSOCKET: Entering TTS stage - preparing for audio streaming
W (79568) WEBSOCKET: Ignoring TTS stage - not in voice mode (state=3)
W (79575) WEBSOCKET: Server response arrived after mode transition - audio will be discarded
I (79600) STATE_MGR: Acquiring I2S mutex...
I (79600) STATE_MGR: Deinitializing audio drivers...
I (79601) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (79618) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (79625) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (79643) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (79650) AUDIO: âœ… RX channel disabled (took 0 ms)
I (79656) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (79662) AUDIO: âœ… TX channel disabled (took 0 ms)
I (79668) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (79725) AUDIO: [STEP 4/5] Deleting RX channel...
I (79726) AUDIO: âœ… RX channel deleted (took 0 ms)
I (79726) AUDIO: [STEP 5/5] Deleting TX channel...
I (79731) AUDIO: âœ… TX channel deleted (took 0 ms)
I (79736) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (79794) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
W (79795) TTS: Rejecting audio chunks - TTS decoder not running (chunks rejected: 1, last: 4096 bytes)
I (79801) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (79818) AUDIO: â•‘ Camera Can Now Initialize
I (79823) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (79891) STATE_MGR: Allowing memory stabilization (100ms)...
I (79980) WEBSOCKET: Received text message: {"status": "complete"}
I (79981) WEBSOCKET: Server status: complete
I (79981) WEBSOCKET: Pipeline stage changed: tts -> complete
I (79988) WEBSOCKET: Exiting TTS stage (transition to complete)
I (79992) STATE_MGR: Camera will be initialized on-demand during capture
I (80002) STATE_MGR: I2S mutex released
I (80006) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80025) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (80031) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80050) MEM_MGR: â•‘ Internal RAM:
I (80054) MEM_MGR: â•‘   Free:              73063 bytes ( 71 KB)
I (80061) MEM_MGR: â•‘   Largest Block:     49152 bytes ( 48 KB)
I (80067) MEM_MGR: â•‘   Fragmentation:     33%
I (80073) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80091) MEM_MGR: â•‘ DMA-capable RAM:
I (80096) MEM_MGR: â•‘   Free:              52699 bytes ( 51 KB)
I (80102) MEM_MGR: â•‘   Largest Block:     49152 bytes ( 48 KB)
I (80109) MEM_MGR: â•‘   Fragmentation:      7%
I (80114) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80133) MEM_MGR: â•‘ PSRAM:
I (80136) MEM_MGR: â•‘   Free:             3859496 bytes (3769 KB)
I (80143) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (80150) MEM_MGR: â•‘   Fragmentation:      2%
I (80155) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80173) MEM_MGR: â•‘ Total Heap:
I (80178) MEM_MGR: â•‘   Free:             3912044 bytes (3820 KB)
I (80184) MEM_MGR: â•‘   Minimum Ever:     3832160 bytes (3742 KB)
I (80191) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80210) MEM_MGR: â•‘ Memory Delta from Baseline:
I (80215) MEM_MGR: â•‘   Internal RAM:     -152072 bytes (-148 KB)
I (80222) MEM_MGR: â•‘   DMA-capable:      -152072 bytes (-148 KB)
I (80229) MEM_MGR: â•‘   PSRAM:            -332520 bytes (-324 KB)
I (80236) MEM_MGR: â•‘   Total Heap:       -452712 bytes (-442 KB)
I (80243) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80261) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (80271) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80288) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (80295) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80313) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80331) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (80339) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80357) AUDIO: [DIAG] Pre-init state:
I (80361) AUDIO:   Free heap: 3966740 bytes
I (80366) AUDIO:   Free internal RAM: 123523 bytes
I (80371) AUDIO:   Free DMA-capable: 103159 bytes
I (80377) AUDIO:   Free PSRAM: 3863732 bytes
I (80382) AUDIO:   Timestamp: 78829 ms
I (80386) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (80393) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (80401) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (80409) AUDIO:   DMA frame num (per desc): 1020
I (80415) AUDIO:   DMA total samples (effective): 4080
I (80420) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (80427) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (80434) AUDIO: âœ… I2S channels created (took 0 ms)
I (80439) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffca848
I (80446) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (80453) AUDIO:   Sample rate: 16000 Hz
I (80457) AUDIO:   MCLK: DISABLED
I (80461) AUDIO:   BCLK: GPIO14 (shared)
I (80466) AUDIO:   WS:   GPIO15 (shared)
I (80470) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (80477) AUDIO: âœ… TX channel configured (took 1 ms)
I (80482) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (80489) AUDIO:   Sample rate: 16000 Hz
I (80493) AUDIO:   MCLK: DISABLED
I (80497) AUDIO:   BCLK: GPIO14 (shared)
I (80502) AUDIO:   WS:   GPIO15 (shared)
I (80506) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (80513) AUDIO: âœ… RX channel configured (took 0 ms)
I (80518) AUDIO: [STEP 4/6] Enabling TX channel...
I (80523) AUDIO: âœ… TX channel enabled (took 0 ms)
I (80529) AUDIO: [STEP 5/6] Enabling RX channel...
I (80534) AUDIO: âœ… RX channel enabled (took 0 ms)
I (80540) AUDIO: [STEP 6/6] Hardware stabilization...
I (80546) AUDIO:   Phase 1: Initial settle (50ms)
I (80601) AUDIO:   Phase 2: DMA verification
I (80601) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (80602) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (80758) AUDIO: [DIAG] Post-init state:
I (80758) AUDIO:   Free heap: 3940744 bytes
I (80758) AUDIO:   Free internal RAM: 97527 bytes
I (80762) AUDIO:   Free DMA-capable: 77163 bytes
I (80767) AUDIO:   Free PSRAM: 3863732 bytes
I (80772) AUDIO:   Timestamp: 79219 ms
I (80777) AUDIO:   Total init time: 201 ms
I (80781) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80799) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (80805) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (80811) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (80820) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (80826) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80844) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (80862) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (80869) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (80875) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (80882) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (80888) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (81189) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (81196) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (81204) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (81222) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (81229) AUDIO: âœ… RX channel disabled (took 0 ms)
I (81234) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (81241) AUDIO: âœ… TX channel disabled (took 0 ms)
I (81246) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (81303) AUDIO: [STEP 4/5] Deleting RX channel...
I (81304) AUDIO: âœ… RX channel deleted (took 0 ms)
I (81304) AUDIO: [STEP 5/5] Deleting TX channel...
I (81309) AUDIO: âœ… TX channel deleted (took 0 ms)
I (81314) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (81372) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (81379) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (81385) AUDIO: â•‘ Camera Can Now Initialize
I (81391) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (81409) LED_CTRL: LED pattern -> 3
I (81413) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (81429) STATE_MGR: STT pipeline reported stop
I (81439) STATE_MGR: Pipeline stage event: transcription
I (81449) STATE_MGR: Pipeline stage event: llm
I (81459) STATE_MGR: Pipeline stage event: tts
I (81469) STATE_MGR: Pipeline stage event: complete
I (87089) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (87090) STATE_MGR: Double-click detected - triggering capture sequence
I (87093) STATE_MGR: Starting camera capture sequence
I (87099) LED_CTRL: LED pattern -> 6
I (87103) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87121) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (87128) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87146) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87164) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (87171) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87189) AUDIO: [DIAG] Pre-init state:
I (87194) AUDIO:   Free heap: 3966740 bytes
I (87198) AUDIO:   Free internal RAM: 123523 bytes
I (87204) AUDIO:   Free DMA-capable: 103159 bytes
I (87209) AUDIO:   Free PSRAM: 3863732 bytes
I (87214) AUDIO:   Timestamp: 85661 ms
I (87219) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (87225) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (87233) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (87242) AUDIO:   DMA frame num (per desc): 1020
I (87247) AUDIO:   DMA total samples (effective): 4080
I (87253) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (87260) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (87266) AUDIO: âœ… I2S channels created (took 0 ms)
I (87272) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffca848
I (87278) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (87285) AUDIO:   Sample rate: 16000 Hz
I (87290) AUDIO:   MCLK: DISABLED
I (87294) AUDIO:   BCLK: GPIO14 (shared)
I (87298) AUDIO:   WS:   GPIO15 (shared)
I (87303) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (87309) AUDIO: âœ… TX channel configured (took 0 ms)
I (87314) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (87321) AUDIO:   Sample rate: 16000 Hz
I (87326) AUDIO:   MCLK: DISABLED
I (87330) AUDIO:   BCLK: GPIO14 (shared)
I (87334) AUDIO:   WS:   GPIO15 (shared)
I (87339) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (87345) AUDIO: âœ… RX channel configured (took 0 ms)
I (87350) AUDIO: [STEP 4/6] Enabling TX channel...
I (87356) AUDIO: âœ… TX channel enabled (took 0 ms)
I (87361) AUDIO: [STEP 5/6] Enabling RX channel...
I (87367) AUDIO: âœ… RX channel enabled (took 0 ms)
I (87372) AUDIO: [STEP 6/6] Hardware stabilization...
I (87378) AUDIO:   Phase 1: Initial settle (50ms)
I (87433) AUDIO:   Phase 2: DMA verification
I (87433) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (87433) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (87590) AUDIO: [DIAG] Post-init state:
I (87590) AUDIO:   Free heap: 3940744 bytes
I (87590) AUDIO:   Free internal RAM: 97527 bytes
I (87594) AUDIO:   Free DMA-capable: 77163 bytes
I (87599) AUDIO:   Free PSRAM: 3863732 bytes
I (87604) AUDIO:   Timestamp: 86051 ms
I (87609) AUDIO:   Total init time: 200 ms
I (87613) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87631) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (87637) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (87643) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (87652) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (87658) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87676) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87694) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (87700) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (87707) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (87714) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (87720) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (88070) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (88077) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (88085) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (88103) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (88110) AUDIO: âœ… RX channel disabled (took 0 ms)
I (88115) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (88122) AUDIO: âœ… TX channel disabled (took 0 ms)
I (88127) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (88184) AUDIO: [STEP 4/5] Deleting RX channel...
I (88185) AUDIO: âœ… RX channel deleted (took 0 ms)
I (88185) AUDIO: [STEP 5/5] Deleting TX channel...
I (88190) AUDIO: âœ… TX channel deleted (took 0 ms)
I (88195) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (88253) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (88260) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (88266) AUDIO: â•‘ Camera Can Now Initialize
I (88272) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (88290) STATE_MGR: Capturing frame from camera
I (88295) CAMERA: Initializing camera...
I (88300) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (88309) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (88318) cam_hal: cam init ok
W (88321) ledc: GPIO 0 is not usable, maybe conflict with others
I (88328) sccb-ng: pin_sda 26 pin_scl 27
I (88332) sccb-ng: sccb_i2c_port=1
I (88337) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (88380) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (88380) camera: Detected OV2640 camera
I (88380) camera: Detected camera at address=0x30
I (88461) cam_hal: PSRAM DMA mode disabled
I (88461) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (88466) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (88473) cam_hal: cam config ok
I (88476) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (88559) CAMERA: Camera initialized successfully
I (88657) STATE_MGR: Frame captured: 7813 bytes
I (88658) JSON_PROTO: Generated session ID: hotpin-998C64-87
I (88658) STATE_MGR: Uploading image using session hotpin-998C64-87
I (88665) HTTP_CLIENT: Uploading image: session=hotpin-998C64-87, size=7813 bytes
I (88674) HTTP_CLIENT: POST body assembled: 8070 bytes
I (88680) HTTP_CLIENT: Sending POST request to http://10.143.111.58:8000/image
I (88796) HTTP_CLIENT: HTTP POST Status = 200, content_length = 198
I (88797) HTTP_CLIENT: Image uploaded successfully
I (88798) HTTP_CLIENT: Server response: {"status":"success","message":"Image received successfully","session":"hotpin-998C64-87","filename":"image.jpg","size_bytes":7813,"saved_path":"captured_images/hotpin-998C64-87_20251103_175919.jpg"}
I (88822) CAMERA: Deinitializing camera...
I (88825) CAMERA: Camera deinitialized
I (88829) STATE_MGR: Camera deinitialized - DMA memory freed
I (88835) STATE_MGR: Image uploaded successfully
I (88841) LED_CTRL: LED pattern -> 3
I (88845) STATE_MGR: Camera capture sequence complete
I (88861) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (91702) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (91702) BUTTON: Single click confirmed
I (91702) STATE_MGR: Single click - mode toggle requested
I (91709) STATE_MGR: Switching: Camera â†’ Voice (count: 9)
I (91765) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (91765) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91778) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (91785) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91804) MEM_MGR: â•‘ Internal RAM:
I (91808) MEM_MGR: â•‘   Free:              73063 bytes ( 71 KB)
I (91814) MEM_MGR: â•‘   Largest Block:     49152 bytes ( 48 KB)
I (91821) MEM_MGR: â•‘   Fragmentation:     33%
I (91826) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91845) MEM_MGR: â•‘ DMA-capable RAM:
I (91849) MEM_MGR: â•‘   Free:              52699 bytes ( 51 KB)
I (91856) MEM_MGR: â•‘   Largest Block:     49152 bytes ( 48 KB)
I (91863) MEM_MGR: â•‘   Fragmentation:      7%
I (91868) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91886) MEM_MGR: â•‘ PSRAM:
I (91890) MEM_MGR: â•‘   Free:             3859496 bytes (3769 KB)
I (91897) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (91904) MEM_MGR: â•‘   Fragmentation:      2%
I (91909) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91927) MEM_MGR: â•‘ Total Heap:
I (91931) MEM_MGR: â•‘   Free:             3912044 bytes (3820 KB)
I (91938) MEM_MGR: â•‘   Minimum Ever:     3832160 bytes (3742 KB)
I (91945) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (91963) MEM_MGR: â•‘ Memory Delta from Baseline:
I (91969) MEM_MGR: â•‘   Internal RAM:     -152072 bytes (-148 KB)
I (91976) MEM_MGR: â•‘   DMA-capable:      -152072 bytes (-148 KB)
I (91983) MEM_MGR: â•‘   PSRAM:            -332520 bytes (-324 KB)
I (91989) MEM_MGR: â•‘   Total Heap:       -452712 bytes (-442 KB)
I (91996) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92015) STATE_MGR: Stopping camera...
I (92019) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92036) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (92042) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92059) STATE_MGR:   Timeout: 5000 ms
I (92063) STATE_MGR:   Timestamp: 90510 ms
I (92068) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (92074) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92090) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (92096) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92113) STATE_MGR:   Free heap before: 3966528 bytes
I (92118) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (92124) CAMERA: Deinitializing camera...
I (92129) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (92135) STATE_MGR:   Free heap after: 3966528 bytes
I (92141) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (92147) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92163) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (92169) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92186) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (92294) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (92394) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (92444) STATE_MGR:   âœ“ Total stabilization: 250ms
I (92444) STATE_MGR:   Timestamp: 90891 ms
I (92444) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92460) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (92466) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92483) STATE_MGR:   Free heap before: 3966528 bytes
I (92489) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92507) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (92514) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92531) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92550) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (92557) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (92575) AUDIO: [DIAG] Pre-init state:
I (92579) AUDIO:   Free heap: 3966528 bytes
I (92584) AUDIO:   Free internal RAM: 123311 bytes
I (92590) AUDIO:   Free DMA-capable: 102947 bytes
I (92595) AUDIO:   Free PSRAM: 3863732 bytes
I (92600) AUDIO:   Timestamp: 91047 ms
I (92604) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (92611) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (92619) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (92627) AUDIO:   DMA frame num (per desc): 1020
I (92633) AUDIO:   DMA total samples (effective): 4080
I (92639) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (92646) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (92652) AUDIO: âœ… I2S channels created (took 0 ms)
I (92658) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffca7e8
I (92664) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (92671) AUDIO:   Sample rate: 16000 Hz
I (92675) AUDIO:   MCLK: DISABLED
I (92679) AUDIO:   BCLK: GPIO14 (shared)
I (92684) AUDIO:   WS:   GPIO15 (shared)
I (92689) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (92696) AUDIO: âœ… TX channel configured (took 1 ms)
I (92700) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (92707) AUDIO:   Sample rate: 16000 Hz
I (92711) AUDIO:   MCLK: DISABLED
I (92715) AUDIO:   BCLK: GPIO14 (shared)
I (92720) AUDIO:   WS:   GPIO15 (shared)
I (92725) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (92731) AUDIO: âœ… RX channel configured (took 0 ms)
I (92736) AUDIO: [STEP 4/6] Enabling TX channel...
I (92742) AUDIO: âœ… TX channel enabled (took 0 ms)
I (92747) AUDIO: [STEP 5/6] Enabling RX channel...
I (92753) AUDIO: âœ… RX channel enabled (took 0 ms)
I (92758) AUDIO: [STEP 6/6] Hardware stabilization...
I (92764) AUDIO:   Phase 1: Initial settle (50ms)
I (92819) AUDIO:   Phase 2: DMA verification
I (92819) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (92820) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (92976) AUDIO: [DIAG] Post-init state:
I (92976) AUDIO:   Free heap: 3940532 bytes
I (92976) AUDIO:   Free internal RAM: 97315 bytes
I (92980) AUDIO:   Free DMA-capable: 76951 bytes
I (92985) AUDIO:   Free PSRAM: 3863732 bytes
I (92990) AUDIO:   Timestamp: 91437 ms
I (92995) AUDIO:   Total init time: 201 ms
I (92999) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93017) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (93023) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (93029) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (93038) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (93044) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93062) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93080) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (93087) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (93093) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (93100) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (93106) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93124) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (93130) STATE_MGR:   Free heap after: 3940532 bytes
I (93136) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93152) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (93158) STATE_MGR: â•‘ Total transition time: 889 ms
I (93164) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93180) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93196) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (93202) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93219) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (93227) TTS: No pending audio to flush
I (93256) TTS: TTS decoder session reset for next audio stream
I (93256) TTS: âœ… TTS decoder flushed and reset for next session
I (93258) STT: Starting STT pipeline...
I (93262) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (93272) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (93279) STT:   Current time: 91725 ms
I (93282) STT: âœ… STT pipeline started
I (93283) STT:   Free heap: 3931980 bytes
I (93283) STT: Audio streaming session activated
I (93298) STT: Connection stabilization delay (500ms)...
I (93338) TTS: ðŸŽµ Starting TTS decoder...
I (93338) TTS: Initializing TTS decoder...
W (93338) TTS: TTS decoder already initialized
I (93371) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (93371) TTS: âœ… TTS decoder started successfully
I (93375) TTS: ðŸŽµ TTS playback task started on Core 1
I (93381) TTS: âœ… TTS playback task registered with watchdog
I (93387) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (93492) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (93492) STT:   âœ“ Audio driver initialized
I (93493) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (93600) STT:   Total stabilization: 300ms
I (93600) STT:   Timestamp: 92047 ms
I (93600) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (93604) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37fc (with safety padding)
I (93613) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93629) STT: â•‘ ðŸŽ¤ STARTING AUDIO CAPTURE
I (93634) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (93640) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93700) LED_CTRL: LED pattern -> 1
I (93701) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93712) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (93719) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93737) MEM_MGR: â•‘ Internal RAM:
I (93741) MEM_MGR: â•‘   Free:             123311 bytes (120 KB)
I (93748) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (93755) MEM_MGR: â•‘   Fragmentation:     24%
I (93760) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93778) MEM_MGR: â•‘ DMA-capable RAM:
I (93783) MEM_MGR: â•‘   Free:             102947 bytes (100 KB)
I (93790) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (93796) MEM_MGR: â•‘   Fragmentation:      9%
I (93801) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93804) STT: Testing WebSocket transport health...
I (93820) MEM_MGR: â•‘ PSRAM:
I (93829) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (93832) STT: âœ… WebSocket transport verified healthy
I (93836) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (93849) MEM_MGR: â•‘   Fragmentation:      2%
I (93854) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93872) MEM_MGR: â•‘ Total Heap:
I (93876) MEM_MGR: â•‘   Free:             3966528 bytes (3873 KB)
I (93883) MEM_MGR: â•‘   Minimum Ever:     3832160 bytes (3742 KB)
I (93890) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93909) MEM_MGR: â•‘ Memory Delta from Baseline:
I (93914) MEM_MGR: â•‘   Internal RAM:     -101824 bytes ( -99 KB)
I (93921) MEM_MGR: â•‘   DMA-capable:      -101824 bytes ( -99 KB)
I (93928) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (93935) MEM_MGR: â•‘   Total Heap:       -398228 bytes (-388 KB)
I (93942) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93942) STT: Starting audio streaming to server...
I (93960) STATE_MGR: âœ… Voice mode transition complete
I (93971) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (93987) STATE_MGR: STT pipeline reported start
I (93998) STATE_MGR: TTS playback start event received
I (94186) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 5, "bytes_received": 16400}
I (94187) WEBSOCKET: Server status: receiving
I (94710) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 36880}
I (94711) WEBSOCKET: Server status: receiving
I (95326) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 15, "bytes_received": 57360}
I (95327) WEBSOCKET: Server status: receiving
I (96641) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 77840}
I (96642) WEBSOCKET: Server status: receiving
I (96902) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (96902) BUTTON: Single click confirmed
I (96902) STATE_MGR: Single click - mode toggle requested
I (96909) STATE_MGR: Switching: Voice â†’ Camera (count: 10)
I (96965) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (96965) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96978) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (96985) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97004) MEM_MGR: â•‘ Internal RAM:
I (97008) MEM_MGR: â•‘   Free:             123311 bytes (120 KB)
I (97015) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (97021) MEM_MGR: â•‘   Fragmentation:     24%
I (97027) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97045) MEM_MGR: â•‘ DMA-capable RAM:
I (97049) MEM_MGR: â•‘   Free:             102947 bytes (100 KB)
I (97056) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (97063) MEM_MGR: â•‘   Fragmentation:      9%
I (97068) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97086) MEM_MGR: â•‘ PSRAM:
I (97090) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (97097) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (97104) MEM_MGR: â•‘   Fragmentation:      2%
I (97109) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97127) MEM_MGR: â•‘ Total Heap:
I (97132) MEM_MGR: â•‘   Free:             3966528 bytes (3873 KB)
I (97138) MEM_MGR: â•‘   Minimum Ever:     3832160 bytes (3742 KB)
I (97145) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97164) MEM_MGR: â•‘ Memory Delta from Baseline:
I (97169) MEM_MGR: â•‘   Internal RAM:     -101824 bytes ( -99 KB)
I (97176) MEM_MGR: â•‘   DMA-capable:      -101824 bytes ( -99 KB)
I (97183) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (97190) MEM_MGR: â•‘   Total Heap:       -398228 bytes (-388 KB)
I (97197) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97215) STATE_MGR: Stopping voice mode components...
I (97221) STT: Stopping STT pipeline...
I (97225) STT: Draining ring buffer (21504 bytes pending) before shutdown...
I (97240) STT: Ring buffer drained and cleared successfully
I (97270) STT: Capture stopped and ring buffer drained; ending streaming loop
I (97270) STT: Sending EOS signal...
I (97271) WEBSOCKET: Sending EOS signal
I (97280) STT: Audio capture task stopped (captured 120832 bytes total)
I (97458) STT: Audio streaming session complete (streamed 98304 bytes in 24 chunks)
I (97470) STT: STT pipeline stopped
I (97470) STATE_MGR: Voice pipeline reported COMPLETE
I (97471) STATE_MGR: Waiting for TTS playback drain (~0 bytes pending, timeout 15000 ms)
I (97663) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 25, "bytes_received": 98320}
I (97664) WEBSOCKET: Server status: receiving
I (97778) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (97779) STATE_MGR: TTS decoder confirmed idle
I (97782) STATE_MGR: Flushing and resetting TTS decoder for next session
I (97789) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (97797) TTS: Flushing pending audio before reset (~0 bytes)
I (97868) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (97869) WEBSOCKET: Server status: processing
I (97872) WEBSOCKET: Server stage: transcription
I (97877) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (98103) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (98104) TTS: TTS decoder session reset for next audio stream
I (98108) TTS: âœ… TTS decoder flushed and reset for next session
I (98141) TTS: TTS playback task shutting down - is_running=0
I (98141) TTS: ðŸŽµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (98145) TTS:   âœ“ DMA buffer freed from PSRAM
I (98150) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (98276) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hello"}
I (98277) WEBSOCKET: Server status: processing
I (98281) WEBSOCKET: Server stage: llm
I (98286) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (98315) TTS: â¹ï¸ Stopping TTS decoder...
W (98316) TTS: TTS decoder not running
I (98440) STATE_MGR: Acquiring I2S mutex...
I (98440) STATE_MGR: Deinitializing audio drivers...
I (98440) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98458) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (98465) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98483) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (98490) AUDIO: âœ… RX channel disabled (took 0 ms)
I (98496) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (98502) AUDIO: âœ… TX channel disabled (took 0 ms)
I (98508) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (98564) AUDIO: [STEP 4/5] Deleting RX channel...
I (98565) AUDIO: âœ… RX channel deleted (took 0 ms)
I (98565) AUDIO: [STEP 5/5] Deleting TX channel...
I (98570) AUDIO: âœ… TX channel deleted (took 0 ms)
I (98575) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (98633) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98640) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (98646) AUDIO: â•‘ Camera Can Now Initialize
I (98652) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98687) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I'm here to help with any questions or tasks you need assistance with."}
I (98693) WEBSOCKET: Server status: processing
I (98697) WEBSOCKET: Server stage: tts
I (98702) WEBSOCKET: Pipeline stage changed: llm -> tts
I (98708) WEBSOCKET: Entering TTS stage - preparing for audio streaming
W (98715) WEBSOCKET: Ignoring TTS stage - not in voice mode (state=3)
W (98722) WEBSOCKET: Server response arrived after mode transition - audio will be discarded
I (98720) STATE_MGR: Allowing memory stabilization (100ms)...
W (98817) TTS: Rejecting audio chunks - TTS decoder not running (chunks rejected: 50, last: 976 bytes)
I (98838) STATE_MGR: Camera will be initialized on-demand during capture
I (98838) STATE_MGR: I2S mutex released
I (98839) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98857) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (98864) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98883) MEM_MGR: â•‘ Internal RAM:
I (98887) MEM_MGR: â•‘   Free:             123311 bytes (120 KB)
I (98893) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (98900) MEM_MGR: â•‘   Fragmentation:     24%
I (98905) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98924) MEM_MGR: â•‘ DMA-capable RAM:
I (98928) MEM_MGR: â•‘   Free:             102947 bytes (100 KB)
I (98935) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (98942) MEM_MGR: â•‘   Fragmentation:      9%
I (98947) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98965) MEM_MGR: â•‘ PSRAM:
I (98969) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (98976) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (98983) MEM_MGR: â•‘   Fragmentation:      2%
I (98988) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (99006) MEM_MGR: â•‘ Total Heap:
I (99010) MEM_MGR: â•‘   Free:             3966528 bytes (3873 KB)
I (99017) MEM_MGR: â•‘   Minimum Ever:     3832160 bytes (3742 KB)
I (99024) WEBSOCKET: Received text message: {"status": "complete"}
I (99024) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (99031) WEBSOCKET: Server status: complete
I (99049) MEM_MGR: â•‘ Memory Delta from Baseline:
I (99054) WEBSOCKET: Pipeline stage changed: tts -> complete
I (99060) MEM_MGR: â•‘   Internal RAM:     -101824 bytes ( -99 KB)
I (99066) WEBSOCKET: Exiting TTS stage (transition to complete)
I (99073) MEM_MGR: â•‘   DMA-capable:      -101824 bytes ( -99 KB)
I (99086) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (99093) MEM_MGR: â•‘   Total Heap:       -398228 bytes (-388 KB)
I (99100) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (99118) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (99128) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (99146) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (99153) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (99171) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (99189) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (99196) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (99214) AUDIO: [DIAG] Pre-init state:
I (99219) AUDIO:   Free heap: 3966528 bytes
I (99224) AUDIO:   Free internal RAM: 123311 bytes
I (99229) AUDIO:   Free DMA-capable: 102947 bytes
I (99234) AUDIO:   Free PSRAM: 3863732 bytes
I (99239) AUDIO:   Timestamp: 97686 ms
I (99244) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (99251) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (99258) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (99267) AUDIO:   DMA frame num (per desc): 1020
I (99272) AUDIO:   DMA total samples (effective): 4080
I (99278) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (99285) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (99292) AUDIO: âœ… I2S channels created (took 0 ms)
I (99297) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffca7e8
I (99304) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (99310) AUDIO:   Sample rate: 16000 Hz
I (99315) AUDIO:   MCLK: DISABLED
I (99319) AUDIO:   BCLK: GPIO14 (shared)
I (99323) AUDIO:   WS:   GPIO15 (shared)
I (99328) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (99335) AUDIO: âœ… TX channel configured (took 1 ms)
I (99339) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (99346) AUDIO:   Sample rate: 16000 Hz
I (99351) AUDIO:   MCLK: DISABLED
I (99355) AUDIO:   BCLK: GPIO14 (shared)
I (99359) AUDIO:   WS:   GPIO15 (shared)
I (99364) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (99370) AUDIO: âœ… RX channel configured (took 0 ms)
I (99375) AUDIO: [STEP 4/6] Enabling TX channel...
I (99381) AUDIO: âœ… TX channel enabled (took 0 ms)
I (99386) AUDIO: [STEP 5/6] Enabling RX channel...
I (99392) AUDIO: âœ… RX channel enabled (took 0 ms)
I (99397) AUDIO: [STEP 6/6] Hardware stabilization...
I (99403) AUDIO:   Phase 1: Initial settle (50ms)
I (99458) AUDIO:   Phase 2: DMA verification
I (99458) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (99459) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (99615) AUDIO: [DIAG] Post-init state:
I (99615) AUDIO:   Free heap: 3940532 bytes
I (99615) AUDIO:   Free internal RAM: 97315 bytes
I (99619) AUDIO:   Free DMA-capable: 76951 bytes
I (99624) AUDIO:   Free PSRAM: 3863732 bytes
I (99629) AUDIO:   Timestamp: 98076 ms
I (99634) AUDIO:   Total init time: 201 ms
I (99638) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (99656) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (99662) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (99668) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (99677) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (99683) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (99701) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (99719) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (99726) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (99732) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (99739) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (99745) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (100046) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (100053) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (100061) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (100079) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (100086) AUDIO: âœ… RX channel disabled (took 0 ms)
I (100092) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (100098) AUDIO: âœ… TX channel disabled (took 0 ms)
I (100104) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (100161) AUDIO: [STEP 4/5] Deleting RX channel...
I (100162) AUDIO: âœ… RX channel deleted (took 0 ms)
I (100162) AUDIO: [STEP 5/5] Deleting TX channel...
I (100167) AUDIO: âœ… TX channel deleted (took 0 ms)
I (100173) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (100230) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (100237) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (100244) AUDIO: â•‘ Camera Can Now Initialize
I (100249) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (100267) LED_CTRL: LED pattern -> 3
I (100271) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (100287) STATE_MGR: STT pipeline reported stop
I (100297) STATE_MGR: Pipeline stage event: transcription
I (100307) STATE_MGR: Pipeline stage event: llm
I (100317) STATE_MGR: Pipeline stage event: tts
I (100327) STATE_MGR: Pipeline stage event: complete
I (104586) STATE_MGR: Button event received: 3 in state CAMERA_STANDBY
I (104586) BUTTON: Long press detected (3000 ms)
W (104586) STATE_MGR: Long press - shutdown requested
W (104593) STATE_MGR: Shutdown state reached
I (104598) HOTPIN_MAIN: System shutdown detected, terminating WebSocket connection task
W (104598) STATE_MGR: === SYSTEM SHUTDOWN ===
I (104606) HOTPIN_MAIN: Unregistering WebSocket connection task from watchdog
I (104612) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (104619) HOTPIN_MAIN: WebSocket connection task terminated
I (104637) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (104651) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (104669) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (104687) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (104694) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (104712) AUDIO: [DIAG] Pre-init state:
I (104717) AUDIO:   Free heap: 3971004 bytes
I (104722) AUDIO:   Free internal RAM: 127787 bytes
I (104728) AUDIO:   Free DMA-capable: 107423 bytes
I (104733) AUDIO:   Free PSRAM: 3863732 bytes
I (104738) AUDIO:   Timestamp: 103185 ms
I (104743) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (104750) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (104758) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (104766) AUDIO:   DMA frame num (per desc): 1020
I (104771) AUDIO:   DMA total samples (effective): 4080
I (104777) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (104784) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (104791) AUDIO: âœ… I2S channels created (took 0 ms)
I (104796) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffca7e8
I (104803) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (104810) AUDIO:   Sample rate: 16000 Hz
I (104815) AUDIO:   MCLK: DISABLED
I (104819) AUDIO:   BCLK: GPIO14 (shared)
I (104823) AUDIO:   WS:   GPIO15 (shared)
I (104828) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (104835) AUDIO: âœ… TX channel configured (took 0 ms)
I (104840) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (104847) AUDIO:   Sample rate: 16000 Hz
I (104851) AUDIO:   MCLK: DISABLED
I (104855) AUDIO:   BCLK: GPIO14 (shared)
I (104860) AUDIO:   WS:   GPIO15 (shared)
I (104865) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (104871) AUDIO: âœ… RX channel configured (took 0 ms)
I (104876) AUDIO: [STEP 4/6] Enabling TX channel...
I (104882) AUDIO: âœ… TX channel enabled (took 0 ms)
I (104887) AUDIO: [STEP 5/6] Enabling RX channel...
I (104893) AUDIO: âœ… RX channel enabled (took 0 ms)
I (104899) AUDIO: [STEP 6/6] Hardware stabilization...
I (104904) AUDIO:   Phase 1: Initial settle (50ms)
I (104960) AUDIO:   Phase 2: DMA verification
I (104960) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (104960) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (105118) AUDIO: [DIAG] Post-init state:
I (105118) AUDIO:   Free heap: 3945008 bytes
I (105118) AUDIO:   Free internal RAM: 101791 bytes
I (105122) AUDIO:   Free DMA-capable: 81427 bytes
I (105128) AUDIO:   Free PSRAM: 3863732 bytes
I (105133) AUDIO:   Timestamp: 103580 ms
I (105137) AUDIO:   Total init time: 200 ms
I (105142) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (105160) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (105166) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (105172) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (105181) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (105188) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (105206) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (105224) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (105230) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (105237) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (105244) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (105250) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (106508) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (106515) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (106523) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (106541) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (106548) AUDIO: âœ… RX channel disabled (took 0 ms)
I (106554) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (106560) AUDIO: âœ… TX channel disabled (took 0 ms)
I (106566) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (106623) AUDIO: [STEP 4/5] Deleting RX channel...
I (106624) AUDIO: âœ… RX channel deleted (took 0 ms)
I (106624) AUDIO: [STEP 5/5] Deleting TX channel...
I (106629) AUDIO: âœ… TX channel deleted (took 0 ms)
I (106635) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (106692) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (106699) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (106706) AUDIO: â•‘ Camera Can Now Initialize
I (106711) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (106729) LED_CTRL: LED pattern -> 1
I (107333) LED_CTRL: LED pattern -> 3
I (108533) LED_CTRL: LED pattern -> 0
I (108533) STATE_MGR: Stopping all subsystems...
I (108533) STATE_MGR: Shutting down camera...
I (108537) CAMERA: Deinitializing camera...
I (108542) STT: Stopping STT pipeline...
W (108546) STT: STT pipeline already stopped
I (108551) TTS: â¹ï¸ Stopping TTS decoder...
W (108556) TTS: TTS decoder not running
I (108585) STATE_MGR: Stopping WebSocket client
I (108585) WEBSOCKET: Disconnecting from WebSocket server...
W (108929) websocket_client: Client was not started
W (108929) WEBSOCKET: WebSocket client stop reported ESP_FAIL, continuing cleanup
I (108932) WEBSOCKET: WebSocket health check task shutdown signal received
I (108939) WEBSOCKET: WebSocket health check task exiting (cycles: 20, disconnects: 0, reconnects: 1)
I (109032) WEBSOCKET: WebSocket disconnected
I (109032) WEBSOCKET: Force stopping WebSocket client
W (109033) websocket_client: Client was not started
W (109038) WEBSOCKET: Graceful close returned ESP_FAIL
I (109043) STATE_MGR: âœ… Shutdown complete
