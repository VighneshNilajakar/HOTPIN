PS F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware> idf.py monitor
Executing action: monitor
Serial port COM7
Connecting....
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP32
Running idf_monitor in directory F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware
Executing "C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe C:\Espressif\frameworks\esp-idf-v5.4.2\tools/idf_monitor.py -p COM7 -b 115200 --toolchain-prefix xtensa-esp32-elf- --target esp32 --revision 0 F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware\build\hotpin_esp32_firmware.elf --force-color -m 'C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe' 'C:\Espressif\frameworks\esp-idf-v5.4.2\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM7 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM7 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:2
load:0x3fff0030,len:6276
load:0x40078000,len:15736
load:0x40080400,len:4
--- 0x40080400: _init at ??:?
load:0x40080404,len:3860
entry 0x4008063c
I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Nov  3 2025 19:36:27
I (30) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=3addch (241116) map
ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:2
load:0x3fff0030,len:6276
load:0x40078000,len:15736
load:0x40080400,len:4
--- 0x40080400: _init at ??:?
load:0x40080404,len:3860
entry 0x4008063c
I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Nov  3 2025 19:36:27
I (30) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=3addch (241116) map
I (188) esp_image: segment 1: paddr=0004ae04 vaddr=3ff80000 size=0001ch (    28) load
I (188) esp_image: segment 2: paddr=0004ae28 vaddr=3ffb0000 size=051f0h ( 20976) load
I (199) esp_image: segment 3: paddr=00050020 vaddr=400d0020 size=be0ech (778476) map
I (465) esp_image: segment 4: paddr=0010e114 vaddr=3ffb51f0 size=0cad4h ( 51924) load
I (485) esp_image: segment 5: paddr=0011abf0 vaddr=40080000 size=1ad94h (109972) load
I (544) boot: Loaded app from partition at offset 0x10000
I (544) boot: Disabling RNG early entropy source...
I (554) quad_psram: This chip is ESP32-D0WD
I (555) esp_psram: Found 4MB PSRAM device
I (555) esp_psram: Speed: 40MHz
I (558) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (566) cpu_start: Multicore app
I (1460) esp_psram: SPI SRAM memory test OK
I (1468) cpu_start: Pro cpu start user code
I (1468) cpu_start: cpu freq: 240000000 Hz
I (1468) app_init: Application information:
I (1471) app_init: Project name:     hotpin_esp32_firmware
I (1477) app_init: App version:      dc6450f-dirty
I (1483) app_init: Compile time:     Nov  3 2025 19:36:15
I (1489) app_init: ELF file SHA256:  c177c8bcb...
I (1494) app_init: ESP-IDF:          v5.4.2-dirty
I (1500) efuse_init: Min chip rev:     v0.0
I (1504) efuse_init: Max chip rev:     v3.99
I (1509) efuse_init: Chip rev:         v3.1
I (1515) heap_init: Initializing. RAM available for dynamic allocation:
I (1522) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1528) heap_init: At 3FFC9478 len 00016B88 (90 KiB): DRAM
I (1534) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1540) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1547) heap_init: At 4009AD94 len 0000526C (20 KiB): IRAM
I (1554) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1562) spi_flash: detected chip: generic
I (1566) spi_flash: flash io: dio
W (1570) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1584) main_task: Started on CPU0
I (1587) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1596) main_task: Calling app_main()
I (1600) HOTPIN_MAIN: ====================================
I (1606) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1612) HOTPIN_MAIN: ====================================
W (1618) HOTPIN_MAIN: Brownout detector disabled
I (1623) HOTPIN_MAIN: Validating PSRAM...
I (1628) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1634) HOTPIN_MAIN: PSRAM validation passed
I (1640) HOTPIN_MAIN: ====================================
I (1646) HOTPIN_MAIN: System Information:
I (1650) HOTPIN_MAIN: Chip: esp32
I (1654) HOTPIN_MAIN: Cores: 2
I (1658) HOTPIN_MAIN: Silicon revision: 301
I (1663) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1668) HOTPIN_MAIN: Flash: 2 MB external
I (1673) HOTPIN_MAIN: Free heap: 4364852 bytes
I (1678) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1683) HOTPIN_MAIN: ====================================
I (1689) HOTPIN_MAIN: Initializing memory manager...
I (1694) MEM_MGR: Initializing memory manager...
I (1700) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1718) MEM_MGR: â•‘ Memory Manager Initialized
I (1723) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1742) MEM_MGR: â•‘ Baseline Memory State:
I (1747) MEM_MGR: â•‘   Internal RAM:     225135 bytes (219 KB)
I (1753) MEM_MGR: â•‘   DMA-capable:      204771 bytes (199 KB)
I (1760) MEM_MGR: â•‘   PSRAM:            4192016 bytes (4093 KB)
I (1767) MEM_MGR: â•‘   Total Heap:       4364756 bytes (4262 KB)
I (1773) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1792) MEM_MGR: â•‘ Configured Thresholds:
I (1797) MEM_MGR: â•‘   Internal RAM:     WARN=50KB, CRIT=20KB
I (1803) MEM_MGR: â•‘   DMA-capable:      WARN=35KB, CRIT=20KB
I (1810) MEM_MGR: â•‘   PSRAM:            WARN=500KB, CRIT=200KB
I (1816) MEM_MGR: â•‘   Fragmentation:    WARN=30%, CRIT=50%
I (1823) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1841) MEM_MGR: Starting memory monitoring (interval: 15000 ms)
I (1848) MEM_MGR: âœ… Memory monitoring started
I (1848) MEM_MGR: Memory monitor task started (interval: 15000 ms)
I (1853) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
W (1860) MEM_MGR: âš ï¸ WARNING: Memory fragmentation increasing! DMA:46% PSRAM:2%
I (1878) MEM_MGR: â•‘ Memory Statistics - System Boot
I (1892) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1910) MEM_MGR: â•‘ Internal RAM:
I (1915) MEM_MGR: â•‘   Free:             225135 bytes (219 KB)
I (1921) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1928) MEM_MGR: â•‘   Fragmentation:     51%
I (1933) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1951) MEM_MGR: â•‘ DMA-capable RAM:
I (1956) MEM_MGR: â•‘   Free:             204771 bytes (199 KB)
I (1962) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1969) MEM_MGR: â•‘   Fragmentation:     46%
I (1974) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1992) MEM_MGR: â•‘ PSRAM:
I (1996) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (2003) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (2009) MEM_MGR: â•‘   Fragmentation:      2%
I (2015) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2033) MEM_MGR: â•‘ Total Heap:
I (2037) MEM_MGR: â•‘   Free:             4364756 bytes (4262 KB)
I (2044) MEM_MGR: â•‘   Minimum Ever:     4364756 bytes (4262 KB)
I (2050) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2069) MEM_MGR: â•‘ Memory Delta from Baseline:
I (2074) MEM_MGR: â•‘   Internal RAM:          +0 bytes (  +0 KB)
I (2081) MEM_MGR: â•‘   DMA-capable:           +0 bytes (  +0 KB)
I (2088) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (2094) MEM_MGR: â•‘   Total Heap:            +0 bytes (  +0 KB)
I (2101) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2119) HOTPIN_MAIN: Initializing NVS...
I (2149) HOTPIN_MAIN: NVS initialized successfully
I (2149) event_dispatcher: System event queue ready (16 entries)
I (2150) HOTPIN_MAIN: Synchronization primitives created
I (2156) HOTPIN_MAIN: Initializing WiFi...
I (2165) wifi:wifi driver task: 3ffdaabc, prio:23, stack:6656, core=0
I (2177) wifi:wifi firmware version: bea31f3
I (2178) wifi:wifi certification version: v7.0
I (2178) wifi:config NVS flash: enabled
I (2179) wifi:config nano formatting: disabled
I (2183) wifi:Init data frame dynamic rx buffer num: 32
I (2188) wifi:Init static rx mgmt buffer num: 5
I (2192) wifi:Init management short buffer num: 32
I (2197) wifi:Init dynamic tx buffer num: 32
I (2201) wifi:Init static rx buffer size: 1600
I (2205) wifi:Init static rx buffer num: 10
I (2209) wifi:Init dynamic rx buffer num: 32
I (2214) wifi_init: rx ba win: 6
I (2217) wifi_init: accept mbox: 6
I (2221) wifi_init: tcpip mbox: 32
I (2225) wifi_init: udp mbox: 6
I (2229) wifi_init: tcp mbox: 6
I (2232) wifi_init: tcp tx win: 5760
I (2237) wifi_init: tcp rx win: 5760
I (2241) wifi_init: tcp mss: 1440
I (2245) wifi_init: WiFi IRAM OP enabled
I (2249) wifi_init: WiFi RX IRAM OP enabled
I (2256) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (2325) wifi:mode : sta (80:f3:da:99:8c:64)
I (2326) wifi:enable tsf
I (2328) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (2329) HOTPIN_MAIN: Waiting for WiFi connection...
I (2329) HOTPIN_MAIN: WiFi station started, connecting...
I (2351) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (2353) wifi:state: init -> auth (0xb0)
I (3221) wifi:state: auth -> assoc (0x0)
I (3234) wifi:state: assoc -> run (0x10)
I (3259) wifi:connected with wifi, aid = 1, channel 11, BW20, bssid = ee:d4:b9:ed:90:50
I (3260) wifi:security: WPA3-SAE, phy: bgn, rssi: -48
I (3263) wifi:pm start, type: 1

I (3264) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (3277) wifi:<ba-add>idx:0 (ifx:0, ee:d4:b9:ed:90:50), tid:0, ssn:0, winSize:64
I (3279) HOTPIN_MAIN: WiFi connected to AP
I (3321) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (3321) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (4301) esp_netif_handlers: sta ip: 10.143.111.214, mask: 255.255.255.0, gw: 10.143.111.248
I (4302) HOTPIN_MAIN: âœ… Got IP address: 10.143.111.214
I (4306) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (7343) HOTPIN_MAIN: Initializing button handler...
I (7343) BUTTON: Initializing button handler on GPIO 12
I (7344) gpio: GPIO[12]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (7353) BUTTON: Button FSM task started
I (7358) BUTTON: GPIO ISR service installed successfully
I (7363) BUTTON: Button handler initialized successfully (initial level=1, primed=1)
I (7372) HOTPIN_MAIN: Initializing LED controller...
I (7377) LED_CTRL: Initializing LED controller on GPIO 33
I (7384) LED_CTRL: LED controller ready
I (7388) LED_CTRL: LED pattern -> 2
I (7392) HOTPIN_MAIN: Initializing WebSocket client...
I (7398) WEBSOCKET: Initializing WebSocket client...
I (7404) WEBSOCKET: Server URI: ws://10.143.111.58:8000/ws
I (7410) WEBSOCKET: Authorization header configured
I (7416) WEBSOCKET: âœ… WebSocket client initialized
I (7421) WEBSOCKET: Status callback registered
I (7426) HOTPIN_MAIN: WebSocket status callback registered
I (7432) HOTPIN_MAIN: Initializing HTTP client...
I (7438) HTTP_CLIENT: Initializing HTTP client
I (7443) HTTP_CLIENT: Authorization token configured
I (7448) HTTP_CLIENT: HTTP client initialized (server: http://10.143.111.58:8000)
I (7457) HOTPIN_MAIN: Initializing STT pipeline...
I (7462) STT: Initializing STT pipeline...
I (7467) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7485) STT: â•‘ STT Ring Buffer Allocation (PSRAM)
I (7491) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7509) STT: [MEMORY] Pre-allocation state:
I (7515) STT:   Free internal RAM: 166235 bytes
I (7519) STT:   Free DMA-capable: 145871 bytes
I (7524) STT:   Free PSRAM: 4126020 bytes
I (7529) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (7537) STT:   âœ“ Ring buffer allocated at 0x3f810ac0 (PSRAM address)
I (7544) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (7553) STT: [MEMORY] Post-allocation state:
I (7558) STT:   Free internal RAM: 166235 bytes
I (7563) STT:   Free DMA-capable: 145871 bytes
I (7568) STT:   Free PSRAM: 4060480 bytes
I (7579) STT: [CORE AFFINITY] Creating persistent audio streaming task on Core 0
I (7581) STT: Persistent audio streaming task started on Core 0
I (7587) STT:   âœ“ Stream buffer allocated at 0x3ffd1b74 (with safety padding)
I (7596) STT: âœ… STT pipeline initialized
I (7600) HOTPIN_MAIN: Initializing TTS decoder...
I (7605) TTS: Initializing TTS decoder...
I (7610) TTS: Allocating 196608 byte PSRAM buffer for TTS stream
I (7617) TTS:   PSRAM available: 4060480 bytes (3965 KB)
I (7623) TTS:   âœ“ TTS stream buffer allocated at 0x3f820ac4
I (7655) WEBSOCKET: Audio callback registered
I (7656) TTS: âœ… TTS decoder initialized
I (7656) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (7662) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (7667) HOTPIN_MAIN: State manager task created on Core 1
I (7667) STATE_MGR: State manager task started on Core 1
I (7674) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (7680) STATE_MGR: Priority: 10
I (7686) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 1)...
I (7690) STATE_MGR: Starting in camera mode...
I (7698) WEBSOCKET: Connecting to WebSocket server...
I (7703) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (7714) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7733) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (7741) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7719) websocket_client: Started
I (7758) MEM_MGR: â•‘ Internal RAM:
I (7765) WEBSOCKET: âœ… WebSocket connected to server
I (7762) WEBSOCKET: âœ… WebSocket health check task created
I (7772) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (7772) MEM_MGR: â•‘   Free:             222727 bytes (217 KB)
I (7789) WEBSOCKET: Handshake sent successfully
I (7787) WEBSOCKET: WebSocket client started
I (7797) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (7797) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7810) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
E (7823) task_wdt: esp_task_wdt_reset(705): task not found
I (7815) MEM_MGR: â•‘   Fragmentation:     51%
I (7762) WEBSOCKET: WebSocket health check task started
I (7834) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7674) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (7858) MEM_MGR: â•‘ DMA-capable RAM:
I (7865) HOTPIN_MAIN: Configuring task watchdog for critical tasks...
I (7869) MEM_MGR: â•‘   Free:             202363 bytes (197 KB)
I (7877) HOTPIN_MAIN: âœ… State manager task added to watchdog
I (7883) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7890) HOTPIN_MAIN: âœ… WebSocket connection task added to watchdog
I (7896) MEM_MGR: â•‘   Fragmentation:     46%
I (7903) HOTPIN_MAIN: Task watchdog configuration complete
I (7908) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7915) HOTPIN_MAIN: ====================================
I (7933) MEM_MGR: â•‘ PSRAM:
I (7940) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (7943) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (7953) WEBSOCKET: Server status: connected
I (7959) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (7939) HOTPIN_MAIN: System initialization complete!
I (7971) MEM_MGR: â•‘   Fragmentation:      2%
I (7977) HOTPIN_MAIN: Entering camera standby mode...
I (7982) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7988) HOTPIN_MAIN: ====================================
I (8006) MEM_MGR: â•‘ Total Heap:
I (8012) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8016) MEM_MGR: â•‘   Free:             4362348 bytes (4260 KB)
I (8034) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (8041) MEM_MGR: â•‘   Minimum Ever:     4362348 bytes (4260 KB)
I (8048) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8054) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8072) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (8091) MEM_MGR: â•‘ Memory Delta from Baseline:
I (8098) AUDIO:   âœ“ I2S access mutex created successfully
I (8103) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (8110) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8116) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (8135) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (8141) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (8148) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8155) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (8173) AUDIO: [DIAG] Pre-init state:
I (8180) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8184) AUDIO:   Free heap: 3962844 bytes
I (8202) STATE_MGR: Acquiring I2S mutex...
I (8207) AUDIO:   Free internal RAM: 119599 bytes
I (8217) AUDIO:   Free DMA-capable: 99235 bytes
I (8222) AUDIO:   Free PSRAM: 3863732 bytes
I (8227) AUDIO:   Timestamp: 6674 ms
I (8232) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (8238) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (8246) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (8254) AUDIO:   DMA frame num (per desc): 1020
I (8260) AUDIO:   DMA total samples (effective): 4080
I (8265) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (8272) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (8279) AUDIO: âœ… I2S channels created (took 0 ms)
I (8284) AUDIO:   TX handle: 0x3ffe3e24 | RX handle: 0x3ffe1cfc
I (8291) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (8297) AUDIO:   Sample rate: 16000 Hz
I (8302) AUDIO:   MCLK: DISABLED
I (8306) AUDIO:   BCLK: GPIO14 (shared)
I (8310) AUDIO:   WS:   GPIO15 (shared)
I (8315) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (8321) AUDIO: âœ… TX channel configured (took 1 ms)
I (8326) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (8333) AUDIO:   Sample rate: 16000 Hz
I (8337) AUDIO:   MCLK: DISABLED
I (8341) AUDIO:   BCLK: GPIO14 (shared)
I (8345) AUDIO:   WS:   GPIO15 (shared)
I (8350) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (8356) AUDIO: âœ… RX channel configured (took 1 ms)
I (8361) AUDIO: [STEP 4/6] Enabling TX channel...
I (8367) AUDIO: âœ… TX channel enabled (took 0 ms)
I (8372) AUDIO: [STEP 5/6] Enabling RX channel...
I (8377) AUDIO: âœ… RX channel enabled (took 0 ms)
I (8383) AUDIO: [STEP 6/6] Hardware stabilization...
I (8388) AUDIO:   Phase 1: Initial settle (50ms)
I (8444) AUDIO:   Phase 2: DMA verification
I (8444) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (8444) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (8601) AUDIO: [DIAG] Post-init state:
I (8601) AUDIO:   Free heap: 3936964 bytes
I (8601) AUDIO:   Free internal RAM: 93603 bytes
I (8604) AUDIO:   Free DMA-capable: 73239 bytes
I (8610) AUDIO:   Free PSRAM: 3863732 bytes
I (8614) AUDIO:   Timestamp: 7061 ms
I (8619) AUDIO:   Total init time: 202 ms
I (8623) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8641) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (8647) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (8653) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (8661) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (8668) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8686) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8704) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (8710) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (8717) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (8723) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (8729) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10013) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10020) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (10027) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10045) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (10052) AUDIO: âœ… RX channel disabled (took 0 ms)
I (10058) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (10064) AUDIO: âœ… TX channel disabled (took 0 ms)
I (10070) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (10127) AUDIO: [STEP 4/5] Deleting RX channel...
I (10127) AUDIO: âœ… RX channel deleted (took 0 ms)
I (10127) AUDIO: [STEP 5/5] Deleting TX channel...
I (10132) AUDIO: âœ… TX channel deleted (took 0 ms)
I (10137) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (10195) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10202) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (10208) AUDIO: â•‘ Camera Can Now Initialize
I (10213) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10231) STATE_MGR: Audio drivers already inactive; skipping deinit
I (10231) LED_CTRL: LED pattern -> 3
I (10238) STATE_MGR: Allowing memory stabilization (100ms)...
I (10242) HOTPIN_MAIN: Main task exiting - system running
I (10255) main_task: Returned from app_main()
I (10349) STATE_MGR: Camera will be initialized on-demand during capture
I (10349) STATE_MGR: I2S mutex released
I (10350) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10368) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (10375) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10394) MEM_MGR: â•‘ Internal RAM:
I (10398) MEM_MGR: â•‘   Free:             222727 bytes (217 KB)
I (10405) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10411) MEM_MGR: â•‘   Fragmentation:     51%
I (10417) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10435) MEM_MGR: â•‘ DMA-capable RAM:
I (10439) MEM_MGR: â•‘   Free:             202363 bytes (197 KB)
I (10446) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10453) MEM_MGR: â•‘   Fragmentation:     46%
I (10458) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10476) MEM_MGR: â•‘ PSRAM:
I (10480) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (10487) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (10494) MEM_MGR: â•‘   Fragmentation:      2%
I (10499) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10517) MEM_MGR: â•‘ Total Heap:
I (10522) MEM_MGR: â•‘   Free:             4362348 bytes (4260 KB)
I (10528) MEM_MGR: â•‘   Minimum Ever:     4362348 bytes (4260 KB)
I (10535) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10554) MEM_MGR: â•‘ Memory Delta from Baseline:
I (10559) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (10566) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (10573) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (10580) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (10587) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10605) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (10614) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (10620) STATE_MGR: WebSocket connected
I (12841) WEBSOCKET: WebSocket connection restored (cycle: 1, disconnects: 0, reconnects: 0)
I (18774) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (18774) BUTTON: Single click confirmed
I (18774) STATE_MGR: Single click - mode toggle requested
I (18781) STATE_MGR: Switching: Camera â†’ Voice (count: 1)
I (18837) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (18837) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18850) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (18857) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18876) MEM_MGR: â•‘ Internal RAM:
I (18880) MEM_MGR: â•‘   Free:             124147 bytes (121 KB)
I (18886) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (18893) MEM_MGR: â•‘   Fragmentation:     25%
I (18898) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18917) MEM_MGR: â•‘ DMA-capable RAM:
I (18921) MEM_MGR: â•‘   Free:             103783 bytes (101 KB)
I (18928) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (18935) MEM_MGR: â•‘   Fragmentation:     10%
I (18940) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18958) MEM_MGR: â•‘ PSRAM:
I (18962) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (18969) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (18976) MEM_MGR: â•‘   Fragmentation:      2%
I (18981) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18999) MEM_MGR: â•‘ Total Heap:
I (19003) MEM_MGR: â•‘   Free:             3967440 bytes (3874 KB)
I (19010) MEM_MGR: â•‘   Minimum Ever:     3934724 bytes (3842 KB)
I (19017) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19035) MEM_MGR: â•‘ Memory Delta from Baseline:
I (19041) MEM_MGR: â•‘   Internal RAM:     -100988 bytes ( -98 KB)
I (19048) MEM_MGR: â•‘   DMA-capable:      -100988 bytes ( -98 KB)
I (19055) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (19061) MEM_MGR: â•‘   Total Heap:       -397316 bytes (-388 KB)
I (19068) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19087) STATE_MGR: Stopping camera...
I (19091) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19107) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (19114) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19131) STATE_MGR:   Timeout: 5000 ms
I (19135) STATE_MGR:   Timestamp: 17582 ms
I (19140) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (19146) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19162) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (19168) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19185) STATE_MGR:   Free heap before: 3967440 bytes
I (19190) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (19196) CAMERA: Deinitializing camera...
I (19201) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (19207) STATE_MGR:   Free heap after: 3967440 bytes
I (19213) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (19219) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19235) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (19241) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19258) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (19366) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (19466) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (19516) STATE_MGR:   âœ“ Total stabilization: 250ms
I (19516) STATE_MGR:   Timestamp: 17963 ms
I (19516) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19532) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (19539) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19555) STATE_MGR:   Free heap before: 3967440 bytes
I (19561) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19579) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (19586) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19604) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19622) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (19629) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (19647) AUDIO: [DIAG] Pre-init state:
I (19651) AUDIO:   Free heap: 3967440 bytes
I (19656) AUDIO:   Free internal RAM: 124147 bytes
I (19662) AUDIO:   Free DMA-capable: 103783 bytes
I (19667) AUDIO:   Free PSRAM: 3863732 bytes
I (19672) AUDIO:   Timestamp: 18119 ms
I (19676) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (19683) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (19691) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (19699) AUDIO:   DMA frame num (per desc): 1020
I (19705) AUDIO:   DMA total samples (effective): 4080
I (19711) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (19718) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (19724) AUDIO: âœ… I2S channels created (took 0 ms)
I (19730) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7e8
I (19736) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (19743) AUDIO:   Sample rate: 16000 Hz
I (19747) AUDIO:   MCLK: DISABLED
I (19751) AUDIO:   BCLK: GPIO14 (shared)
I (19756) AUDIO:   WS:   GPIO15 (shared)
I (19761) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (19768) AUDIO: âœ… TX channel configured (took 1 ms)
I (19772) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (19779) AUDIO:   Sample rate: 16000 Hz
I (19783) AUDIO:   MCLK: DISABLED
I (19787) AUDIO:   BCLK: GPIO14 (shared)
I (19792) AUDIO:   WS:   GPIO15 (shared)
I (19797) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (19803) AUDIO: âœ… RX channel configured (took 0 ms)
I (19808) AUDIO: [STEP 4/6] Enabling TX channel...
I (19814) AUDIO: âœ… TX channel enabled (took 0 ms)
I (19819) AUDIO: [STEP 5/6] Enabling RX channel...
I (19825) AUDIO: âœ… RX channel enabled (took 0 ms)
I (19830) AUDIO: [STEP 6/6] Hardware stabilization...
I (19836) AUDIO:   Phase 1: Initial settle (50ms)
I (19891) AUDIO:   Phase 2: DMA verification
I (19891) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (19892) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (20048) AUDIO: [DIAG] Post-init state:
I (20048) AUDIO:   Free heap: 3941436 bytes
I (20048) AUDIO:   Free internal RAM: 98143 bytes
I (20052) AUDIO:   Free DMA-capable: 77779 bytes
I (20057) AUDIO:   Free PSRAM: 3863732 bytes
I (20062) AUDIO:   Timestamp: 18509 ms
I (20067) AUDIO:   Total init time: 201 ms
I (20071) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20089) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (20096) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (20101) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (20110) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (20116) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20134) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20152) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (20159) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (20165) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (20172) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (20178) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20196) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (20202) STATE_MGR:   Free heap after: 3941436 bytes
I (20208) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20224) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (20230) STATE_MGR: â•‘ Total transition time: 889 ms
I (20236) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20252) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20268) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (20274) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20291) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (20299) TTS: No pending audio to flush
I (20328) TTS: TTS decoder session reset for next audio stream
I (20328) TTS: âœ… TTS decoder flushed and reset for next session
I (20330) STT: Starting STT pipeline...
I (20334) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (20344) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (20351) STT:   Current time: 18797 ms
I (20354) STT: âœ… STT pipeline started
I (20355) STT:   Free heap: 3932884 bytes
I (20355) STT: Audio streaming session activated
I (20370) STT: Connection stabilization delay (500ms)...
I (20410) TTS: ğŸµ Starting TTS decoder...
I (20410) TTS: Initializing TTS decoder...
W (20410) TTS: TTS decoder already initialized
I (20443) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (20443) TTS: âœ… TTS decoder started successfully
I (20447) TTS: ğŸµ TTS playback task started on Core 1
I (20453) TTS: âœ… TTS playback task registered with watchdog
I (20460) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (20564) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (20564) STT:   âœ“ Audio driver initialized
I (20565) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (20672) STT:   Total stabilization: 300ms
I (20672) STT:   Timestamp: 19119 ms
I (20672) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (20676) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe2fe8 (with safety padding)
I (20685) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20701) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (20706) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (20712) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20772) LED_CTRL: LED pattern -> 1
I (20773) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20784) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (20791) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20809) MEM_MGR: â•‘ Internal RAM:
I (20813) MEM_MGR: â•‘   Free:             124147 bytes (121 KB)
I (20820) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (20827) MEM_MGR: â•‘   Fragmentation:     25%
I (20832) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20850) MEM_MGR: â•‘ DMA-capable RAM:
I (20855) MEM_MGR: â•‘   Free:             103783 bytes (101 KB)
I (20862) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (20868) MEM_MGR: â•‘   Fragmentation:     10%
I (20874) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20876) STT: Testing WebSocket transport health...
I (20892) MEM_MGR: â•‘ PSRAM:
I (20901) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (20904) STT: âœ… WebSocket transport verified healthy
I (20908) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (20921) MEM_MGR: â•‘   Fragmentation:      2%
I (20926) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20944) MEM_MGR: â•‘ Total Heap:
I (20949) MEM_MGR: â•‘   Free:             3967440 bytes (3874 KB)
I (20955) MEM_MGR: â•‘   Minimum Ever:     3934724 bytes (3842 KB)
I (20962) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20981) MEM_MGR: â•‘ Memory Delta from Baseline:
I (20986) MEM_MGR: â•‘   Internal RAM:     -100988 bytes ( -98 KB)
I (20993) MEM_MGR: â•‘   DMA-capable:      -100988 bytes ( -98 KB)
I (21000) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (21007) MEM_MGR: â•‘   Total Heap:       -397316 bytes (-388 KB)
I (21014) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21014) STT: Starting audio streaming to server...
I (21032) STATE_MGR: âœ… Voice mode transition complete
I (21043) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (21059) STATE_MGR: STT pipeline reported start
I (21069) STATE_MGR: TTS playback start event received
I (21176) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 5, "bytes_received": 16400}
I (21177) WEBSOCKET: Server status: receiving
I (21865) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 36880}
I (21866) WEBSOCKET: Server status: receiving
I (22483) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 15, "bytes_received": 57360}
I (22484) WEBSOCKET: Server status: receiving
I (23096) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 77840}
I (23097) WEBSOCKET: Server status: receiving
I (23768) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 25, "bytes_received": 98320}
I (23769) WEBSOCKET: Server status: receiving
I (24249) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (24249) BUTTON: Single click confirmed
W (24249) STATE_MGR: Guardrail soft override: stopping voice pipeline (user cancellation)
I (24258) STATE_MGR: Single click - mode toggle requested
I (24264) STATE_MGR: Switching: Voice â†’ Camera (count: 2)
I (24320) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (24320) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24333) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (24340) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24359) MEM_MGR: â•‘ Internal RAM:
I (24363) MEM_MGR: â•‘   Free:             124147 bytes (121 KB)
I (24370) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (24376) MEM_MGR: â•‘   Fragmentation:     25%
I (24382) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24384) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 118800}
I (24400) MEM_MGR: â•‘ DMA-capable RAM:
I (24416) MEM_MGR: â•‘   Free:             103783 bytes (101 KB)
I (24412) WEBSOCKET: Server status: receiving
I (24422) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (24434) MEM_MGR: â•‘   Fragmentation:     10%
I (24439) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24458) MEM_MGR: â•‘ PSRAM:
I (24461) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (24468) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (24475) MEM_MGR: â•‘   Fragmentation:      2%
I (24480) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24499) MEM_MGR: â•‘ Total Heap:
I (24503) MEM_MGR: â•‘   Free:             3967440 bytes (3874 KB)
I (24510) MEM_MGR: â•‘   Minimum Ever:     3934724 bytes (3842 KB)
I (24516) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24535) MEM_MGR: â•‘ Memory Delta from Baseline:
I (24540) MEM_MGR: â•‘   Internal RAM:     -100988 bytes ( -98 KB)
I (24547) MEM_MGR: â•‘   DMA-capable:      -100988 bytes ( -98 KB)
I (24554) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (24561) MEM_MGR: â•‘   Total Heap:       -397316 bytes (-388 KB)
I (24568) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (24586) STATE_MGR: Stopping voice mode components...
I (24592) STT: Stopping STT pipeline...
I (24597) STT: Draining ring buffer (1024 bytes pending) before shutdown...
I (24611) STT: Ring buffer drained and cleared successfully
I (24613) STT: Audio capture task stopped (captured 129024 bytes total)
I (24633) STT: Streaming task received stop signal
I (24633) STT: Sending EOS signal...
I (24633) WEBSOCKET: Sending EOS signal
I (24641) STT: Audio streaming session complete (streamed 126976 bytes in 31 chunks)
I (24665) STT: STT pipeline stopped
I (24733) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (24734) WEBSOCKET: Server status: processing
I (24737) WEBSOCKET: Server stage: transcription
I (24742) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (24749) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (25248) LED_CTRL: LED pattern -> 4
I (25342) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what is your needs"}
I (25343) WEBSOCKET: Server status: processing
I (25348) WEBSOCKET: Server stage: llm
I (25353) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (25359) WEBSOCKET: Entering LLM stage - continuing processing indication
I (25963) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I need minimal user data and a stable internet connection to function effectively."}
I (25969) WEBSOCKET: Server status: processing
I (25974) WEBSOCKET: Server stage: tts
I (25979) WEBSOCKET: Pipeline stage changed: llm -> tts
I (25984) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (25992) LED_CTRL: LED pattern -> 3
I (25996) TTS: ğŸµ Starting TTS decoder...
W (26001) TTS: TTS decoder already running
W (26006) WEBSOCKET: TTS audio arriving after voice mode exit (state=3) - will attempt playback
I (26023) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 1, total: 4096)
I (26024) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 24471 ms, bytes: 4096)
I (26032) TTS: Received audio chunk #1: 4096 bytes
I (26037) TTS: Chunk #1 first 12 bytes: 52 49 46 46 60 9F 02 00 57 41 56 45
I (26046) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (26063) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 2, total: 8192)
I (26064) TTS: Received audio chunk #2: 4096 bytes
I (26067) TTS: Chunk #2 first 12 bytes: BC FC A5 FE E0 01 DA 04 4B 05 8F 03
I (26081) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 3, total: 12288)
I (26083) TTS: Received audio chunk #3: 4096 bytes
I (26088) TTS: Chunk #3 first 12 bytes: 4D F4 EB F4 62 F5 FA F5 BD F6 43 F7
I (26102) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 4, total: 16384)
I (26104) TTS: Received audio chunk #4: 4096 bytes
I (26109) TTS: Chunk #4 first 12 bytes: 25 25 53 28 DF 2D 65 31 50 2F 0D 2B
I (26113) TTS: âœ… WAV header parsed successfully
I (26122) TTS: === WAV File Info ===
I (26124) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 5, total: 20480)
I (26127) TTS: Sample Rate: 16000 Hz
I (26135) TTS: Received audio chunk #5: 4096 bytes
I (26139) TTS: Channels: 1
I (26145) TTS: Chunk #5 first 12 bytes: 13 F4 F5 F3 F6 F3 F9 F3 E3 F3 DF F3
I (26148) TTS: Bits per Sample: 16
I (26160) TTS: Audio Format: 1 (PCM)
I (26164) TTS: Declared Data Size: 171836 bytes
I (26170) TTS: Block Align: 2
I (26165) TTS: Received audio chunk #6: 4096 bytes
I (26173) TTS: Byte Rate: 32000
I (26182) TTS: ====================
I (26185) TTS: Received audio chunk #7: 4096 bytes
I (26198) TTS: Received audio chunk #8: 4096 bytes
I (26207) TTS: Received audio chunk #9: 4096 bytes
I (26210) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=36864)
I (26211) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (26216) TTS: Received audio chunk #10: 4096 bytes
I (26232) TTS: Received audio chunk #11: 4096 bytes
I (26240) TTS: Received audio chunk #12: 756 bytes
I (26244) TTS: Received audio chunk #13: 3340 bytes
I (26253) TTS: Received audio chunk #14: 4096 bytes
I (26265) TTS: Received audio chunk #15: 4096 bytes
I (26274) TTS: Received audio chunk #16: 4096 bytes
I (26282) TTS: Received audio chunk #17: 4096 bytes
I (26291) TTS: Received audio chunk #18: 4096 bytes
I (26299) TTS: Received audio chunk #19: 4096 bytes
I (26308) TTS: Received audio chunk #20: 4096 bytes
I (26317) TTS: Received audio chunk #21: 4096 bytes
I (26324) TTS: Received audio chunk #22: 1296 bytes
I (26328) TTS: Received audio chunk #23: 2800 bytes
I (26336) TTS: Received audio chunk #24: 1516 bytes
I (26341) TTS: Received audio chunk #25: 2580 bytes
I (26348) TTS: Received audio chunk #26: 4096 bytes
I (26357) TTS: Received audio chunk #27: 4096 bytes
I (26368) TTS: Received audio chunk #28: 4096 bytes
I (26376) TTS: Received audio chunk #29: 4096 bytes
I (26388) TTS: Received audio chunk #30: 4096 bytes
I (26396) TTS: Received audio chunk #31: 4096 bytes
I (26405) TTS: Received audio chunk #32: 4096 bytes
I (26415) TTS: Received audio chunk #33: 4096 bytes
I (26423) TTS: Received audio chunk #34: 4096 bytes
I (26432) TTS: Received audio chunk #35: 4096 bytes
I (26440) TTS: Received audio chunk #36: 1056 bytes
I (26445) TTS: Received audio chunk #37: 3040 bytes
I (26451) TTS: Received audio chunk #38: 1276 bytes
I (26456) TTS: Received audio chunk #39: 2820 bytes
I (26463) TTS: Received audio chunk #40: 4096 bytes
I (26475) TTS: Received audio chunk #41: 4096 bytes
I (26484) TTS: Received audio chunk #42: 4096 bytes
I (26492) TTS: Received audio chunk #43: 4096 bytes
I (26501) TTS: Received audio chunk #44: 4096 bytes
I (26512) TTS: Received audio chunk #45: 4096 bytes
I (26522) TTS: Received audio chunk #46: 4096 bytes
I (26530) TTS: Received audio chunk #47: 3944 bytes
I (26534) WEBSOCKET: Received text message: {"status": "complete"}
I (26535) WEBSOCKET: Server status: complete
I (26537) WEBSOCKET: Pipeline stage changed: tts -> complete
I (26543) WEBSOCKET: Exiting TTS stage (transition to complete)
I (26633) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (26650) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (26665) STATE_MGR: Voice pipeline reported COMPLETE
I (26665) STATE_MGR: Waiting for TTS playback drain (~155540 bytes pending, timeout 15000 ms)
I (26761) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (26888) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (27016) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (27143) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
W (27169) TTS: TTS wait for idle timeout after 500 ms
W (27169) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (27172) TTS:   Data: received=171880, header=0, played=32724, pending=139156
W (27180) STATE_MGR: TTS wait for idle timeout #1 (drain_checks=0)
I (27271) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (27398) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (27526) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (27653) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (27781) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
W (27787) TTS: TTS wait for idle timeout after 500 ms
W (27787) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (27792) TTS:   Data: received=171880, header=0, played=53204, pending=118676
W (27800) STATE_MGR: TTS wait for idle timeout #2 (drain_checks=1)
I (27908) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (28036) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (28163) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (28291) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
W (28407) TTS: TTS wait for idle timeout after 500 ms
W (28407) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (28410) TTS:   Data: received=171880, header=0, played=69588, pending=102292
W (28418) STATE_MGR: TTS wait for idle timeout #3 (drain_checks=2)
I (28425) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (28546) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (28673) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (28801) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (28928) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
W (29025) TTS: TTS wait for idle timeout after 500 ms
W (29025) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (29028) TTS:   Data: received=171880, header=0, played=90068, pending=81812
W (29036) STATE_MGR: TTS wait for idle timeout #4 (drain_checks=3)
I (29056) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (29183) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (29311) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (29438) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (29566) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
W (29643) TTS: TTS wait for idle timeout after 500 ms
W (29643) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (29646) TTS:   Data: received=171880, header=0, played=110548, pending=61332
W (29654) STATE_MGR: TTS wait for idle timeout #5 (drain_checks=4)
I (29693) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (29821) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (29948) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (30076) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (30203) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
W (30261) TTS: TTS wait for idle timeout after 500 ms
W (30261) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (30264) TTS:   Data: received=171880, header=0, played=131028, pending=40852
W (30272) STATE_MGR: TTS wait for idle timeout #6 (drain_checks=5)
I (30331) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (30458) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (30586) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (30713) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (30841) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
W (30879) TTS: TTS wait for idle timeout after 500 ms
W (30879) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (30882) TTS:   Data: received=171880, header=0, played=151508, pending=20372
W (30890) STATE_MGR: TTS wait for idle timeout #7 (drain_checks=6)
I (30968) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (31096) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (31223) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
I (31351) TTS: âœ… All audio data received (171880 bytes, expected 171836 + 44 header)
W (31497) TTS: TTS wait for idle timeout after 500 ms
W (31497) TTS:   State: has_pending=0, is_playing=1, completed=0, eos_requested=1
W (31500) TTS:   Data: received=171880, header=0, played=171836, pending=44
W (31508) STATE_MGR: TTS wait for idle timeout #8 (drain_checks=7)
I (31578) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (31578) TTS: ğŸµ TTS playback task exiting (played 171836 bytes, result: ESP_OK)
I (31584) TTS: Playing TTS completion feedback to signal readiness for next input
I (31615) TTS: TTS playback completed flag set - task exiting (after 0 checks)
I (31615) STATE_MGR: TTS decoder confirmed idle
I (31617) STATE_MGR: Flushing and resetting TTS decoder for next session
I (31625) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (31633) TTS: Flushing pending audio before reset (~44 bytes)
I (31639) TTS: TTS playback completed flag set - task exiting (after 0 checks)
I (31672) TTS: TTS decoder session reset for next audio stream
I (31672) TTS: âœ… TTS decoder flushed and reset for next session
I (31874) TTS: â¹ï¸ Stopping TTS decoder...
W (31874) TTS: TTS decoder not running
I (31910) TTS:   âœ“ DMA buffer freed from PSRAM
I (31910) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (31912) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (32002) STATE_MGR: Acquiring I2S mutex...
I (32002) STATE_MGR: Deinitializing audio drivers...
I (32002) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32020) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (32027) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32045) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (32052) AUDIO: âœ… RX channel disabled (took 0 ms)
I (32058) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (32064) AUDIO: âœ… TX channel disabled (took 0 ms)
I (32070) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (32126) AUDIO: [STEP 4/5] Deleting RX channel...
I (32127) AUDIO: âœ… RX channel deleted (took 0 ms)
I (32127) AUDIO: [STEP 5/5] Deleting TX channel...
I (32132) AUDIO: âœ… TX channel deleted (took 0 ms)
I (32137) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (32195) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32202) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (32208) AUDIO: â•‘ Camera Can Now Initialize
I (32214) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32282) STATE_MGR: Allowing memory stabilization (100ms)...
I (32382) STATE_MGR: Camera will be initialized on-demand during capture
I (32382) STATE_MGR: I2S mutex released
I (32383) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32401) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (32408) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32427) MEM_MGR: â•‘ Internal RAM:
I (32431) MEM_MGR: â•‘   Free:              89427 bytes ( 87 KB)
I (32438) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (32444) MEM_MGR: â•‘   Fragmentation:     36%
I (32450) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32468) MEM_MGR: â•‘ DMA-capable RAM:
I (32472) MEM_MGR: â•‘   Free:              69063 bytes ( 67 KB)
I (32479) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (32486) MEM_MGR: â•‘   Fragmentation:     17%
I (32491) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32509) MEM_MGR: â•‘ PSRAM:
I (32513) MEM_MGR: â•‘   Free:             3851436 bytes (3761 KB)
I (32520) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (32527) MEM_MGR: â•‘   Fragmentation:      2%
I (32532) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32550) MEM_MGR: â•‘ Total Heap:
I (32555) MEM_MGR: â•‘   Free:             3920424 bytes (3828 KB)
I (32561) MEM_MGR: â•‘   Minimum Ever:     3898656 bytes (3807 KB)
I (32568) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32587) MEM_MGR: â•‘ Memory Delta from Baseline:
I (32592) MEM_MGR: â•‘   Internal RAM:     -135708 bytes (-132 KB)
I (32599) MEM_MGR: â•‘   DMA-capable:      -135708 bytes (-132 KB)
I (32606) MEM_MGR: â•‘   PSRAM:            -340580 bytes (-332 KB)
I (32613) MEM_MGR: â•‘   Total Heap:       -444332 bytes (-433 KB)
I (32620) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32638) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (32648) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32665) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (32672) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32690) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32708) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (32716) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32734) AUDIO: [DIAG] Pre-init state:
I (32738) AUDIO:   Free heap: 3967280 bytes
I (32743) AUDIO:   Free internal RAM: 123987 bytes
I (32748) AUDIO:   Free DMA-capable: 103623 bytes
I (32754) AUDIO:   Free PSRAM: 3863732 bytes
I (32759) AUDIO:   Timestamp: 31205 ms
I (32763) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (32770) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (32778) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (32786) AUDIO:   DMA frame num (per desc): 1020
I (32792) AUDIO:   DMA total samples (effective): 4080
I (32797) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (32804) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (32811) AUDIO: âœ… I2S channels created (took 0 ms)
I (32816) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb62c
I (32823) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (32830) AUDIO:   Sample rate: 16000 Hz
I (32834) AUDIO:   MCLK: DISABLED
I (32838) AUDIO:   BCLK: GPIO14 (shared)
I (32843) AUDIO:   WS:   GPIO15 (shared)
I (32847) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (32854) AUDIO: âœ… TX channel configured (took 1 ms)
I (32859) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (32866) AUDIO:   Sample rate: 16000 Hz
I (32870) AUDIO:   MCLK: DISABLED
I (32874) AUDIO:   BCLK: GPIO14 (shared)
I (32879) AUDIO:   WS:   GPIO15 (shared)
I (32883) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (32889) AUDIO: âœ… RX channel configured (took 0 ms)
I (32895) AUDIO: [STEP 4/6] Enabling TX channel...
I (32900) AUDIO: âœ… TX channel enabled (took 0 ms)
I (32906) AUDIO: [STEP 5/6] Enabling RX channel...
I (32911) AUDIO: âœ… RX channel enabled (took 0 ms)
I (32917) AUDIO: [STEP 6/6] Hardware stabilization...
I (32923) AUDIO:   Phase 1: Initial settle (50ms)
I (32978) AUDIO:   Phase 2: DMA verification
I (32978) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (32978) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (33135) AUDIO: [DIAG] Post-init state:
I (33135) AUDIO:   Free heap: 3941296 bytes
I (33135) AUDIO:   Free internal RAM: 98003 bytes
I (33139) AUDIO:   Free DMA-capable: 77639 bytes
I (33144) AUDIO:   Free PSRAM: 3863732 bytes
I (33149) AUDIO:   Timestamp: 31596 ms
I (33154) AUDIO:   Total init time: 201 ms
I (33158) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33176) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (33183) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (33188) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (33197) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (33203) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33221) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33239) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (33246) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (33252) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (33259) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (33265) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33566) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33573) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (33581) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33599) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (33606) AUDIO: âœ… RX channel disabled (took 0 ms)
I (33611) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (33618) AUDIO: âœ… TX channel disabled (took 0 ms)
I (33623) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (33680) AUDIO: [STEP 4/5] Deleting RX channel...
I (33681) AUDIO: âœ… RX channel deleted (took 0 ms)
I (33681) AUDIO: [STEP 5/5] Deleting TX channel...
I (33686) AUDIO: âœ… TX channel deleted (took 0 ms)
I (33691) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (33749) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33756) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (33763) AUDIO: â•‘ Camera Can Now Initialize
I (33768) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33786) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (33801) STATE_MGR: STT pipeline reported stop
I (33811) STATE_MGR: Pipeline stage event: transcription
I (33821) STATE_MGR: Pipeline stage event: llm
I (33831) STATE_MGR: Pipeline stage event: tts
I (33841) STATE_MGR: TTS playback start event received
I (33851) STATE_MGR: Pipeline stage event: complete
I (39411) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (39411) BUTTON: Single click confirmed
I (39411) STATE_MGR: Single click - mode toggle requested
I (39418) STATE_MGR: Switching: Camera â†’ Voice (count: 3)
I (39474) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (39474) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39487) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (39494) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39513) MEM_MGR: â•‘ Internal RAM:
I (39517) MEM_MGR: â•‘   Free:              89427 bytes ( 87 KB)
I (39523) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (39530) MEM_MGR: â•‘   Fragmentation:     36%
I (39535) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39554) MEM_MGR: â•‘ DMA-capable RAM:
I (39558) MEM_MGR: â•‘   Free:              69063 bytes ( 67 KB)
I (39565) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (39572) MEM_MGR: â•‘   Fragmentation:     17%
I (39577) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39595) MEM_MGR: â•‘ PSRAM:
I (39599) MEM_MGR: â•‘   Free:             3851436 bytes (3761 KB)
I (39606) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (39613) MEM_MGR: â•‘   Fragmentation:      2%
I (39618) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39636) MEM_MGR: â•‘ Total Heap:
I (39640) MEM_MGR: â•‘   Free:             3920424 bytes (3828 KB)
I (39647) MEM_MGR: â•‘   Minimum Ever:     3898656 bytes (3807 KB)
I (39654) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39672) MEM_MGR: â•‘ Memory Delta from Baseline:
I (39678) MEM_MGR: â•‘   Internal RAM:     -135708 bytes (-132 KB)
I (39685) MEM_MGR: â•‘   DMA-capable:      -135708 bytes (-132 KB)
I (39692) MEM_MGR: â•‘   PSRAM:            -340580 bytes (-332 KB)
I (39698) MEM_MGR: â•‘   Total Heap:       -444332 bytes (-433 KB)
I (39705) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39724) STATE_MGR: Stopping camera...
I (39728) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39745) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (39751) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39768) STATE_MGR:   Timeout: 5000 ms
I (39772) STATE_MGR:   Timestamp: 38219 ms
I (39777) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (39783) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39799) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (39805) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39822) STATE_MGR:   Free heap before: 3967280 bytes
I (39827) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (39833) CAMERA: Deinitializing camera...
I (39838) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (39844) STATE_MGR:   Free heap after: 3967280 bytes
I (39850) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (39856) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39872) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (39878) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39895) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (40003) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (40103) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (40153) STATE_MGR:   âœ“ Total stabilization: 250ms
I (40153) STATE_MGR:   Timestamp: 38600 ms
I (40153) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40169) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (40176) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40192) STATE_MGR:   Free heap before: 3967280 bytes
I (40198) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40216) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (40223) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40241) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40259) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (40266) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40284) AUDIO: [DIAG] Pre-init state:
I (40288) AUDIO:   Free heap: 3967280 bytes
I (40293) AUDIO:   Free internal RAM: 123987 bytes
I (40299) AUDIO:   Free DMA-capable: 103623 bytes
I (40304) AUDIO:   Free PSRAM: 3863732 bytes
I (40309) AUDIO:   Timestamp: 38756 ms
I (40313) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (40320) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (40328) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (40336) AUDIO:   DMA frame num (per desc): 1020
I (40342) AUDIO:   DMA total samples (effective): 4080
I (40348) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (40355) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (40361) AUDIO: âœ… I2S channels created (took 0 ms)
I (40367) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb62c
I (40373) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (40380) AUDIO:   Sample rate: 16000 Hz
I (40384) AUDIO:   MCLK: DISABLED
I (40388) AUDIO:   BCLK: GPIO14 (shared)
I (40393) AUDIO:   WS:   GPIO15 (shared)
I (40398) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (40404) AUDIO: âœ… TX channel configured (took 1 ms)
I (40409) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (40416) AUDIO:   Sample rate: 16000 Hz
I (40420) AUDIO:   MCLK: DISABLED
I (40424) AUDIO:   BCLK: GPIO14 (shared)
I (40429) AUDIO:   WS:   GPIO15 (shared)
I (40434) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (40440) AUDIO: âœ… RX channel configured (took 0 ms)
I (40445) AUDIO: [STEP 4/6] Enabling TX channel...
I (40451) AUDIO: âœ… TX channel enabled (took 0 ms)
I (40456) AUDIO: [STEP 5/6] Enabling RX channel...
I (40462) AUDIO: âœ… RX channel enabled (took 0 ms)
I (40467) AUDIO: [STEP 6/6] Hardware stabilization...
I (40473) AUDIO:   Phase 1: Initial settle (50ms)
I (40528) AUDIO:   Phase 2: DMA verification
I (40528) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (40528) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (40685) AUDIO: [DIAG] Post-init state:
I (40685) AUDIO:   Free heap: 3941296 bytes
I (40685) AUDIO:   Free internal RAM: 98003 bytes
I (40689) AUDIO:   Free DMA-capable: 77639 bytes
I (40694) AUDIO:   Free PSRAM: 3863732 bytes
I (40699) AUDIO:   Timestamp: 39146 ms
I (40704) AUDIO:   Total init time: 201 ms
I (40708) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40726) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (40732) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (40738) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (40747) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (40753) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40771) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40789) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (40796) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (40802) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (40809) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (40815) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40833) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (40839) STATE_MGR:   Free heap after: 3941296 bytes
I (40845) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40861) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (40867) STATE_MGR: â•‘ Total transition time: 889 ms
I (40873) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40889) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40905) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (40911) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40928) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (40936) TTS: No pending audio to flush
I (40965) TTS: TTS decoder session reset for next audio stream
I (40965) TTS: âœ… TTS decoder flushed and reset for next session
I (40967) STT: Starting STT pipeline...
I (40971) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (40981) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (40988) STT:   Current time: 39435 ms
I (40991) STT: âœ… STT pipeline started
I (40992) STT:   Free heap: 3932744 bytes
I (40992) STT: Audio streaming session activated
I (41007) STT: Connection stabilization delay (500ms)...
I (41047) TTS: ğŸµ Starting TTS decoder...
I (41047) TTS: Initializing TTS decoder...
W (41047) TTS: TTS decoder already initialized
I (41077) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (41077) TTS: âœ… TTS decoder started successfully
I (41081) TTS: ğŸµ TTS playback task started on Core 1
I (41087) TTS: âœ… TTS playback task registered with watchdog
I (41094) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (41201) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (41201) STT:   âœ“ Audio driver initialized
I (41202) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (41309) STT:   Total stabilization: 300ms
I (41309) STT:   Timestamp: 39755 ms
I (41309) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (41313) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe2fe8 (with safety padding)
I (41322) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41338) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (41343) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (41349) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41406) LED_CTRL: LED pattern -> 1
I (41407) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41418) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (41425) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41443) MEM_MGR: â•‘ Internal RAM:
I (41447) MEM_MGR: â•‘   Free:              89427 bytes ( 87 KB)
I (41454) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (41461) MEM_MGR: â•‘   Fragmentation:     36%
I (41466) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41484) MEM_MGR: â•‘ DMA-capable RAM:
I (41489) MEM_MGR: â•‘   Free:              69063 bytes ( 67 KB)
I (41496) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (41502) MEM_MGR: â•‘   Fragmentation:     17%
I (41508) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41513) STT: Testing WebSocket transport health...
I (41526) MEM_MGR: â•‘ PSRAM:
I (41535) MEM_MGR: â•‘   Free:             3851436 bytes (3761 KB)
I (41538) STT: âœ… WebSocket transport verified healthy
I (41542) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (41555) MEM_MGR: â•‘   Fragmentation:      2%
I (41560) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41578) MEM_MGR: â•‘ Total Heap:
I (41583) MEM_MGR: â•‘   Free:             3920424 bytes (3828 KB)
I (41589) MEM_MGR: â•‘   Minimum Ever:     3898656 bytes (3807 KB)
I (41596) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41615) MEM_MGR: â•‘ Memory Delta from Baseline:
I (41620) MEM_MGR: â•‘   Internal RAM:     -135708 bytes (-132 KB)
I (41627) MEM_MGR: â•‘   DMA-capable:      -135708 bytes (-132 KB)
I (41634) MEM_MGR: â•‘   PSRAM:            -340580 bytes (-332 KB)
I (41641) MEM_MGR: â•‘   Total Heap:       -444332 bytes (-433 KB)
I (41648) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41648) STT: Starting audio streaming to server...
I (41666) STATE_MGR: âœ… Voice mode transition complete
I (41677) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (41694) STATE_MGR: STT pipeline reported start
I (41705) STATE_MGR: TTS playback start event received
I (41802) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 5, "bytes_received": 16400}
I (41803) WEBSOCKET: Server status: receiving
I (42420) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 36880}
I (42421) WEBSOCKET: Server status: receiving
I (43082) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 15, "bytes_received": 57360}
I (43083) WEBSOCKET: Server status: receiving
I (43423) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (43423) BUTTON: Single click confirmed
I (43423) STATE_MGR: Single click - mode toggle requested
I (43429) STATE_MGR: Switching: Voice â†’ Camera (count: 4)
I (43486) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (43486) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43499) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (43506) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43525) MEM_MGR: â•‘ Internal RAM:
I (43529) MEM_MGR: â•‘   Free:              89427 bytes ( 87 KB)
I (43536) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (43542) MEM_MGR: â•‘   Fragmentation:     36%
I (43548) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43566) MEM_MGR: â•‘ DMA-capable RAM:
I (43571) MEM_MGR: â•‘   Free:              69063 bytes ( 67 KB)
I (43577) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (43584) MEM_MGR: â•‘   Fragmentation:     17%
I (43589) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43608) MEM_MGR: â•‘ PSRAM:
I (43611) MEM_MGR: â•‘   Free:             3851436 bytes (3761 KB)
I (43618) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (43625) MEM_MGR: â•‘   Fragmentation:      2%
I (43630) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43649) MEM_MGR: â•‘ Total Heap:
I (43653) MEM_MGR: â•‘   Free:             3920424 bytes (3828 KB)
I (43659) MEM_MGR: â•‘   Minimum Ever:     3898656 bytes (3807 KB)
I (43666) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43685) MEM_MGR: â•‘ Memory Delta from Baseline:
I (43690) MEM_MGR: â•‘   Internal RAM:     -135708 bytes (-132 KB)
I (43697) MEM_MGR: â•‘   DMA-capable:      -135708 bytes (-132 KB)
I (43704) MEM_MGR: â•‘   PSRAM:            -340580 bytes (-332 KB)
I (43711) MEM_MGR: â•‘   Total Heap:       -444332 bytes (-433 KB)
I (43718) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43736) STATE_MGR: Stopping voice mode components...
I (43742) STT: Stopping STT pipeline...
I (43746) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (43750) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 77840}
I (43761) STT: Ring buffer drained and cleared successfully
I (43766) WEBSOCKET: Server status: receiving
I (43783) STT: Audio capture task stopped (captured 81920 bytes total)
I (43792) STT: Streaming task received stop signal
I (43792) STT: Sending EOS signal...
I (43793) WEBSOCKET: Sending EOS signal
I (43800) STT: Audio streaming session complete (streamed 80896 bytes in 20 chunks)
I (43834) STT: STT pipeline stopped
I (43835) STATE_MGR: Voice pipeline reported COMPLETE
I (43835) STATE_MGR: Waiting for TTS playback drain (~0 bytes pending, timeout 15000 ms)
I (43837) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (43852) WEBSOCKET: Server status: processing
I (43856) WEBSOCKET: Server stage: transcription
I (43862) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (43869) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (44142) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (44142) STATE_MGR: TTS decoder confirmed idle
I (44146) STATE_MGR: Flushing and resetting TTS decoder for next session
I (44153) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (44161) TTS: Flushing pending audio before reset (~0 bytes)
I (44355) LED_CTRL: LED pattern -> 4
I (44389) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "i"}
I (44390) WEBSOCKET: Server status: processing
I (44393) WEBSOCKET: Server stage: llm
I (44398) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (44405) WEBSOCKET: Entering LLM stage - continuing processing indication
I (44467) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (44467) TTS: TTS decoder session reset for next audio stream
I (44472) TTS: âœ… TTS decoder flushed and reset for next session
I (44479) TTS: TTS playback task shutting down - is_running=0
I (44485) TTS: ğŸµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (44493) TTS:   âœ“ DMA buffer freed from PSRAM
I (44498) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (44679) TTS: â¹ï¸ Stopping TTS decoder...
W (44679) TTS: TTS decoder not running
I (44802) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "It seems you started to ask a question but didn't finish."}
I (44804) STATE_MGR: Acquiring I2S mutex...
I (44806) WEBSOCKET: Server status: processing
I (44811) STATE_MGR: Deinitializing audio drivers...
I (44816) WEBSOCKET: Server stage: tts
I (44821) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44826) WEBSOCKET: Pipeline stage changed: llm -> tts
I (44844) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (44850) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (44857) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44865) LED_CTRL: LED pattern -> 3
I (44883) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (44887) TTS: ğŸµ Starting TTS decoder...
I (44894) AUDIO: âœ… RX channel disabled (took 0 ms)
I (44899) TTS: Initializing TTS decoder...
I (44904) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
W (44909) TTS: TTS decoder already initialized
I (44915) AUDIO: âœ… TX channel disabled (took 0 ms)
I (44921) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (44945) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (44946) TTS: ğŸµ TTS playback task started on Core 1
I (44946) TTS: âœ… TTS decoder started successfully
I (44951) TTS: âœ… TTS playback task registered with watchdog
W (44956) WEBSOCKET: TTS audio arriving after voice mode exit (state=3) - will attempt playback
I (44971) AUDIO: [STEP 4/5] Deleting RX channel...
I (44978) AUDIO: âœ… RX channel deleted (took 0 ms)
I (44982) TTS: Received audio chunk #48: 4096 bytes
I (44983) AUDIO: [STEP 5/5] Deleting TX channel...
I (44989) TTS: New audio session detected - resetting chunk counter
I (44994) AUDIO: âœ… TX channel deleted (took 0 ms)
I (45002) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (45006) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (45021) TTS: Received audio chunk #2: 4096 bytes
I (44963) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850ac8 (4096 bytes)
I (45028) TTS: Chunk #2 first 12 bytes: 7F C4 34 C0 68 BC 13 BA 17 BB AA BC
I (45037) TTS: âœ… WAV header parsed successfully
I (45048) TTS: === WAV File Info ===
I (45050) TTS: Received audio chunk #3: 4096 bytes
I (45053) TTS: Sample Rate: 16000 Hz
I (45058) TTS: Chunk #3 first 12 bytes: 08 FF 1B 01 3A 01 48 00 7B FF DE FF
I (45062) TTS: Channels: 1
I (45072) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45077) TTS: Received audio chunk #4: 4096 bytes
I (45091) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (45097) TTS: Chunk #4 first 12 bytes: A6 34 95 2E 90 2C AF 2E 6A 2F 26 2B
I (45103) AUDIO: â•‘ Camera Can Now Initialize
I (45116) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45118) TTS: Received audio chunk #5: 4096 bytes
I (45092) TTS: Bits per Sample: 16
I (45139) TTS: Chunk #5 first 12 bytes: E5 FC 92 FC 06 FC 69 FB C4 FA 07 FA
I (45144) TTS: Audio Format: 1 (PCM)
I (45155) TTS: Declared Data Size: 128726 bytes
I (45158) TTS: Received audio chunk #6: 4096 bytes
I (45161) TTS: Block Align: 2
I (45170) TTS: Byte Rate: 32000
I (45173) TTS: Received audio chunk #7: 4096 bytes
I (45174) TTS: ====================
W (45183) AUDIO_FEEDBACK: Audio driver not available for feedback
I (45184) STATE_MGR: Allowing memory stabilization (100ms)...
I (45186) TTS: Received audio chunk #8: 4096 bytes
W (45196) TTS: Playback start feedback failed: ESP_ERR_INVALID_STATE
W (45209) TTS: Unable to set TX sample rate to 16000 Hz: ESP_ERR_INVALID_STATE
I (45211) TTS: Received audio chunk #9: 4096 bytes
W (45217) TTS: I2S deinitialized before initial PCM write - aborting playback
I (45229) TTS: Received audio chunk #10: 4096 bytes
I (45230) TTS: ğŸµ TTS playback task exiting (played 0 bytes, result: ESP_ERR_INVALID_STATE)
W (45242) TTS: Rejecting audio chunks - TTS decoder not running (chunks rejected: 1, last: 4096 bytes)
I (45245) TTS:   âœ“ DMA buffer freed from PSRAM
I (45260) TTS:   âœ“ Clearing 36864 bytes from stream buffer
I (45296) STATE_MGR: Camera will be initialized on-demand during capture
I (45297) STATE_MGR: I2S mutex released
I (45297) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45316) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (45323) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45341) MEM_MGR: â•‘ Internal RAM:
I (45345) MEM_MGR: â•‘   Free:              89427 bytes ( 87 KB)
I (45352) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (45359) MEM_MGR: â•‘   Fragmentation:     36%
I (45364) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45382) MEM_MGR: â•‘ DMA-capable RAM:
I (45387) MEM_MGR: â•‘   Free:              69063 bytes ( 67 KB)
I (45393) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (45400) MEM_MGR: â•‘   Fragmentation:     17%
I (45405) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45424) MEM_MGR: â•‘ PSRAM:
I (45427) MEM_MGR: â•‘   Free:             3851436 bytes (3761 KB)
I (45434) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (45441) MEM_MGR: â•‘   Fragmentation:      2%
I (45446) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45455) WEBSOCKET: Received text message: {"status": "complete"}
I (45465) MEM_MGR: â•‘ Total Heap:
I (45472) WEBSOCKET: Server status: complete
I (45476) MEM_MGR: â•‘   Free:             3920424 bytes (3828 KB)
I (45481) WEBSOCKET: Pipeline stage changed: tts -> complete
I (45487) MEM_MGR: â•‘   Minimum Ever:     3898656 bytes (3807 KB)
I (45494) WEBSOCKET: Exiting TTS stage (transition to complete)
I (45501) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45526) MEM_MGR: â•‘ Memory Delta from Baseline:
I (45531) MEM_MGR: â•‘   Internal RAM:     -135708 bytes (-132 KB)
I (45538) MEM_MGR: â•‘   DMA-capable:      -135708 bytes (-132 KB)
I (45545) MEM_MGR: â•‘   PSRAM:            -340580 bytes (-332 KB)
I (45552) MEM_MGR: â•‘   Total Heap:       -444332 bytes (-433 KB)
I (45558) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45577) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (45586) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45604) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (45607) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (45611) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45637) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45655) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (45662) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45680) AUDIO: [DIAG] Pre-init state:
I (45685) AUDIO:   Free heap: 3958728 bytes
I (45690) AUDIO:   Free internal RAM: 115435 bytes
I (45695) AUDIO:   Free DMA-capable: 95071 bytes
I (45701) AUDIO:   Free PSRAM: 3863732 bytes
I (45705) AUDIO:   Timestamp: 44152 ms
I (45710) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (45717) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (45725) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (45733) AUDIO:   DMA frame num (per desc): 1020
I (45738) AUDIO:   DMA total samples (effective): 4080
I (45744) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (45751) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (45758) AUDIO: âœ… I2S channels created (took 0 ms)
I (45763) AUDIO:   TX handle: 0x3ffafc90 | RX handle: 0x3ffcb4c8
I (45770) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (45776) AUDIO:   Sample rate: 16000 Hz
I (45781) AUDIO:   MCLK: DISABLED
I (45785) AUDIO:   BCLK: GPIO14 (shared)
I (45789) AUDIO:   WS:   GPIO15 (shared)
I (45794) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (45801) AUDIO: âœ… TX channel configured (took 1 ms)
I (45805) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (45812) AUDIO:   Sample rate: 16000 Hz
I (45817) AUDIO:   MCLK: DISABLED
I (45821) AUDIO:   BCLK: GPIO14 (shared)
I (45826) AUDIO:   WS:   GPIO15 (shared)
I (45830) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (45836) AUDIO: âœ… RX channel configured (took 0 ms)
I (45841) AUDIO: [STEP 4/6] Enabling TX channel...
I (45847) AUDIO: âœ… TX channel enabled (took 0 ms)
I (45853) AUDIO: [STEP 5/6] Enabling RX channel...
I (45858) AUDIO: âœ… RX channel enabled (took 0 ms)
I (45864) AUDIO: [STEP 6/6] Hardware stabilization...
I (45869) AUDIO:   Phase 1: Initial settle (50ms)
I (45465) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (45925) AUDIO:   Phase 2: DMA verification
I (45925) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (45926) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (46082) AUDIO: [DIAG] Post-init state:
I (46082) AUDIO:   Free heap: 3941280 bytes
I (46082) AUDIO:   Free internal RAM: 97987 bytes
I (46086) AUDIO:   Free DMA-capable: 77623 bytes
I (46091) AUDIO:   Free PSRAM: 3863732 bytes
I (46096) AUDIO:   Timestamp: 44543 ms
I (46101) AUDIO:   Total init time: 201 ms
I (46105) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46123) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (46130) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (46135) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (46144) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (46150) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46168) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46186) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (46193) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (46199) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (46206) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (46212) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46513) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46520) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (46528) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46546) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (46553) AUDIO: âœ… RX channel disabled (took 0 ms)
I (46558) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (46565) AUDIO: âœ… TX channel disabled (took 0 ms)
I (46570) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (46627) AUDIO: [STEP 4/5] Deleting RX channel...
I (46628) AUDIO: âœ… RX channel deleted (took 0 ms)
I (46628) AUDIO: [STEP 5/5] Deleting TX channel...
I (46633) AUDIO: âœ… TX channel deleted (took 0 ms)
I (46638) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (46696) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46703) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (46710) AUDIO: â•‘ Camera Can Now Initialize
I (46715) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (46733) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (46748) STATE_MGR: STT pipeline reported stop
I (46758) STATE_MGR: Pipeline stage event: transcription
I (46768) STATE_MGR: Pipeline stage event: llm
I (46778) STATE_MGR: TTS playback start event received
I (46788) STATE_MGR: Pipeline stage event: tts
I (46798) STATE_MGR: TTS playback start event received
I (46808) STATE_MGR: Pipeline stage event: complete
I (52215) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (52215) STATE_MGR: Double-click detected - triggering capture sequence
I (52218) STATE_MGR: Starting camera capture sequence
I (52224) LED_CTRL: LED pattern -> 6
I (52229) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (52246) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (52253) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (52271) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (52289) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (52297) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (52315) AUDIO: [DIAG] Pre-init state:
I (52319) AUDIO:   Free heap: 3967280 bytes
I (52324) AUDIO:   Free internal RAM: 123987 bytes
I (52329) AUDIO:   Free DMA-capable: 103623 bytes
I (52335) AUDIO:   Free PSRAM: 3863732 bytes
I (52340) AUDIO:   Timestamp: 50786 ms
I (52344) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (52351) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (52359) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (52367) AUDIO:   DMA frame num (per desc): 1020
I (52373) AUDIO:   DMA total samples (effective): 4080
I (52378) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (52385) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (52392) AUDIO: âœ… I2S channels created (took 0 ms)
I (52397) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb62c
I (52404) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (52411) AUDIO:   Sample rate: 16000 Hz
I (52415) AUDIO:   MCLK: DISABLED
I (52419) AUDIO:   BCLK: GPIO14 (shared)
I (52424) AUDIO:   WS:   GPIO15 (shared)
I (52428) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (52435) AUDIO: âœ… TX channel configured (took 1 ms)
I (52440) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (52447) AUDIO:   Sample rate: 16000 Hz
I (52451) AUDIO:   MCLK: DISABLED
I (52455) AUDIO:   BCLK: GPIO14 (shared)
I (52460) AUDIO:   WS:   GPIO15 (shared)
I (52464) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (52470) AUDIO: âœ… RX channel configured (took 0 ms)
I (52476) AUDIO: [STEP 4/6] Enabling TX channel...
I (52481) AUDIO: âœ… TX channel enabled (took 0 ms)
I (52487) AUDIO: [STEP 5/6] Enabling RX channel...
I (52492) AUDIO: âœ… RX channel enabled (took 0 ms)
I (52498) AUDIO: [STEP 6/6] Hardware stabilization...
I (52504) AUDIO:   Phase 1: Initial settle (50ms)
I (52559) AUDIO:   Phase 2: DMA verification
I (52559) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (52560) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (52716) AUDIO: [DIAG] Post-init state:
I (52716) AUDIO:   Free heap: 3941296 bytes
I (52716) AUDIO:   Free internal RAM: 98003 bytes
I (52720) AUDIO:   Free DMA-capable: 77639 bytes
I (52725) AUDIO:   Free PSRAM: 3863732 bytes
I (52730) AUDIO:   Timestamp: 51177 ms
I (52735) AUDIO:   Total init time: 201 ms
I (52739) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (52757) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (52764) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (52769) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (52778) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (52784) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (52802) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (52820) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (52827) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (52833) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (52840) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (52846) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53196) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53203) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (53211) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53229) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (53236) AUDIO: âœ… RX channel disabled (took 0 ms)
I (53241) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (53248) AUDIO: âœ… TX channel disabled (took 0 ms)
I (53253) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (53310) AUDIO: [STEP 4/5] Deleting RX channel...
I (53311) AUDIO: âœ… RX channel deleted (took 0 ms)
I (53311) AUDIO: [STEP 5/5] Deleting TX channel...
I (53316) AUDIO: âœ… TX channel deleted (took 0 ms)
I (53321) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (53379) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53386) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (53393) AUDIO: â•‘ Camera Can Now Initialize
I (53398) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53416) STATE_MGR: Capturing frame from camera
I (53421) CAMERA: Initializing camera...
I (53426) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (53435) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (53444) cam_hal: cam init ok
I (53448) sccb-ng: pin_sda 26 pin_scl 27
I (53451) sccb-ng: sccb_i2c_port=1
I (53457) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (53499) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (53499) camera: Detected OV2640 camera
I (53499) camera: Detected camera at address=0x30
I (53579) cam_hal: PSRAM DMA mode disabled
I (53580) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (53584) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (53591) cam_hal: cam config ok
I (53595) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (53677) CAMERA: Camera initialized successfully
I (53737) STATE_MGR: Frame captured: 10351 bytes
I (53738) JSON_PROTO: Generated session ID: hotpin-998C64-52
I (53738) STATE_MGR: Uploading image using session hotpin-998C64-52
I (53745) HTTP_CLIENT: Uploading image: session=hotpin-998C64-52, size=10351 bytes
I (53754) HTTP_CLIENT: POST body assembled: 10608 bytes
I (53760) HTTP_CLIENT: Sending POST request to http://10.143.111.58:8000/image
I (53981) HTTP_CLIENT: HTTP POST Status = 200, content_length = 199
I (53981) HTTP_CLIENT: Image uploaded successfully
I (53982) HTTP_CLIENT: Server response: {"status":"success","message":"Image received successfully","session":"hotpin-998C64-52","filename":"image.jpg","size_bytes":10351,"saved_path":"captured_images/hotpin-998C64-52_20251103_194356.jpg"}
I (54006) CAMERA: Deinitializing camera...
I (54011) CAMERA: Camera deinitialized
I (54013) STATE_MGR: Camera deinitialized - DMA memory freed
I (54020) STATE_MGR: Image uploaded successfully
I (54025) LED_CTRL: LED pattern -> 3
I (54029) STATE_MGR: Camera capture sequence complete
I (54045) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (56480) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (56480) BUTTON: Single click confirmed
I (56480) STATE_MGR: Single click - mode toggle requested
I (56486) STATE_MGR: Switching: Camera â†’ Voice (count: 5)
I (56543) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (56543) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56556) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (56563) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56582) MEM_MGR: â•‘ Internal RAM:
I (56586) MEM_MGR: â•‘   Free:             123987 bytes (121 KB)
I (56592) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (56599) MEM_MGR: â•‘   Fragmentation:     25%
I (56604) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56623) MEM_MGR: â•‘ DMA-capable RAM:
I (56627) MEM_MGR: â•‘   Free:             103623 bytes (101 KB)
I (56634) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (56641) MEM_MGR: â•‘   Fragmentation:     10%
I (56646) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56664) MEM_MGR: â•‘ PSRAM:
I (56668) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (56675) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (56682) MEM_MGR: â•‘   Fragmentation:      2%
I (56687) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56705) MEM_MGR: â•‘ Total Heap:
I (56709) MEM_MGR: â•‘   Free:             3967280 bytes (3874 KB)
I (56716) MEM_MGR: â•‘   Minimum Ever:     3898656 bytes (3807 KB)
I (56723) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56741) MEM_MGR: â•‘ Memory Delta from Baseline:
I (56747) MEM_MGR: â•‘   Internal RAM:     -101148 bytes ( -98 KB)
I (56754) MEM_MGR: â•‘   DMA-capable:      -101148 bytes ( -98 KB)
I (56761) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (56767) MEM_MGR: â•‘   Total Heap:       -397476 bytes (-388 KB)
I (56774) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56793) STATE_MGR: Stopping camera...
I (56797) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56813) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (56820) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56837) STATE_MGR:   Timeout: 5000 ms
I (56841) STATE_MGR:   Timestamp: 55288 ms
I (56846) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (56852) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56868) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (56874) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56891) STATE_MGR:   Free heap before: 3966808 bytes
I (56896) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (56902) CAMERA: Deinitializing camera...
I (56907) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (56913) STATE_MGR:   Free heap after: 3966808 bytes
I (56919) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (56925) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56941) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (56947) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56964) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (57072) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (57172) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (57222) STATE_MGR:   âœ“ Total stabilization: 250ms
I (57222) STATE_MGR:   Timestamp: 55669 ms
I (57222) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57238) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (57245) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57261) STATE_MGR:   Free heap before: 3966808 bytes
I (57267) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57285) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (57292) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57310) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57328) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (57335) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57353) AUDIO: [DIAG] Pre-init state:
I (57357) AUDIO:   Free heap: 3966808 bytes
I (57362) AUDIO:   Free internal RAM: 123515 bytes
I (57368) AUDIO:   Free DMA-capable: 103151 bytes
I (57373) AUDIO:   Free PSRAM: 3863732 bytes
I (57378) AUDIO:   Timestamp: 55825 ms
I (57382) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (57389) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (57397) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (57405) AUDIO:   DMA frame num (per desc): 1020
I (57411) AUDIO:   DMA total samples (effective): 4080
I (57417) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (57424) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (57430) AUDIO: âœ… I2S channels created (took 0 ms)
I (57436) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffcb68c
I (57442) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (57449) AUDIO:   Sample rate: 16000 Hz
I (57453) AUDIO:   MCLK: DISABLED
I (57457) AUDIO:   BCLK: GPIO14 (shared)
I (57462) AUDIO:   WS:   GPIO15 (shared)
I (57467) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (57474) AUDIO: âœ… TX channel configured (took 1 ms)
I (57478) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (57485) AUDIO:   Sample rate: 16000 Hz
I (57489) AUDIO:   MCLK: DISABLED
I (57493) AUDIO:   BCLK: GPIO14 (shared)
I (57498) AUDIO:   WS:   GPIO15 (shared)
I (57503) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (57509) AUDIO: âœ… RX channel configured (took 0 ms)
I (57514) AUDIO: [STEP 4/6] Enabling TX channel...
I (57520) AUDIO: âœ… TX channel enabled (took 0 ms)
I (57525) AUDIO: [STEP 5/6] Enabling RX channel...
I (57531) AUDIO: âœ… RX channel enabled (took 0 ms)
I (57536) AUDIO: [STEP 6/6] Hardware stabilization...
I (57542) AUDIO:   Phase 1: Initial settle (50ms)
I (57597) AUDIO:   Phase 2: DMA verification
I (57597) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (57598) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (57754) AUDIO: [DIAG] Post-init state:
I (57754) AUDIO:   Free heap: 3940824 bytes
I (57754) AUDIO:   Free internal RAM: 97531 bytes
I (57758) AUDIO:   Free DMA-capable: 77167 bytes
I (57763) AUDIO:   Free PSRAM: 3863732 bytes
I (57768) AUDIO:   Timestamp: 56215 ms
I (57773) AUDIO:   Total init time: 201 ms
I (57777) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57795) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (57802) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (57807) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (57816) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (57822) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57840) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57858) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (57865) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (57871) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (57878) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (57884) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57902) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (57908) STATE_MGR:   Free heap after: 3940824 bytes
I (57914) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57930) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (57936) STATE_MGR: â•‘ Total transition time: 889 ms
I (57942) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57958) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57974) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (57980) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (57997) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (58005) TTS: No pending audio to flush
I (58034) TTS: TTS decoder session reset for next audio stream
I (58034) TTS: âœ… TTS decoder flushed and reset for next session
I (58036) STT: Starting STT pipeline...
I (58041) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (58050) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (58057) STT:   Current time: 56504 ms
I (58060) STT: âœ… STT pipeline started
I (58061) STT:   Free heap: 3932272 bytes
I (58061) STT: Audio streaming session activated
I (58076) STT: Connection stabilization delay (500ms)...
I (58116) TTS: ğŸµ Starting TTS decoder...
I (58116) TTS: Initializing TTS decoder...
W (58117) TTS: TTS decoder already initialized
I (58145) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (58145) TTS: âœ… TTS decoder started successfully
I (58149) TTS: ğŸµ TTS playback task started on Core 1
I (58155) TTS: âœ… TTS playback task registered with watchdog
I (58161) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (58270) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (58270) STT:   âœ“ Audio driver initialized
I (58271) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (58378) STT:   Total stabilization: 300ms
I (58378) STT:   Timestamp: 56825 ms
I (58378) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (58382) STT:   âœ“ DMA-capable buffer allocated at 0x3ffca9cc (with safety padding)
I (58391) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58407) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (58412) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (58418) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58474) LED_CTRL: LED pattern -> 1
I (58475) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58486) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (58493) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58511) MEM_MGR: â•‘ Internal RAM:
I (58515) MEM_MGR: â•‘   Free:             123987 bytes (121 KB)
I (58522) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (58529) MEM_MGR: â•‘   Fragmentation:     25%
I (58534) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58552) MEM_MGR: â•‘ DMA-capable RAM:
I (58557) MEM_MGR: â•‘   Free:             103623 bytes (101 KB)
I (58564) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (58570) MEM_MGR: â•‘   Fragmentation:     10%
I (58575) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58582) STT: Testing WebSocket transport health...
I (58594) MEM_MGR: â•‘ PSRAM:
I (58603) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (58606) STT: âœ… WebSocket transport verified healthy
I (58610) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (58623) MEM_MGR: â•‘   Fragmentation:      2%
I (58628) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58646) MEM_MGR: â•‘ Total Heap:
I (58650) MEM_MGR: â•‘   Free:             3967280 bytes (3874 KB)
I (58657) MEM_MGR: â•‘   Minimum Ever:     3898656 bytes (3807 KB)
I (58664) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58683) MEM_MGR: â•‘ Memory Delta from Baseline:
I (58688) MEM_MGR: â•‘   Internal RAM:     -101148 bytes ( -98 KB)
I (58695) MEM_MGR: â•‘   DMA-capable:      -101148 bytes ( -98 KB)
I (58702) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (58709) MEM_MGR: â•‘   Total Heap:       -397476 bytes (-388 KB)
I (58715) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58716) STT: Starting audio streaming to server...
I (58734) STATE_MGR: âœ… Voice mode transition complete
I (58745) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (58761) STATE_MGR: STT pipeline reported start
I (58771) STATE_MGR: TTS playback start event received
I (58868) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 5, "bytes_received": 16400}
I (58869) WEBSOCKET: Server status: receiving
I (59532) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 36880}
I (59534) WEBSOCKET: Server status: receiving
I (60200) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 15, "bytes_received": 57360}
I (60201) WEBSOCKET: Server status: receiving
I (60331) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (60331) BUTTON: Single click confirmed
I (60331) STATE_MGR: Single click - mode toggle requested
I (60338) STATE_MGR: Switching: Voice â†’ Camera (count: 6)
I (60394) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (60394) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60407) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (60414) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60433) MEM_MGR: â•‘ Internal RAM:
I (60437) MEM_MGR: â•‘   Free:             123987 bytes (121 KB)
I (60444) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (60450) MEM_MGR: â•‘   Fragmentation:     25%
I (60456) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60474) MEM_MGR: â•‘ DMA-capable RAM:
I (60479) MEM_MGR: â•‘   Free:             103623 bytes (101 KB)
I (60485) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (60492) MEM_MGR: â•‘   Fragmentation:     10%
I (60497) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60516) MEM_MGR: â•‘ PSRAM:
I (60519) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (60526) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (60533) MEM_MGR: â•‘   Fragmentation:      2%
I (60538) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60557) MEM_MGR: â•‘ Total Heap:
I (60561) MEM_MGR: â•‘   Free:             3967280 bytes (3874 KB)
I (60567) MEM_MGR: â•‘   Minimum Ever:     3898656 bytes (3807 KB)
I (60574) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60593) MEM_MGR: â•‘ Memory Delta from Baseline:
I (60598) MEM_MGR: â•‘   Internal RAM:     -101148 bytes ( -98 KB)
I (60605) MEM_MGR: â•‘   DMA-capable:      -101148 bytes ( -98 KB)
I (60612) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (60619) MEM_MGR: â•‘   Total Heap:       -397476 bytes (-388 KB)
I (60626) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60644) STATE_MGR: Stopping voice mode components...
I (60650) STT: Stopping STT pipeline...
I (60654) STT: Draining ring buffer (1024 bytes pending) before shutdown...
I (60656) STT: Audio capture task stopped (captured 75776 bytes total)
I (60671) STT: Ring buffer drained and cleared successfully
I (60696) STT: Streaming task received stop signal
I (60698) STT: Sending EOS signal...
I (60698) WEBSOCKET: Sending EOS signal
I (60705) STT: Audio streaming session complete (streamed 73728 bytes in 18 chunks)
I (60723) STT: STT pipeline stopped
I (60723) STATE_MGR: Voice pipeline reported COMPLETE
I (60723) STATE_MGR: Waiting for TTS playback drain (~0 bytes pending, timeout 15000 ms)
I (60765) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (60766) WEBSOCKET: Server status: processing
I (60769) WEBSOCKET: Server stage: transcription
I (60775) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (60782) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (61030) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (61031) STATE_MGR: TTS decoder confirmed idle
I (61034) STATE_MGR: Flushing and resetting TTS decoder for next session
I (61041) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (61049) TTS: Flushing pending audio before reset (~0 bytes)
I (61296) LED_CTRL: LED pattern -> 4
I (61355) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (61355) TTS: TTS decoder session reset for next audio stream
I (61360) TTS: âœ… TTS decoder flushed and reset for next session
I (61376) TTS: TTS playback task shutting down - is_running=0
I (61376) TTS: ğŸµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (61381) TTS:   âœ“ DMA buffer freed from PSRAM
I (61386) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (61388) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hello"}
I (61404) WEBSOCKET: Server status: processing
I (61409) WEBSOCKET: Server stage: llm
I (61413) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (61420) WEBSOCKET: Entering LLM stage - continuing processing indication
I (61513) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "Hello, I'm Hotpin, your compact and helpful voice assistant."}
I (61518) WEBSOCKET: Server status: processing
I (61523) WEBSOCKET: Server stage: tts
I (61527) WEBSOCKET: Pipeline stage changed: llm -> tts
I (61533) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (61541) LED_CTRL: LED pattern -> 3
I (61545) TTS: ğŸµ Starting TTS decoder...
I (61550) TTS: Initializing TTS decoder...
W (61554) TTS: TTS decoder already initialized
I (61584) TTS: â¹ï¸ Stopping TTS decoder...
W (61585) TTS: TTS decoder not running
I (61592) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (61598) TTS: âœ… TTS decoder started successfully
W (61602) WEBSOCKET: TTS audio arriving after voice mode exit (state=3) - will attempt playback
I (61617) TTS: ğŸµ TTS playback task started on Core 1
I (61617) TTS: âœ… TTS playback task registered with watchdog
I (61622) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (61717) STATE_MGR: Acquiring I2S mutex...
I (61717) STATE_MGR: Deinitializing audio drivers...
I (61717) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61735) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (61742) TTS: Received audio chunk #42: 4096 bytes
I (61742) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61748) TTS: New audio session detected - resetting chunk counter
I (61766) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (61773) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (61780) AUDIO: âœ… RX channel disabled (took 0 ms)
I (61793) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (61796) TTS: Received audio chunk #2: 4096 bytes
I (61800) AUDIO: âœ… TX channel disabled (took 0 ms)
I (61805) TTS: Chunk #2 first 12 bytes: 7A 00 7C 00 A6 00 00 01 76 01 97 01
I (61811) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (61825) TTS: Received audio chunk #3: 4096 bytes
I (61830) TTS: Chunk #3 first 12 bytes: 99 17 0E 13 BB 10 E8 0F BB 0E F2 0A
I (61845) TTS: âœ… WAV header parsed successfully
I (61845) TTS: === WAV File Info ===
I (61846) TTS: Received audio chunk #4: 4096 bytes
I (61848) TTS: Sample Rate: 16000 Hz
I (61853) TTS: Chunk #4 first 12 bytes: 1E 33 C0 34 48 35 19 33 6C 29 FF 1F
I (61857) TTS: Channels: 1
I (61868) TTS: Bits per Sample: 16
I (61871) TTS: Received audio chunk #5: 4096 bytes
I (61875) AUDIO: [STEP 4/5] Deleting RX channel...
I (61878) TTS: Chunk #5 first 12 bytes: C3 FF C0 FF B3 FF AB FF A8 FF 87 FF
I (61884) AUDIO: âœ… RX channel deleted (took 0 ms)
I (61897) AUDIO: [STEP 5/5] Deleting TX channel...
I (61902) TTS: Received audio chunk #6: 4096 bytes
I (61903) AUDIO: âœ… TX channel deleted (took 0 ms)
I (61913) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (61914) TTS: Received audio chunk #7: 4096 bytes
I (61873) TTS: Audio Format: 1 (PCM)
I (61931) TTS: Declared Data Size: 150718 bytes
I (61933) TTS: Received audio chunk #8: 4096 bytes
I (61936) TTS: Block Align: 2
I (61945) TTS: Byte Rate: 32000
I (61948) TTS: Received audio chunk #9: 4096 bytes
I (61949) TTS: ====================
E (61959) AUDIO: I2S TX channel not initialized
I (61961) TTS: Received audio chunk #10: 4096 bytes
E (61964) AUDIO_FEEDBACK: Beep write failed (ESP_ERR_INVALID_STATE), wrote 0/7680 bytes
I (61971) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61976) TTS: Received audio chunk #11: 4096 bytes
I (61996) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (62008) AUDIO: â•‘ Camera Can Now Initialize
I (62013) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62009) TTS: Received audio chunk #12: 4096 bytes
W (61996) TTS: Playback start feedback failed: ESP_ERR_INVALID_STATE
I (62043) TTS: Received audio chunk #13: 4096 bytes
W (62043) TTS: Unable to set TX sample rate to 16000 Hz: ESP_ERR_INVALID_STATE
I (62056) TTS: Received audio chunk #14: 4096 bytes
W (62057) TTS: I2S deinitialized before initial PCM write - aborting playback
I (62069) TTS: Received audio chunk #15: 4096 bytes
I (62070) TTS: ğŸµ TTS playback task exiting (played 0 bytes, result: ESP_ERR_INVALID_STATE)
I (62081) STATE_MGR: Allowing memory stabilization (100ms)...
W (62083) TTS: Rejecting audio chunks - TTS decoder not running (chunks rejected: 1, last: 4096 bytes)
I (62092) TTS:   âœ“ DMA buffer freed from PSRAM
I (62107) TTS:   âœ“ Clearing 57344 bytes from stream buffer
I (62145) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
W (61905) MEM_MGR: âš ï¸ WARNING: Memory fragmentation increasing! DMA:31% PSRAM:2%
I (62191) STATE_MGR: Camera will be initialized on-demand during capture
I (62192) STATE_MGR: I2S mutex released
I (62192) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62211) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (62218) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62236) MEM_MGR: â•‘ Internal RAM:
I (62240) MEM_MGR: â•‘   Free:             113187 bytes (110 KB)
I (62247) MEM_MGR: â•‘   Largest Block:     63488 bytes ( 62 KB)
I (62254) MEM_MGR: â•‘   Fragmentation:     44%
I (62259) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62277) MEM_MGR: â•‘ DMA-capable RAM:
I (62282) MEM_MGR: â•‘   Free:              91155 bytes ( 89 KB)
I (62288) MEM_MGR: â•‘   Largest Block:     63488 bytes ( 62 KB)
I (62295) MEM_MGR: â•‘   Fragmentation:     31%
I (62295) WEBSOCKET: Received text message: {"status": "complete"}
I (62300) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62307) WEBSOCKET: Server status: complete
I (62325) MEM_MGR: â•‘ PSRAM:
I (62331) WEBSOCKET: Pipeline stage changed: tts -> complete
I (62334) MEM_MGR: â•‘   Free:             3859768 bytes (3769 KB)
I (62340) WEBSOCKET: Exiting TTS stage (transition to complete)
I (62347) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (62361) MEM_MGR: â•‘   Fragmentation:      2%
I (62366) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62384) MEM_MGR: â•‘ Total Heap:
I (62388) MEM_MGR: â•‘   Free:             3949180 bytes (3856 KB)
I (62395) MEM_MGR: â•‘   Minimum Ever:     3829452 bytes (3739 KB)
I (62402) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62421) MEM_MGR: â•‘ Memory Delta from Baseline:
I (62426) MEM_MGR: â•‘   Internal RAM:     -111948 bytes (-109 KB)
I (62433) MEM_MGR: â•‘   DMA-capable:      -113616 bytes (-110 KB)
I (62440) MEM_MGR: â•‘   PSRAM:            -332248 bytes (-324 KB)
I (62447) MEM_MGR: â•‘   Total Heap:       -415576 bytes (-405 KB)
I (62453) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62454) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (62472) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (62489) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62507) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (62514) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62532) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62550) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (62557) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (62575) AUDIO: [DIAG] Pre-init state:
I (62580) AUDIO:   Free heap: 3966808 bytes
I (62585) AUDIO:   Free internal RAM: 123515 bytes
I (62590) AUDIO:   Free DMA-capable: 103151 bytes
I (62596) AUDIO:   Free PSRAM: 3863732 bytes
I (62601) AUDIO:   Timestamp: 61047 ms
I (62605) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (62612) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (62620) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (62628) AUDIO:   DMA frame num (per desc): 1020
I (62633) AUDIO:   DMA total samples (effective): 4080
I (62639) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (62646) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (62653) AUDIO: âœ… I2S channels created (took 0 ms)
I (62658) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffcb68c
I (62665) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (62671) AUDIO:   Sample rate: 16000 Hz
I (62676) AUDIO:   MCLK: DISABLED
I (62680) AUDIO:   BCLK: GPIO14 (shared)
I (62685) AUDIO:   WS:   GPIO15 (shared)
I (62689) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (62696) AUDIO: âœ… TX channel configured (took 1 ms)
I (62701) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (62707) AUDIO:   Sample rate: 16000 Hz
I (62712) AUDIO:   MCLK: DISABLED
I (62716) AUDIO:   BCLK: GPIO14 (shared)
I (62721) AUDIO:   WS:   GPIO15 (shared)
I (62725) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (62731) AUDIO: âœ… RX channel configured (took 0 ms)
I (62737) AUDIO: [STEP 4/6] Enabling TX channel...
I (62742) AUDIO: âœ… TX channel enabled (took 0 ms)
I (62748) AUDIO: [STEP 5/6] Enabling RX channel...
I (62753) AUDIO: âœ… RX channel enabled (took 0 ms)
I (62759) AUDIO: [STEP 6/6] Hardware stabilization...
I (62764) AUDIO:   Phase 1: Initial settle (50ms)
I (62820) AUDIO:   Phase 2: DMA verification
I (62820) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (62821) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (62977) AUDIO: [DIAG] Post-init state:
I (62977) AUDIO:   Free heap: 3940844 bytes
I (62977) AUDIO:   Free internal RAM: 97551 bytes
I (62981) AUDIO:   Free DMA-capable: 77187 bytes
I (62986) AUDIO:   Free PSRAM: 3863732 bytes
I (62991) AUDIO:   Timestamp: 61438 ms
I (62996) AUDIO:   Total init time: 201 ms
I (63000) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (63018) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (63024) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (63030) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (63039) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (63045) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (63063) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (63081) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (63088) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (63094) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (63101) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (63107) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (63408) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (63415) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (63423) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (63441) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (63448) AUDIO: âœ… RX channel disabled (took 0 ms)
I (63453) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (63460) AUDIO: âœ… TX channel disabled (took 0 ms)
I (63465) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (63522) AUDIO: [STEP 4/5] Deleting RX channel...
I (63523) AUDIO: âœ… RX channel deleted (took 0 ms)
I (63523) AUDIO: [STEP 5/5] Deleting TX channel...
I (63528) AUDIO: âœ… TX channel deleted (took 0 ms)
I (63533) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (63591) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (63598) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (63604) AUDIO: â•‘ Camera Can Now Initialize
I (63610) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (63628) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (63643) STATE_MGR: STT pipeline reported stop
I (63653) STATE_MGR: Pipeline stage event: transcription
I (63663) STATE_MGR: Pipeline stage event: llm
I (63673) STATE_MGR: TTS playback start event received
I (63683) STATE_MGR: Pipeline stage event: tts
I (63693) STATE_MGR: TTS playback start event received
I (63703) STATE_MGR: Pipeline stage event: complete
I (70559) STATE_MGR: Button event received: 3 in state CAMERA_STANDBY
I (70559) BUTTON: Long press detected (3000 ms)
W (70559) STATE_MGR: Long press - shutdown requested
W (70566) STATE_MGR: Shutdown state reached
W (70571) STATE_MGR: === SYSTEM SHUTDOWN ===
I (70576) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70594) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (70601) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70619) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70637) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (70644) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70662) AUDIO: [DIAG] Pre-init state:
I (70666) AUDIO:   Free heap: 3966808 bytes
I (70671) AUDIO:   Free internal RAM: 123515 bytes
I (70677) AUDIO:   Free DMA-capable: 103151 bytes
I (70682) AUDIO:   Free PSRAM: 3863732 bytes
I (70687) AUDIO:   Timestamp: 69134 ms
I (70691) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (70698) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (70706) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (70714) AUDIO:   DMA frame num (per desc): 1020
I (70720) AUDIO:   DMA total samples (effective): 4080
I (70726) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (70733) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (70739) AUDIO: âœ… I2S channels created (took 0 ms)
I (70745) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffcb68c
I (70751) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (70758) AUDIO:   Sample rate: 16000 Hz
I (70762) AUDIO:   MCLK: DISABLED
I (70766) AUDIO:   BCLK: GPIO14 (shared)
I (70771) AUDIO:   WS:   GPIO15 (shared)
I (70776) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (70782) AUDIO: âœ… TX channel configured (took 1 ms)
I (70787) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (70794) AUDIO:   Sample rate: 16000 Hz
I (70798) AUDIO:   MCLK: DISABLED
I (70802) AUDIO:   BCLK: GPIO14 (shared)
I (70807) AUDIO:   WS:   GPIO15 (shared)
I (70812) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (70818) AUDIO: âœ… RX channel configured (took 0 ms)
I (70823) AUDIO: [STEP 4/6] Enabling TX channel...
I (70829) AUDIO: âœ… TX channel enabled (took 0 ms)
I (70834) AUDIO: [STEP 5/6] Enabling RX channel...
I (70840) AUDIO: âœ… RX channel enabled (took 0 ms)
I (70845) AUDIO: [STEP 6/6] Hardware stabilization...
I (70851) AUDIO:   Phase 1: Initial settle (50ms)
I (70906) AUDIO:   Phase 2: DMA verification
I (70906) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (70906) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (71063) AUDIO: [DIAG] Post-init state:
I (71063) AUDIO:   Free heap: 3940844 bytes
I (71063) AUDIO:   Free internal RAM: 97551 bytes
I (71067) AUDIO:   Free DMA-capable: 77187 bytes
I (71072) AUDIO:   Free PSRAM: 3863732 bytes
I (71077) AUDIO:   Timestamp: 69524 ms
I (71082) AUDIO:   Total init time: 201 ms
I (71086) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71104) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (71111) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (71116) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (71125) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (71131) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71149) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71167) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (71174) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (71180) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (71187) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (71193) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (71846) HOTPIN_MAIN: System shutdown detected, terminating WebSocket connection task
I (71846) HOTPIN_MAIN: Unregistering WebSocket connection task from watchdog
I (71851) HOTPIN_MAIN: WebSocket connection task terminated
I (72455) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (72462) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (72470) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (72488) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (72495) AUDIO: âœ… RX channel disabled (took 0 ms)
I (72500) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (72507) AUDIO: âœ… TX channel disabled (took 0 ms)
I (72512) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (72569) AUDIO: [STEP 4/5] Deleting RX channel...
I (72570) AUDIO: âœ… RX channel deleted (took 0 ms)
I (72570) AUDIO: [STEP 5/5] Deleting TX channel...
I (72575) AUDIO: âœ… TX channel deleted (took 0 ms)
I (72580) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (72638) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (72645) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (72651) AUDIO: â•‘ Camera Can Now Initialize
I (72657) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (72675) LED_CTRL: LED pattern -> 1
I (73279) LED_CTRL: LED pattern -> 3
I (74479) LED_CTRL: LED pattern -> 0
I (74479) STATE_MGR: Stopping all subsystems...
I (74479) STATE_MGR: Shutting down camera...
I (74483) CAMERA: Deinitializing camera...
I (74487) STT: Stopping STT pipeline...
W (74492) STT: STT pipeline already stopped
I (74497) TTS: â¹ï¸ Stopping TTS decoder...
W (74502) TTS: TTS decoder not running
I (74531) STATE_MGR: Stopping WebSocket client
I (74531) WEBSOCKET: Disconnecting from WebSocket server...
W (74550) websocket_client: Client was not started
W (74550) WEBSOCKET: WebSocket client stop reported ESP_FAIL, continuing cleanup
I (74553) WEBSOCKET: WebSocket health check task shutdown signal received
I (74560) WEBSOCKET: WebSocket health check task exiting (cycles: 13, disconnects: 0, reconnects: 1)
I (74653) WEBSOCKET: WebSocket disconnected
I (74653) WEBSOCKET: Force stopping WebSocket client
W (74654) websocket_client: Client was not started
W (74658) WEBSOCKET: Graceful close returned ESP_FAIL
I (74664) STATE_MGR: âœ… Shutdown complete
