PS F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware> idf.py monitor
Executing action: monitor
Serial port COM7
Connecting...............
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP32
Running idf_monitor in directory F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware
Executing "C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe C:\Espressif\frameworks\esp-idf-v5.4.2\tools/idf_monitor.py -p COM7 -b 115200 --toolchain-prefix xtensa-esp32-elf- --target esp32 --revision 0 F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware\build\hotpin_esp32_firmware.elf --force-color -m 'C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe' 'C:\Espressif\frameworks\esp-idf-v5.4.2\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM7 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM7 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:2
load:0x3fff0030,len:6276
load:0x40078000,len:15736
load:0x40080400,len:4
--- 0x40080400: _init at ??:?
load:0x40080404,len:3860
entry 0x4008063c
I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Nov  3 2025 00:56:58
I (29) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=3a7ach (239532) map
I (187) esp_image: segment 1: paddr=0004a7d4 vaddr=3ff80000 size=0001ch (    28) load
I (187) esp_image: segment 2: paddr=0004a7f8 vaddr=3ffb0000 size=05820h ( 22560) load
I (199) esp_image: segment 3: paddr=00050020 vaddr=400d0020 size=bdd40h (777536) map
I (465) esp_image: segment 4: paddr=0010dd68 vaddr=3ffb5820 size=0c4a4h ( 50340) load
I (484) esp_image: segment 5: paddr=0011a214 vaddr=40080000 size=1ad94h (109972) load
I (543) boot: Loaded app from partition at offset 0x10000
I (543) boot: Disabling RNG early entropy source...
I (553) quad_psram: This chip is ESP32-D0WD
I (554) esp_psram: Found 4MB PSRAM device
I (554) esp_psram: Speed: 40MHz
I (557) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (565) cpu_start: Multicore app
I (1459) esp_psram: SPI SRAM memory test OK
I (1467) cpu_start: Pro cpu start user code
I (1467) cpu_start: cpu freq: 240000000 Hz
I (1467) app_init: Application information:
I (1470) app_init: Project name:     hotpin_esp32_firmware
I (1476) app_init: App version:      bcdbd5d-dirty
I (1482) app_init: Compile time:     Nov  3 2025 00:56:46
I (1488) app_init: ELF file SHA256:  7bf095e89...
I (1493) app_init: ESP-IDF:          v5.4.2-dirty
I (1498) efuse_init: Min chip rev:     v0.0
I (1503) efuse_init: Max chip rev:     v3.99
I (1508) efuse_init: Chip rev:         v3.1
I (1514) heap_init: Initializing. RAM available for dynamic allocation:
I (1521) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1527) heap_init: At 3FFC9480 len 00016B80 (90 KiB): DRAM
I (1533) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1539) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1546) heap_init: At 4009AD94 len 0000526C (20 KiB): IRAM
I (1553) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1560) spi_flash: detected chip: generic
I (1564) spi_flash: flash io: dio
W (1568) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1583) main_task: Started on CPU0
I (1586) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1595) main_task: Calling app_main()
I (1599) HOTPIN_MAIN: ====================================
I (1605) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1611) HOTPIN_MAIN: ====================================
W (1617) HOTPIN_MAIN: Brownout detector disabled
I (1622) HOTPIN_MAIN: Validating PSRAM...
I (1627) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1633) HOTPIN_MAIN: PSRAM validation passed
I (1639) HOTPIN_MAIN: ====================================
I (1645) HOTPIN_MAIN: System Information:
I (1649) HOTPIN_MAIN: Chip: esp32
I (1653) HOTPIN_MAIN: Cores: 2
I (1657) HOTPIN_MAIN: Silicon revision: 301
I (1662) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1667) HOTPIN_MAIN: Flash: 2 MB external
I (1672) HOTPIN_MAIN: Free heap: 4364844 bytes
I (1677) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1682) HOTPIN_MAIN: ====================================
I (1688) HOTPIN_MAIN: Initializing memory manager...
I (1693) MEM_MGR: Initializing memory manager...
I (1699) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1717) MEM_MGR: â•‘ Memory Manager Initialized
I (1722) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1741) MEM_MGR: â•‘ Baseline Memory State:
I (1746) MEM_MGR: â•‘   Internal RAM:     225127 bytes (219 KB)
I (1752) MEM_MGR: â•‘   DMA-capable:      204763 bytes (199 KB)
I (1759) MEM_MGR: â•‘   PSRAM:            4192016 bytes (4093 KB)
I (1766) MEM_MGR: â•‘   Total Heap:       4364748 bytes (4262 KB)
I (1772) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1791) MEM_MGR: â•‘ Configured Thresholds:
I (1796) MEM_MGR: â•‘   Internal RAM:     WARN=50KB, CRIT=20KB
I (1802) MEM_MGR: â•‘   DMA-capable:      WARN=35KB, CRIT=20KB
I (1809) MEM_MGR: â•‘   PSRAM:            WARN=500KB, CRIT=200KB
I (1815) MEM_MGR: â•‘   Fragmentation:    WARN=30%, CRIT=50%
I (1822) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1840) MEM_MGR: Starting memory monitoring (interval: 15000 ms)
I (1847) MEM_MGR: âœ… Memory monitoring started
I (1847) MEM_MGR: Memory monitor task started (interval: 15000 ms)
I (1852) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
W (1859) MEM_MGR: âš ï¸ WARNING: Memory fragmentation increasing! DMA:46% PSRAM:2%
I (1877) MEM_MGR: â•‘ Memory Statistics - System Boot
I (1891) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1909) MEM_MGR: â•‘ Internal RAM:
I (1914) MEM_MGR: â•‘   Free:             225127 bytes (219 KB)
I (1920) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1927) MEM_MGR: â•‘   Fragmentation:     51%
I (1932) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1950) MEM_MGR: â•‘ DMA-capable RAM:
I (1955) MEM_MGR: â•‘   Free:             204763 bytes (199 KB)
I (1961) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1968) MEM_MGR: â•‘   Fragmentation:     46%
I (1973) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1991) MEM_MGR: â•‘ PSRAM:
I (1995) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (2002) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (2008) MEM_MGR: â•‘   Fragmentation:      2%
I (2014) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2032) MEM_MGR: â•‘ Total Heap:
I (2036) MEM_MGR: â•‘   Free:             4364748 bytes (4262 KB)
I (2043) MEM_MGR: â•‘   Minimum Ever:     4364748 bytes (4262 KB)
I (2049) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2068) MEM_MGR: â•‘ Memory Delta from Baseline:
I (2073) MEM_MGR: â•‘   Internal RAM:          +0 bytes (  +0 KB)
I (2080) MEM_MGR: â•‘   DMA-capable:           +0 bytes (  +0 KB)
I (2087) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (2093) MEM_MGR: â•‘   Total Heap:            +0 bytes (  +0 KB)
I (2100) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2118) HOTPIN_MAIN: Initializing NVS...
I (2148) HOTPIN_MAIN: NVS initialized successfully
I (2149) event_dispatcher: System event queue ready (16 entries)
I (2150) HOTPIN_MAIN: Synchronization primitives created
I (2156) HOTPIN_MAIN: Initializing WiFi...
I (2164) wifi:wifi driver task: 3ffdaac4, prio:23, stack:6656, core=0
I (2178) wifi:wifi firmware version: bea31f3
I (2178) wifi:wifi certification version: v7.0
I (2178) wifi:config NVS flash: enabled
I (2180) wifi:config nano formatting: disabled
I (2185) wifi:Init data frame dynamic rx buffer num: 32
I (2190) wifi:Init static rx mgmt buffer num: 5
I (2194) wifi:Init management short buffer num: 32
I (2198) wifi:Init dynamic tx buffer num: 32
I (2203) wifi:Init static rx buffer size: 1600
I (2207) wifi:Init static rx buffer num: 10
I (2210) wifi:Init dynamic rx buffer num: 32
I (2216) wifi_init: rx ba win: 6
I (2218) wifi_init: accept mbox: 6
I (2222) wifi_init: tcpip mbox: 32
I (2226) wifi_init: udp mbox: 6
I (2230) wifi_init: tcp mbox: 6
I (2234) wifi_init: tcp tx win: 5760
I (2238) wifi_init: tcp rx win: 5760
I (2243) wifi_init: tcp mss: 1440
I (2247) wifi_init: WiFi IRAM OP enabled
I (2251) wifi_init: WiFi RX IRAM OP enabled
I (2258) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (2325) phy_init: Saving new calibration data due to checksum failure or outdated calibration data, mode(0)
I (2344) wifi:mode : sta (80:f3:da:99:8c:64)
I (2345) wifi:enable tsf
I (2347) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (2348) HOTPIN_MAIN: Waiting for WiFi connection...
I (2348) HOTPIN_MAIN: WiFi station started, connecting...
I (2371) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (2372) wifi:state: init -> auth (0xb0)
I (3308) wifi:state: auth -> assoc (0x0)
I (3317) wifi:state: assoc -> run (0x10)
I (3344) wifi:connected with wifi, aid = 1, channel 11, BW20, bssid = ee:d4:b9:ed:90:50
I (3344) wifi:security: WPA3-SAE, phy: bgn, rssi: -48
I (3348) wifi:pm start, type: 1

I (3349) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (3359) wifi:<ba-add>idx:0 (ifx:0, ee:d4:b9:ed:90:50), tid:0, ssn:0, winSize:64
I (3366) HOTPIN_MAIN: WiFi connected to AP
I (3413) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (3414) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (4410) esp_netif_handlers: sta ip: 10.143.111.214, mask: 255.255.255.0, gw: 10.143.111.248
I (4411) HOTPIN_MAIN: âœ… Got IP address: 10.143.111.214
I (4415) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (7362) HOTPIN_MAIN: Initializing button handler...
I (7362) BUTTON: Initializing button handler on GPIO 12
I (7363) gpio: GPIO[12]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (7372) BUTTON: Button FSM task started
I (7377) BUTTON: GPIO ISR service installed successfully
I (7382) BUTTON: Button handler initialized successfully (initial level=1, primed=1)
I (7391) HOTPIN_MAIN: Initializing LED controller...
I (7396) LED_CTRL: Initializing LED controller on GPIO 33
I (7404) LED_CTRL: LED controller ready
I (7408) LED_CTRL: LED pattern -> 2
I (7411) HOTPIN_MAIN: Initializing WebSocket client...
I (7417) WEBSOCKET: Initializing WebSocket client...
I (7423) WEBSOCKET: Server URI: ws://10.143.111.58:8000/ws
I (7429) WEBSOCKET: Authorization header configured
I (7435) WEBSOCKET: âœ… WebSocket client initialized
I (7440) WEBSOCKET: Status callback registered
I (7445) HOTPIN_MAIN: WebSocket status callback registered
I (7451) HOTPIN_MAIN: Initializing HTTP client...
I (7457) HTTP_CLIENT: Initializing HTTP client
I (7462) HTTP_CLIENT: Authorization token configured
I (7467) HTTP_CLIENT: HTTP client initialized (server: http://10.143.111.58:8000)
I (7476) HOTPIN_MAIN: Initializing STT pipeline...
I (7481) STT: Initializing STT pipeline...
I (7486) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7504) STT: â•‘ STT Ring Buffer Allocation (PSRAM)
I (7510) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7528) STT: [MEMORY] Pre-allocation state:
I (7533) STT:   Free internal RAM: 133459 bytes
I (7538) STT:   Free DMA-capable: 113095 bytes
I (7543) STT:   Free PSRAM: 4191564 bytes
I (7548) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (7556) STT:   âœ“ Ring buffer allocated at 0x3f800ab8 (PSRAM address)
I (7563) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (7572) STT: [MEMORY] Post-allocation state:
I (7577) STT:   Free internal RAM: 133459 bytes
I (7582) STT:   Free DMA-capable: 113095 bytes
I (7587) STT:   Free PSRAM: 4126024 bytes
I (7598) STT: [CORE AFFINITY] Creating persistent audio streaming task on Core 0
I (7600) STT: Persistent audio streaming task started on Core 0
I (7609) STT:   âœ“ Stream buffer allocated at 0x3ffd1b7c (with safety padding)
I (7614) STT: âœ… STT pipeline initialized
I (7619) HOTPIN_MAIN: Initializing TTS decoder...
I (7624) TTS: Initializing TTS decoder...
I (7629) TTS: Allocating 65536 byte PSRAM buffer for TTS stream
I (7636) TTS:   PSRAM available: 4126024 bytes (4029 KB)
I (7642) TTS:   âœ“ TTS stream buffer allocated at 0x3f810abc
I (7655) WEBSOCKET: Audio callback registered
I (7656) TTS: âœ… TTS decoder initialized
I (7658) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (7666) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (7671) HOTPIN_MAIN: State manager task created on Core 1
I (7671) STATE_MGR: State manager task started on Core 1
I (7677) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (7683) STATE_MGR: Priority: 10
I (7690) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 1)...
I (7694) STATE_MGR: Starting in camera mode...
I (7701) WEBSOCKET: Connecting to WebSocket server...
I (7707) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (7718) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7722) websocket_client: Started
I (7736) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (7740) WEBSOCKET: âœ… WebSocket health check task created
I (7747) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7754) WEBSOCKET: WebSocket client started
I (7772) MEM_MGR: â•‘ Internal RAM:
I (7741) WEBSOCKET: WebSocket health check task started
I (7781) MEM_MGR: â•‘   Free:             222719 bytes (217 KB)
I (7677) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (7793) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7800) HOTPIN_MAIN: Configuring task watchdog for critical tasks...
I (7807) MEM_MGR: â•‘   Fragmentation:     51%
I (7814) HOTPIN_MAIN: âœ… State manager task added to watchdog
I (7819) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7826) HOTPIN_MAIN: âœ… WebSocket connection task added to watchdog
I (7844) MEM_MGR: â•‘ DMA-capable RAM:
I (7851) HOTPIN_MAIN: Task watchdog configuration complete
I (7855) MEM_MGR: â•‘   Free:             202355 bytes (197 KB)
I (7862) HOTPIN_MAIN: ====================================
I (7868) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7874) HOTPIN_MAIN: System initialization complete!
I (7881) MEM_MGR: â•‘   Fragmentation:     46%
I (7887) HOTPIN_MAIN: Entering camera standby mode...
I (7892) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7897) HOTPIN_MAIN: ====================================
I (7916) MEM_MGR: â•‘ PSRAM:
I (7926) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (7922) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7932) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (7950) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (7957) MEM_MGR: â•‘   Fragmentation:      2%
I (7964) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7969) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7987) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (8005) MEM_MGR: â•‘ Total Heap:
I (8016) MEM_MGR: â•‘   Free:             4362340 bytes (4260 KB)
I (8013) AUDIO:   âœ“ I2S access mutex created successfully
I (8023) MEM_MGR: â•‘   Minimum Ever:     4362340 bytes (4260 KB)
I (8030) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8036) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8054) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (8072) MEM_MGR: â•‘ Memory Delta from Baseline:
I (8080) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8085) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (8103) AUDIO: [DIAG] Pre-init state:
I (8110) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (8114) AUDIO:   Free heap: 4126756 bytes
I (8121) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (8126) AUDIO:   Free internal RAM: 86759 bytes
I (8132) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (8138) AUDIO:   Free DMA-capable: 66395 bytes
I (8145) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8150) AUDIO:   Free PSRAM: 4060484 bytes
I (8168) STATE_MGR: Acquiring I2S mutex...
I (8173) AUDIO:   Timestamp: 6621 ms
I (8046) WEBSOCKET: âœ… WebSocket connected to server
I (8182) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (8188) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (8194) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (8204) WEBSOCKET: Handshake sent successfully
I (8210) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (8215) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (8223) AUDIO:   DMA frame num (per desc): 1020
I (8235) AUDIO:   DMA total samples (effective): 4080
I (8241) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (8248) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (8254) AUDIO: âœ… I2S channels created (took 0 ms)
I (8259) AUDIO:   TX handle: 0x3ffe3dc0 | RX handle: 0x3ffe1d74
I (8266) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (8272) AUDIO:   Sample rate: 16000 Hz
I (8277) AUDIO:   MCLK: DISABLED
I (8281) AUDIO:   BCLK: GPIO14 (shared)
I (8285) AUDIO:   WS:   GPIO15 (shared)
I (8290) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (8297) AUDIO: âœ… TX channel configured (took 1 ms)
I (8301) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (8308) AUDIO:   Sample rate: 16000 Hz
I (8312) AUDIO:   MCLK: DISABLED
I (8316) AUDIO:   BCLK: GPIO14 (shared)
I (8321) AUDIO:   WS:   GPIO15 (shared)
I (8325) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (8331) AUDIO: âœ… RX channel configured (took 0 ms)
I (8336) AUDIO: [STEP 4/6] Enabling TX channel...
I (8342) AUDIO: âœ… TX channel enabled (took 0 ms)
I (8347) AUDIO: [STEP 5/6] Enabling RX channel...
I (8353) AUDIO: âœ… RX channel enabled (took 0 ms)
I (8358) AUDIO: [STEP 6/6] Hardware stabilization...
I (8364) AUDIO:   Phase 1: Initial settle (50ms)
I (8387) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (8419) AUDIO:   Phase 2: DMA verification
I (8419) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (8419) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (8443) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (8444) WEBSOCKET: Server status: connected
I (8577) AUDIO: [DIAG] Post-init state:
I (8577) AUDIO:   Free heap: 4100780 bytes
I (8577) AUDIO:   Free internal RAM: 60803 bytes
I (8580) AUDIO:   Free DMA-capable: 40439 bytes
I (8586) AUDIO:   Free PSRAM: 4060348 bytes
I (8590) AUDIO:   Timestamp: 7038 ms
I (8595) AUDIO:   Total init time: 201 ms
I (8599) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8617) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (8623) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (8629) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (8637) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (8644) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8662) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8680) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (8686) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (8692) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (8699) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (8705) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9989) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9996) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (10003) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10021) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (10028) AUDIO: âœ… RX channel disabled (took 0 ms)
I (10034) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (10040) AUDIO: âœ… TX channel disabled (took 0 ms)
I (10046) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (10102) AUDIO: [STEP 4/5] Deleting RX channel...
I (10102) AUDIO: âœ… RX channel deleted (took 0 ms)
I (10102) AUDIO: [STEP 5/5] Deleting TX channel...
I (10107) AUDIO: âœ… TX channel deleted (took 0 ms)
I (10113) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (10171) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10177) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (10184) AUDIO: â•‘ Camera Can Now Initialize
I (10189) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10207) LED_CTRL: LED pattern -> 3
I (10207) STATE_MGR: Audio drivers already inactive; skipping deinit
I (10211) HOTPIN_MAIN: Main task exiting - system running
I (10218) STATE_MGR: Allowing memory stabilization (100ms)...
I (10224) main_task: Returned from app_main()
I (10331) STATE_MGR: Camera will be initialized on-demand during capture
I (10331) STATE_MGR: I2S mutex released
I (10332) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10350) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (10357) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10376) MEM_MGR: â•‘ Internal RAM:
I (10380) MEM_MGR: â•‘   Free:             222719 bytes (217 KB)
I (10387) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10393) MEM_MGR: â•‘   Fragmentation:     51%
I (10399) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10417) MEM_MGR: â•‘ DMA-capable RAM:
I (10421) MEM_MGR: â•‘   Free:             202355 bytes (197 KB)
I (10428) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10435) MEM_MGR: â•‘   Fragmentation:     46%
I (10440) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10458) MEM_MGR: â•‘ PSRAM:
I (10462) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (10469) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (10476) MEM_MGR: â•‘   Fragmentation:      2%
I (10481) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10499) MEM_MGR: â•‘ Total Heap:
I (10504) MEM_MGR: â•‘   Free:             4362340 bytes (4260 KB)
I (10510) MEM_MGR: â•‘   Minimum Ever:     4362340 bytes (4260 KB)
I (10517) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10536) MEM_MGR: â•‘ Memory Delta from Baseline:
I (10541) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (10548) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (10555) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (10562) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (10569) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10587) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (10596) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (10612) STATE_MGR: WebSocket connected
I (12787) WEBSOCKET: WebSocket connection restored (cycle: 1, disconnects: 0, reconnects: 0)
I (13049) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (13049) BUTTON: Single click confirmed
I (13049) STATE_MGR: Single click - mode toggle requested
I (13055) STATE_MGR: Switching: Camera â†’ Voice (count: 1)
I (13112) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (13112) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13125) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (13132) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13151) MEM_MGR: â•‘ Internal RAM:
I (13155) MEM_MGR: â•‘   Free:             222719 bytes (217 KB)
I (13162) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (13168) MEM_MGR: â•‘   Fragmentation:     51%
I (13173) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13192) MEM_MGR: â•‘ DMA-capable RAM:
I (13196) MEM_MGR: â•‘   Free:             202355 bytes (197 KB)
I (13203) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (13210) MEM_MGR: â•‘   Fragmentation:     46%
I (13215) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13233) MEM_MGR: â•‘ PSRAM:
I (13237) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (13244) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (13251) MEM_MGR: â•‘   Fragmentation:      2%
I (13256) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13274) MEM_MGR: â•‘ Total Heap:
I (13278) MEM_MGR: â•‘   Free:             4362340 bytes (4260 KB)
I (13285) MEM_MGR: â•‘   Minimum Ever:     4362340 bytes (4260 KB)
I (13292) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13310) MEM_MGR: â•‘ Memory Delta from Baseline:
I (13316) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (13323) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (13330) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (13337) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (13343) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13362) STATE_MGR: Stopping camera...
I (13366) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13383) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (13389) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13406) STATE_MGR:   Timeout: 5000 ms
I (13410) STATE_MGR:   Timestamp: 11858 ms
I (13415) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (13421) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13437) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (13443) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13460) STATE_MGR:   Free heap before: 4131264 bytes
I (13465) STATE_MGR:   Free PSRAM before: 4060348 bytes
I (13471) CAMERA: Deinitializing camera...
I (13476) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (13482) STATE_MGR:   Free heap after: 4131264 bytes
I (13488) STATE_MGR:   Free PSRAM after: 4060348 bytes
I (13494) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13510) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (13516) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13533) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (13641) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (13741) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (13791) STATE_MGR:   âœ“ Total stabilization: 250ms
I (13791) STATE_MGR:   Timestamp: 12239 ms
I (13791) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13807) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (13814) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13830) STATE_MGR:   Free heap before: 4131264 bytes
I (13836) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13854) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (13861) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13879) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13897) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (13904) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13922) AUDIO: [DIAG] Pre-init state:
I (13926) AUDIO:   Free heap: 4131264 bytes
I (13931) AUDIO:   Free internal RAM: 91355 bytes
I (13937) AUDIO:   Free DMA-capable: 70991 bytes
I (13942) AUDIO:   Free PSRAM: 4060348 bytes
I (13947) AUDIO:   Timestamp: 12395 ms
I (13951) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (13958) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (13966) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (13974) AUDIO:   DMA frame num (per desc): 1020
I (13980) AUDIO:   DMA total samples (effective): 4080
I (13985) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (13992) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (13999) AUDIO: âœ… I2S channels created (took 0 ms)
I (14004) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7f0
I (14011) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (14018) AUDIO:   Sample rate: 16000 Hz
I (14022) AUDIO:   MCLK: DISABLED
I (14026) AUDIO:   BCLK: GPIO14 (shared)
I (14031) AUDIO:   WS:   GPIO15 (shared)
I (14035) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (14042) AUDIO: âœ… TX channel configured (took 1 ms)
I (14047) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (14054) AUDIO:   Sample rate: 16000 Hz
I (14058) AUDIO:   MCLK: DISABLED
I (14062) AUDIO:   BCLK: GPIO14 (shared)
I (14067) AUDIO:   WS:   GPIO15 (shared)
I (14071) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (14078) AUDIO: âœ… RX channel configured (took 0 ms)
I (14083) AUDIO: [STEP 4/6] Enabling TX channel...
I (14088) AUDIO: âœ… TX channel enabled (took 0 ms)
I (14094) AUDIO: [STEP 5/6] Enabling RX channel...
I (14099) AUDIO: âœ… RX channel enabled (took 0 ms)
I (14105) AUDIO: [STEP 6/6] Hardware stabilization...
I (14111) AUDIO:   Phase 1: Initial settle (50ms)
I (14166) AUDIO:   Phase 2: DMA verification
I (14166) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (14166) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (14323) AUDIO: [DIAG] Post-init state:
I (14323) AUDIO:   Free heap: 4105260 bytes
I (14323) AUDIO:   Free internal RAM: 65351 bytes
I (14327) AUDIO:   Free DMA-capable: 44987 bytes
I (14332) AUDIO:   Free PSRAM: 4060348 bytes
I (14337) AUDIO:   Timestamp: 12785 ms
I (14342) AUDIO:   Total init time: 201 ms
I (14346) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14364) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (14370) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (14376) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (14385) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (14391) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14409) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14427) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (14434) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (14440) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (14447) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (14453) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14471) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (14477) STATE_MGR:   Free heap after: 4105260 bytes
I (14483) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14499) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (14505) STATE_MGR: â•‘ Total transition time: 889 ms
I (14511) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14527) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14543) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (14549) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14566) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (14574) TTS: No pending audio to flush
I (14585) TTS: TTS decoder session reset for next audio stream
I (14585) TTS: âœ… TTS decoder flushed and reset for next session
I (14591) STT: Starting STT pipeline...
I (14596) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (14605) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (14612) STT:   Current time: 13060 ms
I (14615) STT: âœ… STT pipeline started
I (14617) STT:   Free heap: 4096708 bytes
I (14617) STT: Audio streaming session activated
I (14631) STT: Connection stabilization delay (500ms)...
I (14671) TTS: ğŸµ Starting TTS decoder...
I (14671) TTS: Initializing TTS decoder...
W (14671) TTS: TTS decoder already initialized
I (14683) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (14685) TTS: âœ… TTS decoder started successfully
I (14690) TTS: ğŸµ TTS playback task started on Core 1
I (14696) TTS: âœ… TTS playback task registered with watchdog
I (14702) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f820b48 (4096 bytes)
I (14826) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (14826) STT:   âœ“ Audio driver initialized
I (14827) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (14934) STT:   Total stabilization: 300ms
I (14934) STT:   Timestamp: 13381 ms
I (14934) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (14938) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37bc (with safety padding)
I (14947) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14963) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (14968) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (14974) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15015) LED_CTRL: LED pattern -> 1
I (15016) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15027) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (15034) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15052) MEM_MGR: â•‘ Internal RAM:
I (15056) MEM_MGR: â•‘   Free:             222719 bytes (217 KB)
I (15063) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (15070) MEM_MGR: â•‘   Fragmentation:     51%
I (15075) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15093) MEM_MGR: â•‘ DMA-capable RAM:
I (15098) MEM_MGR: â•‘   Free:             202355 bytes (197 KB)
I (15105) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (15111) MEM_MGR: â•‘   Fragmentation:     46%
I (15117) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15135) MEM_MGR: â•‘ PSRAM:
I (15137) STT: Testing WebSocket transport health...
I (15139) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (15151) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (15152) STT: âœ… WebSocket transport verified healthy
I (15158) MEM_MGR: â•‘   Fragmentation:      2%
I (15169) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15187) MEM_MGR: â•‘ Total Heap:
I (15192) MEM_MGR: â•‘   Free:             4362340 bytes (4260 KB)
I (15198) MEM_MGR: â•‘   Minimum Ever:     4362340 bytes (4260 KB)
I (15205) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15224) MEM_MGR: â•‘ Memory Delta from Baseline:
I (15229) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (15236) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (15243) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (15250) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (15257) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15264) STT: Starting audio streaming to server...
I (15275) STATE_MGR: âœ… Voice mode transition complete
I (15286) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (15302) STATE_MGR: STT pipeline reported start
I (15313) STATE_MGR: TTS playback start event received
W (16886) MEM_MGR: âš ï¸ WARNING: Internal RAM low! 46927 bytes (threshold: 51200 bytes)
W (16886) MEM_MGR: âš ï¸ WARNING: DMA memory low! 26563 bytes (threshold: 35840 bytes)
I (17091) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (17091) BUTTON: Single click confirmed
W (17091) STATE_MGR: Guardrail soft override: stopping voice pipeline (user cancellation)
I (17100) STATE_MGR: Single click - mode toggle requested
I (17106) STATE_MGR: Switching: Voice â†’ Camera (count: 2)
I (17163) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (17163) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17176) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (17183) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17202) MEM_MGR: â•‘ Internal RAM:
I (17206) MEM_MGR: â•‘   Free:              46927 bytes ( 45 KB)
I (17213) MEM_MGR: â•‘   Largest Block:     24576 bytes ( 24 KB)
I (17219) MEM_MGR: â•‘   Fragmentation:     48%
I (17225) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17243) MEM_MGR: â•‘ DMA-capable RAM:
I (17248) MEM_MGR: â•‘   Free:              26563 bytes ( 25 KB)
I (17254) MEM_MGR: â•‘   Largest Block:     24576 bytes ( 24 KB)
I (17261) MEM_MGR: â•‘   Fragmentation:      8%
I (17266) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17285) MEM_MGR: â•‘ PSRAM:
I (17288) MEM_MGR: â•‘   Free:             4056248 bytes (3961 KB)
I (17295) MEM_MGR: â•‘   Largest Block:    3997696 bytes (3904 KB)
I (17302) MEM_MGR: â•‘   Fragmentation:      2%
I (17307) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17326) MEM_MGR: â•‘ Total Heap:
I (17330) MEM_MGR: â•‘   Free:             4082736 bytes (3987 KB)
I (17336) MEM_MGR: â•‘   Minimum Ever:     4069812 bytes (3974 KB)
I (17343) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17362) MEM_MGR: â•‘ Memory Delta from Baseline:
I (17367) MEM_MGR: â•‘   Internal RAM:     -178200 bytes (-174 KB)
I (17374) MEM_MGR: â•‘   DMA-capable:      -178200 bytes (-174 KB)
I (17381) MEM_MGR: â•‘   PSRAM:            -135768 bytes (-132 KB)
I (17388) MEM_MGR: â•‘   Total Heap:       -282012 bytes (-275 KB)
I (17395) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17413) STATE_MGR: Stopping voice mode components...
I (17419) STT: Stopping STT pipeline...
I (17423) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (17438) STT: Ring buffer drained and cleared successfully
I (17461) STT: Capture stopped and ring buffer drained; ending streaming loop
I (17461) STT: Sending EOS signal...
I (17462) WEBSOCKET: Sending EOS signal
I (17470) STT: Audio streaming session complete (streamed 81920 bytes in 20 chunks)
I (17479) STT: Audio capture task stopped (captured 86016 bytes total)
I (17489) STT: STT pipeline stopped
I (17507) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (17508) WEBSOCKET: Server status: processing
I (17511) WEBSOCKET: Server stage: transcription
I (17516) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (17857) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hello"}
I (17858) WEBSOCKET: Server status: processing
I (17862) WEBSOCKET: Server stage: llm
I (17866) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (18267) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "Hello, how can I assist you today?"}
I (18269) WEBSOCKET: Server status: processing
I (18274) WEBSOCKET: Server stage: tts
I (18278) WEBSOCKET: Pipeline stage changed: llm -> tts
I (18284) WEBSOCKET: Entering TTS stage - preparing for audio streaming
W (18291) WEBSOCKET: Ignoring TTS stage - not in voice mode (state=3)
W (18299) WEBSOCKET: Server response arrived after mode transition - audio will be discarded
I (18474) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 1, total: 4096)
I (18475) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 16923 ms, bytes: 4096)
I (18481) TTS: Received audio chunk #1: 4096 bytes
I (18486) TTS: Chunk #1 first 12 bytes: 52 49 46 46 BC 70 01 00 57 41 56 45
I (18494) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (18506) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 2, total: 8192)
I (18510) TTS: Received audio chunk #2: 4096 bytes
I (18515) TTS: Chunk #2 first 12 bytes: 9D FE 04 FF C8 FF 8C 00 DA 00 E6 00
I (18527) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 3, total: 12288)
I (18531) TTS: Received audio chunk #3: 4096 bytes
I (18537) TTS: Chunk #3 first 12 bytes: E4 04 E4 02 D8 01 72 FF E8 FB 1F F7
I (18549) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 4, total: 16384)
I (18553) TTS: Received audio chunk #4: 4096 bytes
I (18558) TTS: Chunk #4 first 12 bytes: 7A 0C 9F 0B 21 0A 77 07 B6 03 16 00
I (18571) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 5, total: 20480)
I (18574) TTS: Received audio chunk #5: 4096 bytes
I (18578) TTS: âœ… WAV header parsed successfully
I (18579) TTS: Chunk #5 first 12 bytes: C4 FF C4 FF C4 FF C1 FF BD FF BE FF
I (18597) TTS: Received audio chunk #6: 4096 bytes
I (18602) TTS: Received audio chunk #7: 1096 bytes
I (18605) TTS: Received audio chunk #8: 3000 bytes
I (18614) TTS: Received audio chunk #9: 4096 bytes
I (18619) TTS: Received audio chunk #10: 1536 bytes
I (18622) TTS: Received audio chunk #11: 2560 bytes
I (18627) TTS: === WAV File Info ===
I (18630) TTS: Sample Rate: 16000 Hz
I (18632) TTS: Received audio chunk #12: 4096 bytes
I (18644) TTS: Received audio chunk #13: 4096 bytes
I (18651) TTS: Received audio chunk #14: 4096 bytes
I (18655) TTS: Received audio chunk #15: 976 bytes
I (18658) TTS: Received audio chunk #16: 3120 bytes
I (18667) TTS: Received audio chunk #17: 4096 bytes
I (18672) TTS: Received audio chunk #18: 1416 bytes
I (18676) TTS: Received audio chunk #19: 2680 bytes
I (18681) TTS: Channels: 1
I (18684) TTS: Received audio chunk #20: 4096 bytes
I (18693) TTS: Received audio chunk #21: 4096 bytes
I (18697) TTS: Received audio chunk #22: 636 bytes
I (18700) TTS: Received audio chunk #23: 3460 bytes
I (18708) TTS: Received audio chunk #24: 4096 bytes
I (18713) TTS: Received audio chunk #25: 1076 bytes
I (18717) TTS: Received audio chunk #26: 3020 bytes
I (18725) TTS: Received audio chunk #27: 4096 bytes
I (18730) TTS: Received audio chunk #28: 1516 bytes
I (18732) TTS: Bits per Sample: 16
I (18736) TTS: Audio Format: 1 (PCM)
I (18740) TTS: Received audio chunk #29: 2580 bytes
I (18743) TTS: Declared Data Size: 94360 bytes
I (18751) TTS: Block Align: 2
I (18751) TTS: Received audio chunk #30: 4096 bytes
I (18763) TTS: Byte Rate: 32000
I (18763) TTS: Received audio chunk #31: 196 bytes
I (18771) WEBSOCKET: Received text message: {"status": "complete"}
I (18776) WEBSOCKET: Server status: complete
I (18781) WEBSOCKET: Pipeline stage changed: tts -> complete
I (18787) WEBSOCKET: Exiting TTS stage (transition to complete)
I (18794) TTS: ====================
I (18820) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=67444)
I (18821) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (18940) STATE_MGR: Voice pipeline reported COMPLETE
I (18940) STATE_MGR: Waiting for TTS playback drain (~63392 bytes pending, timeout 15000 ms)
W (19444) TTS: TTS wait for idle timeout after 500 ms
W (19444) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=0
W (19447) TTS:   Data: received=67444, header=0, played=20436, pending=47008
W (19455) STATE_MGR: TTS wait for idle timeout #1 (drain_checks=0)
W (20062) TTS: TTS wait for idle timeout after 500 ms
W (20062) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=0
W (20065) TTS:   Data: received=67444, header=0, played=40916, pending=26528
W (20073) STATE_MGR: TTS wait for idle timeout #2 (drain_checks=1)
W (20680) TTS: TTS wait for idle timeout after 500 ms
W (20680) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=0
W (20683) TTS:   Data: received=67444, header=0, played=61396, pending=6048
W (20691) STATE_MGR: TTS wait for idle timeout #3 (drain_checks=2)
I (21148) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (21148) STATE_MGR: TTS decoder confirmed idle
I (21151) STATE_MGR: Flushing and resetting TTS decoder for next session
I (21159) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (21167) TTS: Flushing pending audio before reset (~44 bytes)
I (21473) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (21473) TTS: TTS decoder session reset for next audio stream
I (21478) TTS: âœ… TTS decoder flushed and reset for next session
W (21685) STATE_MGR: TTS decoder still playing after shutdown - forcing stop
I (21685) TTS: â¹ï¸ Stopping TTS decoder...
I (21744) TTS: TTS playback task shutting down - is_running=0
I (21744) TTS: ğŸµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (21748) TTS:   âœ“ DMA buffer freed from PSRAM
I (21753) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (21761) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (21774) TTS: â¹ï¸ TTS decoder stopped (played 0 bytes)
I (21774) TTS: â¹ï¸ Stopping TTS decoder...
W (21779) TTS: TTS decoder not running
I (21892) STATE_MGR: Acquiring I2S mutex...
I (21892) STATE_MGR: Deinitializing audio drivers...
I (21892) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21910) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (21917) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21935) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (21942) AUDIO: âœ… RX channel disabled (took 0 ms)
I (21948) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (21954) AUDIO: âœ… TX channel disabled (took 0 ms)
I (21960) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (22016) AUDIO: [STEP 4/5] Deleting RX channel...
I (22017) AUDIO: âœ… RX channel deleted (took 0 ms)
I (22017) AUDIO: [STEP 5/5] Deleting TX channel...
I (22022) AUDIO: âœ… TX channel deleted (took 0 ms)
I (22027) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (22085) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22092) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (22098) AUDIO: â•‘ Camera Can Now Initialize
I (22104) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22172) STATE_MGR: Allowing memory stabilization (100ms)...
I (22272) STATE_MGR: Camera will be initialized on-demand during capture
I (22272) STATE_MGR: I2S mutex released
I (22273) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22291) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (22298) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22317) MEM_MGR: â•‘ Internal RAM:
I (22321) MEM_MGR: â•‘   Free:              46927 bytes ( 45 KB)
I (22328) MEM_MGR: â•‘   Largest Block:     24576 bytes ( 24 KB)
I (22334) MEM_MGR: â•‘   Fragmentation:     48%
I (22340) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22358) MEM_MGR: â•‘ DMA-capable RAM:
I (22362) MEM_MGR: â•‘   Free:              26563 bytes ( 25 KB)
I (22369) MEM_MGR: â•‘   Largest Block:     24576 bytes ( 24 KB)
I (22376) MEM_MGR: â•‘   Fragmentation:      8%
I (22381) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22399) MEM_MGR: â•‘ PSRAM:
I (22403) MEM_MGR: â•‘   Free:             4056248 bytes (3961 KB)
I (22410) MEM_MGR: â•‘   Largest Block:    3997696 bytes (3904 KB)
I (22417) MEM_MGR: â•‘   Fragmentation:      2%
I (22422) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22440) MEM_MGR: â•‘ Total Heap:
I (22445) MEM_MGR: â•‘   Free:             4082736 bytes (3987 KB)
I (22451) MEM_MGR: â•‘   Minimum Ever:     4069812 bytes (3974 KB)
I (22458) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22477) MEM_MGR: â•‘ Memory Delta from Baseline:
I (22482) MEM_MGR: â•‘   Internal RAM:     -178200 bytes (-174 KB)
I (22489) MEM_MGR: â•‘   DMA-capable:      -178200 bytes (-174 KB)
I (22496) MEM_MGR: â•‘   PSRAM:            -135768 bytes (-132 KB)
I (22503) MEM_MGR: â•‘   Total Heap:       -282012 bytes (-275 KB)
I (22510) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22528) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (22538) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22555) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (22562) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22580) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22598) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (22606) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22624) AUDIO: [DIAG] Pre-init state:
I (22628) AUDIO:   Free heap: 4131104 bytes
I (22633) AUDIO:   Free internal RAM: 91195 bytes
I (22638) AUDIO:   Free DMA-capable: 70831 bytes
I (22644) AUDIO:   Free PSRAM: 4060348 bytes
I (22649) AUDIO:   Timestamp: 21096 ms
I (22653) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (22660) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (22668) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (22676) AUDIO:   DMA frame num (per desc): 1020
I (22681) AUDIO:   DMA total samples (effective): 4080
I (22687) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (22694) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (22701) AUDIO: âœ… I2S channels created (took 0 ms)
I (22706) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb634
I (22713) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (22719) AUDIO:   Sample rate: 16000 Hz
I (22724) AUDIO:   MCLK: DISABLED
I (22728) AUDIO:   BCLK: GPIO14 (shared)
I (22733) AUDIO:   WS:   GPIO15 (shared)
I (22737) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (22744) AUDIO: âœ… TX channel configured (took 1 ms)
I (22749) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (22755) AUDIO:   Sample rate: 16000 Hz
I (22760) AUDIO:   MCLK: DISABLED
I (22764) AUDIO:   BCLK: GPIO14 (shared)
I (22769) AUDIO:   WS:   GPIO15 (shared)
I (22773) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (22779) AUDIO: âœ… RX channel configured (took 0 ms)
I (22785) AUDIO: [STEP 4/6] Enabling TX channel...
I (22790) AUDIO: âœ… TX channel enabled (took 0 ms)
I (22796) AUDIO: [STEP 5/6] Enabling RX channel...
I (22801) AUDIO: âœ… RX channel enabled (took 0 ms)
I (22807) AUDIO: [STEP 6/6] Hardware stabilization...
I (22812) AUDIO:   Phase 1: Initial settle (50ms)
I (22868) AUDIO:   Phase 2: DMA verification
I (22868) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (22868) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (23025) AUDIO: [DIAG] Post-init state:
I (23025) AUDIO:   Free heap: 4105120 bytes
I (23025) AUDIO:   Free internal RAM: 65211 bytes
I (23029) AUDIO:   Free DMA-capable: 44847 bytes
I (23034) AUDIO:   Free PSRAM: 4060348 bytes
I (23039) AUDIO:   Timestamp: 21487 ms
I (23044) AUDIO:   Total init time: 201 ms
I (23048) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23066) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (23072) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (23078) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (23087) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (23093) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23111) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23129) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (23136) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (23142) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (23149) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (23155) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23456) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23463) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (23471) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23489) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (23496) AUDIO: âœ… RX channel disabled (took 0 ms)
I (23501) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (23508) AUDIO: âœ… TX channel disabled (took 0 ms)
I (23513) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (23570) AUDIO: [STEP 4/5] Deleting RX channel...
I (23571) AUDIO: âœ… RX channel deleted (took 0 ms)
I (23571) AUDIO: [STEP 5/5] Deleting TX channel...
I (23576) AUDIO: âœ… TX channel deleted (took 0 ms)
I (23581) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (23639) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23646) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (23652) AUDIO: â•‘ Camera Can Now Initialize
I (23658) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (23676) LED_CTRL: LED pattern -> 3
I (23680) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (23696) STATE_MGR: STT pipeline reported stop
I (23706) STATE_MGR: Pipeline stage event: transcription
I (23716) STATE_MGR: Pipeline stage event: llm
I (23726) STATE_MGR: Pipeline stage event: tts
I (23736) STATE_MGR: TTS playback start event received
I (23746) STATE_MGR: Pipeline stage event: complete
I (25562) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (25562) STATE_MGR: Double-click detected - triggering capture sequence
I (25565) STATE_MGR: Starting camera capture sequence
I (25571) LED_CTRL: LED pattern -> 6
I (25575) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25593) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (25600) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25618) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25636) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (25643) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25661) AUDIO: [DIAG] Pre-init state:
I (25666) AUDIO:   Free heap: 4131104 bytes
I (25671) AUDIO:   Free internal RAM: 91195 bytes
I (25676) AUDIO:   Free DMA-capable: 70831 bytes
I (25681) AUDIO:   Free PSRAM: 4060348 bytes
I (25686) AUDIO:   Timestamp: 24134 ms
I (25691) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (25698) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (25706) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (25714) AUDIO:   DMA frame num (per desc): 1020
I (25719) AUDIO:   DMA total samples (effective): 4080
I (25725) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (25732) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (25738) AUDIO: âœ… I2S channels created (took 0 ms)
I (25744) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb634
I (25751) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (25757) AUDIO:   Sample rate: 16000 Hz
I (25762) AUDIO:   MCLK: DISABLED
I (25766) AUDIO:   BCLK: GPIO14 (shared)
I (25770) AUDIO:   WS:   GPIO15 (shared)
I (25775) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (25781) AUDIO: âœ… TX channel configured (took 0 ms)
I (25786) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (25793) AUDIO:   Sample rate: 16000 Hz
I (25798) AUDIO:   MCLK: DISABLED
I (25802) AUDIO:   BCLK: GPIO14 (shared)
I (25806) AUDIO:   WS:   GPIO15 (shared)
I (25811) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (25817) AUDIO: âœ… RX channel configured (took 0 ms)
I (25822) AUDIO: [STEP 4/6] Enabling TX channel...
I (25828) AUDIO: âœ… TX channel enabled (took 0 ms)
I (25833) AUDIO: [STEP 5/6] Enabling RX channel...
I (25839) AUDIO: âœ… RX channel enabled (took 0 ms)
I (25844) AUDIO: [STEP 6/6] Hardware stabilization...
I (25850) AUDIO:   Phase 1: Initial settle (50ms)
I (25905) AUDIO:   Phase 2: DMA verification
I (25905) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (25905) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (26062) AUDIO: [DIAG] Post-init state:
I (26062) AUDIO:   Free heap: 4105120 bytes
I (26062) AUDIO:   Free internal RAM: 65211 bytes
I (26066) AUDIO:   Free DMA-capable: 44847 bytes
I (26071) AUDIO:   Free PSRAM: 4060348 bytes
I (26076) AUDIO:   Timestamp: 24524 ms
I (26081) AUDIO:   Total init time: 200 ms
I (26085) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26103) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (26109) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (26115) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (26124) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (26130) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26148) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26166) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (26173) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (26179) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (26186) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (26192) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26542) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26549) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (26557) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26575) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (26582) AUDIO: âœ… RX channel disabled (took 0 ms)
I (26587) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (26594) AUDIO: âœ… TX channel disabled (took 0 ms)
I (26599) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (26656) AUDIO: [STEP 4/5] Deleting RX channel...
I (26657) AUDIO: âœ… RX channel deleted (took 0 ms)
I (26657) AUDIO: [STEP 5/5] Deleting TX channel...
I (26662) AUDIO: âœ… TX channel deleted (took 0 ms)
I (26667) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (26725) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26732) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (26738) AUDIO: â•‘ Camera Can Now Initialize
I (26744) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26762) STATE_MGR: Capturing frame from camera
I (26767) CAMERA: Initializing camera...
I (26772) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (26781) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (26790) cam_hal: cam init ok
I (26794) sccb-ng: pin_sda 26 pin_scl 27
I (26797) sccb-ng: sccb_i2c_port=1
I (26802) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (26845) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (26845) camera: Detected OV2640 camera
I (26845) camera: Detected camera at address=0x30
I (26926) cam_hal: PSRAM DMA mode disabled
I (26926) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (26930) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (26937) cam_hal: cam config ok
I (26941) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (27023) CAMERA: Camera initialized successfully
I (27083) STATE_MGR: Frame captured: 9254 bytes
I (27084) JSON_PROTO: Generated session ID: hotpin-998C64-25
I (27084) STATE_MGR: Uploading image using session hotpin-998C64-25
I (27091) HTTP_CLIENT: Uploading image: session=hotpin-998C64-25, size=9254 bytes
I (27100) HTTP_CLIENT: POST body assembled: 9511 bytes
I (27106) HTTP_CLIENT: Sending POST request to http://10.143.111.58:8000/image
I (27224) HTTP_CLIENT: HTTP POST Status = 200, content_length = 198
I (27225) HTTP_CLIENT: Image uploaded successfully
I (27226) HTTP_CLIENT: Server response: {"status":"success","message":"Image received successfully","session":"hotpin-998C64-25","filename":"image.jpg","size_bytes":9254,"saved_path":"captured_images/hotpin-998C64-25_20251103_005815.jpg"}
I (27250) CAMERA: Deinitializing camera...
I (27255) CAMERA: Camera deinitialized
I (27257) STATE_MGR: Camera deinitialized - DMA memory freed
I (27263) STATE_MGR: Image uploaded successfully
I (27269) LED_CTRL: LED pattern -> 3
I (27273) STATE_MGR: Camera capture sequence complete
I (27289) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (31095) BUTTON: Single click confirmed
I (31095) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (31096) STATE_MGR: Single click - mode toggle requested
I (31102) STATE_MGR: Switching: Camera â†’ Voice (count: 3)
I (31158) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (31158) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31171) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (31178) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31197) MEM_MGR: â•‘ Internal RAM:
I (31201) MEM_MGR: â•‘   Free:              46927 bytes ( 45 KB)
I (31208) MEM_MGR: â•‘   Largest Block:     24576 bytes ( 24 KB)
I (31214) MEM_MGR: â•‘   Fragmentation:     48%
I (31219) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31238) MEM_MGR: â•‘ DMA-capable RAM:
I (31242) MEM_MGR: â•‘   Free:              26563 bytes ( 25 KB)
I (31249) MEM_MGR: â•‘   Largest Block:     24576 bytes ( 24 KB)
I (31256) MEM_MGR: â•‘   Fragmentation:      8%
I (31261) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31279) MEM_MGR: â•‘ PSRAM:
I (31283) MEM_MGR: â•‘   Free:             4056248 bytes (3961 KB)
I (31290) MEM_MGR: â•‘   Largest Block:    3997696 bytes (3904 KB)
I (31297) MEM_MGR: â•‘   Fragmentation:      2%
I (31302) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31320) MEM_MGR: â•‘ Total Heap:
I (31324) MEM_MGR: â•‘   Free:             4082736 bytes (3987 KB)
I (31331) MEM_MGR: â•‘   Minimum Ever:     4069812 bytes (3974 KB)
I (31338) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31356) MEM_MGR: â•‘ Memory Delta from Baseline:
I (31362) MEM_MGR: â•‘   Internal RAM:     -178200 bytes (-174 KB)
I (31369) MEM_MGR: â•‘   DMA-capable:      -178200 bytes (-174 KB)
I (31376) MEM_MGR: â•‘   PSRAM:            -135768 bytes (-132 KB)
I (31383) MEM_MGR: â•‘   Total Heap:       -282012 bytes (-275 KB)
I (31389) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31408) STATE_MGR: Stopping camera...
I (31412) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31429) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (31435) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31452) STATE_MGR:   Timeout: 5000 ms
I (31456) STATE_MGR:   Timestamp: 29904 ms
I (31461) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (31467) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31483) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (31489) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31506) STATE_MGR:   Free heap before: 4130632 bytes
I (31511) STATE_MGR:   Free PSRAM before: 4060348 bytes
I (31517) CAMERA: Deinitializing camera...
I (31522) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (31528) STATE_MGR:   Free heap after: 4130632 bytes
I (31534) STATE_MGR:   Free PSRAM after: 4060348 bytes
I (31540) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31556) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (31562) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31579) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (31687) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (31787) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (31837) STATE_MGR:   âœ“ Total stabilization: 250ms
I (31837) STATE_MGR:   Timestamp: 30285 ms
I (31837) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31853) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (31859) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31876) STATE_MGR:   Free heap before: 4130632 bytes
I (31882) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31900) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (31907) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31925) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31943) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (31950) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31968) AUDIO: [DIAG] Pre-init state:
I (31972) AUDIO:   Free heap: 4130632 bytes
I (31977) AUDIO:   Free internal RAM: 90723 bytes
I (31983) AUDIO:   Free DMA-capable: 70359 bytes
I (31988) AUDIO:   Free PSRAM: 4060348 bytes
I (31993) AUDIO:   Timestamp: 30441 ms
I (31997) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (32004) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (32012) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (32020) AUDIO:   DMA frame num (per desc): 1020
I (32026) AUDIO:   DMA total samples (effective): 4080
I (32031) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (32038) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (32045) AUDIO: âœ… I2S channels created (took 0 ms)
I (32050) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffcb694
I (32057) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (32064) AUDIO:   Sample rate: 16000 Hz
I (32068) AUDIO:   MCLK: DISABLED
I (32072) AUDIO:   BCLK: GPIO14 (shared)
I (32077) AUDIO:   WS:   GPIO15 (shared)
I (32081) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (32088) AUDIO: âœ… TX channel configured (took 1 ms)
I (32093) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (32100) AUDIO:   Sample rate: 16000 Hz
I (32104) AUDIO:   MCLK: DISABLED
I (32108) AUDIO:   BCLK: GPIO14 (shared)
I (32113) AUDIO:   WS:   GPIO15 (shared)
I (32117) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (32124) AUDIO: âœ… RX channel configured (took 0 ms)
I (32129) AUDIO: [STEP 4/6] Enabling TX channel...
I (32134) AUDIO: âœ… TX channel enabled (took 0 ms)
I (32140) AUDIO: [STEP 5/6] Enabling RX channel...
I (32145) AUDIO: âœ… RX channel enabled (took 0 ms)
I (32151) AUDIO: [STEP 6/6] Hardware stabilization...
I (32157) AUDIO:   Phase 1: Initial settle (50ms)
I (32212) AUDIO:   Phase 2: DMA verification
I (32212) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (32213) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (32370) AUDIO: [DIAG] Post-init state:
I (32370) AUDIO:   Free heap: 4104648 bytes
I (32370) AUDIO:   Free internal RAM: 64739 bytes
I (32374) AUDIO:   Free DMA-capable: 44375 bytes
I (32379) AUDIO:   Free PSRAM: 4060348 bytes
I (32384) AUDIO:   Timestamp: 30832 ms
I (32389) AUDIO:   Total init time: 201 ms
I (32393) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32411) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (32417) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (32423) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (32432) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (32438) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32456) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32474) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (32481) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (32487) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (32494) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (32500) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32518) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (32524) STATE_MGR:   Free heap after: 4104648 bytes
I (32530) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32546) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (32552) STATE_MGR: â•‘ Total transition time: 890 ms
I (32558) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32574) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32590) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (32596) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32613) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (32621) TTS: No pending audio to flush
I (32632) TTS: TTS decoder session reset for next audio stream
I (32632) TTS: âœ… TTS decoder flushed and reset for next session
I (32638) STT: Starting STT pipeline...
I (32643) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (32652) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (32659) STT:   Current time: 31107 ms
I (32662) STT: âœ… STT pipeline started
I (32664) STT:   Free heap: 4096096 bytes
I (32664) STT: Audio streaming session activated
I (32678) STT: Connection stabilization delay (500ms)...
I (32718) TTS: ğŸµ Starting TTS decoder...
I (32718) TTS: Initializing TTS decoder...
W (32718) TTS: TTS decoder already initialized
I (32730) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (32732) TTS: âœ… TTS decoder started successfully
I (32737) TTS: ğŸµ TTS playback task started on Core 1
I (32743) TTS: âœ… TTS playback task registered with watchdog
I (32749) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f820b48 (4096 bytes)
I (32873) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (32873) STT:   âœ“ Audio driver initialized
I (32874) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (32981) STT:   Total stabilization: 300ms
I (32981) STT:   Timestamp: 31428 ms
I (32981) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (32985) STT:   âœ“ DMA-capable buffer allocated at 0x3ffca9d4 (with safety padding)
I (32994) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33010) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (33015) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (33021) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33062) LED_CTRL: LED pattern -> 1
I (33063) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33074) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (33081) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33099) MEM_MGR: â•‘ Internal RAM:
I (33103) MEM_MGR: â•‘   Free:              64739 bytes ( 63 KB)
I (33110) MEM_MGR: â•‘   Largest Block:     38912 bytes ( 38 KB)
I (33117) MEM_MGR: â•‘   Fragmentation:     40%
I (33122) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33140) MEM_MGR: â•‘ DMA-capable RAM:
I (33145) MEM_MGR: â•‘   Free:              44375 bytes ( 43 KB)
I (33152) MEM_MGR: â•‘   Largest Block:     38912 bytes ( 38 KB)
I (33158) MEM_MGR: â•‘   Fragmentation:     13%
I (33164) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33182) MEM_MGR: â•‘ PSRAM:
I (33184) STT: Testing WebSocket transport health...
I (33186) MEM_MGR: â•‘   Free:             4060348 bytes (3965 KB)
I (33198) MEM_MGR: â•‘   Largest Block:    3997696 bytes (3904 KB)
I (33198) STT: âœ… WebSocket transport verified healthy
I (33205) MEM_MGR: â•‘   Fragmentation:      2%
I (33216) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33234) MEM_MGR: â•‘ Total Heap:
I (33239) MEM_MGR: â•‘   Free:             4104648 bytes (4008 KB)
I (33246) MEM_MGR: â•‘   Minimum Ever:     3995104 bytes (3901 KB)
I (33252) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33271) MEM_MGR: â•‘ Memory Delta from Baseline:
I (33276) MEM_MGR: â•‘   Internal RAM:     -160388 bytes (-156 KB)
I (33283) MEM_MGR: â•‘   DMA-capable:      -160388 bytes (-156 KB)
I (33290) MEM_MGR: â•‘   PSRAM:            -131668 bytes (-128 KB)
I (33297) MEM_MGR: â•‘   Total Heap:       -260100 bytes (-254 KB)
I (33304) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33311) STT: Starting audio streaming to server...
I (33322) STATE_MGR: âœ… Voice mode transition complete
I (33333) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (33350) STATE_MGR: STT pipeline reported start
I (33361) STATE_MGR: TTS playback start event received
I (37530) BUTTON: Single click confirmed
I (37530) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (37531) STATE_MGR: Single click - mode toggle requested
I (37537) STATE_MGR: Switching: Voice â†’ Camera (count: 4)
I (37593) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (37593) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37606) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (37613) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37632) MEM_MGR: â•‘ Internal RAM:
I (37636) MEM_MGR: â•‘   Free:              64739 bytes ( 63 KB)
I (37643) MEM_MGR: â•‘   Largest Block:     38912 bytes ( 38 KB)
I (37649) MEM_MGR: â•‘   Fragmentation:     40%
I (37655) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37673) MEM_MGR: â•‘ DMA-capable RAM:
I (37678) MEM_MGR: â•‘   Free:              44375 bytes ( 43 KB)
I (37684) MEM_MGR: â•‘   Largest Block:     38912 bytes ( 38 KB)
I (37691) MEM_MGR: â•‘   Fragmentation:     13%
I (37696) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37715) MEM_MGR: â•‘ PSRAM:
I (37718) MEM_MGR: â•‘   Free:             4060348 bytes (3965 KB)
I (37725) MEM_MGR: â•‘   Largest Block:    3997696 bytes (3904 KB)
I (37732) MEM_MGR: â•‘   Fragmentation:      2%
I (37737) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37755) MEM_MGR: â•‘ Total Heap:
I (37760) MEM_MGR: â•‘   Free:             4104648 bytes (4008 KB)
I (37766) MEM_MGR: â•‘   Minimum Ever:     3995104 bytes (3901 KB)
I (37773) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37792) MEM_MGR: â•‘ Memory Delta from Baseline:
I (37797) MEM_MGR: â•‘   Internal RAM:     -160388 bytes (-156 KB)
I (37804) MEM_MGR: â•‘   DMA-capable:      -160388 bytes (-156 KB)
I (37811) MEM_MGR: â•‘   PSRAM:            -131668 bytes (-128 KB)
I (37818) MEM_MGR: â•‘   Total Heap:       -260100 bytes (-254 KB)
I (37825) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37843) STATE_MGR: Stopping voice mode components...
I (37849) STT: Stopping STT pipeline...
I (37853) STT: Draining ring buffer (5120 bytes pending) before shutdown...
I (37867) STT: Ring buffer drained and cleared successfully
I (37868) STT: Capture stopped and ring buffer drained; ending streaming loop
I (37875) STT: Sending EOS signal...
I (37879) WEBSOCKET: Sending EOS signal
I (37885) STT: Audio capture task stopped (captured 161792 bytes total)
I (37890) STT: Audio streaming session complete (streamed 155648 bytes in 38 chunks)
I (37921) STT: STT pipeline stopped
I (37921) STATE_MGR: Voice pipeline reported COMPLETE
I (37921) STATE_MGR: Waiting for TTS playback drain (~0 bytes pending, timeout 15000 ms)
I (37935) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (37938) WEBSOCKET: Server status: processing
I (37943) WEBSOCKET: Server stage: transcription
I (37948) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (38229) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (38230) STATE_MGR: TTS decoder confirmed idle
I (38233) STATE_MGR: Flushing and resetting TTS decoder for next session
I (38240) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (38248) TTS: Flushing pending audio before reset (~0 bytes)
I (38542) WEBSOCKET: Received text message: {"status": "error", "message": "Could not understand audio. Please try again."}
I (38544) WEBSOCKET: Server status: error
W (38548) WEBSOCKET: Received empty transcription error: Could not understand audio. Please try again.
I (38554) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (38567) TTS: TTS decoder session reset for next audio stream
I (38573) TTS: âœ… TTS decoder flushed and reset for next session
W (38780) STATE_MGR: TTS decoder still playing after shutdown - forcing stop
I (38781) TTS: â¹ï¸ Stopping TTS decoder...
I (38782) TTS: TTS playback task shutting down - is_running=0
I (38789) TTS: ğŸµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (38797) TTS:   âœ“ DMA buffer freed from PSRAM
I (38802) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (38809) TTS: â¹ï¸ TTS decoder stopped (played 0 bytes)
I (38815) TTS: â¹ï¸ Stopping TTS decoder...
W (38820) TTS: TTS decoder not running
I (38933) STATE_MGR: Acquiring I2S mutex...
I (38933) STATE_MGR: Deinitializing audio drivers...
I (38933) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38951) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (38958) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38976) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (38983) AUDIO: âœ… RX channel disabled (took 0 ms)
I (38989) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (38995) AUDIO: âœ… TX channel disabled (took 0 ms)
I (39001) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (39057) AUDIO: [STEP 4/5] Deleting RX channel...
I (39058) AUDIO: âœ… RX channel deleted (took 0 ms)
I (39058) AUDIO: [STEP 5/5] Deleting TX channel...
I (39063) AUDIO: âœ… TX channel deleted (took 0 ms)
I (39068) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (39126) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39133) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (39139) AUDIO: â•‘ Camera Can Now Initialize
I (39145) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39213) STATE_MGR: Allowing memory stabilization (100ms)...
I (39313) STATE_MGR: Camera will be initialized on-demand during capture
I (39313) STATE_MGR: I2S mutex released
I (39314) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39332) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (39339) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39358) MEM_MGR: â•‘ Internal RAM:
I (39362) MEM_MGR: â•‘   Free:              64739 bytes ( 63 KB)
I (39369) MEM_MGR: â•‘   Largest Block:     38912 bytes ( 38 KB)
I (39375) MEM_MGR: â•‘   Fragmentation:     40%
I (39381) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39399) MEM_MGR: â•‘ DMA-capable RAM:
I (39403) MEM_MGR: â•‘   Free:              44375 bytes ( 43 KB)
I (39410) MEM_MGR: â•‘   Largest Block:     38912 bytes ( 38 KB)
I (39417) MEM_MGR: â•‘   Fragmentation:     13%
I (39422) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39440) MEM_MGR: â•‘ PSRAM:
I (39444) MEM_MGR: â•‘   Free:             4060348 bytes (3965 KB)
I (39451) MEM_MGR: â•‘   Largest Block:    3997696 bytes (3904 KB)
I (39458) MEM_MGR: â•‘   Fragmentation:      2%
I (39463) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39481) MEM_MGR: â•‘ Total Heap:
I (39486) MEM_MGR: â•‘   Free:             4104648 bytes (4008 KB)
I (39492) MEM_MGR: â•‘   Minimum Ever:     3995104 bytes (3901 KB)
I (39499) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39518) MEM_MGR: â•‘ Memory Delta from Baseline:
I (39523) MEM_MGR: â•‘   Internal RAM:     -160388 bytes (-156 KB)
I (39530) MEM_MGR: â•‘   DMA-capable:      -160388 bytes (-156 KB)
I (39537) MEM_MGR: â•‘   PSRAM:            -131668 bytes (-128 KB)
I (39544) MEM_MGR: â•‘   Total Heap:       -260100 bytes (-254 KB)
I (39551) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39569) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (39579) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39596) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (39603) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39621) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39639) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (39647) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39665) AUDIO: [DIAG] Pre-init state:
I (39669) AUDIO:   Free heap: 4130632 bytes
I (39674) AUDIO:   Free internal RAM: 90723 bytes
I (39679) AUDIO:   Free DMA-capable: 70359 bytes
I (39685) AUDIO:   Free PSRAM: 4060348 bytes
I (39690) AUDIO:   Timestamp: 38137 ms
I (39694) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (39701) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (39709) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (39717) AUDIO:   DMA frame num (per desc): 1020
I (39722) AUDIO:   DMA total samples (effective): 4080
I (39728) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (39735) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (39742) AUDIO: âœ… I2S channels created (took 0 ms)
I (39747) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffcb694
I (39754) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (39760) AUDIO:   Sample rate: 16000 Hz
I (39765) AUDIO:   MCLK: DISABLED
I (39769) AUDIO:   BCLK: GPIO14 (shared)
I (39774) AUDIO:   WS:   GPIO15 (shared)
I (39778) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (39785) AUDIO: âœ… TX channel configured (took 1 ms)
I (39790) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (39796) AUDIO:   Sample rate: 16000 Hz
I (39801) AUDIO:   MCLK: DISABLED
I (39805) AUDIO:   BCLK: GPIO14 (shared)
I (39810) AUDIO:   WS:   GPIO15 (shared)
I (39814) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (39820) AUDIO: âœ… RX channel configured (took 0 ms)
I (39826) AUDIO: [STEP 4/6] Enabling TX channel...
I (39831) AUDIO: âœ… TX channel enabled (took 0 ms)
I (39837) AUDIO: [STEP 5/6] Enabling RX channel...
I (39842) AUDIO: âœ… RX channel enabled (took 0 ms)
I (39848) AUDIO: [STEP 6/6] Hardware stabilization...
I (39853) AUDIO:   Phase 1: Initial settle (50ms)
I (39909) AUDIO:   Phase 2: DMA verification
I (39909) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (39909) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (40066) AUDIO: [DIAG] Post-init state:
I (40066) AUDIO:   Free heap: 4104648 bytes
I (40066) AUDIO:   Free internal RAM: 64739 bytes
I (40070) AUDIO:   Free DMA-capable: 44375 bytes
I (40075) AUDIO:   Free PSRAM: 4060348 bytes
I (40080) AUDIO:   Timestamp: 38528 ms
I (40085) AUDIO:   Total init time: 201 ms
I (40089) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40107) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (40113) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (40119) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (40128) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (40134) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40152) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40170) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (40177) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (40183) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (40190) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (40196) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40497) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40504) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (40512) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40530) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (40537) AUDIO: âœ… RX channel disabled (took 0 ms)
I (40542) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (40549) AUDIO: âœ… TX channel disabled (took 0 ms)
I (40554) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (40611) AUDIO: [STEP 4/5] Deleting RX channel...
I (40612) AUDIO: âœ… RX channel deleted (took 0 ms)
I (40612) AUDIO: [STEP 5/5] Deleting TX channel...
I (40617) AUDIO: âœ… TX channel deleted (took 0 ms)
I (40622) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (40680) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40687) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (40693) AUDIO: â•‘ Camera Can Now Initialize
I (40699) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40717) LED_CTRL: LED pattern -> 3
I (40721) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (40737) STATE_MGR: STT pipeline reported stop
I (40747) STATE_MGR: Pipeline stage event: transcription
I (42775) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (42775) BUTTON: Single click confirmed
W (42775) STATE_MGR: Guardrail blocked request: audio pipeline busy
I (42782) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42800) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (42807) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42825) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42843) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (42851) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42868) AUDIO: [DIAG] Pre-init state:
I (42873) AUDIO:   Free heap: 4130632 bytes
I (42878) AUDIO:   Free internal RAM: 90723 bytes
I (42883) AUDIO:   Free DMA-capable: 70359 bytes
I (42889) AUDIO:   Free PSRAM: 4060348 bytes
I (42893) AUDIO:   Timestamp: 41341 ms
I (42898) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (42905) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (42913) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (42921) AUDIO:   DMA frame num (per desc): 1020
I (42926) AUDIO:   DMA total samples (effective): 4080
I (42932) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (42939) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (42945) AUDIO: âœ… I2S channels created (took 0 ms)
I (42951) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffcb694
I (42958) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (42964) AUDIO:   Sample rate: 16000 Hz
I (42969) AUDIO:   MCLK: DISABLED
I (42973) AUDIO:   BCLK: GPIO14 (shared)
I (42978) AUDIO:   WS:   GPIO15 (shared)
I (42982) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (42989) AUDIO: âœ… TX channel configured (took 0 ms)
I (42993) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (43000) AUDIO:   Sample rate: 16000 Hz
I (43005) AUDIO:   MCLK: DISABLED
I (43009) AUDIO:   BCLK: GPIO14 (shared)
I (43014) AUDIO:   WS:   GPIO15 (shared)
I (43018) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (43024) AUDIO: âœ… RX channel configured (took 0 ms)
I (43029) AUDIO: [STEP 4/6] Enabling TX channel...
I (43035) AUDIO: âœ… TX channel enabled (took 0 ms)
I (43041) AUDIO: [STEP 5/6] Enabling RX channel...
I (43046) AUDIO: âœ… RX channel enabled (took 0 ms)
I (43052) AUDIO: [STEP 6/6] Hardware stabilization...
I (43057) AUDIO:   Phase 1: Initial settle (50ms)
I (43113) AUDIO:   Phase 2: DMA verification
I (43113) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (43113) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (43270) AUDIO: [DIAG] Post-init state:
I (43270) AUDIO:   Free heap: 4104648 bytes
I (43270) AUDIO:   Free internal RAM: 64739 bytes
I (43274) AUDIO:   Free DMA-capable: 44375 bytes
I (43279) AUDIO:   Free PSRAM: 4060348 bytes
I (43284) AUDIO:   Timestamp: 41732 ms
I (43289) AUDIO:   Total init time: 200 ms
I (43293) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43311) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (43317) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (43323) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (43332) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (43338) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43356) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43374) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (43381) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (43387) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (43394) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (43400) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44789) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44796) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (44804) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44822) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (44829) AUDIO: âœ… RX channel disabled (took 0 ms)
I (44834) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (44841) AUDIO: âœ… TX channel disabled (took 0 ms)
I (44846) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (44903) AUDIO: [STEP 4/5] Deleting RX channel...
I (44904) AUDIO: âœ… RX channel deleted (took 0 ms)
I (44904) AUDIO: [STEP 5/5] Deleting TX channel...
I (44909) AUDIO: âœ… TX channel deleted (took 0 ms)
I (44914) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (44972) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44979) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (44985) AUDIO: â•‘ Camera Can Now Initialize
I (44991) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48291) BUTTON: Single click confirmed
I (48291) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
W (48292) STATE_MGR: Guardrail blocked request: audio pipeline busy
I (48299) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48317) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (48324) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48342) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48360) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (48367) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48385) AUDIO: [DIAG] Pre-init state:
I (48389) AUDIO:   Free heap: 4130632 bytes
I (48394) AUDIO:   Free internal RAM: 90723 bytes
I (48400) AUDIO:   Free DMA-capable: 70359 bytes
I (48405) AUDIO:   Free PSRAM: 4060348 bytes
I (48410) AUDIO:   Timestamp: 46858 ms
I (48414) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (48421) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (48429) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (48437) AUDIO:   DMA frame num (per desc): 1020
I (48443) AUDIO:   DMA total samples (effective): 4080
I (48449) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (48456) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (48462) AUDIO: âœ… I2S channels created (took 0 ms)
I (48467) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffcb694
I (48474) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (48481) AUDIO:   Sample rate: 16000 Hz
I (48485) AUDIO:   MCLK: DISABLED
I (48489) AUDIO:   BCLK: GPIO14 (shared)
I (48494) AUDIO:   WS:   GPIO15 (shared)
I (48499) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (48505) AUDIO: âœ… TX channel configured (took 1 ms)
I (48510) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (48517) AUDIO:   Sample rate: 16000 Hz
I (48521) AUDIO:   MCLK: DISABLED
I (48525) AUDIO:   BCLK: GPIO14 (shared)
I (48530) AUDIO:   WS:   GPIO15 (shared)
I (48535) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (48541) AUDIO: âœ… RX channel configured (took 0 ms)
I (48546) AUDIO: [STEP 4/6] Enabling TX channel...
I (48551) AUDIO: âœ… TX channel enabled (took 0 ms)
I (48557) AUDIO: [STEP 5/6] Enabling RX channel...
I (48563) AUDIO: âœ… RX channel enabled (took 0 ms)
I (48568) AUDIO: [STEP 6/6] Hardware stabilization...
I (48574) AUDIO:   Phase 1: Initial settle (50ms)
I (48629) AUDIO:   Phase 2: DMA verification
I (48629) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (48629) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (48786) AUDIO: [DIAG] Post-init state:
I (48786) AUDIO:   Free heap: 4104648 bytes
I (48786) AUDIO:   Free internal RAM: 64739 bytes
I (48790) AUDIO:   Free DMA-capable: 44375 bytes
I (48795) AUDIO:   Free PSRAM: 4060348 bytes
I (48800) AUDIO:   Timestamp: 47248 ms
I (48805) AUDIO:   Total init time: 201 ms
I (48809) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48827) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (48833) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (48839) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (48848) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (48854) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48872) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48890) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (48897) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (48903) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (48910) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (48916) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50306) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50313) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (50321) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50339) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (50346) AUDIO: âœ… RX channel disabled (took 0 ms)
I (50351) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (50358) AUDIO: âœ… TX channel disabled (took 0 ms)
I (50363) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (50420) AUDIO: [STEP 4/5] Deleting RX channel...
I (50421) AUDIO: âœ… RX channel deleted (took 0 ms)
I (50421) AUDIO: [STEP 5/5] Deleting TX channel...
I (50426) AUDIO: âœ… TX channel deleted (took 0 ms)
I (50431) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (50489) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50496) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (50502) AUDIO: â•‘ Camera Can Now Initialize
I (50508) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53393) BUTTON: Long press detected (3000 ms)
I (53396) STATE_MGR: Button event received: 3 in state CAMERA_STANDBY
W (53396) STATE_MGR: Long press - shutdown requested
W (53400) STATE_MGR: Shutdown state reached
W (53405) STATE_MGR: === SYSTEM SHUTDOWN ===
I (53410) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53428) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (53435) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53453) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53471) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (53478) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53496) AUDIO: [DIAG] Pre-init state:
I (53500) AUDIO:   Free heap: 4130632 bytes
I (53505) AUDIO:   Free internal RAM: 90723 bytes
I (53511) AUDIO:   Free DMA-capable: 70359 bytes
I (53516) AUDIO:   Free PSRAM: 4060348 bytes
I (53521) AUDIO:   Timestamp: 51969 ms
I (53525) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (53532) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (53540) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (53548) AUDIO:   DMA frame num (per desc): 1020
I (53554) AUDIO:   DMA total samples (effective): 4080
I (53560) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (53567) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (53573) AUDIO: âœ… I2S channels created (took 0 ms)
I (53578) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffcb694
I (53585) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (53592) AUDIO:   Sample rate: 16000 Hz
I (53596) AUDIO:   MCLK: DISABLED
I (53600) AUDIO:   BCLK: GPIO14 (shared)
I (53605) AUDIO:   WS:   GPIO15 (shared)
I (53610) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (53616) AUDIO: âœ… TX channel configured (took 0 ms)
I (53621) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (53628) AUDIO:   Sample rate: 16000 Hz
I (53632) AUDIO:   MCLK: DISABLED
I (53636) AUDIO:   BCLK: GPIO14 (shared)
I (53641) AUDIO:   WS:   GPIO15 (shared)
I (53646) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (53652) AUDIO: âœ… RX channel configured (took 0 ms)
I (53657) AUDIO: [STEP 4/6] Enabling TX channel...
I (53662) AUDIO: âœ… TX channel enabled (took 0 ms)
I (53668) AUDIO: [STEP 5/6] Enabling RX channel...
I (53673) AUDIO: âœ… RX channel enabled (took 0 ms)
I (53679) AUDIO: [STEP 6/6] Hardware stabilization...
I (53685) AUDIO:   Phase 1: Initial settle (50ms)
I (53740) AUDIO:   Phase 2: DMA verification
I (53740) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (53740) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (53897) AUDIO: [DIAG] Post-init state:
I (53897) AUDIO:   Free heap: 4104648 bytes
I (53898) AUDIO:   Free internal RAM: 64739 bytes
I (53901) AUDIO:   Free DMA-capable: 44375 bytes
I (53906) AUDIO:   Free PSRAM: 4060348 bytes
I (53911) AUDIO:   Timestamp: 52359 ms
I (53916) AUDIO:   Total init time: 200 ms
I (53920) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53938) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (53944) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (53950) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (53959) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (53965) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53983) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54001) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (54008) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (54014) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (54021) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (54027) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54388) HOTPIN_MAIN: System shutdown detected, terminating WebSocket connection task
I (54388) HOTPIN_MAIN: Unregistering WebSocket connection task from watchdog
I (54393) HOTPIN_MAIN: WebSocket connection task terminated
I (55289) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55296) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (55304) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55322) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (55329) AUDIO: âœ… RX channel disabled (took 0 ms)
I (55334) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (55341) AUDIO: âœ… TX channel disabled (took 0 ms)
I (55346) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (55403) AUDIO: [STEP 4/5] Deleting RX channel...
I (55404) AUDIO: âœ… RX channel deleted (took 0 ms)
I (55404) AUDIO: [STEP 5/5] Deleting TX channel...
I (55409) AUDIO: âœ… TX channel deleted (took 0 ms)
I (55414) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (55472) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55479) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (55485) AUDIO: â•‘ Camera Can Now Initialize
I (55491) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55509) LED_CTRL: LED pattern -> 1
I (56113) LED_CTRL: LED pattern -> 3
I (57313) LED_CTRL: LED pattern -> 0
I (57313) STATE_MGR: Stopping all subsystems...
I (57313) STATE_MGR: Shutting down camera...
I (57317) CAMERA: Deinitializing camera...
I (57321) STT: Stopping STT pipeline...
W (57326) STT: STT pipeline already stopped
I (57331) TTS: â¹ï¸ Stopping TTS decoder...
W (57336) TTS: TTS decoder not running
I (57347) STATE_MGR: Stopping WebSocket client
I (57347) WEBSOCKET: Disconnecting from WebSocket server...
W (57368) websocket_client: Client was not started
W (57369) WEBSOCKET: WebSocket client stop reported ESP_FAIL, continuing cleanup
I (57372) WEBSOCKET: WebSocket health check task shutdown signal received
I (57379) WEBSOCKET: WebSocket health check task exiting (cycles: 9, disconnects: 0, reconnects: 1)
I (57472) WEBSOCKET: WebSocket disconnected
I (57472) WEBSOCKET: Force stopping WebSocket client
W (57472) websocket_client: Client was not started
W (57477) WEBSOCKET: Graceful close returned ESP_FAIL
I (57483) STATE_MGR: âœ… Shutdown complete
