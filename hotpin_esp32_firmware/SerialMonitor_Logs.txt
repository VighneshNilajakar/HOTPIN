PS F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware> idf.py monitor
Executing action: monitor
Serial port COM7
Connecting................
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP32
Running idf_monitor in directory F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware
Executing "C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe C:\Espressif\frameworks\esp-idf-v5.4.2\tools/idf_monitor.py -p COM7 -b 115200 --toolchain-prefix xtensa-esp32-elf- --target esp32 --revision 0 F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware\build\hotpin_esp32_firmware.elf --force-color -m 'C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe' 'C:\Espressif\frameworks\esp-idf-v5.4.2\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM7 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM7 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ï¿½ï¿½ï¿½ets Jul 29 2019 12:21:46

ï¿½configsip: 0, SPIWP:0xeeoot:0x13 (SPI_FAST_foISH_BOOT)
clk_drv:0x00,q_drv:0x02,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:2
load:0x3fff0030,len:6276
load:0x40078000,len:15736
load:0x40080400,len:4
--- 0x40080400: _init at ??:?
load:0x40080404,len:3860
entry 0x4008063c
I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Nov  2 2025 19:57:17
I (29) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=3969ch (235164) map
I (186) esp_image: segment 1: paddr=000496c4 vaddr=3ff80000 size=0001ch (    28) load
I (186) esp_image: segment 2: paddr=000496e8 vaddr=3ffb0000 size=06930h ( 26928) load
I (199) esp_image: segment 3: paddr=00050020 vaddr=400d0020 size=bce04h (773636) map
I (464) esp_image: segment 4: paddr=0010ce2c vaddr=3ffb6930 size=0b394h ( 45972) load
I (481) esp_image: segment 5: paddr=001181c8 vaddr=40080000 size=1ad94h (109972) load
I (540) boot: Loaded app from partition at offset 0x10000
I (540) boot: Disabling RNG early entropy source...
I (551) quad_psram: This chip is ESP32-D0WD
I (551) esp_psram: Found 4MB PSRAM device
I (551) esp_psram: Speed: 40MHz
I (554) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (562) cpu_start: Multicore app
I (1456) esp_psram: SPI SRAM memory test OK
I (1464) cpu_start: Pro cpu start user code
I (1464) cpu_start: cpu freq: 240000000 Hz
I (1464) app_init: Application information:
I (1467) app_init: Project name:     hotpin_esp32_firmware
I (1473) app_init: App version:      6a293bb-dirty
I (1479) app_init: Compile time:     Nov  2 2025 19:57:06
I (1485) app_init: ELF file SHA256:  302f3bf11...
I (1490) app_init: ESP-IDF:          v5.4.2-dirty
I (1496) efuse_init: Min chip rev:     v0.0
I (1500) efuse_init: Max chip rev:     v3.99
I (1505) efuse_init: Chip rev:         v3.1
I (1511) heap_init: Initializing. RAM available for dynamic allocation:
I (1518) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1524) heap_init: At 3FFC93C8 len 00016C38 (91 KiB): DRAM
I (1530) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1536) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1543) heap_init: At 4009AD94 len 0000526C (20 KiB): IRAM
I (1550) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1558) spi_flash: detected chip: generic
I (1562) spi_flash: flash io: dio
W (1566) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1580) main_task: Started on CPU0
I (1583) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1592) main_task: Calling app_main()
I (1596) HOTPIN_MAIN: ====================================
I (1602) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1608) HOTPIN_MAIN: ====================================
W (1614) HOTPIN_MAIN: Brownout detector disabled
I (1619) HOTPIN_MAIN: Validating PSRAM...
I (1624) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1631) HOTPIN_MAIN: PSRAM validation passed
I (1636) HOTPIN_MAIN: ====================================
I (1642) HOTPIN_MAIN: System Information:
I (1646) HOTPIN_MAIN: Chip: esp32
I (1650) HOTPIN_MAIN: Cores: 2
I (1654) HOTPIN_MAIN: Silicon revision: 301
I (1659) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1664) HOTPIN_MAIN: Flash: 2 MB external
I (1669) HOTPIN_MAIN: Free heap: 4365028 bytes
I (1674) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1679) HOTPIN_MAIN: ====================================
I (1685) HOTPIN_MAIN: Initializing NVS...
I (1715) HOTPIN_MAIN: NVS initialized successfully
I (1716) event_dispatcher: System event queue ready (16 entries)
I (1717) HOTPIN_MAIN: Synchronization primitives created
I (1723) HOTPIN_MAIN: Initializing WiFi...
I (1732) wifi:wifi driver task: 3ffd9fc0, prio:23, stack:6656, core=0
I (1744) wifi:wifi firmware version: bea31f3
I (1745) wifi:wifi certification version: v7.0
I (1745) wifi:config NVS flash: enabled
I (1746) wifi:config nano formatting: disabled
I (1750) wifi:Init data frame dynamic rx buffer num: 32
I (1755) wifi:Init static rx mgmt buffer num: 5
I (1759) wifi:Init management short buffer num: 32
I (1763) wifi:Init dynamic tx buffer num: 32
I (1768) wifi:Init static rx buffer size: 1600
I (1772) wifi:Init static rx buffer num: 10
I (1775) wifi:Init dynamic rx buffer num: 32
I (1781) wifi_init: rx ba win: 6
I (1783) wifi_init: accept mbox: 6
I (1787) wifi_init: tcpip mbox: 32
I (1792) wifi_init: udp mbox: 6
I (1795) wifi_init: tcp mbox: 6
I (1799) wifi_init: tcp tx win: 5760
I (1803) wifi_init: tcp rx win: 5760
I (1808) wifi_init: tcp mss: 1440
I (1812) wifi_init: WiFi IRAM OP enabled
I (1816) wifi_init: WiFi RX IRAM OP enabled
I (1823) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (1891) phy_init: Saving new calibration data due to checksum failure or outdated calibration data, mode(0)
I (1952) wifi:mode : sta (80:f3:da:99:8c:64)
I (1953) wifi:enable tsf
I (1956) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (1956) HOTPIN_MAIN: Waiting for WiFi connection...
I (1957) HOTPIN_MAIN: WiFi station started, connecting...
I (1979) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (1980) wifi:state: init -> auth (0xb0)
I (2922) wifi:state: auth -> assoc (0x0)
I (2931) wifi:state: assoc -> run (0x10)
I (2974) wifi:connected with wifi, aid = 2, channel 11, BW20, bssid = ee:d4:b9:ed:90:50
I (2975) wifi:security: WPA3-SAE, phy: bgn, rssi: -60
I (2979) wifi:pm start, type: 1

I (2979) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (2990) wifi:<ba-add>idx:0 (ifx:0, ee:d4:b9:ed:90:50), tid:0, ssn:0, winSize:64
I (2997) HOTPIN_MAIN: WiFi connected to AP
I (3022) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (3022) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (4051) esp_netif_handlers: sta ip: 10.143.111.214, mask: 255.255.255.0, gw: 10.143.111.248
I (4052) HOTPIN_MAIN: âœ… Got IP address: 10.143.111.214
I (4056) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (6970) HOTPIN_MAIN: Initializing button handler...
I (6970) BUTTON: Initializing button handler on GPIO 12
I (6971) gpio: GPIO[12]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (6980) BUTTON: Button FSM task started
I (6985) BUTTON: GPIO ISR service installed successfully
I (6990) BUTTON: Button handler initialized successfully (initial level=1, primed=1)
I (6999) HOTPIN_MAIN: Initializing LED controller...
I (7004) LED_CTRL: Initializing LED controller on GPIO 33
I (7012) LED_CTRL: LED controller ready
I (7015) LED_CTRL: LED pattern -> 2
I (7019) HOTPIN_MAIN: Initializing WebSocket client...
I (7025) WEBSOCKET: Initializing WebSocket client...
I (7031) WEBSOCKET: Server URI: ws://10.143.111.58:8000/ws
I (7037) WEBSOCKET: Authorization header configured
I (7043) WEBSOCKET: âœ… WebSocket client initialized
I (7048) WEBSOCKET: Status callback registered
I (7053) HOTPIN_MAIN: WebSocket status callback registered
I (7059) HOTPIN_MAIN: Initializing HTTP client...
I (7065) HTTP_CLIENT: Initializing HTTP client
I (7070) HTTP_CLIENT: Authorization token configured
I (7075) HTTP_CLIENT: HTTP client initialized (server: http://10.143.111.58:8000)
I (7084) HOTPIN_MAIN: Initializing STT pipeline...
I (7089) STT: Initializing STT pipeline...
I (7094) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7112) STT: â•‘ STT Ring Buffer Allocation (PSRAM)
I (7118) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7136) STT: [MEMORY] Pre-allocation state:
I (7141) STT:   Free internal RAM: 136275 bytes
I (7146) STT:   Free DMA-capable: 115911 bytes
I (7151) STT:   Free PSRAM: 4191564 bytes
I (7156) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (7164) STT:   âœ“ Ring buffer allocated at 0x3f800ab8 (PSRAM address)
I (7171) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (7180) STT: [MEMORY] Post-allocation state:
I (7185) STT:   Free internal RAM: 136275 bytes
I (7190) STT:   Free DMA-capable: 115911 bytes
I (7195) STT:   Free PSRAM: 4126024 bytes
I (7206) STT: [CORE AFFINITY] Creating persistent audio streaming task on Core 0
I (7208) STT: Persistent audio streaming task started on Core 0
I (7214) STT:   âœ“ Stream buffer allocated at 0x3ffd11dc (with safety padding)
I (7223) STT: âœ… STT pipeline initialized
I (7227) HOTPIN_MAIN: Initializing TTS decoder...
I (7232) TTS: Initializing TTS decoder...
I (7237) TTS: Allocating 65536 byte PSRAM buffer for TTS stream
I (7252) WEBSOCKET: Audio callback registered
I (7253) TTS: âœ… TTS decoder initialized
I (7253) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (7261) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (7267) HOTPIN_MAIN: State manager task created on Core 1
I (7267) STATE_MGR: State manager task started on Core 1
I (7273) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (7279) STATE_MGR: Priority: 10
I (7286) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 1)...
I (7290) STATE_MGR: Starting in camera mode...
I (7297) WEBSOCKET: Connecting to WebSocket server...
I (7302) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (7314) STATE_MGR: Acquiring I2S mutex...
I (7317) websocket_client: Started
I (7318) STATE_MGR: Audio drivers already inactive; skipping deinit
I (7323) WEBSOCKET: âœ… WebSocket health check task created
I (7329) STATE_MGR: Initializing camera...
I (7340) CAMERA: Initializing camera...
I (7336) WEBSOCKET: WebSocket client started
I (7348) WEBSOCKET: âœ… WebSocket connected to server
I (7345) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
I (7356) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
E (7365) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (7377) WEBSOCKET: Handshake sent successfully
I (7381) cam_hal: cam init ok
I (7386) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (7390) sccb-ng: pin_sda 26 pin_scl 27
I (7356) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
E (7408) task_wdt: esp_task_wdt_reset(705): task not found
I (7400) sccb-ng: sccb_i2c_port=1
I (7323) WEBSOCKET: WebSocket health check task started
I (7419) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (7273) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (7440) HOTPIN_MAIN: Configuring task watchdog for critical tasks...
I (7447) HOTPIN_MAIN: âœ… State manager task added to watchdog
I (7454) HOTPIN_MAIN: âœ… WebSocket connection task added to watchdog
I (7461) HOTPIN_MAIN: Task watchdog configuration complete
I (7467) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (7467) HOTPIN_MAIN: ====================================
I (7473) camera: Detected OV2640 camera
I (7479) HOTPIN_MAIN: System initialization complete!
I (7484) camera: Detected camera at address=0x30
I (7490) HOTPIN_MAIN: Entering camera standby mode...
I (7501) HOTPIN_MAIN: ====================================
I (7539) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (7540) WEBSOCKET: Server status: connected
I (7576) cam_hal: PSRAM DMA mode disabled
I (7577) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (7581) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (7588) cam_hal: cam config ok
I (7591) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (7674) CAMERA: Camera initialized successfully
I (7674) STATE_MGR: I2S mutex released
I (7675) STATE_MGR: âœ… Camera mode transition complete
I (7674) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7679) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (7697) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (7702) LED_CTRL: LED pattern -> 3
I (7709) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7714) STATE_MGR: WebSocket connected
I (7731) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (7743) AUDIO:   âœ“ I2S access mutex created successfully
I (7749) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7767) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (7774) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7792) AUDIO: [DIAG] Pre-init state:
I (7797) AUDIO:   Free heap: 4028308 bytes
I (7801) AUDIO:   Free internal RAM: 51179 bytes
I (7807) AUDIO:   Free DMA-capable: 30815 bytes
I (7812) AUDIO:   Free PSRAM: 3997532 bytes
I (7817) AUDIO:   Timestamp: 6268 ms
I (7821) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (7828) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (7836) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (7844) AUDIO:   DMA frame num (per desc): 1020
I (7849) AUDIO:   DMA total samples (effective): 4080
I (7855) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (7862) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (7868) AUDIO: âœ… I2S channels created (took 0 ms)
I (7874) AUDIO:   TX handle: 0x3ffe3d1c | RX handle: 0x3ffe35c0
I (7880) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (7887) AUDIO:   Sample rate: 16000 Hz
I (7891) AUDIO:   MCLK: DISABLED
I (7895) AUDIO:   BCLK: GPIO14 (shared)
I (7900) AUDIO:   WS:   GPIO15 (shared)
I (7904) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (7911) AUDIO: âœ… TX channel configured (took 1 ms)
I (7915) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (7922) AUDIO:   Sample rate: 16000 Hz
I (7927) AUDIO:   MCLK: DISABLED
I (7930) AUDIO:   BCLK: GPIO14 (shared)
I (7935) AUDIO:   WS:   GPIO15 (shared)
I (7940) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (7946) AUDIO: âœ… RX channel configured (took 1 ms)
I (7951) AUDIO: [STEP 4/6] Enabling TX channel...
I (7956) AUDIO: âœ… TX channel enabled (took 0 ms)
I (7962) AUDIO: [STEP 5/6] Enabling RX channel...
I (7967) AUDIO: âœ… RX channel enabled (took 0 ms)
I (7972) AUDIO: [STEP 6/6] Hardware stabilization...
I (7978) AUDIO:   Phase 1: Initial settle (50ms)
I (8033) AUDIO:   Phase 2: DMA verification
I (8033) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (8033) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (8190) AUDIO: [DIAG] Post-init state:
I (8190) AUDIO:   Free heap: 4002356 bytes
I (8190) AUDIO:   Free internal RAM: 25195 bytes
I (8193) AUDIO:   Free DMA-capable: 4831 bytes
I (8199) AUDIO:   Free PSRAM: 3997532 bytes
I (8203) AUDIO:   Timestamp: 6654 ms
I (8208) AUDIO:   Total init time: 202 ms
I (8212) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8230) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (8236) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (8242) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (8250) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (8257) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8275) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8293) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (8299) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (8305) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (8312) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (8318) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9603) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9610) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (9617) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9635) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (9642) AUDIO: âœ… RX channel disabled (took 0 ms)
I (9647) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (9654) AUDIO: âœ… TX channel disabled (took 0 ms)
I (9659) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (9716) AUDIO: [STEP 4/5] Deleting RX channel...
I (9716) AUDIO: âœ… RX channel deleted (took 0 ms)
I (9716) AUDIO: [STEP 5/5] Deleting TX channel...
I (9721) AUDIO: âœ… TX channel deleted (took 0 ms)
I (9726) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (9784) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9791) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (9797) AUDIO: â•‘ Camera Can Now Initialize
I (9802) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9820) HOTPIN_MAIN: Main task exiting - system running
I (9826) main_task: Returned from app_main()
I (12424) WEBSOCKET: WebSocket connection restored (cycle: 1, disconnects: 0, reconnects: 0)
I (12582) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (12582) BUTTON: Single click confirmed
I (12582) STATE_MGR: Single click - mode toggle requested
I (12589) STATE_MGR: Switching: Camera â†’ Voice (count: 1)
I (12645) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (12645) STATE_MGR: Stopping camera...
I (12646) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (12661) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (12668) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (12684) STATE_MGR:   Timeout: 5000 ms
I (12688) STATE_MGR:   Timestamp: 11139 ms
I (12693) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (12699) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (12715) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (12722) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (12738) STATE_MGR:   Free heap before: 4033104 bytes
I (12744) STATE_MGR:   Free PSRAM before: 3997532 bytes
I (12750) CAMERA: Deinitializing camera...
I (12755) CAMERA: Camera deinitialized
I (12759) STATE_MGR:   âœ“ Camera deinitialized (took 9 ms)
I (12765) STATE_MGR:   Free heap after: 4133052 bytes
I (12771) STATE_MGR:   Free PSRAM after: 4060348 bytes
I (12777) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (12793) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (12799) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (12815) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (12923) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (13023) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (13073) STATE_MGR:   âœ“ Total stabilization: 250ms
I (13073) STATE_MGR:   Timestamp: 11524 ms
I (13074) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13089) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (13096) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13112) STATE_MGR:   Free heap before: 4133052 bytes
I (13118) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13136) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (13143) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13161) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13179) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (13186) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13204) AUDIO: [DIAG] Pre-init state:
I (13208) AUDIO:   Free heap: 4133052 bytes
I (13213) AUDIO:   Free internal RAM: 94051 bytes
I (13219) AUDIO:   Free DMA-capable: 73687 bytes
I (13224) AUDIO:   Free PSRAM: 4060348 bytes
I (13229) AUDIO:   Timestamp: 11680 ms
I (13233) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (13240) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (13248) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (13256) AUDIO:   DMA frame num (per desc): 1020
I (13262) AUDIO:   DMA total samples (effective): 4080
I (13268) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (13275) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (13281) AUDIO: âœ… I2S channels created (took 0 ms)
I (13286) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca738
I (13293) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (13300) AUDIO:   Sample rate: 16000 Hz
I (13304) AUDIO:   MCLK: DISABLED
I (13308) AUDIO:   BCLK: GPIO14 (shared)
I (13313) AUDIO:   WS:   GPIO15 (shared)
I (13318) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (13324) AUDIO: âœ… TX channel configured (took 1 ms)
I (13329) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (13336) AUDIO:   Sample rate: 16000 Hz
I (13340) AUDIO:   MCLK: DISABLED
I (13344) AUDIO:   BCLK: GPIO14 (shared)
I (13349) AUDIO:   WS:   GPIO15 (shared)
I (13354) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (13360) AUDIO: âœ… RX channel configured (took 0 ms)
I (13365) AUDIO: [STEP 4/6] Enabling TX channel...
I (13371) AUDIO: âœ… TX channel enabled (took 0 ms)
I (13376) AUDIO: [STEP 5/6] Enabling RX channel...
I (13381) AUDIO: âœ… RX channel enabled (took 0 ms)
I (13387) AUDIO: [STEP 6/6] Hardware stabilization...
I (13393) AUDIO:   Phase 1: Initial settle (50ms)
I (13448) AUDIO:   Phase 2: DMA verification
I (13448) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (13449) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (13606) AUDIO: [DIAG] Post-init state:
I (13606) AUDIO:   Free heap: 4107076 bytes
I (13607) AUDIO:   Free internal RAM: 68075 bytes
I (13610) AUDIO:   Free DMA-capable: 47711 bytes
I (13615) AUDIO:   Free PSRAM: 4060348 bytes
I (13620) AUDIO:   Timestamp: 12071 ms
I (13625) AUDIO:   Total init time: 201 ms
I (13630) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13647) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (13654) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (13659) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (13668) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (13674) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13692) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13710) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (13717) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (13723) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (13730) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (13736) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13754) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (13760) STATE_MGR:   Free heap after: 4107076 bytes
I (13766) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13782) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (13788) STATE_MGR: â•‘ Total transition time: 895 ms
I (13794) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13810) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13826) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (13833) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13849) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (13857) TTS: No pending audio to flush
I (13868) TTS: TTS decoder session reset for next audio stream
I (13868) TTS: âœ… TTS decoder flushed and reset for next session
I (13874) STT: Starting STT pipeline...
I (13879) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (13888) STT: âœ… STT pipeline started
I (13888) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (13900) STT:   Current time: 12350 ms
I (13904) STT:   Free heap: 4098524 bytes
I (13888) STT: Audio streaming session activated
I (13914) STT: Connection stabilization delay (500ms)...
I (13943) TTS: ğŸµ Starting TTS decoder...
I (13943) TTS: Initializing TTS decoder...
W (13944) TTS: TTS decoder already initialized
I (13947) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (13957) TTS: âœ… TTS decoder started successfully
I (13962) TTS: ğŸµ TTS playback task started on Core 1
I (13968) TTS: âœ… TTS playback task registered with watchdog
I (13975) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f820b48 (4096 bytes)
I (14109) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (14109) STT:   âœ“ Audio driver initialized
I (14110) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (14217) STT:   Total stabilization: 300ms
I (14217) STT:   Timestamp: 12667 ms
I (14217) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (14221) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37d0 (with safety padding)
I (14230) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14246) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (14251) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (14257) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14287) LED_CTRL: LED pattern -> 1
I (14288) STATE_MGR: âœ… Voice mode transition complete
I (14288) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (14302) STATE_MGR: STT pipeline reported start
I (14312) STATE_MGR: TTS playback start event received
I (14420) STT: Testing WebSocket transport health...
I (14427) STT: âœ… WebSocket transport verified healthy
I (14527) STT: Starting audio streaming to server...
I (17126) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (17126) BUTTON: Single click confirmed
W (17126) STATE_MGR: Guardrail soft override: stopping voice pipeline while busy
I (17134) STATE_MGR: Single click - mode toggle requested
I (17141) STATE_MGR: Switching: Voice â†’ Camera (count: 2)
I (17197) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (17197) STATE_MGR: Stopping voice mode components...
I (17198) STT: Stopping STT pipeline...
I (17202) STT: Draining ring buffer (1024 bytes pending) before shutdown...
I (17208) STT: Audio capture task stopped (captured 100352 bytes total)
I (17210) STT: Ring buffer drained successfully
I (17240) STT: Streaming task received stop signal
I (17240) STT: Sending EOS signal...
I (17240) WEBSOCKET: Sending EOS signal
I (17245) STT: Audio streaming session complete (streamed 98304 bytes in 24 chunks)
I (17263) STT: STT pipeline stopped
I (17267) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (17267) WEBSOCKET: Server status: processing
I (17272) WEBSOCKET: Server stage: transcription
I (17277) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (17773) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hello"}
I (17774) WEBSOCKET: Server status: processing
I (17778) WEBSOCKET: Server stage: llm
I (17782) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (18183) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "Hello, how can I assist you today?"}
I (18185) WEBSOCKET: Server status: processing
I (18190) WEBSOCKET: Server stage: tts
I (18194) WEBSOCKET: Pipeline stage changed: llm -> tts
I (18200) WEBSOCKET: Entering TTS stage - preparing for audio streaming
W (18207) WEBSOCKET: Ignoring TTS stage - not in voice mode (state=3)
W (18214) WEBSOCKET: Server response arrived after mode transition - audio will be discarded
I (18228) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 1, total: 4096)
I (18232) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 16682 ms, bytes: 4096)
I (18241) TTS: Received audio chunk #1: 4096 bytes
I (18246) TTS: Chunk #1 first 12 bytes: 52 49 46 46 BC 70 01 00 57 41 56 45
I (18254) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (18266) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 2, total: 8192)
I (18270) TTS: Received audio chunk #2: 4096 bytes
I (18275) TTS: Chunk #2 first 12 bytes: 9D FE 04 FF C8 FF 8C 00 DA 00 E6 00
I (18287) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 3, total: 12288)
I (18291) TTS: Received audio chunk #3: 4096 bytes
I (18297) TTS: Chunk #3 first 12 bytes: E4 04 E4 02 D8 01 72 FF E8 FB 1F F7
I (18309) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 4, total: 16384)
I (18312) TTS: Received audio chunk #4: 4096 bytes
I (18318) TTS: Chunk #4 first 12 bytes: 7A 0C 9F 0B 21 0A 77 07 B6 03 16 00
I (18330) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 5, total: 20480)
I (18334) TTS: Received audio chunk #5: 4096 bytes
I (18337) TTS: âœ… WAV header parsed successfully
I (18339) TTS: Chunk #5 first 12 bytes: C4 FF C4 FF C4 FF C1 FF BD FF BE FF
I (18357) TTS: Received audio chunk #6: 4096 bytes
I (18362) TTS: Received audio chunk #7: 1096 bytes
I (18365) TTS: Received audio chunk #8: 3000 bytes
I (18370) TTS: === WAV File Info ===
I (18373) TTS: Sample Rate: 16000 Hz
I (18377) TTS: Channels: 1
I (18378) TTS: Received audio chunk #9: 4096 bytes
I (18390) TTS: Received audio chunk #10: 4096 bytes
I (18396) TTS: Received audio chunk #11: 316 bytes
I (18399) TTS: Received audio chunk #12: 3780 bytes
I (18408) TTS: Received audio chunk #13: 4096 bytes
I (18412) TTS: Received audio chunk #14: 756 bytes
I (18416) TTS: Received audio chunk #15: 3340 bytes
I (18425) TTS: Received audio chunk #16: 4096 bytes
I (18429) TTS: Received audio chunk #17: 1196 bytes
I (18432) TTS: Bits per Sample: 16
I (18433) TTS: Received audio chunk #18: 2900 bytes
I (18438) TTS: Audio Format: 1 (PCM)
I (18444) TTS: Declared Data Size: 94360 bytes
I (18446) TTS: Received audio chunk #19: 4096 bytes
I (18459) TTS: Received audio chunk #20: 1636 bytes
I (18461) TTS: Block Align: 2
I (18464) TTS: Byte Rate: 32000
I (18468) TTS: ====================
I (18490) TTS: Received audio chunk #21: 2460 bytes
I (18495) TTS: Received audio chunk #22: 3296 bytes
I (18496) TTS: Received audio chunk #23: 800 bytes
I (18502) TTS: Received audio chunk #24: 4096 bytes
I (18505) TTS: Received audio chunk #25: 856 bytes
I (18512) TTS: Received audio chunk #26: 3240 bytes
I (18516) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=67192)
I (18519) TTS: Received audio chunk #27: 4096 bytes
I (18524) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block)
I (18530) TTS: Received audio chunk #28: 4096 bytes
I (18543) TTS: Received audio chunk #29: 4096 bytes
I (18549) TTS: Received audio chunk #30: 4096 bytes
I (18553) TTS: Received audio chunk #31: 196 bytes
I (18558) WEBSOCKET: Received text message: {"status": "complete"}
I (18563) WEBSOCKET: Server status: complete
I (18568) WEBSOCKET: Pipeline stage changed: tts -> complete
I (18574) WEBSOCKET: Exiting TTS stage (transition to complete)
I (18714) STATE_MGR: Voice pipeline reported COMPLETE
I (18715) STATE_MGR: Waiting for TTS playback drain (~59240 bytes pending, timeout 15000 ms)
W (18918) TTS: TTS wait for idle timeout after 200 ms
W (18918) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=0
W (18921) TTS:   Data: received=67388, header=0, played=16340, pending=51048
W (18929) STATE_MGR: TTS wait for idle timeout #1 (drain_checks=0)
W (19236) TTS: TTS wait for idle timeout after 200 ms
W (19236) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=0
W (19239) TTS:   Data: received=67388, header=0, played=24532, pending=42856
W (19247) STATE_MGR: TTS wait for idle timeout #2 (drain_checks=1)
W (19554) TTS: TTS wait for idle timeout after 200 ms
W (19554) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=0
W (19557) TTS:   Data: received=67388, header=0, played=36820, pending=30568
W (19565) STATE_MGR: TTS wait for idle timeout #3 (drain_checks=2)
W (19872) TTS: TTS wait for idle timeout after 200 ms
W (19872) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=0
W (19875) TTS:   Data: received=67388, header=0, played=45012, pending=22376
W (19883) STATE_MGR: TTS wait for idle timeout #4 (drain_checks=3)
W (20190) TTS: TTS wait for idle timeout after 200 ms
W (20190) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=0
W (20192) TTS:   Data: received=67388, header=0, played=53204, pending=14184
W (20200) STATE_MGR: TTS wait for idle timeout #5 (drain_checks=4)
W (20507) TTS: TTS wait for idle timeout after 200 ms
W (20507) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=0
W (20510) TTS:   Data: received=67388, header=0, played=65492, pending=1896
W (20518) STATE_MGR: TTS wait for idle timeout #6 (drain_checks=5)
I (20745) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (20745) STATE_MGR: TTS decoder confirmed idle
I (20749) STATE_MGR: Flushing and resetting TTS decoder for next session
I (20756) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (20764) TTS: Flushing pending audio before reset (~44 bytes)
I (20890) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (20891) TTS: TTS decoder session reset for next audio stream
I (20895) TTS: âœ… TTS decoder flushed and reset for next session
W (21102) STATE_MGR: TTS decoder still playing after shutdown - forcing stop
I (21102) TTS: â¹ï¸ Stopping TTS decoder...
I (21125) TTS: TTS playback task shutting down - is_running=0
I (21125) TTS: ğŸµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (21129) TTS:   âœ“ DMA buffer freed from PSRAM
I (21134) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (21141) TTS: â¹ï¸ TTS decoder stopped (played 0 bytes)
I (21147) TTS: â¹ï¸ Stopping TTS decoder...
W (21152) TTS: TTS decoder not running
I (21265) STATE_MGR: Acquiring I2S mutex...
I (21265) STATE_MGR: Deinitializing audio drivers...
I (21266) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21283) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (21290) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21308) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (21315) AUDIO: âœ… RX channel disabled (took 0 ms)
I (21321) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (21327) AUDIO: âœ… TX channel disabled (took 0 ms)
I (21333) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (21389) AUDIO: [STEP 4/5] Deleting RX channel...
I (21390) AUDIO: âœ… RX channel deleted (took 0 ms)
I (21390) AUDIO: [STEP 5/5] Deleting TX channel...
I (21395) AUDIO: âœ… TX channel deleted (took 0 ms)
I (21400) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (21458) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21465) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (21472) AUDIO: â•‘ Camera Can Now Initialize
I (21477) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21545) STATE_MGR: Initializing camera...
I (21545) CAMERA: Initializing camera...
I (21546) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (21553) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (21562) cam_hal: cam init ok
W (21566) ledc: GPIO 0 is not usable, maybe conflict with others
I (21572) sccb-ng: pin_sda 26 pin_scl 27
I (21576) sccb-ng: sccb_i2c_port=1
I (21581) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (21624) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (21624) camera: Detected OV2640 camera
I (21624) camera: Detected camera at address=0x30
I (21706) cam_hal: PSRAM DMA mode disabled
I (21706) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (21710) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (21717) cam_hal: cam config ok
I (21721) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (21803) CAMERA: Camera initialized successfully
I (21803) STATE_MGR: I2S mutex released
I (21803) STATE_MGR: âœ… Camera mode transition complete
I (21808) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21826) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (21833) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21851) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21869) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (21876) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21894) AUDIO: [DIAG] Pre-init state:
I (21899) AUDIO:   Free heap: 4024124 bytes
I (21904) AUDIO:   Free internal RAM: 47647 bytes
I (21909) AUDIO:   Free DMA-capable: 27283 bytes
I (21914) AUDIO:   Free PSRAM: 3997532 bytes
I (21919) AUDIO:   Timestamp: 20370 ms
I (21924) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (21931) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (21938) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (21947) AUDIO:   DMA frame num (per desc): 1020
I (21952) AUDIO:   DMA total samples (effective): 4080
I (21958) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (21965) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (21971) AUDIO: âœ… I2S channels created (took 0 ms)
I (21977) AUDIO:   TX handle: 0x3ffca738 | RX handle: 0x3ffca87c
I (21983) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (21990) AUDIO:   Sample rate: 16000 Hz
I (21995) AUDIO:   MCLK: DISABLED
I (21999) AUDIO:   BCLK: GPIO14 (shared)
I (22003) AUDIO:   WS:   GPIO15 (shared)
I (22008) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (22015) AUDIO: âœ… TX channel configured (took 1 ms)
I (22019) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (22026) AUDIO:   Sample rate: 16000 Hz
I (22031) AUDIO:   MCLK: DISABLED
I (22035) AUDIO:   BCLK: GPIO14 (shared)
I (22039) AUDIO:   WS:   GPIO15 (shared)
I (22044) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
E (22050) i2s_common: i2s_alloc_dma_desc(509): allocate DMA buffer failed
E (22057) i2s_std: i2s_std_set_slot(111): allocate memory for dma descriptor failed
E (22065) i2s_std: i2s_channel_init_std_mode(225): initialize channel failed while setting slot
E (22075) AUDIO: âŒ RX channel init FAILED: ESP_ERR_NO_MEM (took 25 ms)
E (22082) AUDIO: âŒ Failed to configure I2S STD full-duplex: ESP_ERR_NO_MEM
E (22090) FEEDBACK_PLAYER: Failed to init audio driver for feedback: ESP_ERR_NO_MEM
W (22098) STATE_MGR: Voice stop feedback failed: ESP_ERR_NO_MEM
I (22105) LED_CTRL: LED pattern -> 3
I (22109) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (22125) STATE_MGR: STT pipeline reported stop
I (22135) STATE_MGR: Pipeline stage event: transcription
I (22145) STATE_MGR: Pipeline stage event: llm
I (22155) STATE_MGR: Pipeline stage event: tts
I (22165) STATE_MGR: TTS playback start event received
I (22175) STATE_MGR: Pipeline stage event: complete
I (27062) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
W (27062) STATE_MGR: Guardrail blocked request: audio pipeline busy
I (27065) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27083) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (27090) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27108) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27126) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (27133) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27151) AUDIO: [DIAG] Pre-init state:
I (27156) AUDIO:   Free heap: 4024108 bytes
I (27160) AUDIO:   Free internal RAM: 47631 bytes
I (27166) AUDIO:   Free DMA-capable: 27267 bytes
I (27171) AUDIO:   Free PSRAM: 3997532 bytes
I (27176) AUDIO:   Timestamp: 25627 ms
I (27180) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (27187) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (27195) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (27203) AUDIO:   DMA frame num (per desc): 1020
I (27209) AUDIO:   DMA total samples (effective): 4080
I (27215) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (27222) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (27228) AUDIO: âœ… I2S channels created (took 0 ms)
I (27234) AUDIO:   TX handle: 0x3ffca738 | RX handle: 0x3ffca87c
I (27240) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (27247) AUDIO:   Sample rate: 16000 Hz
I (27251) AUDIO:   MCLK: DISABLED
I (27255) AUDIO:   BCLK: GPIO14 (shared)
I (27260) AUDIO:   WS:   GPIO15 (shared)
I (27265) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (27271) AUDIO: âœ… TX channel configured (took 0 ms)
I (27276) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (27283) AUDIO:   Sample rate: 16000 Hz
I (27287) AUDIO:   MCLK: DISABLED
I (27291) AUDIO:   BCLK: GPIO14 (shared)
I (27296) AUDIO:   WS:   GPIO15 (shared)
I (27301) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
E (27306) i2s_common: i2s_alloc_dma_desc(509): allocate DMA buffer failed
E (27314) i2s_std: i2s_std_set_slot(111): allocate memory for dma descriptor failed
E (27322) i2s_std: i2s_channel_init_std_mode(225): initialize channel failed while setting slot
E (27331) AUDIO: âŒ RX channel init FAILED: ESP_ERR_NO_MEM (took 25 ms)
E (27339) AUDIO: âŒ Failed to configure I2S STD full-duplex: ESP_ERR_NO_MEM
E (27346) FEEDBACK_PLAYER: Failed to init audio driver for feedback: ESP_ERR_NO_MEM
W (27355) STATE_MGR: Failed to play error feedback: ESP_ERR_NO_MEM
I (29133) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
W (29133) STATE_MGR: Guardrail blocked request: audio pipeline busy
I (29136) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29154) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (29161) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29179) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29197) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (29204) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29222) AUDIO: [DIAG] Pre-init state:
I (29227) AUDIO:   Free heap: 4024108 bytes
I (29231) AUDIO:   Free internal RAM: 47615 bytes
I (29237) AUDIO:   Free DMA-capable: 27267 bytes
I (29242) AUDIO:   Free PSRAM: 3997532 bytes
I (29247) AUDIO:   Timestamp: 27698 ms
I (29252) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (29258) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (29266) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (29275) AUDIO:   DMA frame num (per desc): 1020
I (29280) AUDIO:   DMA total samples (effective): 4080
I (29286) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (29293) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (29299) AUDIO: âœ… I2S channels created (took 0 ms)
I (29305) AUDIO:   TX handle: 0x3ffca738 | RX handle: 0x3ffca87c
I (29311) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (29318) AUDIO:   Sample rate: 16000 Hz
I (29323) AUDIO:   MCLK: DISABLED
I (29327) AUDIO:   BCLK: GPIO14 (shared)
I (29331) AUDIO:   WS:   GPIO15 (shared)
I (29336) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (29342) AUDIO: âœ… TX channel configured (took 1 ms)
I (29347) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (29354) AUDIO:   Sample rate: 16000 Hz
I (29359) AUDIO:   MCLK: DISABLED
I (29363) AUDIO:   BCLK: GPIO14 (shared)
I (29367) AUDIO:   WS:   GPIO15 (shared)
I (29372) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
E (29378) i2s_common: i2s_alloc_dma_desc(509): allocate DMA buffer failed
E (29385) i2s_std: i2s_std_set_slot(111): allocate memory for dma descriptor failed
E (29393) i2s_std: i2s_channel_init_std_mode(225): initialize channel failed while setting slot
E (29403) AUDIO: âŒ RX channel init FAILED: ESP_ERR_NO_MEM (took 25 ms)
E (29410) AUDIO: âŒ Failed to configure I2S STD full-duplex: ESP_ERR_NO_MEM
E (29418) FEEDBACK_PLAYER: Failed to init audio driver for feedback: ESP_ERR_NO_MEM
W (29426) STATE_MGR: Failed to play error feedback: ESP_ERR_NO_MEM
I (30819) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (30819) BUTTON: Single click confirmed
W (30819) STATE_MGR: Guardrail blocked request: audio pipeline busy
I (30826) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30844) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (30851) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30869) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30887) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (30895) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30913) AUDIO: [DIAG] Pre-init state:
I (30917) AUDIO:   Free heap: 4024108 bytes
I (30922) AUDIO:   Free internal RAM: 47631 bytes
I (30927) AUDIO:   Free DMA-capable: 27267 bytes
I (30933) AUDIO:   Free PSRAM: 3997532 bytes
I (30938) AUDIO:   Timestamp: 29388 ms
I (30942) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (30949) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (30957) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (30965) AUDIO:   DMA frame num (per desc): 1020
I (30970) AUDIO:   DMA total samples (effective): 4080
I (30976) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (30983) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (30990) AUDIO: âœ… I2S channels created (took 0 ms)
I (30995) AUDIO:   TX handle: 0x3ffca738 | RX handle: 0x3ffca87c
I (31002) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (31008) AUDIO:   Sample rate: 16000 Hz
I (31013) AUDIO:   MCLK: DISABLED
I (31017) AUDIO:   BCLK: GPIO14 (shared)
I (31022) AUDIO:   WS:   GPIO15 (shared)
I (31026) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (31032) AUDIO: âœ… TX channel configured (took 0 ms)
I (31038) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (31044) AUDIO:   Sample rate: 16000 Hz
I (31049) AUDIO:   MCLK: DISABLED
I (31053) AUDIO:   BCLK: GPIO14 (shared)
I (31058) AUDIO:   WS:   GPIO15 (shared)
I (31062) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
E (31068) i2s_common: i2s_alloc_dma_desc(509): allocate DMA buffer failed
E (31075) i2s_std: i2s_std_set_slot(111): allocate memory for dma descriptor failed
E (31084) i2s_std: i2s_channel_init_std_mode(225): initialize channel failed while setting slot
E (31093) AUDIO: âŒ RX channel init FAILED: ESP_ERR_NO_MEM (took 25 ms)
E (31101) AUDIO: âŒ Failed to configure I2S STD full-duplex: ESP_ERR_NO_MEM
E (31108) FEEDBACK_PLAYER: Failed to init audio driver for feedback: ESP_ERR_NO_MEM
W (31116) STATE_MGR: Failed to play error feedback: ESP_ERR_NO_MEM
I (38351) STATE_MGR: Button event received: 3 in state CAMERA_STANDBY
I (38351) BUTTON: Long press detected (3000 ms)
W (38351) STATE_MGR: Long press - shutdown requested
W (38358) STATE_MGR: Shutdown state reached
W (38363) STATE_MGR: === SYSTEM SHUTDOWN ===
I (38368) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38386) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (38393) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38411) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38429) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (38436) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38454) AUDIO: [DIAG] Pre-init state:
I (38458) AUDIO:   Free heap: 4024108 bytes
I (38463) AUDIO:   Free internal RAM: 47631 bytes
I (38469) AUDIO:   Free DMA-capable: 27267 bytes
I (38474) AUDIO:   Free PSRAM: 3997532 bytes
I (38479) AUDIO:   Timestamp: 36930 ms
I (38483) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (38490) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (38498) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (38506) AUDIO:   DMA frame num (per desc): 1020
I (38512) AUDIO:   DMA total samples (effective): 4080
I (38518) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (38525) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (38531) AUDIO: âœ… I2S channels created (took 0 ms)
I (38536) AUDIO:   TX handle: 0x3ffca738 | RX handle: 0x3ffca87c
I (38543) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (38550) AUDIO:   Sample rate: 16000 Hz
I (38554) AUDIO:   MCLK: DISABLED
I (38558) AUDIO:   BCLK: GPIO14 (shared)
I (38563) AUDIO:   WS:   GPIO15 (shared)
I (38568) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (38574) AUDIO: âœ… TX channel configured (took 1 ms)
I (38579) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (38586) AUDIO:   Sample rate: 16000 Hz
I (38590) AUDIO:   MCLK: DISABLED
I (38594) AUDIO:   BCLK: GPIO14 (shared)
I (38599) AUDIO:   WS:   GPIO15 (shared)
I (38604) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
E (38609) i2s_common: i2s_alloc_dma_desc(509): allocate DMA buffer failed
E (38617) i2s_std: i2s_std_set_slot(111): allocate memory for dma descriptor failed
E (38625) i2s_std: i2s_channel_init_std_mode(225): initialize channel failed while setting slot
E (38634) AUDIO: âŒ RX channel init FAILED: ESP_ERR_NO_MEM (took 25 ms)
E (38642) AUDIO: âŒ Failed to configure I2S STD full-duplex: ESP_ERR_NO_MEM
E (38649) FEEDBACK_PLAYER: Failed to init audio driver for feedback: ESP_ERR_NO_MEM
W (38658) STATE_MGR: Shutdown feedback failed: ESP_ERR_NO_MEM
I (38664) LED_CTRL: LED pattern -> 1
I (39268) LED_CTRL: LED pattern -> 3
I (39414) HOTPIN_MAIN: System shutdown detected, terminating WebSocket connection task
I (39414) HOTPIN_MAIN: System shutdown detected, terminating WebSocket connection task
I (39420) HOTPIN_MAIN: System shutdown detected, terminating WebSocket connection task
I (39429) HOTPIN_MAIN: Unregistering WebSocket connection task from watchdog
I (39436) HOTPIN_MAIN: WebSocket connection task terminated
I (40468) LED_CTRL: LED pattern -> 0
I (40468) STATE_MGR: Stopping all subsystems...
I (40469) STATE_MGR: Shutting down camera...
I (40472) CAMERA: Deinitializing camera...
I (40477) CAMERA: Camera deinitialized
I (40481) STT: Stopping STT pipeline...
W (40485) STT: STT pipeline already stopped
I (40490) TTS: â¹ï¸ Stopping TTS decoder...
W (40495) TTS: TTS decoder not running
I (40508) STATE_MGR: Stopping WebSocket client
I (40508) WEBSOCKET: Disconnecting from WebSocket server...
W (40527) websocket_client: Client was not started
W (40528) WEBSOCKET: WebSocket client stop reported ESP_FAIL, continuing cleanup
I (40530) WEBSOCKET: WebSocket health check task shutdown signal received
I (40538) WEBSOCKET: WebSocket health check task exiting (cycles: 6, disconnects: 0, reconnects: 1)
I (40630) WEBSOCKET: WebSocket disconnected
I (40630) WEBSOCKET: Force stopping WebSocket client
W (40631) websocket_client: Client was not started
W (40635) WEBSOCKET: Graceful close returned ESP_FAIL
I (40641) STATE_MGR: âœ… Shutdown complete
