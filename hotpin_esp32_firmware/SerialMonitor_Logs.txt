PS F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware> idf.py monitor
Executing action: monitor
Serial port COM7
Connecting....
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP32
Running idf_monitor in directory F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware
Executing "C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe C:\Espressif\frameworks\esp-idf-v5.4.2\tools/idf_monitor.py -p COM7 -b 115200 --toolchain-prefix xtensa-esp32-elf- --target esp32 --revision 0 F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware\build\hotpin_esp32_firmware.elf --force-color -m 'C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe' 'C:\Espressif\frameworks\esp-idf-v5.4.2\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM7 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM7 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
uws8Jul:2973;1=<12:31:46
ï¿½rstï¿½0x1,(POWERON_RESET),boot:0x131)SPI_FAST_fMiSï¿½_BOOT)
coï¿½Ij%ï¿½)Jï¿½Bï¿½ï¿½Jï¿½ï¿½ï¿½ï¿½*å…‰ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½9ï¿½*ï¿½É±ï¿½*ï¿½ï¿½É½ï¿½åšï¿½ï¿½Éï¿½ï¿½rrjï¿½--- Warning: Failed to decode multiple lines in a row. Try checking the baud rate and XTAL frequency setting in menuconfig
ï¿½
        ï¿½SJï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ñ¥Ñ¥ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½jRï¿½ ï¿½ï¿½S%$ï¿½ë‹—â¦â¦bï¿½ï¿½ï¿½ï¿½ï¿½5ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Qï¿½zï¿½ï¿½Í•ÑbUï¿½ï¿½Ñ¡5RJBï¿½ï¿½Jï¿½ï¿½ï¿½ï¿½ï¿½rï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½"ï¿½Ñ…ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½jï¿½ï¿½
        ï¿½SS%$ï¿½ë‹—ï¿½zÑ…ï¿½ï¿½Ñ…ï¿½zE
ï¿½VW,$HHï¿½ï¿½    01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
ï¿½I6ï¿½9ï¿½)7boot: End of partivmonï¿½uablenown data     01 81 00190000 00070000
I0(=4) boot: Defaulting to fyctory"image
I (98) esx_image: segment 0: paddr=00010020 vaddr=3f400020 size=3abbch (240572) map
I (188) esp_image: segment 1: paddr=0004abe4 vaddr=3ff80000 size=0001ch (    28) load
I (188) esp_image: segment 2: paddr=0004ac08 vaddr=3ffb0000 size=05410h ( 21520) load
I (199) esp_image: segment 3: paddr=00050020 vaddr=400d0020 size=bdfd0h (778192) map
I (465) esp_image: segment 4: paddr=0010dff8 vaddr=3ffb5410 size=0c8b4h ( 51380) load
I (484) esp_image: segment 5: paddr=0011a8b4 vaddr=40080000 size=1ad94h (109972) load
I (544) boot: Loaded app from partition at offset 0x10000
I (544) boot: Disabling RNG early entropy source...
I (554) quad_psram: This chip is ESP32-D0WD
I (554) esp_psram: Found 4MB PSRAM device
I (555) esp_psram: Speed: 40MHz
I (558) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (565) cpu_start: Multicore app
I (1459) esp_psram: SPI SRAM memory test OK
I (1467) cpu_start: Pro cpu start user code
I (1467) cpu_start: cpu freq: 240000000 Hz
I (1467) app_init: Application information:
I (1471) app_init: Project name:     hotpin_esp32_firmware
I (1477) app_init: App version:      b38d5f9-dirty
I (1482) app_init: Compile time:     Nov  3 2025 18:41:58
I (1488) app_init: ELF file SHA256:  170a6b6dd...
I (1494) app_init: ESP-IDF:          v5.4.2-dirty
I (1499) efuse_init: Min chip rev:     v0.0
I (1504) efuse_init: Max chip rev:     v3.99
I (1509) efuse_init: Chip rev:         v3.1
I (1514) heap_init: Initializing. RAM available for dynamic allocation:
I (1521) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1527) heap_init: At 3FFC9478 len 00016B88 (90 KiB): DRAM
I (1533) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1540) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1546) heap_init: At 4009AD94 len 0000526C (20 KiB): IRAM
I (1553) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1561) spi_flash: detected chip: generic
I (1565) spi_flash: flash io: dio
W (1569) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1584) main_task: Started on CPU0
I (1587) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1596) main_task: Calling app_main()
I (1600) HOTPIN_MAIN: ====================================
I (1606) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1612) HOTPIN_MAIN: ====================================
W (1618) HOTPIN_MAIN: Brownout detector disabled
I (1623) HOTPIN_MAIN: Validating PSRAM...
I (1628) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1634) HOTPIN_MAIN: PSRAM validation passed
I (1639) HOTPIN_MAIN: ====================================
I (1646) HOTPIN_MAIN: System Information:
I (1650) HOTPIN_MAIN: Chip: esp32
I (1654) HOTPIN_MAIN: Cores: 2
I (1658) HOTPIN_MAIN: Silicon revision: 301
I (1663) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1668) HOTPIN_MAIN: Flash: 2 MB external
I (1673) HOTPIN_MAIN: Free heap: 4364852 bytes
I (1678) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1683) HOTPIN_MAIN: ====================================
I (1689) HOTPIN_MAIN: Initializing memory manager...
I (1694) MEM_MGR: Initializing memory manager...
I (1700) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1718) MEM_MGR: â•‘ Memory Manager Initialized
I (1723) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1742) MEM_MGR: â•‘ Baseline Memory State:
I (1747) MEM_MGR: â•‘   Internal RAM:     225135 bytes (219 KB)
I (1753) MEM_MGR: â•‘   DMA-capable:      204771 bytes (199 KB)
I (1760) MEM_MGR: â•‘   PSRAM:            4192016 bytes (4093 KB)
I (1766) MEM_MGR: â•‘   Total Heap:       4364756 bytes (4262 KB)
I (1773) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1792) MEM_MGR: â•‘ Configured Thresholds:
I (1797) MEM_MGR: â•‘   Internal RAM:     WARN=50KB, CRIT=20KB
I (1803) MEM_MGR: â•‘   DMA-capable:      WARN=35KB, CRIT=20KB
I (1810) MEM_MGR: â•‘   PSRAM:            WARN=500KB, CRIT=200KB
I (1816) MEM_MGR: â•‘   Fragmentation:    WARN=30%, CRIT=50%
I (1823) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1841) MEM_MGR: Starting memory monitoring (interval: 15000 ms)
I (1848) MEM_MGR: âœ… Memory monitoring started
I (1848) MEM_MGR: Memory monitor task started (interval: 15000 ms)
I (1853) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
W (1860) MEM_MGR: âš ï¸ WARNING: Memory fragmentation increasing! DMA:46% PSRAM:2%
I (1878) MEM_MGR: â•‘ Memory Statistics - System Boot
I (1892) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1910) MEM_MGR: â•‘ Internal RAM:
I (1915) MEM_MGR: â•‘   Free:             225135 bytes (219 KB)
I (1921) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1928) MEM_MGR: â•‘   Fragmentation:     51%
I (1933) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1951) MEM_MGR: â•‘ DMA-capable RAM:
I (1956) MEM_MGR: â•‘   Free:             204771 bytes (199 KB)
I (1962) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1969) MEM_MGR: â•‘   Fragmentation:     46%
I (1974) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1992) MEM_MGR: â•‘ PSRAM:
I (1996) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (2003) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (2009) MEM_MGR: â•‘   Fragmentation:      2%
I (2014) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2033) MEM_MGR: â•‘ Total Heap:
I (2037) MEM_MGR: â•‘   Free:             4364756 bytes (4262 KB)
I (2044) MEM_MGR: â•‘   Minimum Ever:     4364756 bytes (4262 KB)
I (2050) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2069) MEM_MGR: â•‘ Memory Delta from Baseline:
I (2074) MEM_MGR: â•‘   Internal RAM:          +0 bytes (  +0 KB)
I (2081) MEM_MGR: â•‘   DMA-capable:           +0 bytes (  +0 KB)
I (2088) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (2094) MEM_MGR: â•‘   Total Heap:            +0 bytes (  +0 KB)
I (2101) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2119) HOTPIN_MAIN: Initializing NVS...
I (2149) HOTPIN_MAIN: NVS initialized successfully
I (2149) event_dispatcher: System event queue ready (16 entries)
I (2150) HOTPIN_MAIN: Synchronization primitives created
I (2156) HOTPIN_MAIN: Initializing WiFi...
I (2165) wifi:wifi driver task: 3ffdaabc, prio:23, stack:6656, core=0
I (2178) wifi:wifi firmware version: bea31f3
I (2178) wifi:wifi certification version: v7.0
I (2178) wifi:config NVS flash: enabled
I (2179) wifi:config nano formatting: disabled
I (2183) wifi:Init data frame dynamic rx buffer num: 32
I (2188) wifi:Init static rx mgmt buffer num: 5
I (2192) wifi:Init management short buffer num: 32
I (2197) wifi:Init dynamic tx buffer num: 32
I (2201) wifi:Init static rx buffer size: 1600
I (2205) wifi:Init static rx buffer num: 10
I (2209) wifi:Init dynamic rx buffer num: 32
I (2214) wifi_init: rx ba win: 6
I (2217) wifi_init: accept mbox: 6
I (2221) wifi_init: tcpip mbox: 32
I (2225) wifi_init: udp mbox: 6
I (2229) wifi_init: tcp mbox: 6
I (2233) wifi_init: tcp tx win: 5760
I (2237) wifi_init: tcp rx win: 5760
I (2241) wifi_init: tcp mss: 1440
I (2245) wifi_init: WiFi IRAM OP enabled
I (2250) wifi_init: WiFi RX IRAM OP enabled
I (2256) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (2323) phy_init: Saving new calibration data due to checksum failure or outdated calibration data, mode(0)
I (2341) wifi:mode : sta (80:f3:da:99:8c:64)
I (2341) wifi:enable tsf
I (2344) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (2344) HOTPIN_MAIN: Waiting for WiFi connection...
I (2345) HOTPIN_MAIN: WiFi station started, connecting...
I (2367) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (2369) wifi:state: init -> auth (0xb0)
I (3241) wifi:state: auth -> assoc (0x0)
I (3250) wifi:state: assoc -> run (0x10)
I (3298) wifi:connected with wifi, aid = 2, channel 11, BW20, bssid = ee:d4:b9:ed:90:50
I (3299) wifi:security: WPA3-SAE, phy: bgn, rssi: -49
I (3303) wifi:pm start, type: 1

I (3303) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (3314) wifi:<ba-add>idx:0 (ifx:0, ee:d4:b9:ed:90:50), tid:0, ssn:0, winSize:64
I (3321) HOTPIN_MAIN: WiFi connected to AP
I (3325) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (3331) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (4353) esp_netif_handlers: sta ip: 10.143.111.214, mask: 255.255.255.0, gw: 10.143.111.248
I (4354) HOTPIN_MAIN: âœ… Got IP address: 10.143.111.214
I (4358) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (7359) HOTPIN_MAIN: Initializing button handler...
I (7359) BUTTON: Initializing button handler on GPIO 12
I (7360) gpio: GPIO[12]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (7369) BUTTON: Button FSM task started
I (7374) BUTTON: GPIO ISR service installed successfully
I (7379) BUTTON: Button handler initialized successfully (initial level=1, primed=1)
I (7388) HOTPIN_MAIN: Initializing LED controller...
I (7393) LED_CTRL: Initializing LED controller on GPIO 33
I (7400) LED_CTRL: LED controller ready
I (7404) LED_CTRL: LED pattern -> 2
I (7408) HOTPIN_MAIN: Initializing WebSocket client...
I (7414) WEBSOCKET: Initializing WebSocket client...
I (7420) WEBSOCKET: Server URI: ws://10.143.111.58:8000/ws
I (7426) WEBSOCKET: Authorization header configured
I (7432) WEBSOCKET: âœ… WebSocket client initialized
I (7437) WEBSOCKET: Status callback registered
I (7442) HOTPIN_MAIN: WebSocket status callback registered
I (7448) HOTPIN_MAIN: Initializing HTTP client...
I (7454) HTTP_CLIENT: Initializing HTTP client
I (7459) HTTP_CLIENT: Authorization token configured
I (7464) HTTP_CLIENT: HTTP client initialized (server: http://10.143.111.58:8000)
I (7473) HOTPIN_MAIN: Initializing STT pipeline...
I (7478) STT: Initializing STT pipeline...
I (7483) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7501) STT: â•‘ STT Ring Buffer Allocation (PSRAM)
I (7507) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7525) STT: [MEMORY] Pre-allocation state:
I (7530) STT:   Free internal RAM: 166239 bytes
I (7535) STT:   Free DMA-capable: 145875 bytes
I (7540) STT:   Free PSRAM: 4126020 bytes
I (7545) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (7553) STT:   âœ“ Ring buffer allocated at 0x3f810ac0 (PSRAM address)
I (7560) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (7569) STT: [MEMORY] Post-allocation state:
I (7574) STT:   Free internal RAM: 166239 bytes
I (7579) STT:   Free DMA-capable: 145875 bytes
I (7584) STT:   Free PSRAM: 4060480 bytes
I (7595) STT: [CORE AFFINITY] Creating persistent audio streaming task on Core 0
I (7597) STT: Persistent audio streaming task started on Core 0
I (7603) STT:   âœ“ Stream buffer allocated at 0x3ffd1b74 (with safety padding)
I (7612) STT: âœ… STT pipeline initialized
I (7616) HOTPIN_MAIN: Initializing TTS decoder...
I (7621) TTS: Initializing TTS decoder...
I (7626) TTS: Allocating 196608 byte PSRAM buffer for TTS stream
I (7633) TTS:   PSRAM available: 4060480 bytes (3965 KB)
I (7639) TTS:   âœ“ TTS stream buffer allocated at 0x3f820ac4
I (7671) WEBSOCKET: Audio callback registered
I (7672) TTS: âœ… TTS decoder initialized
I (7672) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (7678) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (7684) HOTPIN_MAIN: State manager task created on Core 1
I (7683) STATE_MGR: State manager task started on Core 1
I (7690) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (7696) STATE_MGR: Priority: 10
I (7702) HOTPIN_MAIN: ðŸ”Œ Attempting WebSocket connection (attempt 1)...
I (7706) STATE_MGR: Starting in camera mode...
I (7714) WEBSOCKET: Connecting to WebSocket server...
I (7719) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (7730) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7735) websocket_client: Started
I (7749) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (7753) WEBSOCKET: âœ… WebSocket health check task created
I (7760) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7784) MEM_MGR: â•‘ Internal RAM:
I (7766) WEBSOCKET: WebSocket client started
I (7788) MEM_MGR: â•‘   Free:             222727 bytes (217 KB)
I (7753) WEBSOCKET: WebSocket health check task started
I (7800) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7690) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (7812) MEM_MGR: â•‘   Fragmentation:     51%
I (7819) HOTPIN_MAIN: Configuring task watchdog for critical tasks...
I (7824) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7831) HOTPIN_MAIN: âœ… State manager task added to watchdog
I (7850) MEM_MGR: â•‘ DMA-capable RAM:
I (7856) HOTPIN_MAIN: âœ… WebSocket connection task added to watchdog
I (7861) MEM_MGR: â•‘   Free:             202363 bytes (197 KB)
I (7868) HOTPIN_MAIN: Task watchdog configuration complete
I (7874) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7880) HOTPIN_MAIN: ====================================
I (7887) MEM_MGR: â•‘   Fragmentation:     46%
I (7893) HOTPIN_MAIN: System initialization complete!
I (7898) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7904) HOTPIN_MAIN: Entering camera standby mode...
I (7922) MEM_MGR: â•‘ PSRAM:
I (7929) HOTPIN_MAIN: ====================================
I (7932) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (7938) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7945) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (7963) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (7969) MEM_MGR: â•‘   Fragmentation:      2%
I (7976) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7981) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7999) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (8018) MEM_MGR: â•‘ Total Heap:
I (8025) AUDIO:   âœ“ I2S access mutex created successfully
I (8029) MEM_MGR: â•‘   Free:             4362348 bytes (4260 KB)
I (8035) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8042) MEM_MGR: â•‘   Minimum Ever:     4362348 bytes (4260 KB)
I (8060) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (8067) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8074) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8092) MEM_MGR: â•‘ Memory Delta from Baseline:
I (8110) AUDIO: [DIAG] Pre-init state:
I (8115) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (8120) AUDIO:   Free heap: 3962928 bytes
I (8126) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (8138) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (8145) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (8152) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8131) AUDIO:   Free internal RAM: 119683 bytes
I (8170) STATE_MGR: Acquiring I2S mutex...
I (8175) AUDIO:   Free DMA-capable: 99175 bytes
I (8163) WEBSOCKET: âœ… WebSocket connected to server
I (8185) AUDIO:   Free PSRAM: 3863868 bytes
I (8191) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (8196) AUDIO:   Timestamp: 6643 ms
I (8207) WEBSOCKET: Handshake sent successfully
I (8207) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (8213) HOTPIN_MAIN: ðŸŽ‰ WebSocket status callback: CONNECTED
I (8219) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (8234) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (8242) AUDIO:   DMA frame num (per desc): 1020
I (8247) AUDIO:   DMA total samples (effective): 4080
I (8253) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (8260) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (8267) AUDIO: âœ… I2S channels created (took 0 ms)
I (8272) AUDIO:   TX handle: 0x3ffe3dc0 | RX handle: 0x3ffe1d70
I (8278) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (8285) AUDIO:   Sample rate: 16000 Hz
I (8289) AUDIO:   MCLK: DISABLED
I (8293) AUDIO:   BCLK: GPIO14 (shared)
I (8298) AUDIO:   WS:   GPIO15 (shared)
I (8302) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (8309) AUDIO: âœ… TX channel configured (took 1 ms)
I (8313) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (8320) AUDIO:   Sample rate: 16000 Hz
I (8325) AUDIO:   MCLK: DISABLED
I (8329) AUDIO:   BCLK: GPIO14 (shared)
I (8333) AUDIO:   WS:   GPIO15 (shared)
I (8338) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (8347) AUDIO: âœ… RX channel configured (took 2 ms)
I (8349) AUDIO: [STEP 4/6] Enabling TX channel...
I (8354) AUDIO: âœ… TX channel enabled (took 0 ms)
I (8355) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (8360) AUDIO: [STEP 5/6] Enabling RX channel...
I (8370) WEBSOCKET: Server status: connected
I (8375) AUDIO: âœ… RX channel enabled (took 0 ms)
I (8385) AUDIO: [STEP 6/6] Hardware stabilization...
I (8391) AUDIO:   Phase 1: Initial settle (50ms)
I (8199) HOTPIN_MAIN: ðŸ“¡ WebSocket connection active - monitoring link
I (8446) AUDIO:   Phase 2: DMA verification
I (8446) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (8446) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (8603) AUDIO: [DIAG] Post-init state:
I (8603) AUDIO:   Free heap: 3936952 bytes
I (8603) AUDIO:   Free internal RAM: 93591 bytes
I (8606) AUDIO:   Free DMA-capable: 73227 bytes
I (8612) AUDIO:   Free PSRAM: 3863732 bytes
I (8616) AUDIO:   Timestamp: 7063 ms
I (8621) AUDIO:   Total init time: 203 ms
I (8625) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8643) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (8649) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (8655) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (8663) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (8670) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8688) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8706) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (8712) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (8719) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (8725) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (8731) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10001) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10008) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (10015) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10033) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (10040) AUDIO: âœ… RX channel disabled (took 0 ms)
I (10046) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (10052) AUDIO: âœ… TX channel disabled (took 0 ms)
I (10058) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (10115) AUDIO: [STEP 4/5] Deleting RX channel...
I (10115) AUDIO: âœ… RX channel deleted (took 0 ms)
I (10115) AUDIO: [STEP 5/5] Deleting TX channel...
I (10120) AUDIO: âœ… TX channel deleted (took 0 ms)
I (10125) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (10183) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10190) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (10196) AUDIO: â•‘ Camera Can Now Initialize
I (10201) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10219) STATE_MGR: Audio drivers already inactive; skipping deinit
I (10219) LED_CTRL: LED pattern -> 3
I (10226) STATE_MGR: Allowing memory stabilization (100ms)...
I (10230) HOTPIN_MAIN: Main task exiting - system running
I (10243) main_task: Returned from app_main()
I (10337) STATE_MGR: Camera will be initialized on-demand during capture
I (10337) STATE_MGR: I2S mutex released
I (10338) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10356) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (10363) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10382) MEM_MGR: â•‘ Internal RAM:
I (10386) MEM_MGR: â•‘   Free:             222727 bytes (217 KB)
I (10393) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10399) MEM_MGR: â•‘   Fragmentation:     51%
I (10405) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10423) MEM_MGR: â•‘ DMA-capable RAM:
I (10427) MEM_MGR: â•‘   Free:             202363 bytes (197 KB)
I (10434) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10441) MEM_MGR: â•‘   Fragmentation:     46%
I (10446) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10464) MEM_MGR: â•‘ PSRAM:
I (10468) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (10475) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (10482) MEM_MGR: â•‘   Fragmentation:      2%
I (10487) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10505) MEM_MGR: â•‘ Total Heap:
I (10510) MEM_MGR: â•‘   Free:             4362348 bytes (4260 KB)
I (10516) MEM_MGR: â•‘   Minimum Ever:     4362348 bytes (4260 KB)
I (10523) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10542) MEM_MGR: â•‘ Memory Delta from Baseline:
I (10547) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (10554) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (10561) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (10568) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (10575) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10593) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (10602) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (10618) STATE_MGR: WebSocket connected
I (12806) WEBSOCKET: WebSocket connection restored (cycle: 1, disconnects: 0, reconnects: 0)
I (16735) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (16735) BUTTON: Single click confirmed
I (16735) STATE_MGR: Single click - mode toggle requested
I (16742) STATE_MGR: Switching: Camera â†’ Voice (count: 1)
I (16798) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (16798) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16811) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (16818) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16837) MEM_MGR: â•‘ Internal RAM:
I (16841) MEM_MGR: â•‘   Free:             222727 bytes (217 KB)
I (16847) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (16854) MEM_MGR: â•‘   Fragmentation:     51%
I (16859) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16878) MEM_MGR: â•‘ DMA-capable RAM:
I (16882) MEM_MGR: â•‘   Free:             202363 bytes (197 KB)
I (16889) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (16896) MEM_MGR: â•‘   Fragmentation:     46%
I (16901) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16919) MEM_MGR: â•‘ PSRAM:
I (16923) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (16930) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (16937) MEM_MGR: â•‘   Fragmentation:      2%
I (16942) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16960) MEM_MGR: â•‘ Total Heap:
I (16964) MEM_MGR: â•‘   Free:             4362348 bytes (4260 KB)
I (16971) MEM_MGR: â•‘   Minimum Ever:     4362348 bytes (4260 KB)
I (16978) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16996) MEM_MGR: â•‘ Memory Delta from Baseline:
I (17002) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (17009) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (17016) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (17022) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (17029) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17048) STATE_MGR: Stopping camera...
I (17052) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17068) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (17075) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17092) STATE_MGR:   Timeout: 5000 ms
I (17096) STATE_MGR:   Timestamp: 15543 ms
I (17101) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (17107) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17123) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (17129) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17146) STATE_MGR:   Free heap before: 3967428 bytes
I (17151) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (17157) CAMERA: Deinitializing camera...
I (17162) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (17168) STATE_MGR:   Free heap after: 3967428 bytes
I (17174) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (17180) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17196) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (17202) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17219) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (17327) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (17427) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (17477) STATE_MGR:   âœ“ Total stabilization: 250ms
I (17477) STATE_MGR:   Timestamp: 15924 ms
I (17477) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17493) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (17499) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17516) STATE_MGR:   Free heap before: 3967428 bytes
I (17522) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17540) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (17547) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17565) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17583) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (17590) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (17608) AUDIO: [DIAG] Pre-init state:
I (17612) AUDIO:   Free heap: 3967428 bytes
I (17617) AUDIO:   Free internal RAM: 124135 bytes
I (17623) AUDIO:   Free DMA-capable: 103771 bytes
I (17628) AUDIO:   Free PSRAM: 3863732 bytes
I (17633) AUDIO:   Timestamp: 16080 ms
I (17637) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (17644) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (17652) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (17660) AUDIO:   DMA frame num (per desc): 1020
I (17666) AUDIO:   DMA total samples (effective): 4080
I (17672) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (17679) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (17685) AUDIO: âœ… I2S channels created (took 0 ms)
I (17691) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7e8
I (17697) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (17704) AUDIO:   Sample rate: 16000 Hz
I (17708) AUDIO:   MCLK: DISABLED
I (17712) AUDIO:   BCLK: GPIO14 (shared)
I (17717) AUDIO:   WS:   GPIO15 (shared)
I (17722) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (17729) AUDIO: âœ… TX channel configured (took 1 ms)
I (17733) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (17740) AUDIO:   Sample rate: 16000 Hz
I (17744) AUDIO:   MCLK: DISABLED
I (17748) AUDIO:   BCLK: GPIO14 (shared)
I (17753) AUDIO:   WS:   GPIO15 (shared)
I (17758) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (17764) AUDIO: âœ… RX channel configured (took 0 ms)
I (17769) AUDIO: [STEP 4/6] Enabling TX channel...
I (17775) AUDIO: âœ… TX channel enabled (took 0 ms)
I (17780) AUDIO: [STEP 5/6] Enabling RX channel...
I (17786) AUDIO: âœ… RX channel enabled (took 0 ms)
I (17791) AUDIO: [STEP 6/6] Hardware stabilization...
I (17797) AUDIO:   Phase 1: Initial settle (50ms)
I (17852) AUDIO:   Phase 2: DMA verification
I (17852) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (17853) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (18009) AUDIO: [DIAG] Post-init state:
I (18009) AUDIO:   Free heap: 3941424 bytes
I (18009) AUDIO:   Free internal RAM: 98131 bytes
I (18013) AUDIO:   Free DMA-capable: 77767 bytes
I (18018) AUDIO:   Free PSRAM: 3863732 bytes
I (18023) AUDIO:   Timestamp: 16470 ms
I (18028) AUDIO:   Total init time: 201 ms
I (18032) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18050) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (18056) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (18062) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (18071) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (18077) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18095) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18113) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (18120) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (18126) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (18133) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (18139) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18157) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (18163) STATE_MGR:   Free heap after: 3941424 bytes
I (18169) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18185) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (18191) STATE_MGR: â•‘ Total transition time: 889 ms
I (18197) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18213) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18229) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (18235) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18252) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (18260) TTS: No pending audio to flush
I (18289) TTS: TTS decoder session reset for next audio stream
I (18289) TTS: âœ… TTS decoder flushed and reset for next session
I (18291) STT: Starting STT pipeline...
I (18295) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (18305) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (18312) STT:   Current time: 16758 ms
I (18315) STT: âœ… STT pipeline started
I (18316) STT:   Free heap: 3932872 bytes
I (18316) STT: Audio streaming session activated
I (18331) STT: Connection stabilization delay (500ms)...
I (18370) TTS: ðŸŽµ Starting TTS decoder...
I (18370) TTS: Initializing TTS decoder...
W (18370) TTS: TTS decoder already initialized
I (18402) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (18403) TTS: âœ… TTS decoder started successfully
I (18408) TTS: ðŸŽµ TTS playback task started on Core 1
I (18412) TTS: âœ… TTS playback task registered with watchdog
I (18419) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (18525) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (18525) STT:   âœ“ Audio driver initialized
I (18526) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (18633) STT:   Total stabilization: 300ms
I (18633) STT:   Timestamp: 17080 ms
I (18633) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (18637) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37bc (with safety padding)
I (18646) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18662) STT: â•‘ ðŸŽ¤ STARTING AUDIO CAPTURE
I (18667) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (18673) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18731) LED_CTRL: LED pattern -> 1
I (18732) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18743) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (18750) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18768) MEM_MGR: â•‘ Internal RAM:
I (18772) MEM_MGR: â•‘   Free:             124135 bytes (121 KB)
I (18779) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (18786) MEM_MGR: â•‘   Fragmentation:     25%
I (18791) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18809) MEM_MGR: â•‘ DMA-capable RAM:
I (18814) MEM_MGR: â•‘   Free:             103771 bytes (101 KB)
I (18821) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (18827) MEM_MGR: â•‘   Fragmentation:     10%
I (18832) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18836) STT: Testing WebSocket transport health...
I (18851) MEM_MGR: â•‘ PSRAM:
I (18860) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (18863) STT: âœ… WebSocket transport verified healthy
I (18867) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (18880) MEM_MGR: â•‘   Fragmentation:      2%
I (18885) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18903) MEM_MGR: â•‘ Total Heap:
I (18907) MEM_MGR: â•‘   Free:             3967428 bytes (3874 KB)
I (18914) MEM_MGR: â•‘   Minimum Ever:     3933600 bytes (3841 KB)
I (18921) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18940) MEM_MGR: â•‘ Memory Delta from Baseline:
I (18945) MEM_MGR: â•‘   Internal RAM:     -101000 bytes ( -98 KB)
I (18952) MEM_MGR: â•‘   DMA-capable:      -101000 bytes ( -98 KB)
I (18959) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (18966) MEM_MGR: â•‘   Total Heap:       -397328 bytes (-388 KB)
I (18972) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (18973) STT: Starting audio streaming to server...
I (18991) STATE_MGR: âœ… Voice mode transition complete
I (19002) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (19018) STATE_MGR: STT pipeline reported start
I (19028) STATE_MGR: TTS playback start event received
I (19126) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 5, "bytes_received": 16400}
I (19128) WEBSOCKET: Server status: receiving
I (19747) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 36880}
I (19748) WEBSOCKET: Server status: receiving
I (20366) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 15, "bytes_received": 57360}
I (20367) WEBSOCKET: Server status: receiving
I (21083) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 77840}
I (21085) WEBSOCKET: Server status: receiving
I (21152) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (21152) BUTTON: Single click confirmed
W (21152) STATE_MGR: Guardrail soft override: stopping voice pipeline (user cancellation)
I (21161) STATE_MGR: Single click - mode toggle requested
I (21167) STATE_MGR: Switching: Voice â†’ Camera (count: 2)
I (21224) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (21224) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21237) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (21244) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21263) MEM_MGR: â•‘ Internal RAM:
I (21267) MEM_MGR: â•‘   Free:             124135 bytes (121 KB)
I (21274) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (21280) MEM_MGR: â•‘   Fragmentation:     25%
I (21286) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21304) MEM_MGR: â•‘ DMA-capable RAM:
I (21308) MEM_MGR: â•‘   Free:             103771 bytes (101 KB)
I (21315) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (21322) MEM_MGR: â•‘   Fragmentation:     10%
I (21327) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21345) MEM_MGR: â•‘ PSRAM:
I (21349) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (21356) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (21363) MEM_MGR: â•‘   Fragmentation:      2%
I (21368) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21386) MEM_MGR: â•‘ Total Heap:
I (21391) MEM_MGR: â•‘   Free:             3967428 bytes (3874 KB)
I (21397) MEM_MGR: â•‘   Minimum Ever:     3933600 bytes (3841 KB)
I (21404) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21423) MEM_MGR: â•‘ Memory Delta from Baseline:
I (21428) MEM_MGR: â•‘   Internal RAM:     -101000 bytes ( -98 KB)
I (21435) MEM_MGR: â•‘   DMA-capable:      -101000 bytes ( -98 KB)
I (21442) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (21449) MEM_MGR: â•‘   Total Heap:       -397328 bytes (-388 KB)
I (21456) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21474) STATE_MGR: Stopping voice mode components...
I (21480) STT: Stopping STT pipeline...
I (21484) STT: Draining ring buffer (5120 bytes pending) before shutdown...
I (21485) STT: Audio capture task stopped (captured 95232 bytes total)
I (21499) STT: Ring buffer drained and cleared successfully
I (21506) STT: Streaming task received stop signal
I (21511) STT: Sending EOS signal...
I (21515) WEBSOCKET: Sending EOS signal
I (21523) STT: Audio streaming session complete (streamed 90112 bytes in 22 chunks)
I (21553) STT: STT pipeline stopped
I (21667) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (21668) WEBSOCKET: Server status: processing
I (21671) WEBSOCKET: Server stage: transcription
I (21676) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (21683) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (22189) LED_CTRL: LED pattern -> 4
I (22275) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hello hello"}
I (22276) WEBSOCKET: Server status: processing
I (22280) WEBSOCKET: Server stage: llm
I (22285) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (22291) WEBSOCKET: Entering LLM stage - continuing processing indication
I (22684) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "Hello, how can I assist you today?"}
I (22687) WEBSOCKET: Server status: processing
I (22691) WEBSOCKET: Server stage: tts
I (22696) WEBSOCKET: Pipeline stage changed: llm -> tts
I (22702) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (22709) LED_CTRL: LED pattern -> 3
I (22713) TTS: ðŸŽµ Starting TTS decoder...
W (22718) TTS: TTS decoder already running
W (22723) WEBSOCKET: TTS audio arriving after voice mode exit (state=3) - will attempt playback
I (22893) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 1, total: 4096)
I (22894) WEBSOCKET: ðŸŽ™ï¸ New audio session started (timestamp: 21340 ms, bytes: 4096)
I (22899) TTS: Received audio chunk #1: 4096 bytes
I (22905) TTS: Chunk #1 first 12 bytes: 52 49 46 46 BC 70 01 00 57 41 56 45
I (22913) TTS: ðŸŽ™ï¸ First real audio data received for session (4096 bytes)
I (22927) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 2, total: 8192)
I (22929) TTS: Received audio chunk #2: 4096 bytes
I (22934) TTS: Chunk #2 first 12 bytes: 9D FE 04 FF C8 FF 8C 00 DA 00 E6 00
I (22948) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 3, total: 12288)
I (22950) TTS: Received audio chunk #3: 4096 bytes
I (22955) TTS: Chunk #3 first 12 bytes: E4 04 E4 02 D8 01 72 FF E8 FB 1F F7
I (22970) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 4, total: 16384)
I (22971) TTS: Received audio chunk #4: 4096 bytes
I (22977) TTS: Chunk #4 first 12 bytes: 7A 0C 9F 0B 21 0A 77 07 B6 03 16 00
I (22987) TTS: âœ… WAV header parsed successfully
I (22990) TTS: === WAV File Info ===
I (22994) TTS: Sample Rate: 16000 Hz
I (22995) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 5, total: 20480)
I (22998) TTS: Channels: 1
I (23007) TTS: Received audio chunk #5: 4096 bytes
I (23010) TTS: Bits per Sample: 16
I (23015) TTS: Chunk #5 first 12 bytes: C4 FF C4 FF C4 FF C1 FF BD FF BE FF
I (23019) TTS: Audio Format: 1 (PCM)
I (23031) TTS: Declared Data Size: 94360 bytes
I (23034) TTS: Received audio chunk #6: 4096 bytes
I (23036) TTS: Block Align: 2
I (23046) TTS: Byte Rate: 32000
I (23049) TTS: Received audio chunk #7: 4096 bytes
I (23049) TTS: ====================
I (23062) TTS: Received audio chunk #8: 4096 bytes
I (23073) TTS: Received audio chunk #9: 4096 bytes
I (23082) TTS: Received audio chunk #10: 4096 bytes
I (23084) TTS: ðŸ”” Playback start feedback dispatched (bytes_received=36864)
I (23086) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (23097) TTS: Received audio chunk #11: 4096 bytes
I (23109) TTS: Received audio chunk #12: 4096 bytes
I (23118) TTS: Received audio chunk #13: 4096 bytes
I (23127) TTS: Received audio chunk #14: 4096 bytes
I (23139) TTS: Received audio chunk #15: 4096 bytes
I (23147) TTS: Received audio chunk #16: 4096 bytes
I (23156) TTS: Received audio chunk #17: 4096 bytes
I (23165) TTS: Received audio chunk #18: 4096 bytes
I (23174) TTS: Received audio chunk #19: 4096 bytes
I (23184) TTS: Received audio chunk #20: 4096 bytes
I (23194) TTS: Received audio chunk #21: 4096 bytes
I (23204) TTS: Received audio chunk #22: 4096 bytes
I (23212) TTS: Received audio chunk #23: 4096 bytes
I (23216) TTS: Received audio chunk #24: 196 bytes
I (23219) WEBSOCKET: Received text message: {"status": "complete"}
I (23220) WEBSOCKET: Server status: complete
I (23224) WEBSOCKET: Pipeline stage changed: tts -> complete
I (23231) WEBSOCKET: Exiting TTS stage (transition to complete)
I (23256) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (23337) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (23353) STATE_MGR: Voice pipeline reported COMPLETE
I (23353) STATE_MGR: Waiting for TTS playback drain (~86256 bytes pending, timeout 15000 ms)
I (23383) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (23510) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (23638) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (23765) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
W (23857) TTS: TTS wait for idle timeout after 500 ms
W (23857) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (23860) TTS:   Data: received=94404, header=0, played=24532, pending=69872
W (23868) STATE_MGR: TTS wait for idle timeout #1 (drain_checks=0)
I (23893) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (24020) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (24148) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (24275) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (24403) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
W (24475) TTS: TTS wait for idle timeout after 500 ms
W (24475) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (24478) TTS:   Data: received=94404, header=0, played=45012, pending=49392
W (24486) STATE_MGR: TTS wait for idle timeout #2 (drain_checks=1)
I (24530) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (24658) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (24785) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (24913) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (25040) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
W (25093) TTS: TTS wait for idle timeout after 500 ms
W (25093) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (25096) TTS:   Data: received=94404, header=0, played=65492, pending=28912
W (25104) STATE_MGR: TTS wait for idle timeout #3 (drain_checks=2)
I (25168) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (25295) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (25423) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (25550) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (25678) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
W (25711) TTS: TTS wait for idle timeout after 500 ms
W (25711) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (25714) TTS:   Data: received=94404, header=0, played=85972, pending=8432
W (25722) STATE_MGR: TTS wait for idle timeout #4 (drain_checks=3)
I (25805) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (25932) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (26033) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (26033) TTS: ðŸŽµ TTS playback task exiting (played 94360 bytes, result: ESP_OK)
I (26038) TTS: Playing TTS completion feedback to signal readiness for next input
I (26079) TTS: TTS playback completed flag set - task exiting (after 5 checks)
I (26079) STATE_MGR: TTS decoder confirmed idle
I (26081) STATE_MGR: Flushing and resetting TTS decoder for next session
I (26089) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (26096) TTS: Flushing pending audio before reset (~44 bytes)
I (26103) TTS: TTS playback completed flag set - task exiting (after 0 checks)
I (26136) TTS: TTS decoder session reset for next audio stream
I (26136) TTS: âœ… TTS decoder flushed and reset for next session
I (26338) TTS: â¹ï¸ Stopping TTS decoder...
W (26338) TTS: TTS decoder not running
I (26368) TTS:   âœ“ DMA buffer freed from PSRAM
I (26368) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (26370) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (26467) STATE_MGR: Acquiring I2S mutex...
I (26467) STATE_MGR: Deinitializing audio drivers...
I (26467) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26485) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (26492) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26510) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (26517) AUDIO: âœ… RX channel disabled (took 0 ms)
I (26523) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (26529) AUDIO: âœ… TX channel disabled (took 0 ms)
I (26535) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (26591) AUDIO: [STEP 4/5] Deleting RX channel...
I (26592) AUDIO: âœ… RX channel deleted (took 0 ms)
I (26592) AUDIO: [STEP 5/5] Deleting TX channel...
I (26597) AUDIO: âœ… TX channel deleted (took 0 ms)
I (26602) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (26660) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26667) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (26673) AUDIO: â•‘ Camera Can Now Initialize
I (26679) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26747) STATE_MGR: Allowing memory stabilization (100ms)...
I (26847) STATE_MGR: Camera will be initialized on-demand during capture
I (26847) STATE_MGR: I2S mutex released
I (26848) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26866) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (26873) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26892) MEM_MGR: â•‘ Internal RAM:
I (26896) MEM_MGR: â•‘   Free:             124135 bytes (121 KB)
I (26903) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (26909) MEM_MGR: â•‘   Fragmentation:     25%
I (26915) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26933) MEM_MGR: â•‘ DMA-capable RAM:
I (26937) MEM_MGR: â•‘   Free:             103771 bytes (101 KB)
I (26944) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (26951) MEM_MGR: â•‘   Fragmentation:     10%
I (26956) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26974) MEM_MGR: â•‘ PSRAM:
I (26978) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (26985) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (26992) MEM_MGR: â•‘   Fragmentation:      2%
I (26997) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27015) MEM_MGR: â•‘ Total Heap:
I (27020) MEM_MGR: â•‘   Free:             3967428 bytes (3874 KB)
I (27026) MEM_MGR: â•‘   Minimum Ever:     3933600 bytes (3841 KB)
I (27033) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27052) MEM_MGR: â•‘ Memory Delta from Baseline:
I (27057) MEM_MGR: â•‘   Internal RAM:     -101000 bytes ( -98 KB)
I (27064) MEM_MGR: â•‘   DMA-capable:      -101000 bytes ( -98 KB)
I (27071) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (27078) MEM_MGR: â•‘   Total Heap:       -397328 bytes (-388 KB)
I (27085) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27103) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (27113) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27130) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (27137) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27155) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27173) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (27181) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27199) AUDIO: [DIAG] Pre-init state:
I (27203) AUDIO:   Free heap: 3967264 bytes
I (27208) AUDIO:   Free internal RAM: 123971 bytes
I (27213) AUDIO:   Free DMA-capable: 103607 bytes
I (27219) AUDIO:   Free PSRAM: 3863732 bytes
I (27224) AUDIO:   Timestamp: 25671 ms
I (27228) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (27235) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (27243) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (27251) AUDIO:   DMA frame num (per desc): 1020
I (27257) AUDIO:   DMA total samples (effective): 4080
I (27262) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (27269) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (27276) AUDIO: âœ… I2S channels created (took 0 ms)
I (27281) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb630
I (27288) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (27295) AUDIO:   Sample rate: 16000 Hz
I (27299) AUDIO:   MCLK: DISABLED
I (27303) AUDIO:   BCLK: GPIO14 (shared)
I (27308) AUDIO:   WS:   GPIO15 (shared)
I (27312) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (27319) AUDIO: âœ… TX channel configured (took 1 ms)
I (27324) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (27331) AUDIO:   Sample rate: 16000 Hz
I (27335) AUDIO:   MCLK: DISABLED
I (27339) AUDIO:   BCLK: GPIO14 (shared)
I (27344) AUDIO:   WS:   GPIO15 (shared)
I (27348) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (27354) AUDIO: âœ… RX channel configured (took 0 ms)
I (27360) AUDIO: [STEP 4/6] Enabling TX channel...
I (27365) AUDIO: âœ… TX channel enabled (took 0 ms)
I (27371) AUDIO: [STEP 5/6] Enabling RX channel...
I (27376) AUDIO: âœ… RX channel enabled (took 0 ms)
I (27382) AUDIO: [STEP 6/6] Hardware stabilization...
I (27388) AUDIO:   Phase 1: Initial settle (50ms)
I (27443) AUDIO:   Phase 2: DMA verification
I (27443) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (27443) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (27601) AUDIO: [DIAG] Post-init state:
I (27601) AUDIO:   Free heap: 3941280 bytes
I (27601) AUDIO:   Free internal RAM: 97987 bytes
I (27605) AUDIO:   Free DMA-capable: 77623 bytes
I (27610) AUDIO:   Free PSRAM: 3863732 bytes
I (27615) AUDIO:   Timestamp: 26062 ms
I (27620) AUDIO:   Total init time: 201 ms
I (27624) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27642) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (27648) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (27654) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (27663) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (27669) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27687) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27705) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (27712) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (27718) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (27725) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (27731) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28032) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28039) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (28047) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28065) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (28072) AUDIO: âœ… RX channel disabled (took 0 ms)
I (28077) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (28084) AUDIO: âœ… TX channel disabled (took 0 ms)
I (28089) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (28146) AUDIO: [STEP 4/5] Deleting RX channel...
I (28147) AUDIO: âœ… RX channel deleted (took 0 ms)
I (28147) AUDIO: [STEP 5/5] Deleting TX channel...
I (28152) AUDIO: âœ… TX channel deleted (took 0 ms)
I (28157) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (28215) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28222) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (28229) AUDIO: â•‘ Camera Can Now Initialize
I (28234) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28252) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (28267) STATE_MGR: STT pipeline reported stop
I (28277) STATE_MGR: Pipeline stage event: transcription
I (28287) STATE_MGR: Pipeline stage event: llm
I (28297) STATE_MGR: Pipeline stage event: tts
I (28307) STATE_MGR: TTS playback start event received
I (28317) STATE_MGR: Pipeline stage event: complete
I (31597) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (31597) BUTTON: Single click confirmed
I (31597) STATE_MGR: Single click - mode toggle requested
I (31603) STATE_MGR: Switching: Camera â†’ Voice (count: 3)
I (31660) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (31660) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31673) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (31680) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31699) MEM_MGR: â•‘ Internal RAM:
I (31703) MEM_MGR: â•‘   Free:             124135 bytes (121 KB)
I (31709) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (31716) MEM_MGR: â•‘   Fragmentation:     25%
I (31721) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31740) MEM_MGR: â•‘ DMA-capable RAM:
I (31744) MEM_MGR: â•‘   Free:             103771 bytes (101 KB)
I (31751) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (31758) MEM_MGR: â•‘   Fragmentation:     10%
I (31763) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31781) MEM_MGR: â•‘ PSRAM:
I (31785) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (31792) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (31799) MEM_MGR: â•‘   Fragmentation:      2%
I (31804) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31822) MEM_MGR: â•‘ Total Heap:
I (31826) MEM_MGR: â•‘   Free:             3967428 bytes (3874 KB)
I (31833) MEM_MGR: â•‘   Minimum Ever:     3933600 bytes (3841 KB)
I (31840) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31858) MEM_MGR: â•‘ Memory Delta from Baseline:
I (31864) MEM_MGR: â•‘   Internal RAM:     -101000 bytes ( -98 KB)
I (31871) MEM_MGR: â•‘   DMA-capable:      -101000 bytes ( -98 KB)
I (31878) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (31884) MEM_MGR: â•‘   Total Heap:       -397328 bytes (-388 KB)
I (31891) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31910) STATE_MGR: Stopping camera...
I (31914) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31930) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (31937) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31954) STATE_MGR:   Timeout: 5000 ms
I (31958) STATE_MGR:   Timestamp: 30405 ms
I (31963) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (31969) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31985) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (31991) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32008) STATE_MGR:   Free heap before: 3967264 bytes
I (32013) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (32019) CAMERA: Deinitializing camera...
I (32024) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (32030) STATE_MGR:   Free heap after: 3967264 bytes
I (32036) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (32042) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32058) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (32064) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32081) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (32189) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (32289) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (32339) STATE_MGR:   âœ“ Total stabilization: 250ms
I (32339) STATE_MGR:   Timestamp: 30786 ms
I (32339) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32355) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (32361) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32378) STATE_MGR:   Free heap before: 3967264 bytes
I (32384) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32402) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (32409) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32427) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32445) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (32452) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32470) AUDIO: [DIAG] Pre-init state:
I (32474) AUDIO:   Free heap: 3967264 bytes
I (32479) AUDIO:   Free internal RAM: 123971 bytes
I (32485) AUDIO:   Free DMA-capable: 103607 bytes
I (32490) AUDIO:   Free PSRAM: 3863732 bytes
I (32495) AUDIO:   Timestamp: 30942 ms
I (32499) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (32506) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (32514) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (32522) AUDIO:   DMA frame num (per desc): 1020
I (32528) AUDIO:   DMA total samples (effective): 4080
I (32534) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (32541) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (32547) AUDIO: âœ… I2S channels created (took 0 ms)
I (32553) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb630
I (32559) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (32566) AUDIO:   Sample rate: 16000 Hz
I (32570) AUDIO:   MCLK: DISABLED
I (32574) AUDIO:   BCLK: GPIO14 (shared)
I (32579) AUDIO:   WS:   GPIO15 (shared)
I (32584) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (32590) AUDIO: âœ… TX channel configured (took 1 ms)
I (32595) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (32602) AUDIO:   Sample rate: 16000 Hz
I (32606) AUDIO:   MCLK: DISABLED
I (32610) AUDIO:   BCLK: GPIO14 (shared)
I (32615) AUDIO:   WS:   GPIO15 (shared)
I (32620) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (32626) AUDIO: âœ… RX channel configured (took 0 ms)
I (32631) AUDIO: [STEP 4/6] Enabling TX channel...
I (32637) AUDIO: âœ… TX channel enabled (took 0 ms)
I (32642) AUDIO: [STEP 5/6] Enabling RX channel...
I (32648) AUDIO: âœ… RX channel enabled (took 0 ms)
I (32653) AUDIO: [STEP 6/6] Hardware stabilization...
I (32659) AUDIO:   Phase 1: Initial settle (50ms)
I (32714) AUDIO:   Phase 2: DMA verification
I (32714) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (32715) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (32872) AUDIO: [DIAG] Post-init state:
I (32872) AUDIO:   Free heap: 3941280 bytes
I (32872) AUDIO:   Free internal RAM: 97987 bytes
I (32876) AUDIO:   Free DMA-capable: 77623 bytes
I (32881) AUDIO:   Free PSRAM: 3863732 bytes
I (32886) AUDIO:   Timestamp: 31333 ms
I (32891) AUDIO:   Total init time: 201 ms
I (32895) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32913) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (32919) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (32925) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (32934) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (32940) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32958) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32976) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (32983) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (32989) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (32996) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (33002) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33020) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (33026) STATE_MGR:   Free heap after: 3941280 bytes
I (33032) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33048) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (33054) STATE_MGR: â•‘ Total transition time: 890 ms
I (33060) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33076) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33092) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (33098) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33115) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (33123) TTS: No pending audio to flush
I (33152) TTS: TTS decoder session reset for next audio stream
I (33152) TTS: âœ… TTS decoder flushed and reset for next session
I (33154) STT: Starting STT pipeline...
I (33158) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (33168) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (33175) STT:   Current time: 31622 ms
I (33178) STT: âœ… STT pipeline started
I (33179) STT:   Free heap: 3932728 bytes
I (33179) STT: Audio streaming session activated
I (33194) STT: Connection stabilization delay (500ms)...
I (33234) TTS: ðŸŽµ Starting TTS decoder...
I (33234) TTS: Initializing TTS decoder...
W (33234) TTS: TTS decoder already initialized
I (33264) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (33264) TTS: âœ… TTS decoder started successfully
I (33268) TTS: ðŸŽµ TTS playback task started on Core 1
I (33274) TTS: âœ… TTS playback task registered with watchdog
I (33280) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (33388) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (33388) STT:   âœ“ Audio driver initialized
I (33389) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (33496) STT:   Total stabilization: 300ms
I (33496) STT:   Timestamp: 31942 ms
I (33496) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (33500) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37bc (with safety padding)
I (33509) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33525) STT: â•‘ ðŸŽ¤ STARTING AUDIO CAPTURE
I (33530) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (33536) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33593) LED_CTRL: LED pattern -> 1
I (33594) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33605) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (33612) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33630) MEM_MGR: â•‘ Internal RAM:
I (33634) MEM_MGR: â•‘   Free:             123971 bytes (121 KB)
I (33641) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (33648) MEM_MGR: â•‘   Fragmentation:     25%
I (33653) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33671) MEM_MGR: â•‘ DMA-capable RAM:
I (33676) MEM_MGR: â•‘   Free:             103607 bytes (101 KB)
I (33683) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (33689) MEM_MGR: â•‘   Fragmentation:     10%
I (33695) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33700) STT: Testing WebSocket transport health...
I (33713) MEM_MGR: â•‘ PSRAM:
I (33722) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (33726) STT: âœ… WebSocket transport verified healthy
I (33729) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (33742) MEM_MGR: â•‘   Fragmentation:      2%
I (33747) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33765) MEM_MGR: â•‘ Total Heap:
I (33770) MEM_MGR: â•‘   Free:             3967264 bytes (3874 KB)
I (33776) MEM_MGR: â•‘   Minimum Ever:     3897912 bytes (3806 KB)
I (33783) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33802) MEM_MGR: â•‘ Memory Delta from Baseline:
I (33807) MEM_MGR: â•‘   Internal RAM:     -101164 bytes ( -98 KB)
I (33814) MEM_MGR: â•‘   DMA-capable:      -101164 bytes ( -98 KB)
I (33821) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (33828) MEM_MGR: â•‘   Total Heap:       -397492 bytes (-388 KB)
I (33835) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33835) STT: Starting audio streaming to server...
I (33853) STATE_MGR: âœ… Voice mode transition complete
I (33864) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (33880) STATE_MGR: STT pipeline reported start
I (33891) STATE_MGR: TTS playback start event received
I (33985) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 5, "bytes_received": 16400}
I (33986) WEBSOCKET: Server status: receiving
I (34606) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 36880}
I (34607) WEBSOCKET: Server status: receiving
I (35267) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 15, "bytes_received": 57360}
I (35269) WEBSOCKET: Server status: receiving
I (35933) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 77840}
I (35935) WEBSOCKET: Server status: receiving
I (36060) BUTTON: Single click confirmed
I (36060) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (36061) STATE_MGR: Single click - mode toggle requested
I (36067) STATE_MGR: Switching: Voice â†’ Camera (count: 4)
I (36124) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (36124) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36137) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (36144) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36162) MEM_MGR: â•‘ Internal RAM:
I (36167) MEM_MGR: â•‘   Free:             123971 bytes (121 KB)
I (36173) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (36180) MEM_MGR: â•‘   Fragmentation:     25%
I (36185) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36203) MEM_MGR: â•‘ DMA-capable RAM:
I (36208) MEM_MGR: â•‘   Free:             103607 bytes (101 KB)
I (36215) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (36221) MEM_MGR: â•‘   Fragmentation:     10%
I (36227) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36245) MEM_MGR: â•‘ PSRAM:
I (36249) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (36256) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (36262) MEM_MGR: â•‘   Fragmentation:      2%
I (36268) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36286) MEM_MGR: â•‘ Total Heap:
I (36290) MEM_MGR: â•‘   Free:             3967264 bytes (3874 KB)
I (36297) MEM_MGR: â•‘   Minimum Ever:     3897912 bytes (3806 KB)
I (36304) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36322) MEM_MGR: â•‘ Memory Delta from Baseline:
I (36328) MEM_MGR: â•‘   Internal RAM:     -101164 bytes ( -98 KB)
I (36334) MEM_MGR: â•‘   DMA-capable:      -101164 bytes ( -98 KB)
I (36341) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (36348) MEM_MGR: â•‘   Total Heap:       -397492 bytes (-388 KB)
I (36355) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36373) STATE_MGR: Stopping voice mode components...
I (36379) STT: Stopping STT pipeline...
I (36384) STT: Draining ring buffer (1024 bytes pending) before shutdown...
I (36399) STT: Ring buffer drained and cleared successfully
I (36410) STT: Audio capture task stopped (captured 96256 bytes total)
I (36432) STT: Streaming task received stop signal
I (36432) STT: Sending EOS signal...
I (36432) WEBSOCKET: Sending EOS signal
I (36441) STT: Audio streaming session complete (streamed 94208 bytes in 23 chunks)
I (36457) STT: STT pipeline stopped
I (36457) STATE_MGR: Voice pipeline reported COMPLETE
I (36457) STATE_MGR: Waiting for TTS playback drain (~0 bytes pending, timeout 15000 ms)
I (36499) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (36500) WEBSOCKET: Server status: processing
I (36504) WEBSOCKET: Server stage: transcription
I (36508) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (36515) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (36765) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (36766) STATE_MGR: TTS decoder confirmed idle
I (36769) STATE_MGR: Flushing and resetting TTS decoder for next session
I (36776) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (36784) TTS: Flushing pending audio before reset (~0 bytes)
I (37051) LED_CTRL: LED pattern -> 4
I (37055) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what is your name"}
I (37056) WEBSOCKET: Server status: processing
I (37061) WEBSOCKET: Server stage: llm
I (37065) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (37072) WEBSOCKET: Entering LLM stage - continuing processing indication
I (37090) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (37090) TTS: TTS decoder session reset for next audio stream
I (37095) TTS: âœ… TTS decoder flushed and reset for next session
I (37102) TTS: TTS playback task shutting down - is_running=0
I (37108) TTS: ðŸŽµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (37116) TTS:   âœ“ DMA buffer freed from PSRAM
I (37122) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (37253) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I'm Hotpin, your compact and helpful voice assistant."}
I (37257) WEBSOCKET: Server status: processing
I (37262) WEBSOCKET: Server stage: tts
I (37266) WEBSOCKET: Pipeline stage changed: llm -> tts
I (37272) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (37280) LED_CTRL: LED pattern -> 3
I (37284) TTS: ðŸŽµ Starting TTS decoder...
I (37289) TTS: Initializing TTS decoder...
W (37294) TTS: TTS decoder already initialized
I (37323) TTS: â¹ï¸ Stopping TTS decoder...
W (37324) TTS: TTS decoder not running
I (37330) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (37335) TTS: âœ… TTS decoder started successfully
W (37340) WEBSOCKET: TTS audio arriving after voice mode exit (state=3) - will attempt playback
I (37356) TTS: ðŸŽµ TTS playback task started on Core 1
I (37356) TTS: âœ… TTS playback task registered with watchdog
I (37359) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (37436) TTS: Received audio chunk #25: 4096 bytes
I (37437) TTS: New audio session detected - resetting chunk counter
I (37439) TTS: ðŸŽ™ï¸ First real audio data received for session (4096 bytes)
I (37452) TTS: Received audio chunk #2: 4096 bytes
I (37453) TTS: Chunk #2 first 12 bytes: EE EB 2C EB DA EE 93 F7 BA FF 9E 06
I (37456) STATE_MGR: Acquiring I2S mutex...
I (37464) STATE_MGR: Deinitializing audio drivers...
I (37470) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37466) TTS: Received audio chunk #3: 4096 bytes
I (37488) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (37493) TTS: Chunk #3 first 12 bytes: 40 FC 9E FB C1 FA 0C FA F5 F9 8A F9
I (37501) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37515) TTS: Received audio chunk #4: 4096 bytes
I (37526) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (37532) TTS: Chunk #4 first 12 bytes: D9 EE C1 F4 1C FD 92 03 AF 0A 9B 0E
I (37539) AUDIO: âœ… RX channel disabled (took 0 ms)
I (37552) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (37554) TTS: Received audio chunk #5: 4096 bytes
I (37558) AUDIO: âœ… TX channel disabled (took 0 ms)
I (37564) TTS: Chunk #5 first 12 bytes: 77 00 BD 00 AA 00 34 00 CB 00 94 00
I (37569) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (37489) TTS: âœ… WAV header parsed successfully
I (37584) TTS: Received audio chunk #6: 4096 bytes
I (37589) TTS: === WAV File Info ===
I (37599) TTS: Sample Rate: 16000 Hz
I (37601) TTS: Received audio chunk #7: 4096 bytes
I (37603) TTS: Channels: 1
I (37612) TTS: Bits per Sample: 16
I (37615) TTS: Received audio chunk #8: 4096 bytes
I (37616) TTS: Audio Format: 1 (PCM)
I (37626) TTS: Declared Data Size: 130726 bytes
I (37631) TTS: Block Align: 2
I (37634) AUDIO: [STEP 4/5] Deleting RX channel...
I (37629) TTS: Received audio chunk #9: 4096 bytes
I (37640) AUDIO: âœ… RX channel deleted (took 0 ms)
I (37651) AUDIO: [STEP 5/5] Deleting TX channel...
I (37653) TTS: Received audio chunk #10: 4096 bytes
I (37657) AUDIO: âœ… TX channel deleted (took 0 ms)
I (37668) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (37669) TTS: Received audio chunk #11: 4096 bytes
I (37641) TTS: Byte Rate: 32000
I (37685) TTS: ====================
I (37688) TTS: Received audio chunk #12: 4096 bytes
E (37689) AUDIO: I2S TX channel not initialized
E (37700) AUDIO_FEEDBACK: Beep write failed (ESP_ERR_INVALID_STATE), wrote 0/7680 bytes
I (37701) TTS: Received audio chunk #13: 4096 bytes
W (37708) TTS: Playback start feedback failed: ESP_ERR_INVALID_STATE
W (37721) TTS: Unable to set TX sample rate to 16000 Hz: ESP_ERR_INVALID_STATE
I (37725) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37721) TTS: Received audio chunk #14: 4096 bytes
I (37747) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (37759) AUDIO: â•‘ Camera Can Now Initialize
I (37759) TTS: Received audio chunk #15: 4096 bytes
I (37764) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37776) TTS: Received audio chunk #16: 4096 bytes
I (37747) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (37800) TTS: Received audio chunk #17: 4096 bytes
E (37805) AUDIO: I2S TX channel not initialized
E (37813) TTS: Stereo duplication write failed mid-stream: ESP_ERR_INVALID_STATE
I (37815) TTS: Received audio chunk #18: 4096 bytes
E (37821) TTS: Initial PCM write failed: ESP_ERR_INVALID_STATE
I (37833) TTS: ðŸŽµ TTS playback task exiting (played 0 bytes, result: ESP_ERR_INVALID_STATE)
I (37837) STATE_MGR: Allowing memory stabilization (100ms)...
W (37836) TTS: Rejecting audio chunks - TTS decoder not running (chunks rejected: 1, last: 4096 bytes)
I (37849) TTS:   âœ“ DMA buffer freed from PSRAM
I (37864) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (37872) TTS:   âœ“ Clearing 69632 bytes from stream buffer
I (37910) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (37949) STATE_MGR: Camera will be initialized on-demand during capture
I (37949) STATE_MGR: I2S mutex released
I (37950) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37969) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (37975) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37994) MEM_MGR: â•‘ Internal RAM:
I (37996) WEBSOCKET: Received text message: {"status": "complete"}
I (37998) MEM_MGR: â•‘   Free:             123971 bytes (121 KB)
I (38005) WEBSOCKET: Server status: complete
I (38012) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (38017) WEBSOCKET: Pipeline stage changed: tts -> complete
I (38023) MEM_MGR: â•‘   Fragmentation:     25%
I (38030) WEBSOCKET: Exiting TTS stage (transition to complete)
I (38035) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38060) MEM_MGR: â•‘ DMA-capable RAM:
I (38064) MEM_MGR: â•‘   Free:             103607 bytes (101 KB)
I (38071) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (38078) MEM_MGR: â•‘   Fragmentation:     10%
I (38083) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38101) MEM_MGR: â•‘ PSRAM:
I (38105) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (38112) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (38119) MEM_MGR: â•‘   Fragmentation:      2%
I (38124) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38141) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (38142) MEM_MGR: â•‘ Total Heap:
I (38154) MEM_MGR: â•‘   Free:             3967264 bytes (3874 KB)
I (38161) MEM_MGR: â•‘   Minimum Ever:     3897912 bytes (3806 KB)
I (38168) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38186) MEM_MGR: â•‘ Memory Delta from Baseline:
I (38192) MEM_MGR: â•‘   Internal RAM:     -101164 bytes ( -98 KB)
I (38199) MEM_MGR: â•‘   DMA-capable:      -101164 bytes ( -98 KB)
I (38206) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (38212) MEM_MGR: â•‘   Total Heap:       -397492 bytes (-388 KB)
I (38219) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38238) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (38247) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38265) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (38272) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38290) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38308) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (38315) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38333) AUDIO: [DIAG] Pre-init state:
I (38338) AUDIO:   Free heap: 3967264 bytes
I (38343) AUDIO:   Free internal RAM: 123971 bytes
I (38348) AUDIO:   Free DMA-capable: 103607 bytes
I (38354) AUDIO:   Free PSRAM: 3863732 bytes
I (38359) AUDIO:   Timestamp: 36805 ms
I (38363) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (38370) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (38378) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (38386) AUDIO:   DMA frame num (per desc): 1020
I (38391) AUDIO:   DMA total samples (effective): 4080
I (38397) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (38404) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (38411) AUDIO: âœ… I2S channels created (took 0 ms)
I (38416) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb630
I (38423) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (38429) AUDIO:   Sample rate: 16000 Hz
I (38434) AUDIO:   MCLK: DISABLED
I (38438) AUDIO:   BCLK: GPIO14 (shared)
I (38443) AUDIO:   WS:   GPIO15 (shared)
I (38447) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (38454) AUDIO: âœ… TX channel configured (took 1 ms)
I (38459) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (38465) AUDIO:   Sample rate: 16000 Hz
I (38470) AUDIO:   MCLK: DISABLED
I (38474) AUDIO:   BCLK: GPIO14 (shared)
I (38479) AUDIO:   WS:   GPIO15 (shared)
I (38483) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (38489) AUDIO: âœ… RX channel configured (took 0 ms)
I (38495) AUDIO: [STEP 4/6] Enabling TX channel...
I (38500) AUDIO: âœ… TX channel enabled (took 0 ms)
I (38506) AUDIO: [STEP 5/6] Enabling RX channel...
I (38511) AUDIO: âœ… RX channel enabled (took 0 ms)
I (38517) AUDIO: [STEP 6/6] Hardware stabilization...
I (38522) AUDIO:   Phase 1: Initial settle (50ms)
I (38578) AUDIO:   Phase 2: DMA verification
I (38578) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (38578) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (38735) AUDIO: [DIAG] Post-init state:
I (38735) AUDIO:   Free heap: 3941280 bytes
I (38735) AUDIO:   Free internal RAM: 97987 bytes
I (38739) AUDIO:   Free DMA-capable: 77623 bytes
I (38744) AUDIO:   Free PSRAM: 3863732 bytes
I (38749) AUDIO:   Timestamp: 37196 ms
I (38754) AUDIO:   Total init time: 201 ms
I (38758) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38776) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (38782) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (38788) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (38797) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (38803) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38821) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38839) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (38846) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (38852) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (38859) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (38865) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39166) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39173) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (39181) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39199) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (39206) AUDIO: âœ… RX channel disabled (took 0 ms)
I (39211) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (39218) AUDIO: âœ… TX channel disabled (took 0 ms)
I (39223) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (39280) AUDIO: [STEP 4/5] Deleting RX channel...
I (39281) AUDIO: âœ… RX channel deleted (took 0 ms)
I (39281) AUDIO: [STEP 5/5] Deleting TX channel...
I (39286) AUDIO: âœ… TX channel deleted (took 0 ms)
I (39291) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (39349) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39356) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (39362) AUDIO: â•‘ Camera Can Now Initialize
I (39368) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (39386) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (39401) STATE_MGR: STT pipeline reported stop
I (39411) STATE_MGR: Pipeline stage event: transcription
I (39421) STATE_MGR: Pipeline stage event: llm
I (39431) STATE_MGR: TTS playback start event received
I (39441) STATE_MGR: Pipeline stage event: tts
I (39451) STATE_MGR: TTS playback start event received
I (39461) STATE_MGR: Pipeline stage event: complete
I (43159) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (43160) STATE_MGR: Double-click detected - triggering capture sequence
I (43163) STATE_MGR: Starting camera capture sequence
I (43169) LED_CTRL: LED pattern -> 6
I (43173) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43191) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (43198) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43216) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43234) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (43241) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43259) AUDIO: [DIAG] Pre-init state:
I (43264) AUDIO:   Free heap: 3967264 bytes
I (43269) AUDIO:   Free internal RAM: 123971 bytes
I (43274) AUDIO:   Free DMA-capable: 103607 bytes
I (43279) AUDIO:   Free PSRAM: 3863732 bytes
I (43284) AUDIO:   Timestamp: 41731 ms
I (43289) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (43296) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (43304) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (43312) AUDIO:   DMA frame num (per desc): 1020
I (43317) AUDIO:   DMA total samples (effective): 4080
I (43323) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (43330) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (43336) AUDIO: âœ… I2S channels created (took 0 ms)
I (43342) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb630
I (43349) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (43355) AUDIO:   Sample rate: 16000 Hz
I (43360) AUDIO:   MCLK: DISABLED
I (43364) AUDIO:   BCLK: GPIO14 (shared)
I (43368) AUDIO:   WS:   GPIO15 (shared)
I (43373) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (43379) AUDIO: âœ… TX channel configured (took 0 ms)
I (43384) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (43391) AUDIO:   Sample rate: 16000 Hz
I (43396) AUDIO:   MCLK: DISABLED
I (43400) AUDIO:   BCLK: GPIO14 (shared)
I (43404) AUDIO:   WS:   GPIO15 (shared)
I (43409) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (43415) AUDIO: âœ… RX channel configured (took 0 ms)
I (43420) AUDIO: [STEP 4/6] Enabling TX channel...
I (43426) AUDIO: âœ… TX channel enabled (took 0 ms)
I (43431) AUDIO: [STEP 5/6] Enabling RX channel...
I (43437) AUDIO: âœ… RX channel enabled (took 0 ms)
I (43442) AUDIO: [STEP 6/6] Hardware stabilization...
I (43448) AUDIO:   Phase 1: Initial settle (50ms)
I (43504) AUDIO:   Phase 2: DMA verification
I (43504) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (43504) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (43661) AUDIO: [DIAG] Post-init state:
I (43661) AUDIO:   Free heap: 3941280 bytes
I (43661) AUDIO:   Free internal RAM: 97987 bytes
I (43665) AUDIO:   Free DMA-capable: 77623 bytes
I (43670) AUDIO:   Free PSRAM: 3863732 bytes
I (43675) AUDIO:   Timestamp: 42122 ms
I (43680) AUDIO:   Total init time: 200 ms
I (43684) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43702) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (43708) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (43714) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (43723) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (43729) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43747) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43765) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (43772) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (43778) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (43785) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (43791) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44141) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44148) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (44156) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44174) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (44181) AUDIO: âœ… RX channel disabled (took 0 ms)
I (44186) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (44193) AUDIO: âœ… TX channel disabled (took 0 ms)
I (44198) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (44255) AUDIO: [STEP 4/5] Deleting RX channel...
I (44256) AUDIO: âœ… RX channel deleted (took 0 ms)
I (44256) AUDIO: [STEP 5/5] Deleting TX channel...
I (44261) AUDIO: âœ… TX channel deleted (took 0 ms)
I (44266) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (44324) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44331) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (44337) AUDIO: â•‘ Camera Can Now Initialize
I (44343) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44361) STATE_MGR: Capturing frame from camera
I (44366) CAMERA: Initializing camera...
I (44371) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (44380) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (44389) cam_hal: cam init ok
I (44393) sccb-ng: pin_sda 26 pin_scl 27
I (44396) sccb-ng: sccb_i2c_port=1
I (44402) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (44444) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (44444) camera: Detected OV2640 camera
I (44444) camera: Detected camera at address=0x30
I (44524) cam_hal: PSRAM DMA mode disabled
I (44525) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (44529) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (44536) cam_hal: cam config ok
I (44540) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (44623) CAMERA: Camera initialized successfully
I (44682) STATE_MGR: Frame captured: 10100 bytes
I (44683) JSON_PROTO: Generated session ID: hotpin-998C64-43
I (44683) STATE_MGR: Uploading image using session hotpin-998C64-43
I (44689) HTTP_CLIENT: Uploading image: session=hotpin-998C64-43, size=10100 bytes
I (44699) HTTP_CLIENT: POST body assembled: 10357 bytes
I (44705) HTTP_CLIENT: Sending POST request to http://10.143.111.58:8000/image
I (45001) HTTP_CLIENT: HTTP POST Status = 200, content_length = 199
I (45002) HTTP_CLIENT: Image uploaded successfully
I (45003) HTTP_CLIENT: Server response: {"status":"success","message":"Image received successfully","session":"hotpin-998C64-43","filename":"image.jpg","size_bytes":10100,"saved_path":"captured_images/hotpin-998C64-43_20251103_184527.jpg"}
I (45026) CAMERA: Deinitializing camera...
I (45031) CAMERA: Camera deinitialized
I (45034) STATE_MGR: Camera deinitialized - DMA memory freed
I (45040) STATE_MGR: Image uploaded successfully
I (45046) LED_CTRL: LED pattern -> 3
I (45050) STATE_MGR: Camera capture sequence complete
I (45066) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (48340) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (48340) BUTTON: Single click confirmed
I (48340) STATE_MGR: Single click - mode toggle requested
I (48347) STATE_MGR: Switching: Camera â†’ Voice (count: 5)
I (48403) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (48403) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48416) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (48423) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48442) MEM_MGR: â•‘ Internal RAM:
I (48446) MEM_MGR: â•‘   Free:             123499 bytes (120 KB)
I (48452) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (48459) MEM_MGR: â•‘   Fragmentation:     24%
I (48464) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48483) MEM_MGR: â•‘ DMA-capable RAM:
I (48487) MEM_MGR: â•‘   Free:             103135 bytes (100 KB)
I (48494) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (48501) MEM_MGR: â•‘   Fragmentation:      9%
I (48506) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48524) MEM_MGR: â•‘ PSRAM:
I (48528) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (48535) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (48542) MEM_MGR: â•‘   Fragmentation:      2%
I (48547) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48565) MEM_MGR: â•‘ Total Heap:
I (48569) MEM_MGR: â•‘   Free:             3966792 bytes (3873 KB)
I (48576) MEM_MGR: â•‘   Minimum Ever:     3830504 bytes (3740 KB)
I (48583) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48601) MEM_MGR: â•‘ Memory Delta from Baseline:
I (48607) MEM_MGR: â•‘   Internal RAM:     -101636 bytes ( -99 KB)
I (48614) MEM_MGR: â•‘   DMA-capable:      -101636 bytes ( -99 KB)
I (48621) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (48627) MEM_MGR: â•‘   Total Heap:       -397964 bytes (-388 KB)
I (48634) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48653) STATE_MGR: Stopping camera...
I (48657) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48673) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (48680) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48697) STATE_MGR:   Timeout: 5000 ms
I (48701) STATE_MGR:   Timestamp: 47148 ms
I (48706) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (48712) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48728) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (48734) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48751) STATE_MGR:   Free heap before: 3966792 bytes
I (48756) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (48762) CAMERA: Deinitializing camera...
I (48767) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (48773) STATE_MGR:   Free heap after: 3966792 bytes
I (48779) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (48785) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48801) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (48807) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48824) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (48932) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (49032) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (49082) STATE_MGR:   âœ“ Total stabilization: 250ms
I (49082) STATE_MGR:   Timestamp: 47529 ms
I (49082) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49098) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (49104) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49121) STATE_MGR:   Free heap before: 3966792 bytes
I (49127) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49145) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (49152) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49170) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49188) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (49195) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49213) AUDIO: [DIAG] Pre-init state:
I (49217) AUDIO:   Free heap: 3966792 bytes
I (49222) AUDIO:   Free internal RAM: 123499 bytes
I (49228) AUDIO:   Free DMA-capable: 103135 bytes
I (49233) AUDIO:   Free PSRAM: 3863732 bytes
I (49238) AUDIO:   Timestamp: 47685 ms
I (49242) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (49249) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (49257) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (49265) AUDIO:   DMA frame num (per desc): 1020
I (49271) AUDIO:   DMA total samples (effective): 4080
I (49277) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (49284) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (49290) AUDIO: âœ… I2S channels created (took 0 ms)
I (49296) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffcb690
I (49302) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (49309) AUDIO:   Sample rate: 16000 Hz
I (49313) AUDIO:   MCLK: DISABLED
I (49317) AUDIO:   BCLK: GPIO14 (shared)
I (49322) AUDIO:   WS:   GPIO15 (shared)
I (49327) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (49334) AUDIO: âœ… TX channel configured (took 1 ms)
I (49338) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (49345) AUDIO:   Sample rate: 16000 Hz
I (49349) AUDIO:   MCLK: DISABLED
I (49353) AUDIO:   BCLK: GPIO14 (shared)
I (49358) AUDIO:   WS:   GPIO15 (shared)
I (49363) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (49369) AUDIO: âœ… RX channel configured (took 0 ms)
I (49374) AUDIO: [STEP 4/6] Enabling TX channel...
I (49380) AUDIO: âœ… TX channel enabled (took 0 ms)
I (49385) AUDIO: [STEP 5/6] Enabling RX channel...
I (49391) AUDIO: âœ… RX channel enabled (took 0 ms)
I (49396) AUDIO: [STEP 6/6] Hardware stabilization...
I (49402) AUDIO:   Phase 1: Initial settle (50ms)
I (49457) AUDIO:   Phase 2: DMA verification
I (49457) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (49458) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (49614) AUDIO: [DIAG] Post-init state:
I (49614) AUDIO:   Free heap: 3940812 bytes
I (49614) AUDIO:   Free internal RAM: 97519 bytes
I (49618) AUDIO:   Free DMA-capable: 77155 bytes
I (49623) AUDIO:   Free PSRAM: 3863732 bytes
I (49628) AUDIO:   Timestamp: 48075 ms
I (49633) AUDIO:   Total init time: 201 ms
I (49637) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49655) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (49661) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (49667) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (49676) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (49682) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49700) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49718) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (49725) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (49731) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (49738) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (49744) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49762) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (49768) STATE_MGR:   Free heap after: 3940812 bytes
I (49774) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49790) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (49796) STATE_MGR: â•‘ Total transition time: 889 ms
I (49802) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49818) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49834) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (49840) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49857) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (49865) TTS: No pending audio to flush
I (49894) TTS: TTS decoder session reset for next audio stream
I (49894) TTS: âœ… TTS decoder flushed and reset for next session
I (49896) STT: Starting STT pipeline...
I (49900) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (49910) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (49922) STT:   Current time: 48368 ms
I (49923) STT: âœ… STT pipeline started
I (49923) STT:   Free heap: 3932260 bytes
I (49923) STT: Audio streaming session activated
I (49936) STT: Connection stabilization delay (500ms)...
I (49976) TTS: ðŸŽµ Starting TTS decoder...
I (49976) TTS: Initializing TTS decoder...
W (49976) TTS: TTS decoder already initialized
I (50006) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (50006) TTS: âœ… TTS decoder started successfully
I (50010) TTS: ðŸŽµ TTS playback task started on Core 1
I (50016) TTS: âœ… TTS playback task registered with watchdog
I (50023) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (50130) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (50130) STT:   âœ“ Audio driver initialized
I (50131) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (50238) STT:   Total stabilization: 300ms
I (50238) STT:   Timestamp: 48684 ms
I (50238) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (50242) STT:   âœ“ DMA-capable buffer allocated at 0x3ffca9cc (with safety padding)
I (50251) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50267) STT: â•‘ ðŸŽ¤ STARTING AUDIO CAPTURE
I (50272) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (50278) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50335) LED_CTRL: LED pattern -> 1
I (50336) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50347) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (50354) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50372) MEM_MGR: â•‘ Internal RAM:
I (50376) MEM_MGR: â•‘   Free:             123499 bytes (120 KB)
I (50383) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (50390) MEM_MGR: â•‘   Fragmentation:     24%
I (50395) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50413) MEM_MGR: â•‘ DMA-capable RAM:
I (50418) MEM_MGR: â•‘   Free:             103135 bytes (100 KB)
I (50425) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (50431) MEM_MGR: â•‘   Fragmentation:      9%
I (50436) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50442) STT: Testing WebSocket transport health...
I (50455) MEM_MGR: â•‘ PSRAM:
I (50464) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (50467) STT: âœ… WebSocket transport verified healthy
I (50471) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (50484) MEM_MGR: â•‘   Fragmentation:      2%
I (50489) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50507) MEM_MGR: â•‘ Total Heap:
I (50511) MEM_MGR: â•‘   Free:             3966792 bytes (3873 KB)
I (50518) MEM_MGR: â•‘   Minimum Ever:     3830504 bytes (3740 KB)
I (50525) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50544) MEM_MGR: â•‘ Memory Delta from Baseline:
I (50549) MEM_MGR: â•‘   Internal RAM:     -101636 bytes ( -99 KB)
I (50556) MEM_MGR: â•‘   DMA-capable:      -101636 bytes ( -99 KB)
I (50563) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (50570) MEM_MGR: â•‘   Total Heap:       -397964 bytes (-388 KB)
I (50576) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50577) STT: Starting audio streaming to server...
I (50595) STATE_MGR: âœ… Voice mode transition complete
I (50606) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (50622) STATE_MGR: STT pipeline reported start
I (50633) STATE_MGR: TTS playback start event received
I (50766) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 5, "bytes_received": 16400}
I (50767) WEBSOCKET: Server status: receiving
I (51382) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 36880}
I (51383) WEBSOCKET: Server status: receiving
I (52113) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 15, "bytes_received": 57360}
I (52114) WEBSOCKET: Server status: receiving
I (52612) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 77840}
I (52613) WEBSOCKET: Server status: receiving
I (53332) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 25, "bytes_received": 98320}
I (53333) WEBSOCKET: Server status: receiving
I (53517) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (53518) STATE_MGR: Single click - mode toggle requested
I (53519) STATE_MGR: Switching: Voice â†’ Camera (count: 6)
I (53525) BUTTON: Single click confirmed
I (53576) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (53576) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53589) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (53596) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53615) MEM_MGR: â•‘ Internal RAM:
I (53619) MEM_MGR: â•‘   Free:             123499 bytes (120 KB)
I (53626) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (53632) MEM_MGR: â•‘   Fragmentation:     24%
I (53638) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53656) MEM_MGR: â•‘ DMA-capable RAM:
I (53661) MEM_MGR: â•‘   Free:             103135 bytes (100 KB)
I (53667) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (53674) MEM_MGR: â•‘   Fragmentation:      9%
I (53679) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53698) MEM_MGR: â•‘ PSRAM:
I (53701) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (53708) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (53715) MEM_MGR: â•‘   Fragmentation:      2%
I (53720) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53739) MEM_MGR: â•‘ Total Heap:
I (53743) MEM_MGR: â•‘   Free:             3966792 bytes (3873 KB)
I (53749) MEM_MGR: â•‘   Minimum Ever:     3830504 bytes (3740 KB)
I (53756) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53775) MEM_MGR: â•‘ Memory Delta from Baseline:
I (53780) MEM_MGR: â•‘   Internal RAM:     -101636 bytes ( -99 KB)
I (53787) MEM_MGR: â•‘   DMA-capable:      -101636 bytes ( -99 KB)
I (53794) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (53801) MEM_MGR: â•‘   Total Heap:       -397964 bytes (-388 KB)
I (53808) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (53826) STATE_MGR: Stopping voice mode components...
I (53832) STT: Stopping STT pipeline...
I (53836) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (53851) STT: Ring buffer drained and cleared successfully
I (53855) STT: Audio capture task stopped (captured 118784 bytes total)
I (53882) STT: Streaming task received stop signal
I (53882) STT: Sending EOS signal...
I (53882) WEBSOCKET: Sending EOS signal
I (53888) STT: Audio streaming session complete (streamed 114688 bytes in 28 chunks)
I (53906) STT: STT pipeline stopped
I (53906) STATE_MGR: Voice pipeline reported COMPLETE
I (53906) STATE_MGR: Waiting for TTS playback drain (~0 bytes pending, timeout 15000 ms)
I (54026) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (54027) WEBSOCKET: Server status: processing
I (54030) WEBSOCKET: Server stage: transcription
I (54035) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (54042) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (54214) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (54215) STATE_MGR: TTS decoder confirmed idle
I (54218) STATE_MGR: Flushing and resetting TTS decoder for next session
I (54225) TTS: ðŸ”„ Flushing and resetting TTS decoder for session transition
I (54233) TTS: Flushing pending audio before reset (~0 bytes)
I (54539) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (54539) TTS: TTS decoder session reset for next audio stream
I (54544) TTS: âœ… TTS decoder flushed and reset for next session
I (54551) TTS: TTS playback task shutting down - is_running=0
I (54557) TTS: ðŸŽµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (54559) LED_CTRL: LED pattern -> 4
I (54565) TTS:   âœ“ DMA buffer freed from PSRAM
I (54574) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (54633) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what is your name"}
I (54634) WEBSOCKET: Server status: processing
I (54639) WEBSOCKET: Server stage: llm
I (54644) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (54650) WEBSOCKET: Entering LLM stage - continuing processing indication
I (54751) TTS: â¹ï¸ Stopping TTS decoder...
W (54751) TTS: TTS decoder not running
I (54785) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "My name is Hotpin."}
I (54786) WEBSOCKET: Server status: processing
I (54791) WEBSOCKET: Server stage: tts
I (54795) WEBSOCKET: Pipeline stage changed: llm -> tts
I (54801) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (54809) LED_CTRL: LED pattern -> 3
I (54813) TTS: ðŸŽµ Starting TTS decoder...
I (54818) TTS: Initializing TTS decoder...
W (54822) TTS: TTS decoder already initialized
I (54856) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (54857) TTS: ðŸŽµ TTS playback task started on Core 1
I (54861) TTS: âœ… TTS playback task registered with watchdog
I (54857) TTS: âœ… TTS decoder started successfully
I (54868) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850ac8 (4096 bytes)
I (54876) STATE_MGR: Acquiring I2S mutex...
W (54873) WEBSOCKET: TTS audio arriving after voice mode exit (state=3) - will attempt playback
I (54886) STATE_MGR: Deinitializing audio drivers...
I (54901) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54919) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (54927) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (54945) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (54952) AUDIO: âœ… RX channel disabled (took 0 ms)
I (54957) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (54964) AUDIO: âœ… TX channel disabled (took 0 ms)
I (54969) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (55009) TTS: Received audio chunk #40: 4096 bytes
I (55009) TTS: New audio session detected - resetting chunk counter
I (55011) TTS: ðŸŽ™ï¸ First real audio data received for session (4096 bytes)
I (55025) TTS: Received audio chunk #2: 4096 bytes
I (55025) TTS: Chunk #2 first 12 bytes: BE F1 21 F2 D7 F2 5C F3 C0 F3 05 F4
I (55026) AUDIO: [STEP 4/5] Deleting RX channel...
I (55038) AUDIO: âœ… RX channel deleted (took 0 ms)
I (55043) AUDIO: [STEP 5/5] Deleting TX channel...
I (55040) TTS: Received audio chunk #3: 4096 bytes
I (55049) AUDIO: âœ… TX channel deleted (took 0 ms)
I (55054) TTS: Chunk #3 first 12 bytes: 6E EB 8A EE 24 F1 64 F2 4C F3 26 F5
I (55059) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (55074) TTS: Received audio chunk #4: 4096 bytes
I (55080) TTS: Chunk #4 first 12 bytes: 8A FD A0 FE A1 FB BC F5 8A F1 06 F0
I (55087) TTS: âœ… WAV header parsed successfully
I (55093) TTS: === WAV File Info ===
I (55095) TTS: Received audio chunk #5: 4096 bytes
I (55098) TTS: Sample Rate: 16000 Hz
I (55103) TTS: Chunk #5 first 12 bytes: 66 E9 8C E9 B3 E9 8F E9 65 E9 4B E9
I (55107) TTS: Channels: 1
I (55118) TTS: Bits per Sample: 16
I (55122) TTS: Received audio chunk #6: 4096 bytes
I (55125) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55135) TTS: Received audio chunk #7: 4096 bytes
I (55146) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (55158) AUDIO: â•‘ Camera Can Now Initialize
I (55158) TTS: Received audio chunk #8: 4096 bytes
I (55163) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55175) TTS: Received audio chunk #9: 4096 bytes
I (55122) TTS: Audio Format: 1 (PCM)
I (55196) TTS: Declared Data Size: 59862 bytes
I (55199) TTS: Received audio chunk #10: 4096 bytes
I (55201) TTS: Block Align: 2
I (55210) TTS: Byte Rate: 32000
I (55213) TTS: Received audio chunk #11: 4096 bytes
I (55214) TTS: ====================
W (55224) AUDIO_FEEDBACK: Audio driver not available for feedback
W (55231) TTS: Playback start feedback failed: ESP_ERR_INVALID_STATE
I (55236) STATE_MGR: Allowing memory stabilization (100ms)...
I (55227) TTS: Received audio chunk #12: 4096 bytes
W (55244) TTS: Unable to set TX sample rate to 16000 Hz: ESP_ERR_INVALID_STATE
I (55257) TTS: Received audio chunk #13: 4096 bytes
I (55258) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (55270) TTS: Received audio chunk #14: 4096 bytes
E (55274) AUDIO: I2S TX channel not initialized
E (55283) TTS: Stereo duplication write failed mid-stream: ESP_ERR_INVALID_STATE
I (55285) TTS: Received audio chunk #15: 2562 bytes
E (55291) TTS: Initial PCM write failed: ESP_ERR_INVALID_STATE
I (55299) WEBSOCKET: Received text message: {"status": "complete"}
I (55303) TTS: ðŸŽµ TTS playback task exiting (played 0 bytes, result: ESP_ERR_INVALID_STATE)
I (55310) WEBSOCKET: Server status: complete
I (55319) TTS:   âœ“ DMA buffer freed from PSRAM
I (55324) WEBSOCKET: Pipeline stage changed: tts -> complete
I (55329) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (55336) WEBSOCKET: Exiting TTS stage (transition to complete)
I (55344) STATE_MGR: Camera will be initialized on-demand during capture
I (55357) STATE_MGR: I2S mutex released
I (55362) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55380) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (55387) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55405) MEM_MGR: â•‘ Internal RAM:
I (55410) MEM_MGR: â•‘   Free:             123499 bytes (120 KB)
I (55416) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (55423) MEM_MGR: â•‘   Fragmentation:     24%
I (55428) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55447) MEM_MGR: â•‘ DMA-capable RAM:
I (55450) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (55451) MEM_MGR: â•‘   Free:             103135 bytes (100 KB)
I (55466) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (55472) MEM_MGR: â•‘   Fragmentation:      9%
I (55478) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55496) MEM_MGR: â•‘ PSRAM:
I (55500) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (55507) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (55513) MEM_MGR: â•‘   Fragmentation:      2%
I (55519) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55537) MEM_MGR: â•‘ Total Heap:
I (55541) MEM_MGR: â•‘   Free:             3966792 bytes (3873 KB)
I (55548) MEM_MGR: â•‘   Minimum Ever:     3830504 bytes (3740 KB)
I (55555) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55573) MEM_MGR: â•‘ Memory Delta from Baseline:
I (55579) MEM_MGR: â•‘   Internal RAM:     -101636 bytes ( -99 KB)
I (55586) MEM_MGR: â•‘   DMA-capable:      -101636 bytes ( -99 KB)
I (55592) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (55599) MEM_MGR: â•‘   Total Heap:       -397964 bytes (-388 KB)
I (55606) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55625) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (55634) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55652) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (55659) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55677) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55695) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (55702) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (55720) AUDIO: [DIAG] Pre-init state:
I (55725) AUDIO:   Free heap: 3958208 bytes
I (55730) AUDIO:   Free internal RAM: 114915 bytes
I (55735) AUDIO:   Free DMA-capable: 94551 bytes
I (55740) AUDIO:   Free PSRAM: 3863732 bytes
I (55745) AUDIO:   Timestamp: 54192 ms
I (55750) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (55757) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (55764) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (55773) AUDIO:   DMA frame num (per desc): 1020
I (55778) AUDIO:   DMA total samples (effective): 4080
I (55784) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (55791) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (55797) AUDIO: âœ… I2S channels created (took 0 ms)
I (55803) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffcb6f0
I (55809) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (55816) AUDIO:   Sample rate: 16000 Hz
I (55821) AUDIO:   MCLK: DISABLED
I (55825) AUDIO:   BCLK: GPIO14 (shared)
I (55829) AUDIO:   WS:   GPIO15 (shared)
I (55834) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (55841) AUDIO: âœ… TX channel configured (took 1 ms)
I (55845) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (55852) AUDIO:   Sample rate: 16000 Hz
I (55857) AUDIO:   MCLK: DISABLED
I (55861) AUDIO:   BCLK: GPIO14 (shared)
I (55865) AUDIO:   WS:   GPIO15 (shared)
I (55870) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (55876) AUDIO: âœ… RX channel configured (took 0 ms)
I (55881) AUDIO: [STEP 4/6] Enabling TX channel...
I (55887) AUDIO: âœ… TX channel enabled (took 0 ms)
I (55892) AUDIO: [STEP 5/6] Enabling RX channel...
I (55898) AUDIO: âœ… RX channel enabled (took 0 ms)
I (55903) AUDIO: [STEP 6/6] Hardware stabilization...
I (55909) AUDIO:   Phase 1: Initial settle (50ms)
I (55343) TTS:   âœ“ Clearing 55810 bytes from stream buffer
I (55945) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (55964) AUDIO:   Phase 2: DMA verification
I (55964) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (55964) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (56121) AUDIO: [DIAG] Post-init state:
I (56121) AUDIO:   Free heap: 3940800 bytes
I (56121) AUDIO:   Free internal RAM: 97507 bytes
I (56125) AUDIO:   Free DMA-capable: 77143 bytes
I (56130) AUDIO:   Free PSRAM: 3863732 bytes
I (56135) AUDIO:   Timestamp: 54582 ms
I (56140) AUDIO:   Total init time: 201 ms
I (56144) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56162) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (56168) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (56174) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (56183) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (56189) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56207) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56225) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (56232) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (56238) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (56245) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (56251) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56552) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56559) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (56567) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56585) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (56592) AUDIO: âœ… RX channel disabled (took 0 ms)
I (56597) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (56604) AUDIO: âœ… TX channel disabled (took 0 ms)
I (56609) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (56666) AUDIO: [STEP 4/5] Deleting RX channel...
I (56667) AUDIO: âœ… RX channel deleted (took 0 ms)
I (56667) AUDIO: [STEP 5/5] Deleting TX channel...
I (56672) AUDIO: âœ… TX channel deleted (took 0 ms)
I (56677) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (56735) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56742) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (56748) AUDIO: â•‘ Camera Can Now Initialize
I (56754) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (56772) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (56787) STATE_MGR: STT pipeline reported stop
I (56797) STATE_MGR: Pipeline stage event: transcription
I (56807) STATE_MGR: Pipeline stage event: llm
I (56817) STATE_MGR: TTS playback start event received
I (56827) STATE_MGR: Pipeline stage event: tts
I (56837) STATE_MGR: TTS playback start event received
I (56847) STATE_MGR: Pipeline stage event: complete
I (64445) BUTTON: Long press detected (3000 ms)
I (64447) STATE_MGR: Button event received: 3 in state CAMERA_STANDBY
W (64447) STATE_MGR: Long press - shutdown requested
W (64452) STATE_MGR: Shutdown state reached
W (64457) STATE_MGR: === SYSTEM SHUTDOWN ===
I (64462) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (64480) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (64487) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (64505) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (64523) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (64530) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (64548) AUDIO: [DIAG] Pre-init state:
I (64553) AUDIO:   Free heap: 3966796 bytes
I (64557) AUDIO:   Free internal RAM: 123503 bytes
I (64563) AUDIO:   Free DMA-capable: 103139 bytes
I (64568) AUDIO:   Free PSRAM: 3863732 bytes
I (64573) AUDIO:   Timestamp: 63020 ms
I (64578) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (64585) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (64592) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (64601) AUDIO:   DMA frame num (per desc): 1020
I (64606) AUDIO:   DMA total samples (effective): 4080
I (64612) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (64619) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (64625) AUDIO: âœ… I2S channels created (took 0 ms)
I (64631) AUDIO:   TX handle: 0x3ffd4ec4 | RX handle: 0x3ffcb690
I (64637) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (64644) AUDIO:   Sample rate: 16000 Hz
I (64649) AUDIO:   MCLK: DISABLED
I (64653) AUDIO:   BCLK: GPIO14 (shared)
I (64657) AUDIO:   WS:   GPIO15 (shared)
I (64662) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (64668) AUDIO: âœ… TX channel configured (took 0 ms)
I (64673) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (64680) AUDIO:   Sample rate: 16000 Hz
I (64685) AUDIO:   MCLK: DISABLED
I (64689) AUDIO:   BCLK: GPIO14 (shared)
I (64693) AUDIO:   WS:   GPIO15 (shared)
I (64698) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (64704) AUDIO: âœ… RX channel configured (took 0 ms)
I (64709) AUDIO: [STEP 4/6] Enabling TX channel...
I (64715) AUDIO: âœ… TX channel enabled (took 0 ms)
I (64720) AUDIO: [STEP 5/6] Enabling RX channel...
I (64726) AUDIO: âœ… RX channel enabled (took 0 ms)
I (64731) AUDIO: [STEP 6/6] Hardware stabilization...
I (64737) AUDIO:   Phase 1: Initial settle (50ms)
I (64792) AUDIO:   Phase 2: DMA verification
I (64792) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (64792) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (64949) AUDIO: [DIAG] Post-init state:
I (64949) AUDIO:   Free heap: 3940820 bytes
I (64949) AUDIO:   Free internal RAM: 97527 bytes
I (64953) AUDIO:   Free DMA-capable: 77163 bytes
I (64958) AUDIO:   Free PSRAM: 3863732 bytes
I (64963) AUDIO:   Timestamp: 63410 ms
I (64968) AUDIO:   Total init time: 200 ms
I (64972) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (64990) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (64996) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (65002) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (65011) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (65017) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (65035) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (65053) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (65060) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (65066) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (65073) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (65079) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (66341) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (66348) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (66356) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (66374) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (66381) AUDIO: âœ… RX channel disabled (took 0 ms)
I (66386) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (66393) AUDIO: âœ… TX channel disabled (took 0 ms)
I (66398) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (66409) HOTPIN_MAIN: System shutdown detected, terminating WebSocket connection task
I (66414) HOTPIN_MAIN: Unregistering WebSocket connection task from watchdog
I (66421) HOTPIN_MAIN: WebSocket connection task terminated
I (66455) AUDIO: [STEP 4/5] Deleting RX channel...
I (66456) AUDIO: âœ… RX channel deleted (took 0 ms)
I (66456) AUDIO: [STEP 5/5] Deleting TX channel...
I (66461) AUDIO: âœ… TX channel deleted (took 0 ms)
I (66466) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (66524) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (66531) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (66538) AUDIO: â•‘ Camera Can Now Initialize
I (66543) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (66561) LED_CTRL: LED pattern -> 1
I (67165) LED_CTRL: LED pattern -> 3
I (68365) LED_CTRL: LED pattern -> 0
I (68365) STATE_MGR: Stopping all subsystems...
I (68365) STATE_MGR: Shutting down camera...
I (68369) CAMERA: Deinitializing camera...
I (68373) STT: Stopping STT pipeline...
W (68378) STT: STT pipeline already stopped
I (68383) TTS: â¹ï¸ Stopping TTS decoder...
W (68388) TTS: TTS decoder not running
I (68417) STATE_MGR: Stopping WebSocket client
I (68417) WEBSOCKET: Disconnecting from WebSocket server...
W (68435) websocket_client: Client was not started
W (68435) WEBSOCKET: WebSocket client stop reported ESP_FAIL, continuing cleanup
I (68437) WEBSOCKET: WebSocket health check task shutdown signal received
I (68445) WEBSOCKET: WebSocket health check task exiting (cycles: 12, disconnects: 0, reconnects: 1)
I (68537) WEBSOCKET: WebSocket disconnected
I (68537) WEBSOCKET: Force stopping WebSocket client
W (68538) websocket_client: Client was not started
W (68542) WEBSOCKET: Graceful close returned ESP_FAIL
I (68548) STATE_MGR: âœ… Shutdown complete
