PS F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware> idf.py monitor
Executing action: monitor
Serial port COM7
Connecting....
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP32
Running idf_monitor in directory F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware
Executing "C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe C:\Espressif\frameworks\esp-idf-v5.4.2\tools/idf_monitor.py -p COM7 -b 115200 --toolchain-prefix xtensa-esp32-elf- --target esp32 --revision 0 F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware\build\hotpin_esp32_firmware.elf --force-color -m 'C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe' 'C:\Espressif\frameworks\esp-idf-v5.4.2\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM7 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM7 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x3 (DOWNLOAD_BOOT(UART0/UART1/SDIO_REI_REO_V2))
waiting for download
e|{ Juï¿½?29 3819 12:21;46

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:2
load:0x3fff0030,len:6276
load:0x40078000,len:15736
load:0x40080400,len:4
--- 0x40080400: _init at ??:?
load:0x40080404,len:3860
entry 0x4008063c
I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Nov  4 2025 00:45:06
I (29) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage         (Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=3b0ach (241836) map
I (188) esp_image: segment 1: paddr=0004b0d4 vaddr=3ff80000 size=0001ch (    28) load
I (188) esp_image: segment 2: paddr=0004b0f8 vaddr=3ffb0000 size=04f20h ( 20256) load
I (199) esp_image: segment 3: paddr=00050020 vaddr=400d0020 size=be37ch (779132) map
I (466) esp_image: segment 4: paddr=0010e3a4 vaddr=3ffb4f20 size=0cda4h ( 52644) load
I (485) esp_image: segment 5: paddr=0011b150 vaddr=40080000 size=1ad94h (109972) load
I (544) boot: Loaded app from partition at offset 0x10000
I (544) boot: Disabling RNG early entropy source...
I (555) quad_psram: This chip is ESP32-D0WD
I (555) esp_psram: Found 4MB PSRAM device
I (555) esp_psram: Speed: 40MHz
I (558) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (566) cpu_start: Multicore app
I (1460) esp_psram: SPI SRAM memory test OK
I (1468) cpu_start: Pro cpu start user code
I (1468) cpu_start: cpu freq: 240000000 Hz
I (1468) app_init: Application information:
I (1471) app_init: Project name:     hotpin_esp32_firmware
I (1477) app_init: App version:      ddb72f0-dirty
I (1483) app_init: Compile time:     Nov  4 2025 00:44:52
I (1489) app_init: ELF file SHA256:  4f77f7f16...
I (1494) app_init: ESP-IDF:          v5.4.2-dirty
I (1500) efuse_init: Min chip rev:     v0.0
I (1505) efuse_init: Max chip rev:     v3.99
I (1510) efuse_init: Chip rev:         v3.1
I (1515) heap_init: Initializing. RAM available for dynamic allocation:
I (1522) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1528) heap_init: At 3FFC9490 len 00016B70 (90 KiB): DRAM
I (1534) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1541) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1547) heap_init: At 4009AD94 len 0000526C (20 KiB): IRAM
I (1554) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1562) spi_flash: detected chip: generic
I (1566) spi_flash: flash io: dio
W (1570) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1584) main_task: Started on CPU0
I (1587) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1596) main_task: Calling app_main()
I (1600) HOTPIN_MAIN: ====================================
I (1606) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1612) HOTPIN_MAIN: ====================================
W (1618) HOTPIN_MAIN: Brownout detector disabled
I (1623) HOTPIN_MAIN: Validating PSRAM...
I (1628) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1634) HOTPIN_MAIN: PSRAM validation passed
I (1639) HOTPIN_MAIN: ====================================
I (1646) HOTPIN_MAIN: System Information:
I (1650) HOTPIN_MAIN: Chip: esp32
I (1654) HOTPIN_MAIN: Cores: 2
I (1658) HOTPIN_MAIN: Silicon revision: 301
I (1663) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1668) HOTPIN_MAIN: Flash: 2 MB external
I (1673) HOTPIN_MAIN: Free heap: 4364828 bytes
I (1678) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1683) HOTPIN_MAIN: ====================================
I (1689) HOTPIN_MAIN: Initializing memory manager...
I (1694) MEM_MGR: Initializing memory manager...
I (1700) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1718) MEM_MGR: â•‘ Memory Manager Initialized
I (1723) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1742) MEM_MGR: â•‘ Baseline Memory State:
I (1746) MEM_MGR: â•‘   Internal RAM:     225111 bytes (219 KB)
I (1753) MEM_MGR: â•‘   DMA-capable:      204747 bytes (199 KB)
I (1760) MEM_MGR: â•‘   PSRAM:            4192016 bytes (4093 KB)
I (1766) MEM_MGR: â•‘   Total Heap:       4364732 bytes (4262 KB)
I (1773) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1792) MEM_MGR: â•‘ Configured Thresholds:
I (1796) MEM_MGR: â•‘   Internal RAM:     WARN=50KB, CRIT=20KB
I (1803) MEM_MGR: â•‘   DMA-capable:      WARN=35KB, CRIT=20KB
I (1810) MEM_MGR: â•‘   PSRAM:            WARN=500KB, CRIT=200KB
I (1816) MEM_MGR: â•‘   Fragmentation:    WARN=30%, CRIT=50%
I (1823) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1841) MEM_MGR: Starting memory monitoring (interval: 15000 ms)
I (1848) MEM_MGR: âœ… Memory monitoring started
I (1848) MEM_MGR: Memory monitor task started (interval: 15000 ms)
I (1853) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
W (1860) MEM_MGR: âš ï¸ WARNING: Memory fragmentation increasing! DMA:46% PSRAM:2%
I (1878) MEM_MGR: â•‘ Memory Statistics - System Boot
I (1892) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1910) MEM_MGR: â•‘ Internal RAM:
I (1915) MEM_MGR: â•‘   Free:             225111 bytes (219 KB)
I (1921) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1928) MEM_MGR: â•‘   Fragmentation:     51%
I (1933) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1951) MEM_MGR: â•‘ DMA-capable RAM:
I (1956) MEM_MGR: â•‘   Free:             204747 bytes (199 KB)
I (1962) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1969) MEM_MGR: â•‘   Fragmentation:     46%
I (1974) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1992) MEM_MGR: â•‘ PSRAM:
I (1996) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (2003) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (2009) MEM_MGR: â•‘   Fragmentation:      2%
I (2014) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2033) MEM_MGR: â•‘ Total Heap:
I (2037) MEM_MGR: â•‘   Free:             4364732 bytes (4262 KB)
I (2044) MEM_MGR: â•‘   Minimum Ever:     4364732 bytes (4262 KB)
I (2050) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2069) MEM_MGR: â•‘ Memory Delta from Baseline:
I (2074) MEM_MGR: â•‘   Internal RAM:          +0 bytes (  +0 KB)
I (2081) MEM_MGR: â•‘   DMA-capable:           +0 bytes (  +0 KB)
I (2088) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (2094) MEM_MGR: â•‘   Total Heap:            +0 bytes (  +0 KB)
I (2101) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2119) HOTPIN_MAIN: Initializing NVS...
I (2149) HOTPIN_MAIN: NVS initialized successfully
I (2150) event_dispatcher: System event queue ready (16 entries)
I (2151) HOTPIN_MAIN: Synchronization primitives created
I (2157) HOTPIN_MAIN: Initializing WiFi...
I (2165) wifi:wifi driver task: 3ffdaad4, prio:23, stack:6656, core=0
I (2178) wifi:wifi firmware version: bea31f3
I (2178) wifi:wifi certification version: v7.0
I (2179) wifi:config NVS flash: enabled
I (2179) wifi:config nano formatting: disabled
I (2184) wifi:Init data frame dynamic rx buffer num: 32
I (2188) wifi:Init static rx mgmt buffer num: 5
I (2193) wifi:Init management short buffer num: 32
I (2197) wifi:Init dynamic tx buffer num: 32
I (2201) wifi:Init static rx buffer size: 1600
I (2205) wifi:Init static rx buffer num: 10
I (2209) wifi:Init dynamic rx buffer num: 32
I (2214) wifi_init: rx ba win: 6
I (2217) wifi_init: accept mbox: 6
I (2221) wifi_init: tcpip mbox: 32
I (2225) wifi_init: udp mbox: 6
I (2229) wifi_init: tcp mbox: 6
I (2233) wifi_init: tcp tx win: 5760
I (2237) wifi_init: tcp rx win: 5760
I (2241) wifi_init: tcp mss: 1440
I (2245) wifi_init: WiFi IRAM OP enabled
I (2250) wifi_init: WiFi RX IRAM OP enabled
I (2257) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (2322) phy_init: Saving new calibration data due to checksum failure or outdated calibration data, mode(0)
I (2393) wifi:mode : sta (80:f3:da:99:8c:64)
I (2394) wifi:enable tsf
I (2396) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (2397) HOTPIN_MAIN: Waiting for WiFi connection...
I (2397) HOTPIN_MAIN: WiFi station started, connecting...
I (2420) wifi:new:<6,0>, old:<1,0>, ap:<255,255>, sta:<6,0>, prof:1, snd_ch_cfg:0x0
I (2422) wifi:state: init -> auth (0xb0)
I (3318) wifi:state: auth -> assoc (0x0)
I (3328) wifi:state: assoc -> run (0x10)
I (3364) wifi:connected with wifi, aid = 3, channel 6, BW20, bssid = ee:d4:b9:ed:90:50
I (3364) wifi:security: WPA3-SAE, phy: bgn, rssi: -51
I (3368) wifi:pm start, type: 1

I (3369) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (3379) wifi:<ba-add>idx:0 (ifx:0, ee:d4:b9:ed:90:50), tid:0, ssn:0, winSize:64
I (3386) HOTPIN_MAIN: WiFi connected to AP
I (3444) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (3445) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (4472) esp_netif_handlers: sta ip: 10.143.111.214, mask: 255.255.255.0, gw: 10.143.111.248
I (4473) HOTPIN_MAIN: âœ… Got IP address: 10.143.111.214
I (4477) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (7411) HOTPIN_MAIN: Initializing button handler...
I (7411) BUTTON: Initializing button handler on GPIO 12
I (7412) gpio: GPIO[12]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (7421) BUTTON: Button FSM task started
I (7426) BUTTON: GPIO ISR service installed successfully
I (7431) BUTTON: Button handler initialized successfully (initial level=1, primed=1)
I (7440) HOTPIN_MAIN: Initializing LED controller...
I (7445) LED_CTRL: Initializing LED controller on GPIO 33
I (7452) LED_CTRL: LED controller ready
I (7456) LED_CTRL: LED pattern -> 2
I (7460) HOTPIN_MAIN: Initializing WebSocket client...
I (7466) WEBSOCKET: Initializing WebSocket client...
I (7472) WEBSOCKET: Server URI: ws://10.143.111.58:8000/ws
I (7478) WEBSOCKET: Authorization header configured
I (7484) WEBSOCKET: âœ… WebSocket client initialized
I (7489) WEBSOCKET: Status callback registered
I (7494) HOTPIN_MAIN: WebSocket status callback registered
I (7500) HOTPIN_MAIN: Initializing HTTP client...
I (7506) HTTP_CLIENT: Initializing HTTP client
I (7511) HTTP_CLIENT: Authorization token configured
I (7516) HTTP_CLIENT: HTTP client initialized (server: http://10.143.111.58:8000)
I (7525) HOTPIN_MAIN: Initializing STT pipeline...
I (7530) STT: Initializing STT pipeline...
I (7535) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7553) STT: â•‘ STT Ring Buffer Allocation (PSRAM)
I (7559) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7577) STT: [MEMORY] Pre-allocation state:
I (7582) STT:   Free internal RAM: 166191 bytes
I (7587) STT:   Free DMA-capable: 145827 bytes
I (7592) STT:   Free PSRAM: 4126020 bytes
I (7597) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (7605) STT:   âœ“ Ring buffer allocated at 0x3f810ac0 (PSRAM address)
I (7612) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (7621) STT: [MEMORY] Post-allocation state:
I (7626) STT:   Free internal RAM: 166191 bytes
I (7631) STT:   Free DMA-capable: 145827 bytes
I (7636) STT:   Free PSRAM: 4060480 bytes
I (7647) STT: [CORE AFFINITY] Creating persistent audio streaming task on Core 0
I (7649) STT: Persistent audio streaming task started on Core 0
I (7655) STT:   âœ“ Stream buffer allocated at 0x3ffd1b44 (with safety padding)
I (7663) STT: âœ… STT pipeline initialized
I (7668) HOTPIN_MAIN: Initializing TTS decoder...
I (7673) TTS: Initializing TTS decoder...
I (7678) TTS: Allocating 196608 byte PSRAM buffer for TTS stream
I (7685) TTS:   PSRAM available: 4060480 bytes (3965 KB)
I (7691) TTS:   âœ“ TTS stream buffer allocated at 0x3f820ac4
I (7723) WEBSOCKET: Audio callback registered
I (7724) TTS: âœ… TTS decoder initialized
I (7724) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (7730) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (7735) HOTPIN_MAIN: State manager task created on Core 1
I (7735) STATE_MGR: State manager task started on Core 1
I (7742) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (7748) STATE_MGR: Priority: 10
I (7754) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 1)...
I (7758) STATE_MGR: Starting in camera mode...
I (7766) WEBSOCKET: Connecting to WebSocket server...
I (7771) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (7782) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7785) websocket_client: Started
I (7801) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (7805) WEBSOCKET: âœ… WebSocket health check task created
I (7812) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7818) WEBSOCKET: WebSocket client started
I (7836) MEM_MGR: â•‘ Internal RAM:
I (7805) WEBSOCKET: WebSocket health check task started
I (7845) MEM_MGR: â•‘   Free:             222703 bytes (217 KB)
I (7742) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (7858) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7864) HOTPIN_MAIN: Configuring task watchdog for critical tasks...
I (7871) MEM_MGR: â•‘   Fragmentation:     51%
I (7878) HOTPIN_MAIN: âœ… State manager task added to watchdog
I (7883) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7890) HOTPIN_MAIN: âœ… WebSocket connection task added to watchdog
I (7908) MEM_MGR: â•‘ DMA-capable RAM:
I (7915) HOTPIN_MAIN: Task watchdog configuration complete
I (7920) MEM_MGR: â•‘   Free:             202339 bytes (197 KB)
I (7926) HOTPIN_MAIN: ====================================
I (7932) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7939) HOTPIN_MAIN: System initialization complete!
I (7945) MEM_MGR: â•‘   Fragmentation:     46%
I (7951) HOTPIN_MAIN: Entering camera standby mode...
I (7956) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7962) HOTPIN_MAIN: ====================================
I (7980) MEM_MGR: â•‘ PSRAM:
I (7987) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7990) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (8008) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (8014) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (8022) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8028) MEM_MGR: â•‘   Fragmentation:      2%
I (8046) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (8051) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8059) AUDIO:   âœ“ I2S access mutex created successfully
I (8077) MEM_MGR: â•‘ Total Heap:
I (8083) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8087) MEM_MGR: â•‘   Free:             4362324 bytes (4260 KB)
I (8105) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (8112) MEM_MGR: â•‘   Minimum Ever:     4362324 bytes (4260 KB)
I (8119) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8126) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8144) AUDIO: [DIAG] Pre-init state:
I (8162) MEM_MGR: â•‘ Memory Delta from Baseline:
I (8167) AUDIO:   Free heap: 3962624 bytes
I (8177) AUDIO:   Free internal RAM: 117619 bytes
I (8172) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (8182) AUDIO:   Free DMA-capable: 99131 bytes
I (8189) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (8194) AUDIO:   Free PSRAM: 3863868 bytes
I (8201) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (8205) AUDIO:   Timestamp: 6652 ms
I (8212) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (8216) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (8223) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8230) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (8248) STATE_MGR: Acquiring I2S mutex...
I (8256) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (8179) WEBSOCKET: âœ… WebSocket connected to server
I (8269) AUDIO:   DMA frame num (per desc): 1020
I (8275) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (8280) AUDIO:   DMA total samples (effective): 4080
I (8291) WEBSOCKET: Handshake sent successfully
I (8293) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (8299) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (8305) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (8319) AUDIO: âœ… I2S channels created (took 0 ms)
I (8324) AUDIO:   TX handle: 0x3ffe3e28 | RX handle: 0x3ffe1e80
I (8330) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (8337) AUDIO:   Sample rate: 16000 Hz
I (8341) AUDIO:   MCLK: DISABLED
I (8345) AUDIO:   BCLK: GPIO14 (shared)
I (8350) AUDIO:   WS:   GPIO15 (shared)
I (8354) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (8361) AUDIO: âœ… TX channel configured (took 1 ms)
I (8365) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (8372) AUDIO:   Sample rate: 16000 Hz
I (8377) AUDIO:   MCLK: DISABLED
I (8381) AUDIO:   BCLK: GPIO14 (shared)
I (8385) AUDIO:   WS:   GPIO15 (shared)
I (8390) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (8396) AUDIO: âœ… RX channel configured (took 0 ms)
I (8401) AUDIO: [STEP 4/6] Enabling TX channel...
I (8406) AUDIO: âœ… TX channel enabled (took 0 ms)
I (8412) AUDIO: [STEP 5/6] Enabling RX channel...
I (8417) AUDIO: âœ… RX channel enabled (took 0 ms)
I (8423) AUDIO: [STEP 6/6] Hardware stabilization...
I (8428) AUDIO:   Phase 1: Initial settle (50ms)
I (8446) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (8483) AUDIO:   Phase 2: DMA verification
I (8483) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (8483) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (8576) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (8577) WEBSOCKET: Server status: connected
I (8639) AUDIO: [DIAG] Post-init state:
I (8639) AUDIO:   Free heap: 3936912 bytes
I (8639) AUDIO:   Free internal RAM: 93551 bytes
I (8642) AUDIO:   Free DMA-capable: 73187 bytes
I (8647) AUDIO:   Free PSRAM: 3863732 bytes
I (8652) AUDIO:   Timestamp: 7099 ms
I (8657) AUDIO:   Total init time: 201 ms
I (8661) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8679) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (8685) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (8690) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (8699) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (8706) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8724) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8741) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (8748) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (8754) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (8761) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (8767) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10053) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10060) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (10068) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10086) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (10092) AUDIO: âœ… RX channel disabled (took 0 ms)
I (10098) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (10104) AUDIO: âœ… TX channel disabled (took 0 ms)
I (10110) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (10167) AUDIO: [STEP 4/5] Deleting RX channel...
I (10167) AUDIO: âœ… RX channel deleted (took 0 ms)
I (10167) AUDIO: [STEP 5/5] Deleting TX channel...
I (10172) AUDIO: âœ… TX channel deleted (took 0 ms)
I (10177) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (10235) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10242) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (10248) AUDIO: â•‘ Camera Can Now Initialize
I (10253) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10271) STATE_MGR: Audio drivers already inactive; skipping deinit
I (10271) LED_CTRL: LED pattern -> 3
I (10278) STATE_MGR: Allowing memory stabilization (100ms)...
I (10282) HOTPIN_MAIN: Main task exiting - system running
I (10295) main_task: Returned from app_main()
I (10389) STATE_MGR: Camera will be initialized on-demand during capture
I (10389) STATE_MGR: I2S mutex released
I (10390) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10408) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (10415) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10434) MEM_MGR: â•‘ Internal RAM:
I (10438) MEM_MGR: â•‘   Free:             222703 bytes (217 KB)
I (10445) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10451) MEM_MGR: â•‘   Fragmentation:     51%
I (10457) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10475) MEM_MGR: â•‘ DMA-capable RAM:
I (10479) MEM_MGR: â•‘   Free:             202339 bytes (197 KB)
I (10486) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10493) MEM_MGR: â•‘   Fragmentation:     46%
I (10498) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10516) MEM_MGR: â•‘ PSRAM:
I (10520) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (10527) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (10534) MEM_MGR: â•‘   Fragmentation:      2%
I (10539) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10557) MEM_MGR: â•‘ Total Heap:
I (10562) MEM_MGR: â•‘   Free:             4362324 bytes (4260 KB)
I (10568) MEM_MGR: â•‘   Minimum Ever:     4362324 bytes (4260 KB)
I (10575) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10594) MEM_MGR: â•‘ Memory Delta from Baseline:
I (10599) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (10606) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (10613) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (10620) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (10627) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10645) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (10654) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (10670) STATE_MGR: WebSocket connected
I (12851) WEBSOCKET: WebSocket connection restored (cycle: 1, disconnects: 0, reconnects: 0)
I (25262) BUTTON: Single click confirmed
I (25262) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (25263) STATE_MGR: Single click - mode toggle requested
I (25269) STATE_MGR: Switching: Camera â†’ Voice (count: 1)
I (25325) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (25325) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25338) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (25345) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25364) MEM_MGR: â•‘ Internal RAM:
I (25368) MEM_MGR: â•‘   Free:             124111 bytes (121 KB)
I (25375) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (25381) MEM_MGR: â•‘   Fragmentation:     25%
I (25386) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25405) MEM_MGR: â•‘ DMA-capable RAM:
I (25409) MEM_MGR: â•‘   Free:             103747 bytes (101 KB)
I (25416) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (25423) MEM_MGR: â•‘   Fragmentation:     10%
I (25428) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25446) MEM_MGR: â•‘ PSRAM:
I (25450) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (25457) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (25464) MEM_MGR: â•‘   Fragmentation:      2%
I (25469) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25487) MEM_MGR: â•‘ Total Heap:
I (25491) MEM_MGR: â•‘   Free:             3967328 bytes (3874 KB)
I (25498) MEM_MGR: â•‘   Minimum Ever:     3931484 bytes (3839 KB)
I (25505) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25523) MEM_MGR: â•‘ Memory Delta from Baseline:
I (25529) MEM_MGR: â•‘   Internal RAM:     -101000 bytes ( -98 KB)
I (25536) MEM_MGR: â•‘   DMA-capable:      -101000 bytes ( -98 KB)
I (25543) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (25550) MEM_MGR: â•‘   Total Heap:       -397404 bytes (-388 KB)
I (25556) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25575) STATE_MGR: Stopping camera...
I (25579) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25596) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (25602) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25619) STATE_MGR:   Timeout: 5000 ms
I (25623) STATE_MGR:   Timestamp: 24070 ms
I (25628) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (25634) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25650) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (25656) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25673) STATE_MGR:   Free heap before: 3967328 bytes
I (25679) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (25684) CAMERA: Deinitializing camera...
I (25689) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (25695) STATE_MGR:   Free heap after: 3967328 bytes
I (25701) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (25707) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25723) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (25729) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25746) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (25854) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (25954) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (26004) STATE_MGR:   âœ“ Total stabilization: 250ms
I (26004) STATE_MGR:   Timestamp: 24451 ms
I (26004) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26020) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (26027) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26043) STATE_MGR:   Free heap before: 3967328 bytes
I (26049) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26067) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (26074) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26092) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26110) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (26117) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26135) AUDIO: [DIAG] Pre-init state:
I (26139) AUDIO:   Free heap: 3967328 bytes
I (26144) AUDIO:   Free internal RAM: 124111 bytes
I (26150) AUDIO:   Free DMA-capable: 103747 bytes
I (26155) AUDIO:   Free PSRAM: 3863732 bytes
I (26160) AUDIO:   Timestamp: 24607 ms
I (26164) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (26171) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (26179) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (26187) AUDIO:   DMA frame num (per desc): 1020
I (26193) AUDIO:   DMA total samples (effective): 4080
I (26199) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (26206) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (26212) AUDIO: âœ… I2S channels created (took 0 ms)
I (26218) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca800
I (26224) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (26231) AUDIO:   Sample rate: 16000 Hz
I (26235) AUDIO:   MCLK: DISABLED
I (26239) AUDIO:   BCLK: GPIO14 (shared)
I (26244) AUDIO:   WS:   GPIO15 (shared)
I (26249) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (26256) AUDIO: âœ… TX channel configured (took 1 ms)
I (26260) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (26267) AUDIO:   Sample rate: 16000 Hz
I (26271) AUDIO:   MCLK: DISABLED
I (26275) AUDIO:   BCLK: GPIO14 (shared)
I (26280) AUDIO:   WS:   GPIO15 (shared)
I (26285) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (26291) AUDIO: âœ… RX channel configured (took 0 ms)
I (26296) AUDIO: [STEP 4/6] Enabling TX channel...
I (26302) AUDIO: âœ… TX channel enabled (took 0 ms)
I (26307) AUDIO: [STEP 5/6] Enabling RX channel...
I (26313) AUDIO: âœ… RX channel enabled (took 0 ms)
I (26318) AUDIO: [STEP 6/6] Hardware stabilization...
I (26324) AUDIO:   Phase 1: Initial settle (50ms)
I (26379) AUDIO:   Phase 2: DMA verification
I (26379) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (26380) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (26537) AUDIO: [DIAG] Post-init state:
I (26537) AUDIO:   Free heap: 3941324 bytes
I (26537) AUDIO:   Free internal RAM: 98107 bytes
I (26541) AUDIO:   Free DMA-capable: 77743 bytes
I (26546) AUDIO:   Free PSRAM: 3863732 bytes
I (26551) AUDIO:   Timestamp: 24998 ms
I (26556) AUDIO:   Total init time: 201 ms
I (26560) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26578) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (26585) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (26590) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (26599) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (26605) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26623) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26641) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (26648) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (26654) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (26661) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (26667) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26685) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (26691) STATE_MGR:   Free heap after: 3941324 bytes
I (26697) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26713) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (26719) STATE_MGR: â•‘ Total transition time: 890 ms
I (26725) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26741) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26757) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (26764) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26780) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (26788) TTS: No pending audio to flush
I (26817) TTS: TTS decoder session reset for next audio stream
I (26817) TTS: âœ… TTS decoder flushed and reset for next session
I (26819) STT: Starting STT pipeline...
I (26823) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (26833) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (26840) STT:   Current time: 25287 ms
I (26843) STT: âœ… STT pipeline started
I (26844) STT:   Free heap: 3932772 bytes
I (26844) STT: Audio streaming session activated
I (26859) STT: Connection stabilization delay (2000ms)...
I (26899) TTS: ğŸµ Starting TTS decoder...
I (26899) TTS: Initializing TTS decoder...
W (26899) TTS: TTS decoder already initialized
I (26929) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (26929) TTS: âœ… TTS decoder started successfully
I (26933) TTS: ğŸµ TTS playback task started on Core 1
I (26939) TTS: âœ… TTS playback task registered with watchdog
I (26946) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (27053) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (27053) STT:   âœ“ Audio driver initialized
I (27054) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (27161) STT:   Total stabilization: 300ms
I (27161) STT:   Timestamp: 25607 ms
I (27161) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (27165) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe3824 (with safety padding)
I (27174) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27190) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (27195) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (27201) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27258) LED_CTRL: LED pattern -> 1
I (27259) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27270) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (27277) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27295) MEM_MGR: â•‘ Internal RAM:
I (27299) MEM_MGR: â•‘   Free:             124111 bytes (121 KB)
I (27306) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (27313) MEM_MGR: â•‘   Fragmentation:     25%
I (27318) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27336) MEM_MGR: â•‘ DMA-capable RAM:
I (27341) MEM_MGR: â•‘   Free:             103747 bytes (101 KB)
I (27348) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (27354) MEM_MGR: â•‘   Fragmentation:     10%
I (27360) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27378) MEM_MGR: â•‘ PSRAM:
I (27382) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (27388) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (27395) MEM_MGR: â•‘   Fragmentation:      2%
I (27400) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27419) MEM_MGR: â•‘ Total Heap:
I (27423) MEM_MGR: â•‘   Free:             3967328 bytes (3874 KB)
I (27430) MEM_MGR: â•‘   Minimum Ever:     3931484 bytes (3839 KB)
I (27437) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27455) MEM_MGR: â•‘ Memory Delta from Baseline:
I (27461) MEM_MGR: â•‘   Internal RAM:     -101000 bytes ( -98 KB)
I (27467) MEM_MGR: â•‘   DMA-capable:      -101000 bytes ( -98 KB)
I (27474) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (27481) MEM_MGR: â•‘   Total Heap:       -397404 bytes (-388 KB)
I (27488) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27506) STATE_MGR: âœ… Voice mode transition complete
I (27512) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (27528) STATE_MGR: STT pipeline reported start
I (27538) STATE_MGR: TTS playback start event received
I (28865) STT: Starting audio streaming to server...
I (28921) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (28922) WEBSOCKET: Server status: receiving
I (28927) WEBSOCKET: Server ACK: 2 chunks processed
I (28982) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (28983) WEBSOCKET: Server status: receiving
I (28988) WEBSOCKET: Server ACK: 4 chunks processed
I (29054) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (29055) WEBSOCKET: Server status: receiving
I (29060) WEBSOCKET: Server ACK: 6 chunks processed
W (29126) STT: Waiting for server ACK (sent: 8, acked: 6, unack: 2)
I (29162) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (29163) WEBSOCKET: Server status: receiving
I (29168) STT: Flow control: ACK received, resuming (sent=8, acked=8)
I (29175) WEBSOCKET: Server ACK: 8 chunks processed
I (29181) STT: ACK received, resuming (unack now: 0)
W (29243) STT: Waiting for server ACK (sent: 10, acked: 8, unack: 2)
I (29263) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (29264) WEBSOCKET: Server status: receiving
I (29268) STT: Flow control: ACK received, resuming (sent=10, acked=10)
I (29275) WEBSOCKET: Server ACK: 10 chunks processed
I (29282) STT: ACK received, resuming (unack now: 0)
I (29337) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (29338) WEBSOCKET: Server status: receiving
I (29342) WEBSOCKET: Server ACK: 12 chunks processed
W (29409) STT: Waiting for server ACK (sent: 14, acked: 12, unack: 2)
I (29440) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (29441) WEBSOCKET: Server status: receiving
I (29445) STT: Flow control: ACK received, resuming (sent=14, acked=14)
I (29450) STT: ACK received, resuming (unack now: 0)
I (29453) WEBSOCKET: Server ACK: 14 chunks processed
I (29511) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (29512) WEBSOCKET: Server status: receiving
I (29517) WEBSOCKET: Server ACK: 16 chunks processed
W (29583) STT: Waiting for server ACK (sent: 18, acked: 16, unack: 2)
I (29672) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (29673) WEBSOCKET: Server status: receiving
I (29677) STT: Flow control: ACK received, resuming (sent=18, acked=18)
I (29684) WEBSOCKET: Server ACK: 18 chunks processed
I (29691) STT: ACK received, resuming (unack now: 0)
I (29743) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (29744) WEBSOCKET: Server status: receiving
I (29748) WEBSOCKET: Server ACK: 20 chunks processed
I (29956) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (29957) WEBSOCKET: Server status: receiving
I (29962) WEBSOCKET: Server ACK: 22 chunks processed
I (30176) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (30177) WEBSOCKET: Server status: receiving
I (30182) WEBSOCKET: Server ACK: 24 chunks processed
I (30440) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (30441) WEBSOCKET: Server status: receiving
I (30446) WEBSOCKET: Server ACK: 26 chunks processed
I (30712) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (30713) WEBSOCKET: Server status: receiving
I (30718) WEBSOCKET: Server ACK: 28 chunks processed
I (30952) BUTTON: Single click confirmed
I (30960) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
W (30961) STATE_MGR: Guardrail soft override: stopping voice pipeline (user cancellation)
I (30965) STATE_MGR: Single click - mode toggle requested
I (30971) STATE_MGR: Switching: Voice â†’ Camera (count: 2)
I (31028) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (31028) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31041) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
W (31043) STT: Waiting for server ACK (sent: 30, acked: 28, unack: 2)
I (31048) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31074) MEM_MGR: â•‘ Internal RAM:
I (31078) MEM_MGR: â•‘   Free:             124111 bytes (121 KB)
I (31085) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (31092) MEM_MGR: â•‘   Fragmentation:     25%
I (31097) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31105) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (31115) MEM_MGR: â•‘ DMA-capable RAM:
I (31127) WEBSOCKET: Server status: receiving
I (31131) MEM_MGR: â•‘   Free:             103747 bytes (101 KB)
I (31136) STT: Flow control: ACK received, resuming (sent=30, acked=30)
I (31143) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (31150) WEBSOCKET: Server ACK: 30 chunks processed
I (31157) MEM_MGR: â•‘   Fragmentation:     10%
I (31137) STT: ACK received, resuming (unack now: 0)
I (31167) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31191) MEM_MGR: â•‘ PSRAM:
I (31195) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (31202) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (31209) MEM_MGR: â•‘   Fragmentation:      2%
I (31214) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31221) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (31232) MEM_MGR: â•‘ Total Heap:
I (31244) WEBSOCKET: Server status: receiving
I (31248) MEM_MGR: â•‘   Free:             3967328 bytes (3874 KB)
I (31253) WEBSOCKET: Server ACK: 32 chunks processed
I (31260) MEM_MGR: â•‘   Minimum Ever:     3931484 bytes (3839 KB)
I (31272) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31290) MEM_MGR: â•‘ Memory Delta from Baseline:
I (31296) MEM_MGR: â•‘   Internal RAM:     -101000 bytes ( -98 KB)
I (31303) MEM_MGR: â•‘   DMA-capable:      -101000 bytes ( -98 KB)
I (31310) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (31317) MEM_MGR: â•‘   Total Heap:       -397404 bytes (-388 KB)
I (31323) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31342) STATE_MGR: Stopping voice mode components...
I (31348) STT: Stopping STT pipeline...
I (31352) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (31368) STT: Ring buffer drained and cleared successfully
I (31376) STT: Capture stopped and ring buffer drained; ending streaming loop
I (31376) STT: Sending EOS signal...
I (31378) WEBSOCKET: Sending EOS signal
I (31390) STT: Audio streaming session complete (streamed 135168 bytes in 33 chunks)
I (31414) STT: Audio capture task stopped (captured 139264 bytes total)
I (31421) STT: STT pipeline stopped
I (31514) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (31514) WEBSOCKET: Server status: processing
I (31517) WEBSOCKET: Server stage: transcription
I (31523) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (31529) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (32054) LED_CTRL: LED pattern -> 4
I (32121) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hello hello hello", "has_image": false}
I (32124) WEBSOCKET: Server status: processing
I (32129) WEBSOCKET: Server stage: llm
I (32133) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (32140) WEBSOCKET: Entering LLM stage - continuing processing indication
I (32530) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "Hello, how can I assist you today?"}
I (32532) WEBSOCKET: Server status: processing
I (32537) WEBSOCKET: Server stage: tts
I (32541) WEBSOCKET: Pipeline stage changed: llm -> tts
I (32547) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (32554) LED_CTRL: LED pattern -> 3
I (32559) TTS: ğŸµ Starting TTS decoder...
W (32564) TTS: TTS decoder already running
W (32568) WEBSOCKET: TTS audio arriving after voice mode exit (state=3) - will attempt playback
I (32584) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 1, total: 4096)
I (32586) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 31033 ms, bytes: 4096)
I (32595) TTS: Received audio chunk #1: 4096 bytes
I (32600) TTS: Chunk #1 first 12 bytes: 52 49 46 46 BC 70 01 00 57 41 56 45
I (32608) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (32621) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 2, total: 8192)
I (32624) TTS: Received audio chunk #2: 4096 bytes
I (32630) TTS: Chunk #2 first 12 bytes: 9D FE 04 FF C8 FF 8C 00 DA 00 E6 00
I (32642) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 3, total: 12288)
I (32645) TTS: Received audio chunk #3: 4096 bytes
I (32651) TTS: Chunk #3 first 12 bytes: E4 04 E4 02 D8 01 72 FF E8 FB 1F F7
I (32663) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 4, total: 16384)
I (32667) TTS: Received audio chunk #4: 4096 bytes
I (32672) TTS: Chunk #4 first 12 bytes: 7A 0C 9F 0B 21 0A 77 07 B6 03 16 00
I (32684) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 5, total: 20480)
I (32688) TTS: Received audio chunk #5: 4096 bytes
I (32693) TTS: Chunk #5 first 12 bytes: C4 FF C4 FF C4 FF C1 FF BD FF BE FF
I (32706) TTS: Received audio chunk #6: 4096 bytes
I (32710) TTS: Received audio chunk #7: 876 bytes
I (32715) TTS: Received audio chunk #8: 3220 bytes
I (32723) TTS: Received audio chunk #9: 4096 bytes
I (32728) TTS: Received audio chunk #10: 1316 bytes
I (32732) TTS: âœ… WAV header parsed successfully
I (32737) TTS: Received audio chunk #11: 2780 bytes
I (32745) TTS: Received audio chunk #12: 4096 bytes
I (32751) TTS: Received audio chunk #13: 316 bytes
I (32753) TTS: Received audio chunk #14: 3780 bytes
I (32760) TTS: Received audio chunk #15: 536 bytes
I (32764) TTS: Received audio chunk #16: 3560 bytes
I (32773) TTS: Received audio chunk #17: 4096 bytes
I (32777) TTS: Received audio chunk #18: 976 bytes
I (32779) TTS: === WAV File Info ===
I (32784) TTS: Received audio chunk #19: 3120 bytes
I (32793) TTS: Received audio chunk #20: 4096 bytes
I (32795) TTS: Sample Rate: 16000 Hz
I (32802) TTS: Received audio chunk #21: 1436 bytes
I (32804) TTS: Channels: 1
I (32807) TTS: Bits per Sample: 16
I (32811) TTS: Received audio chunk #22: 2660 bytes
I (32821) TTS: Received audio chunk #23: 4096 bytes
I (32823) TTS: Audio Format: 1 (PCM)
I (32826) TTS: Declared Data Size: 94360 bytes
I (32836) TTS: Received audio chunk #24: 4096 bytes
I (32838) TTS: Block Align: 2
I (32840) TTS: Byte Rate: 32000
I (32844) TTS: ====================
I (32851) TTS: Received audio chunk #25: 4096 bytes
I (32869) TTS: Received audio chunk #26: 4096 bytes
I (32882) TTS: Received audio chunk #27: 4096 bytes
I (32891) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=86016)
I (32891) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (32930) TTS: Received audio chunk #28: 4096 bytes
I (32938) TTS: Received audio chunk #29: 1656 bytes
I (32941) TTS: Received audio chunk #30: 2440 bytes
I (32945) TTS: Received audio chunk #31: 196 bytes
I (32948) WEBSOCKET: Received text message: {"status": "complete"}
I (32951) WEBSOCKET: Server status: complete
I (32956) WEBSOCKET: Pipeline stage changed: tts -> complete
I (32962) WEBSOCKET: Exiting TTS stage (transition to complete)
I (32970) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (33058) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (33069) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (33071) STATE_MGR: Voice pipeline reported COMPLETE
I (33072) STATE_MGR: Waiting for TTS playback drain (~86256 bytes pending, timeout 15000 ms)
I (33185) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (33312) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (33440) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (33567) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
W (33581) TTS: TTS wait for idle timeout after 500 ms
W (33581) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (33584) TTS:   Data: received=94404, header=0, played=24532, pending=69872
W (33592) STATE_MGR: TTS wait for idle timeout #1 (drain_checks=0)
I (33695) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (33822) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (33950) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (34078) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
W (34199) TTS: TTS wait for idle timeout after 500 ms
W (34199) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (34202) TTS:   Data: received=94404, header=0, played=40916, pending=53488
W (34210) STATE_MGR: TTS wait for idle timeout #2 (drain_checks=1)
I (34217) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (34332) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (34460) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (34587) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (34715) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
W (34817) TTS: TTS wait for idle timeout after 500 ms
W (34817) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (34820) TTS:   Data: received=94404, header=0, played=61396, pending=33008
W (34828) STATE_MGR: TTS wait for idle timeout #3 (drain_checks=2)
I (34842) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (34970) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (35098) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (35225) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (35352) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
W (35435) TTS: TTS wait for idle timeout after 500 ms
W (35435) TTS:   State: has_pending=1, is_playing=1, completed=0, eos_requested=1
W (35438) TTS:   Data: received=94404, header=0, played=81876, pending=12528
W (35446) STATE_MGR: TTS wait for idle timeout #4 (drain_checks=3)
I (35480) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (35607) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (35735) TTS: âœ… All audio data received (94404 bytes, expected 94360 + 44 header)
I (35835) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (35835) TTS: ğŸµ TTS playback task exiting (played 94360 bytes, result: ESP_OK)
I (35841) TTS: Playing TTS completion feedback to signal readiness for next input
I (35853) TTS: TTS playback completed flag set - task exiting (after 6 checks)
I (35857) STATE_MGR: TTS decoder confirmed idle
I (35862) STATE_MGR: Flushing and resetting TTS decoder for next session
I (35869) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (35877) TTS: Flushing pending audio before reset (~44 bytes)
I (35883) TTS: TTS playback completed flag set - task exiting (after 0 checks)
I (35918) TTS: TTS decoder session reset for next audio stream
I (35919) TTS: âœ… TTS decoder flushed and reset for next session
I (36121) TTS: â¹ï¸ Stopping TTS decoder...
W (36121) TTS: TTS decoder not running
I (36167) TTS:   âœ“ DMA buffer freed from PSRAM
I (36167) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (36169) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (36247) STATE_MGR: Acquiring I2S mutex...
I (36247) STATE_MGR: Deinitializing audio drivers...
I (36247) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36265) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (36272) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36290) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (36297) AUDIO: âœ… RX channel disabled (took 0 ms)
I (36303) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (36309) AUDIO: âœ… TX channel disabled (took 0 ms)
I (36315) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (36371) AUDIO: [STEP 4/5] Deleting RX channel...
I (36372) AUDIO: âœ… RX channel deleted (took 0 ms)
I (36372) AUDIO: [STEP 5/5] Deleting TX channel...
I (36377) AUDIO: âœ… TX channel deleted (took 0 ms)
I (36382) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (36440) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36447) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (36454) AUDIO: â•‘ Camera Can Now Initialize
I (36459) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36527) STATE_MGR: Allowing memory stabilization (100ms)...
I (36627) STATE_MGR: Camera will be initialized on-demand during capture
I (36627) STATE_MGR: I2S mutex released
I (36628) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36646) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (36653) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36672) MEM_MGR: â•‘ Internal RAM:
I (36676) MEM_MGR: â•‘   Free:              89119 bytes ( 87 KB)
I (36683) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (36689) MEM_MGR: â•‘   Fragmentation:     36%
I (36695) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36713) MEM_MGR: â•‘ DMA-capable RAM:
I (36717) MEM_MGR: â•‘   Free:              68755 bytes ( 67 KB)
I (36724) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (36731) MEM_MGR: â•‘   Fragmentation:     17%
I (36736) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36754) MEM_MGR: â•‘ PSRAM:
I (36758) MEM_MGR: â•‘   Free:             3859768 bytes (3769 KB)
I (36765) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (36772) MEM_MGR: â•‘   Fragmentation:      2%
I (36777) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36795) MEM_MGR: â•‘ Total Heap:
I (36800) MEM_MGR: â•‘   Free:             3928372 bytes (3836 KB)
I (36806) MEM_MGR: â•‘   Minimum Ever:     3905972 bytes (3814 KB)
I (36813) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36832) MEM_MGR: â•‘ Memory Delta from Baseline:
I (36837) MEM_MGR: â•‘   Internal RAM:     -135992 bytes (-132 KB)
I (36844) MEM_MGR: â•‘   DMA-capable:      -135992 bytes (-132 KB)
I (36851) MEM_MGR: â•‘   PSRAM:            -332248 bytes (-324 KB)
I (36858) MEM_MGR: â•‘   Total Heap:       -436360 bytes (-426 KB)
I (36865) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36883) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (36893) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36910) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (36917) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36935) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36953) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (36961) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36979) AUDIO: [DIAG] Pre-init state:
I (36983) AUDIO:   Free heap: 3967168 bytes
I (36988) AUDIO:   Free internal RAM: 123951 bytes
I (36993) AUDIO:   Free DMA-capable: 103587 bytes
I (36999) AUDIO:   Free PSRAM: 3863732 bytes
I (37004) AUDIO:   Timestamp: 35451 ms
I (37008) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (37015) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (37023) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (37031) AUDIO:   DMA frame num (per desc): 1020
I (37037) AUDIO:   DMA total samples (effective): 4080
I (37042) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (37049) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (37056) AUDIO: âœ… I2S channels created (took 0 ms)
I (37061) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb644
I (37068) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (37075) AUDIO:   Sample rate: 16000 Hz
I (37079) AUDIO:   MCLK: DISABLED
I (37083) AUDIO:   BCLK: GPIO14 (shared)
I (37088) AUDIO:   WS:   GPIO15 (shared)
I (37092) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (37099) AUDIO: âœ… TX channel configured (took 1 ms)
I (37104) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (37111) AUDIO:   Sample rate: 16000 Hz
I (37115) AUDIO:   MCLK: DISABLED
I (37119) AUDIO:   BCLK: GPIO14 (shared)
I (37124) AUDIO:   WS:   GPIO15 (shared)
I (37128) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (37135) AUDIO: âœ… RX channel configured (took 0 ms)
I (37140) AUDIO: [STEP 4/6] Enabling TX channel...
I (37145) AUDIO: âœ… TX channel enabled (took 0 ms)
I (37151) AUDIO: [STEP 5/6] Enabling RX channel...
I (37156) AUDIO: âœ… RX channel enabled (took 0 ms)
I (37162) AUDIO: [STEP 6/6] Hardware stabilization...
I (37168) AUDIO:   Phase 1: Initial settle (50ms)
I (37223) AUDIO:   Phase 2: DMA verification
I (37223) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (37224) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (37381) AUDIO: [DIAG] Post-init state:
I (37381) AUDIO:   Free heap: 3941184 bytes
I (37381) AUDIO:   Free internal RAM: 97967 bytes
I (37385) AUDIO:   Free DMA-capable: 77603 bytes
I (37390) AUDIO:   Free PSRAM: 3863732 bytes
I (37395) AUDIO:   Timestamp: 35842 ms
I (37400) AUDIO:   Total init time: 201 ms
I (37404) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37422) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (37429) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (37434) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (37443) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (37449) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37467) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37485) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (37492) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (37498) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (37505) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (37511) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37812) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37819) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (37827) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37845) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (37852) AUDIO: âœ… RX channel disabled (took 0 ms)
I (37857) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (37864) AUDIO: âœ… TX channel disabled (took 0 ms)
I (37869) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (37926) AUDIO: [STEP 4/5] Deleting RX channel...
I (37927) AUDIO: âœ… RX channel deleted (took 0 ms)
I (37927) AUDIO: [STEP 5/5] Deleting TX channel...
I (37932) AUDIO: âœ… TX channel deleted (took 0 ms)
I (37937) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (37995) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38002) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (38009) AUDIO: â•‘ Camera Can Now Initialize
I (38014) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (38032) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (38047) STATE_MGR: STT pipeline reported stop
I (38047) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (38062) STATE_MGR: Pipeline stage event: transcription
I (38072) STATE_MGR: Pipeline stage event: llm
I (38082) STATE_MGR: Pipeline stage event: tts
I (38092) STATE_MGR: TTS playback start event received
I (38102) STATE_MGR: Pipeline stage event: complete
I (42157) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (42157) BUTTON: Single click confirmed
I (42157) STATE_MGR: Single click - mode toggle requested
I (42164) STATE_MGR: Switching: Camera â†’ Voice (count: 3)
I (42220) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (42220) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42233) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (42240) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42259) MEM_MGR: â•‘ Internal RAM:
I (42263) MEM_MGR: â•‘   Free:              89119 bytes ( 87 KB)
I (42270) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (42276) MEM_MGR: â•‘   Fragmentation:     36%
I (42281) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42300) MEM_MGR: â•‘ DMA-capable RAM:
I (42304) MEM_MGR: â•‘   Free:              68755 bytes ( 67 KB)
I (42311) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (42318) MEM_MGR: â•‘   Fragmentation:     17%
I (42323) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42341) MEM_MGR: â•‘ PSRAM:
I (42345) MEM_MGR: â•‘   Free:             3859768 bytes (3769 KB)
I (42352) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (42359) MEM_MGR: â•‘   Fragmentation:      2%
I (42364) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42382) MEM_MGR: â•‘ Total Heap:
I (42386) MEM_MGR: â•‘   Free:             3928372 bytes (3836 KB)
I (42393) MEM_MGR: â•‘   Minimum Ever:     3905972 bytes (3814 KB)
I (42400) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42418) MEM_MGR: â•‘ Memory Delta from Baseline:
I (42424) MEM_MGR: â•‘   Internal RAM:     -135992 bytes (-132 KB)
I (42431) MEM_MGR: â•‘   DMA-capable:      -135992 bytes (-132 KB)
I (42438) MEM_MGR: â•‘   PSRAM:            -332248 bytes (-324 KB)
I (42445) MEM_MGR: â•‘   Total Heap:       -436360 bytes (-426 KB)
I (42451) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42470) STATE_MGR: Stopping camera...
I (42474) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42491) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (42497) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42514) STATE_MGR:   Timeout: 5000 ms
I (42518) STATE_MGR:   Timestamp: 40965 ms
I (42523) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (42529) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42545) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (42551) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42568) STATE_MGR:   Free heap before: 3967168 bytes
I (42574) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (42579) CAMERA: Deinitializing camera...
I (42584) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (42590) STATE_MGR:   Free heap after: 3967168 bytes
I (42596) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (42602) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42618) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (42624) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42641) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (42749) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (42849) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (42899) STATE_MGR:   âœ“ Total stabilization: 250ms
I (42899) STATE_MGR:   Timestamp: 41346 ms
I (42899) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42915) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (42922) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42938) STATE_MGR:   Free heap before: 3967168 bytes
I (42944) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42962) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (42969) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42987) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43005) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (43012) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43030) AUDIO: [DIAG] Pre-init state:
I (43034) AUDIO:   Free heap: 3967168 bytes
I (43039) AUDIO:   Free internal RAM: 123951 bytes
I (43045) AUDIO:   Free DMA-capable: 103587 bytes
I (43050) AUDIO:   Free PSRAM: 3863732 bytes
I (43055) AUDIO:   Timestamp: 41502 ms
I (43059) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (43066) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (43074) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (43082) AUDIO:   DMA frame num (per desc): 1020
I (43088) AUDIO:   DMA total samples (effective): 4080
I (43094) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (43101) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (43107) AUDIO: âœ… I2S channels created (took 0 ms)
I (43113) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffcb644
I (43119) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (43126) AUDIO:   Sample rate: 16000 Hz
I (43130) AUDIO:   MCLK: DISABLED
I (43134) AUDIO:   BCLK: GPIO14 (shared)
I (43139) AUDIO:   WS:   GPIO15 (shared)
I (43144) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (43150) AUDIO: âœ… TX channel configured (took 1 ms)
I (43155) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (43162) AUDIO:   Sample rate: 16000 Hz
I (43166) AUDIO:   MCLK: DISABLED
I (43170) AUDIO:   BCLK: GPIO14 (shared)
I (43175) AUDIO:   WS:   GPIO15 (shared)
I (43180) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (43186) AUDIO: âœ… RX channel configured (took 0 ms)
I (43191) AUDIO: [STEP 4/6] Enabling TX channel...
I (43197) AUDIO: âœ… TX channel enabled (took 0 ms)
I (43202) AUDIO: [STEP 5/6] Enabling RX channel...
I (43208) AUDIO: âœ… RX channel enabled (took 0 ms)
I (43213) AUDIO: [STEP 6/6] Hardware stabilization...
I (43219) AUDIO:   Phase 1: Initial settle (50ms)
I (43274) AUDIO:   Phase 2: DMA verification
I (43275) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (43275) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (43432) AUDIO: [DIAG] Post-init state:
I (43432) AUDIO:   Free heap: 3941184 bytes
I (43433) AUDIO:   Free internal RAM: 97967 bytes
I (43436) AUDIO:   Free DMA-capable: 77603 bytes
I (43441) AUDIO:   Free PSRAM: 3863732 bytes
I (43446) AUDIO:   Timestamp: 41893 ms
I (43451) AUDIO:   Total init time: 201 ms
I (43455) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43473) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (43480) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (43485) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (43494) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (43500) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43518) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43536) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (43543) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (43549) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (43556) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (43562) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43580) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (43586) STATE_MGR:   Free heap after: 3941184 bytes
I (43592) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43608) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (43614) STATE_MGR: â•‘ Total transition time: 890 ms
I (43620) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43636) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43652) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (43659) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43675) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (43683) TTS: No pending audio to flush
I (43712) TTS: TTS decoder session reset for next audio stream
I (43712) TTS: âœ… TTS decoder flushed and reset for next session
I (43714) STT: Starting STT pipeline...
I (43719) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (43728) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (43735) STT:   Current time: 42182 ms
I (43738) STT: âœ… STT pipeline started
I (43739) STT:   Free heap: 3932632 bytes
I (43739) STT: Audio streaming session activated
I (43754) STT: Connection stabilization delay (2000ms)...
I (43794) TTS: ğŸµ Starting TTS decoder...
I (43794) TTS: Initializing TTS decoder...
W (43795) TTS: TTS decoder already initialized
I (43823) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (43823) TTS: âœ… TTS decoder started successfully
I (43827) TTS: ğŸµ TTS playback task started on Core 1
I (43833) TTS: âœ… TTS playback task registered with watchdog
I (43839) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (43948) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (43948) STT:   âœ“ Audio driver initialized
I (43949) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (44056) STT:   Total stabilization: 300ms
I (44056) STT:   Timestamp: 42503 ms
I (44056) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (44060) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe3824 (with safety padding)
I (44069) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44085) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (44090) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (44096) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44152) LED_CTRL: LED pattern -> 1
I (44153) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44164) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (44171) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44189) MEM_MGR: â•‘ Internal RAM:
I (44193) MEM_MGR: â•‘   Free:              89119 bytes ( 87 KB)
I (44200) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (44207) MEM_MGR: â•‘   Fragmentation:     36%
I (44212) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44230) MEM_MGR: â•‘ DMA-capable RAM:
I (44235) MEM_MGR: â•‘   Free:              68755 bytes ( 67 KB)
I (44242) MEM_MGR: â•‘   Largest Block:     57344 bytes ( 56 KB)
I (44248) MEM_MGR: â•‘   Fragmentation:     17%
I (44254) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44272) MEM_MGR: â•‘ PSRAM:
I (44276) MEM_MGR: â•‘   Free:             3859768 bytes (3769 KB)
I (44282) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (44289) MEM_MGR: â•‘   Fragmentation:      2%
I (44294) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44313) MEM_MGR: â•‘ Total Heap:
I (44317) MEM_MGR: â•‘   Free:             3928372 bytes (3836 KB)
I (44324) MEM_MGR: â•‘   Minimum Ever:     3905972 bytes (3814 KB)
I (44331) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44349) MEM_MGR: â•‘ Memory Delta from Baseline:
I (44355) MEM_MGR: â•‘   Internal RAM:     -135992 bytes (-132 KB)
I (44361) MEM_MGR: â•‘   DMA-capable:      -135992 bytes (-132 KB)
I (44368) MEM_MGR: â•‘   PSRAM:            -332248 bytes (-324 KB)
I (44375) MEM_MGR: â•‘   Total Heap:       -436360 bytes (-426 KB)
I (44382) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44400) STATE_MGR: âœ… Voice mode transition complete
I (44406) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (44422) STATE_MGR: STT pipeline reported start
I (44433) STATE_MGR: TTS playback start event received
I (45760) STT: Starting audio streaming to server...
I (45813) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (45814) WEBSOCKET: Server status: receiving
I (45818) WEBSOCKET: Server ACK: 2 chunks processed
I (45879) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (45880) WEBSOCKET: Server status: receiving
I (45884) WEBSOCKET: Server ACK: 4 chunks processed
I (45946) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (45947) WEBSOCKET: Server status: receiving
I (45951) WEBSOCKET: Server ACK: 6 chunks processed
W (46011) STT: Waiting for server ACK (sent: 8, acked: 6, unack: 2)
I (46258) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (46258) WEBSOCKET: Server status: receiving
I (46263) STT: Flow control: ACK received, resuming (sent=8, acked=8)
I (46270) WEBSOCKET: Server ACK: 8 chunks processed
I (46272) STT: ACK received, resuming (unack now: 0)
I (46329) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (46329) WEBSOCKET: Server status: receiving
I (46334) WEBSOCKET: Server ACK: 10 chunks processed
W (46394) STT: Waiting for server ACK (sent: 12, acked: 10, unack: 2)
I (46668) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (46669) WEBSOCKET: Server status: receiving
I (46674) STT: Flow control: ACK received, resuming (sent=12, acked=12)
I (46675) STT: ACK received, resuming (unack now: 0)
I (46681) WEBSOCKET: Server ACK: 12 chunks processed
I (46733) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (46734) WEBSOCKET: Server status: receiving
I (46738) WEBSOCKET: Server ACK: 14 chunks processed
I (46796) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (46797) WEBSOCKET: Server status: receiving
I (46802) WEBSOCKET: Server ACK: 16 chunks processed
I (46870) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (46871) WEBSOCKET: Server status: receiving
I (46876) WEBSOCKET: Server ACK: 18 chunks processed
I (46931) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (46931) WEBSOCKET: Server status: receiving
I (46936) WEBSOCKET: Server ACK: 20 chunks processed
I (46993) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (46993) WEBSOCKET: Server status: receiving
I (46998) WEBSOCKET: Server ACK: 22 chunks processed
I (47103) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (47103) WEBSOCKET: Server status: receiving
I (47108) WEBSOCKET: Server ACK: 24 chunks processed
I (47319) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (47320) WEBSOCKET: Server status: receiving
I (47325) WEBSOCKET: Server ACK: 26 chunks processed
I (47692) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (47693) WEBSOCKET: Server status: receiving
W (47694) STT: Waiting for server ACK (sent: 28, acked: 26, unack: 2)
I (47697) STT: Flow control: ACK received, resuming (sent=28, acked=28)
I (47705) STT: ACK received, resuming (unack now: 0)
I (47712) WEBSOCKET: Server ACK: 28 chunks processed
I (47868) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (47869) WEBSOCKET: Server status: receiving
I (47874) WEBSOCKET: Server ACK: 30 chunks processed
I (47912) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (47912) BUTTON: Single click confirmed
I (47912) STATE_MGR: Single click - mode toggle requested
I (47918) STATE_MGR: Switching: Voice â†’ Camera (count: 4)
I (47975) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (47976) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (47989) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (47996) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48014) MEM_MGR: â•‘ Internal RAM:
I (48018) MEM_MGR: â•‘   Free:              79687 bytes ( 77 KB)
I (48025) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (48032) MEM_MGR: â•‘   Fragmentation:     31%
I (48037) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48055) MEM_MGR: â•‘ DMA-capable RAM:
I (48060) MEM_MGR: â•‘   Free:              57763 bytes ( 56 KB)
I (48066) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (48073) MEM_MGR: â•‘   Fragmentation:      5%
I (48078) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48097) MEM_MGR: â•‘ PSRAM:
I (48100) MEM_MGR: â•‘   Free:             3859632 bytes (3769 KB)
I (48107) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (48114) MEM_MGR: â•‘   Fragmentation:      2%
I (48119) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48138) MEM_MGR: â•‘ Total Heap:
I (48142) MEM_MGR: â•‘   Free:             3917244 bytes (3825 KB)
I (48149) MEM_MGR: â•‘   Minimum Ever:     3897912 bytes (3806 KB)
I (48155) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48174) MEM_MGR: â•‘ Memory Delta from Baseline:
I (48179) MEM_MGR: â•‘   Internal RAM:     -145424 bytes (-142 KB)
I (48186) MEM_MGR: â•‘   DMA-capable:      -146984 bytes (-143 KB)
I (48193) MEM_MGR: â•‘   PSRAM:            -332384 bytes (-324 KB)
W (48196) STT: Waiting for server ACK (sent: 32, acked: 30, unack: 2)
I (48200) MEM_MGR: â•‘   Total Heap:       -447488 bytes (-437 KB)
I (48214) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (48232) STATE_MGR: Stopping voice mode components...
I (48238) STT: Stopping STT pipeline...
I (48243) STT: Draining ring buffer (1024 bytes pending) before shutdown...
I (48245) STT: Audio capture task stopped (captured 137216 bytes total)
I (48257) STT: Ring buffer drained and cleared successfully
I (48203) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (48275) WEBSOCKET: Server status: receiving
I (48280) STT: Flow control: ACK received, resuming (sent=32, acked=32)
I (48287) WEBSOCKET: Server ACK: 32 chunks processed
I (48288) STT: ACK received, resuming (unack now: 0)
I (48328) STT: Streaming task received stop signal
I (48328) STT: Sending EOS signal...
I (48328) WEBSOCKET: Sending EOS signal
I (48333) STT: Audio streaming session complete (streamed 135168 bytes in 33 chunks)
I (48351) STT: STT pipeline stopped
I (48352) STATE_MGR: Voice pipeline reported COMPLETE
I (48352) STATE_MGR: Waiting for TTS playback drain (~0 bytes pending, timeout 15000 ms)
I (48370) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (48371) WEBSOCKET: Server status: processing
I (48375) WEBSOCKET: Server stage: transcription
I (48380) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (48387) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (48661) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (48662) STATE_MGR: TTS decoder confirmed idle
I (48665) STATE_MGR: Flushing and resetting TTS decoder for next session
I (48672) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (48680) TTS: Flushing pending audio before reset (~0 bytes)
I (48886) LED_CTRL: LED pattern -> 4
I (48913) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what's your what's your name", "has_image": false}
I (48916) WEBSOCKET: Server status: processing
I (48921) WEBSOCKET: Server stage: llm
I (48926) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (48932) WEBSOCKET: Entering LLM stage - continuing processing indication
I (48986) TTS: TTS idle - no pending audio, playback completing (state stable for 6 checks)
I (48987) TTS: TTS decoder session reset for next audio stream
I (48991) TTS: âœ… TTS decoder flushed and reset for next session
I (49003) TTS: TTS playback task shutting down - is_running=0
I (49004) TTS: ğŸµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (49012) TTS:   âœ“ DMA buffer freed from PSRAM
I (49017) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (49198) TTS: â¹ï¸ Stopping TTS decoder...
W (49198) TTS: TTS decoder not running
I (49323) STATE_MGR: Acquiring I2S mutex...
I (49323) STATE_MGR: Deinitializing audio drivers...
I (49323) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49341) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (49348) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49366) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (49373) AUDIO: âœ… RX channel disabled (took 0 ms)
I (49379) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (49385) AUDIO: âœ… TX channel disabled (took 0 ms)
I (49391) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (49447) AUDIO: [STEP 4/5] Deleting RX channel...
I (49448) AUDIO: âœ… RX channel deleted (took 0 ms)
I (49448) AUDIO: [STEP 5/5] Deleting TX channel...
I (49453) AUDIO: âœ… TX channel deleted (took 0 ms)
I (49458) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (49516) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49523) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (49530) AUDIO: â•‘ Camera Can Now Initialize
I (49535) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49603) STATE_MGR: Allowing memory stabilization (100ms)...
I (49703) STATE_MGR: Camera will be initialized on-demand during capture
I (49703) STATE_MGR: I2S mutex released
I (49704) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49722) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (49729) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49748) MEM_MGR: â•‘ Internal RAM:
I (49752) MEM_MGR: â•‘   Free:              79687 bytes ( 77 KB)
I (49759) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (49765) MEM_MGR: â•‘   Fragmentation:     31%
I (49771) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49789) MEM_MGR: â•‘ DMA-capable RAM:
I (49793) MEM_MGR: â•‘   Free:              57763 bytes ( 56 KB)
I (49800) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (49807) MEM_MGR: â•‘   Fragmentation:      5%
I (49812) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49830) MEM_MGR: â•‘ PSRAM:
I (49834) MEM_MGR: â•‘   Free:             3859632 bytes (3769 KB)
I (49841) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (49848) MEM_MGR: â•‘   Fragmentation:      2%
I (49853) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49871) MEM_MGR: â•‘ Total Heap:
I (49876) MEM_MGR: â•‘   Free:             3917244 bytes (3825 KB)
I (49882) MEM_MGR: â•‘   Minimum Ever:     3897912 bytes (3806 KB)
I (49889) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49908) MEM_MGR: â•‘ Memory Delta from Baseline:
I (49913) MEM_MGR: â•‘   Internal RAM:     -145424 bytes (-142 KB)
I (49920) MEM_MGR: â•‘   DMA-capable:      -146984 bytes (-143 KB)
I (49927) MEM_MGR: â•‘   PSRAM:            -332384 bytes (-324 KB)
I (49934) MEM_MGR: â•‘   Total Heap:       -447488 bytes (-437 KB)
I (49941) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49959) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (49969) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49986) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (49993) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50011) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50029) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (50037) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50055) AUDIO: [DIAG] Pre-init state:
I (50059) AUDIO:   Free heap: 3960192 bytes
I (50064) AUDIO:   Free internal RAM: 116975 bytes
I (50069) AUDIO:   Free DMA-capable: 96611 bytes
I (50075) AUDIO:   Free PSRAM: 3863732 bytes
I (50080) AUDIO:   Timestamp: 48526 ms
I (50084) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (50091) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (50099) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (50107) AUDIO:   DMA frame num (per desc): 1020
I (50113) AUDIO:   DMA total samples (effective): 4080
I (50118) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (50125) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (50132) AUDIO: âœ… I2S channels created (took 0 ms)
I (50137) AUDIO:   TX handle: 0x3ffd4efc | RX handle: 0x3ffcb774
I (50144) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (50151) AUDIO:   Sample rate: 16000 Hz
I (50155) AUDIO:   MCLK: DISABLED
I (50159) AUDIO:   BCLK: GPIO14 (shared)
I (50164) AUDIO:   WS:   GPIO15 (shared)
I (50168) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (50175) AUDIO: âœ… TX channel configured (took 1 ms)
I (50180) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (50187) AUDIO:   Sample rate: 16000 Hz
I (50191) AUDIO:   MCLK: DISABLED
I (50195) AUDIO:   BCLK: GPIO14 (shared)
I (50200) AUDIO:   WS:   GPIO15 (shared)
I (50204) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (50210) AUDIO: âœ… RX channel configured (took 0 ms)
I (50216) AUDIO: [STEP 4/6] Enabling TX channel...
I (50221) AUDIO: âœ… TX channel enabled (took 0 ms)
I (50227) AUDIO: [STEP 5/6] Enabling RX channel...
I (50232) AUDIO: âœ… RX channel enabled (took 0 ms)
I (50238) AUDIO: [STEP 6/6] Hardware stabilization...
I (50243) AUDIO:   Phase 1: Initial settle (50ms)
I (50252) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "My name is Hotpin, nice to meet you!"}
I (50262) WEBSOCKET: Server status: processing
I (50267) WEBSOCKET: Server stage: tts
I (50271) WEBSOCKET: Pipeline stage changed: llm -> tts
I (50277) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (50285) LED_CTRL: LED pattern -> 3
I (50289) TTS: ğŸµ Starting TTS decoder...
W (50294) TTS: Cannot start TTS decoder - I2S driver not initialized (likely in camera mode)
W (50303) TTS: Audio will be buffered but not played until voice mode is re-entered
E (50311) WEBSOCKET: Failed to start TTS decoder for streaming: ESP_ERR_INVALID_STATE
W (50320) WEBSOCKET: TTS audio arriving after voice mode exit (state=3) - will attempt playback
I (50299) AUDIO:   Phase 2: DMA verification
I (50334) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (50340) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
W (50353) TTS: Rejecting audio chunks - TTS decoder not running (chunks rejected: 1, last: 4096 bytes)
I (50497) AUDIO: [DIAG] Post-init state:
I (50498) AUDIO:   Free heap: 3935920 bytes
I (50498) AUDIO:   Free internal RAM: 92879 bytes
I (50501) AUDIO:   Free DMA-capable: 70815 bytes
I (50507) AUDIO:   Free PSRAM: 3863752 bytes
I (50512) AUDIO:   Timestamp: 48958 ms
I (50516) AUDIO:   Total init time: 201 ms
I (50521) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50539) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (50545) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (50550) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (50559) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (50566) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50584) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50602) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (50608) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (50615) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (50622) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (50628) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50663) WEBSOCKET: Received text message: {"status": "complete"}
I (50664) WEBSOCKET: Server status: complete
I (50664) WEBSOCKET: Pipeline stage changed: tts -> complete
I (50670) WEBSOCKET: Exiting TTS stage (transition to complete)
I (50777) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (50929) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50936) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (50944) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50962) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (50969) AUDIO: âœ… RX channel disabled (took 0 ms)
I (50974) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (50981) AUDIO: âœ… TX channel disabled (took 0 ms)
I (50986) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (51043) AUDIO: [STEP 4/5] Deleting RX channel...
I (51044) AUDIO: âœ… RX channel deleted (took 0 ms)
I (51044) AUDIO: [STEP 5/5] Deleting TX channel...
I (51049) AUDIO: âœ… TX channel deleted (took 0 ms)
I (51054) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (51112) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (51119) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (51126) AUDIO: â•‘ Camera Can Now Initialize
I (51131) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (51149) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (51164) STATE_MGR: STT pipeline reported stop
I (51164) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (51179) STATE_MGR: Pipeline stage event: transcription
I (51189) STATE_MGR: Pipeline stage event: llm
I (51199) STATE_MGR: Pipeline stage event: tts
I (51209) STATE_MGR: Pipeline stage event: complete
I (82806) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (82806) STATE_MGR: Double-click detected - triggering capture sequence
I (82809) STATE_MGR: Starting camera capture sequence
I (82815) LED_CTRL: LED pattern -> 6
I (82820) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (82837) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (82845) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (82863) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (82880) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (82888) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (82906) AUDIO: [DIAG] Pre-init state:
I (82910) AUDIO:   Free heap: 3976220 bytes
I (82915) AUDIO:   Free internal RAM: 133083 bytes
I (82921) AUDIO:   Free DMA-capable: 112719 bytes
I (82926) AUDIO:   Free PSRAM: 3863868 bytes
I (82931) AUDIO:   Timestamp: 81378 ms
I (82935) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (82942) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (82950) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (82958) AUDIO:   DMA frame num (per desc): 1020
I (82964) AUDIO:   DMA total samples (effective): 4080
I (82970) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (82977) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (82983) AUDIO: âœ… I2S channels created (took 0 ms)
I (82988) AUDIO:   TX handle: 0x3ffafc64 | RX handle: 0x3ffcb644
I (82995) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (83002) AUDIO:   Sample rate: 16000 Hz
I (83006) AUDIO:   MCLK: DISABLED
I (83010) AUDIO:   BCLK: GPIO14 (shared)
I (83015) AUDIO:   WS:   GPIO15 (shared)
I (83020) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (83026) AUDIO: âœ… TX channel configured (took 1 ms)
I (83031) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (83038) AUDIO:   Sample rate: 16000 Hz
I (83042) AUDIO:   MCLK: DISABLED
I (83046) AUDIO:   BCLK: GPIO14 (shared)
I (83051) AUDIO:   WS:   GPIO15 (shared)
I (83056) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (83062) AUDIO: âœ… RX channel configured (took 0 ms)
I (83067) AUDIO: [STEP 4/6] Enabling TX channel...
I (83072) AUDIO: âœ… TX channel enabled (took 0 ms)
I (83078) AUDIO: [STEP 5/6] Enabling RX channel...
I (83083) AUDIO: âœ… RX channel enabled (took 0 ms)
I (83089) AUDIO: [STEP 6/6] Hardware stabilization...
I (83095) AUDIO:   Phase 1: Initial settle (50ms)
I (83150) AUDIO:   Phase 2: DMA verification
I (83150) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (83151) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (83308) AUDIO: [DIAG] Post-init state:
I (83308) AUDIO:   Free heap: 3950236 bytes
I (83308) AUDIO:   Free internal RAM: 107099 bytes
I (83312) AUDIO:   Free DMA-capable: 86735 bytes
I (83317) AUDIO:   Free PSRAM: 3863868 bytes
I (83322) AUDIO:   Timestamp: 81769 ms
I (83327) AUDIO:   Total init time: 201 ms
I (83332) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (83350) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (83356) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (83361) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (83370) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (83377) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (83395) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (83412) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (83419) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (83425) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (83432) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (83438) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (83788) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (83795) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (83803) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (83821) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (83828) AUDIO: âœ… RX channel disabled (took 0 ms)
I (83833) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (83840) AUDIO: âœ… TX channel disabled (took 0 ms)
I (83845) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (83902) AUDIO: [STEP 4/5] Deleting RX channel...
I (83903) AUDIO: âœ… RX channel deleted (took 0 ms)
I (83903) AUDIO: [STEP 5/5] Deleting TX channel...
I (83908) AUDIO: âœ… TX channel deleted (took 0 ms)
I (83913) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (83971) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (83978) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (83985) AUDIO: â•‘ Camera Can Now Initialize
I (83990) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (84008) STATE_MGR: Capturing frame from camera
I (84013) CAMERA: Initializing camera...
I (84018) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (84027) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (84036) cam_hal: cam init ok
I (84040) sccb-ng: pin_sda 26 pin_scl 27
I (84043) sccb-ng: sccb_i2c_port=1
I (84049) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (84091) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (84091) camera: Detected OV2640 camera
I (84091) camera: Detected camera at address=0x30
I (84172) cam_hal: PSRAM DMA mode disabled
I (84172) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (84177) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (84184) cam_hal: cam config ok
I (84187) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (84270) CAMERA: Camera initialized successfully
I (84369) STATE_MGR: Frame captured: 8861 bytes
I (84369) JSON_PROTO: Generated session ID: hotpin-998C64-82
I (84369) STATE_MGR: Uploading image using session hotpin-998C64-82
I (84376) HTTP_CLIENT: Uploading image: session=hotpin-998C64-82, size=8861 bytes
I (84385) HTTP_CLIENT: POST body assembled: 9118 bytes
I (84392) HTTP_CLIENT: Sending POST request to http://10.143.111.58:8000/image
I (84656) HTTP_CLIENT: HTTP POST Status = 200, content_length = 244
I (84657) HTTP_CLIENT: Image uploaded successfully
I (84658) HTTP_CLIENT: Server response: {"status":"success","message":"Image received and stored for next voice interaction","session":"hotpin-998C64-82","filename":"image.jpg","size_bytes":8861,"saved_path":"captured_images/hotpin-998C64-82_20251104_004849.jpg","context_ready":true}
I (84685) CAMERA: Deinitializing camera...
I (84690) CAMERA: Camera deinitialized
I (84693) STATE_MGR: Camera deinitialized - DMA memory freed
I (84699) STATE_MGR: Image uploaded successfully
I (84704) LED_CTRL: LED pattern -> 3
I (84709) STATE_MGR: Camera capture sequence complete
I (84724) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (93486) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (93486) BUTTON: Single click confirmed
I (93486) STATE_MGR: Single click - mode toggle requested
I (93492) STATE_MGR: Switching: Camera â†’ Voice (count: 5)
I (93549) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (93549) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93562) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (93569) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93588) MEM_MGR: â•‘ Internal RAM:
I (93592) MEM_MGR: â•‘   Free:             132595 bytes (129 KB)
I (93599) MEM_MGR: â•‘   Largest Block:    102400 bytes (100 KB)
I (93605) MEM_MGR: â•‘   Fragmentation:     23%
I (93610) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93629) MEM_MGR: â•‘ DMA-capable RAM:
I (93633) MEM_MGR: â•‘   Free:             112231 bytes (109 KB)
I (93640) MEM_MGR: â•‘   Largest Block:    102400 bytes (100 KB)
I (93647) MEM_MGR: â•‘   Fragmentation:      9%
I (93652) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93670) MEM_MGR: â•‘ PSRAM:
I (93674) MEM_MGR: â•‘   Free:             3863868 bytes (3773 KB)
I (93681) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (93688) MEM_MGR: â•‘   Fragmentation:      2%
I (93693) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93711) MEM_MGR: â•‘ Total Heap:
I (93715) MEM_MGR: â•‘   Free:             3975732 bytes (3882 KB)
I (93722) MEM_MGR: â•‘   Minimum Ever:     3838164 bytes (3748 KB)
I (93729) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93747) MEM_MGR: â•‘ Memory Delta from Baseline:
I (93753) MEM_MGR: â•‘   Internal RAM:      -92516 bytes ( -90 KB)
I (93760) MEM_MGR: â•‘   DMA-capable:       -92516 bytes ( -90 KB)
I (93767) MEM_MGR: â•‘   PSRAM:            -328148 bytes (-320 KB)
I (93774) MEM_MGR: â•‘   Total Heap:       -389000 bytes (-379 KB)
I (93780) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93799) STATE_MGR: Stopping camera...
I (93803) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93820) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (93826) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93843) STATE_MGR:   Timeout: 5000 ms
I (93847) STATE_MGR:   Timestamp: 92294 ms
I (93852) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (93858) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93874) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (93880) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93897) STATE_MGR:   Free heap before: 3975732 bytes
I (93903) STATE_MGR:   Free PSRAM before: 3863868 bytes
I (93908) CAMERA: Deinitializing camera...
I (93913) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (93919) STATE_MGR:   Free heap after: 3975732 bytes
I (93925) STATE_MGR:   Free PSRAM after: 3863868 bytes
I (93931) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93947) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (93953) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (93970) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (94078) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (94178) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (94228) STATE_MGR:   âœ“ Total stabilization: 250ms
I (94228) STATE_MGR:   Timestamp: 92675 ms
I (94228) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (94244) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (94251) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (94267) STATE_MGR:   Free heap before: 3975732 bytes
I (94273) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (94291) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (94298) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (94316) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (94334) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (94341) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (94359) AUDIO: [DIAG] Pre-init state:
I (94363) AUDIO:   Free heap: 3975732 bytes
I (94368) AUDIO:   Free internal RAM: 132595 bytes
I (94374) AUDIO:   Free DMA-capable: 112231 bytes
I (94379) AUDIO:   Free PSRAM: 3863868 bytes
I (94384) AUDIO:   Timestamp: 92831 ms
I (94388) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (94395) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (94403) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (94411) AUDIO:   DMA frame num (per desc): 1020
I (94417) AUDIO:   DMA total samples (effective): 4080
I (94423) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (94430) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (94436) AUDIO: âœ… I2S channels created (took 0 ms)
I (94442) AUDIO:   TX handle: 0x3ffafc64 | RX handle: 0x3ffcb6a4
I (94448) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (94455) AUDIO:   Sample rate: 16000 Hz
I (94459) AUDIO:   MCLK: DISABLED
I (94463) AUDIO:   BCLK: GPIO14 (shared)
I (94468) AUDIO:   WS:   GPIO15 (shared)
I (94473) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (94480) AUDIO: âœ… TX channel configured (took 1 ms)
I (94484) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (94491) AUDIO:   Sample rate: 16000 Hz
I (94495) AUDIO:   MCLK: DISABLED
I (94499) AUDIO:   BCLK: GPIO14 (shared)
I (94504) AUDIO:   WS:   GPIO15 (shared)
I (94509) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (94515) AUDIO: âœ… RX channel configured (took 0 ms)
I (94520) AUDIO: [STEP 4/6] Enabling TX channel...
I (94526) AUDIO: âœ… TX channel enabled (took 0 ms)
I (94531) AUDIO: [STEP 5/6] Enabling RX channel...
I (94537) AUDIO: âœ… RX channel enabled (took 0 ms)
I (94542) AUDIO: [STEP 6/6] Hardware stabilization...
I (94548) AUDIO:   Phase 1: Initial settle (50ms)
I (94603) AUDIO:   Phase 2: DMA verification
I (94603) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (94604) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (94761) AUDIO: [DIAG] Post-init state:
I (94761) AUDIO:   Free heap: 3949752 bytes
I (94761) AUDIO:   Free internal RAM: 106615 bytes
I (94765) AUDIO:   Free DMA-capable: 86251 bytes
I (94770) AUDIO:   Free PSRAM: 3863868 bytes
I (94775) AUDIO:   Timestamp: 93222 ms
I (94780) AUDIO:   Total init time: 201 ms
I (94785) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (94803) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (94809) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (94814) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (94823) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (94830) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (94848) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (94865) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (94872) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (94878) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (94885) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (94891) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (94909) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (94916) STATE_MGR:   Free heap after: 3949752 bytes
I (94921) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (94938) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (94943) STATE_MGR: â•‘ Total transition time: 890 ms
I (94949) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (94965) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (94981) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (94988) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (95004) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (95012) TTS: No pending audio to flush
I (95041) TTS: TTS decoder session reset for next audio stream
I (95041) TTS: âœ… TTS decoder flushed and reset for next session
I (95043) STT: Starting STT pipeline...
I (95048) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (95057) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (95064) STT:   Current time: 93511 ms
I (95066) STT: âœ… STT pipeline started
I (95068) STT:   Free heap: 3941200 bytes
I (95068) STT: Audio streaming session activated
I (95083) STT: Connection stabilization delay (2000ms)...
I (95123) TTS: ğŸµ Starting TTS decoder...
I (95123) TTS: Initializing TTS decoder...
W (95124) TTS: TTS decoder already initialized
I (95153) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (95154) TTS: âœ… TTS decoder started successfully
I (95157) TTS: ğŸµ TTS playback task started on Core 1
I (95163) TTS: âœ… TTS playback task registered with watchdog
I (95170) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850ac8 (4096 bytes)
I (95277) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (95277) STT:   âœ“ Audio driver initialized
I (95278) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (95385) STT:   Total stabilization: 300ms
I (95385) STT:   Timestamp: 93831 ms
I (95385) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (95389) STT:   âœ“ DMA-capable buffer allocated at 0x3ffcb154 (with safety padding)
I (95398) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (95414) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (95419) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (95425) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (95482) LED_CTRL: LED pattern -> 1
I (95483) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (95494) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (95501) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (95519) MEM_MGR: â•‘ Internal RAM:
I (95523) MEM_MGR: â•‘   Free:             132595 bytes (129 KB)
I (95530) MEM_MGR: â•‘   Largest Block:    102400 bytes (100 KB)
I (95537) MEM_MGR: â•‘   Fragmentation:     23%
I (95542) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (95560) MEM_MGR: â•‘ DMA-capable RAM:
I (95565) MEM_MGR: â•‘   Free:             112231 bytes (109 KB)
I (95572) MEM_MGR: â•‘   Largest Block:    102400 bytes (100 KB)
I (95578) MEM_MGR: â•‘   Fragmentation:      9%
I (95584) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (95602) MEM_MGR: â•‘ PSRAM:
I (95606) MEM_MGR: â•‘   Free:             3863868 bytes (3773 KB)
I (95612) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (95619) MEM_MGR: â•‘   Fragmentation:      2%
I (95624) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (95643) MEM_MGR: â•‘ Total Heap:
I (95647) MEM_MGR: â•‘   Free:             3975732 bytes (3882 KB)
I (95654) MEM_MGR: â•‘   Minimum Ever:     3838164 bytes (3748 KB)
I (95661) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (95679) MEM_MGR: â•‘ Memory Delta from Baseline:
I (95685) MEM_MGR: â•‘   Internal RAM:      -92516 bytes ( -90 KB)
I (95691) MEM_MGR: â•‘   DMA-capable:       -92516 bytes ( -90 KB)
I (95698) MEM_MGR: â•‘   PSRAM:            -328148 bytes (-320 KB)
I (95705) MEM_MGR: â•‘   Total Heap:       -389000 bytes (-379 KB)
I (95712) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (95730) STATE_MGR: âœ… Voice mode transition complete
I (95736) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (95752) STATE_MGR: STT pipeline reported start
I (95762) STATE_MGR: TTS playback start event received
I (97089) STT: Starting audio streaming to server...
E (97090) WEBSOCKET: WebSocket connection lost - cannot send audio
E (97091) STT: WebSocket disconnected during audio send - aborting stream
I (97098) STT: Streaming task received stop signal
W (97103) STT: Audio streaming aborted due to transport errors
W (97110) STT: Skipping EOS - WebSocket disconnected
I (97116) STT: Audio streaming session complete (streamed 0 bytes in 0 chunks)
I (97124) STATE_MGR: STT pipeline reported stop
I (97129) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (97152) STT: Audio capture task stopped (captured 59392 bytes total)
W (97851) WEBSOCKET: WebSocket connection lost (cycle: 18, disconnects: 0, reconnects: 1)
I (97851) WEBSOCKET: Attempting WebSocket reconnection (disconnects: 1, cycle: 18)
I (97857) WEBSOCKET: Force stopping WebSocket client
W (97863) websocket_client: Client was not started
W (97868) WEBSOCKET: Graceful close returned ESP_FAIL
W (97874) websocket_client: Client was not started
W (97880) WEBSOCKET: Force stop returned ESP_FAIL
I (97985) WEBSOCKET: Connecting to WebSocket server...
I (97986) websocket_client: Started
I (97987) WEBSOCKET: âœ… WebSocket health check task created
I (97990) WEBSOCKET: WebSocket client started
I (97987) WEBSOCKET: WebSocket health check task started
I (97995) WEBSOCKET: WebSocket reconnection successful
I (98007) WEBSOCKET: WebSocket health check task shutdown signal received
I (98014) WEBSOCKET: âœ… WebSocket connected to server
I (98015) WEBSOCKET: WebSocket health check task exiting (cycles: 18, disconnects: 1, reconnects: 2)
 (98030) task_wdt: delete_entry(236): task not found
;32mI (98021) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
W (98036) WEBSOCKET: Failed to remove health check task from WDT: ESP_ERR_NOT_FOUND
I (98048) WEBSOCKET: Handshake sent successfully
I (98057) STATE_MGR: WebSocket connected
I (98058) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (98281) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (98282) WEBSOCKET: Server status: connected
I (100012) BUTTON: Single click confirmed
I (100012) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
W (100013) STATE_MGR: â³ Awaiting server transcription (EOS sent) - please wait for response
W (100022) STATE_MGR: Guardrail blocked request: Server receiving audio - please wait
I (103001) WEBSOCKET: WebSocket connection restored (cycle: 19, disconnects: 1, reconnects: 2)
E (107985) task_wdt: Task watchdog got triggered. The following tasks/users did not reset the watchdog in time:
E (107985) task_wdt:  - ws_health_check (CPU 0/1)
E (107985) task_wdt: Tasks currently running:
E (107985) task_wdt: CPU 0: IDLE0
E (107985) task_wdt: CPU 1: IDLE1
E (107985) task_wdt: Print CPU 0 (current core) backtrace


Backtrace: 0x400F4E1F:0x3FFB21E0 0x40084521:0x3FFB2210 0x4008B3B7:0x3FFCBD40 0x400D5746:0x3FFCBD60 0x4008EE07:0x3FFCBD80
--- 0x400f4e1f: task_wdt_timeout_handling at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/task_wdt/task_wdt.c:434
--- (inlined by) task_wdt_isr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/task_wdt/task_wdt.c:507
--- 0x40084521: _xt_lowint1 at C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa/xtensa_vectors.S:1240
--- 0x4008b3b7: xt_utils_wait_for_intr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa/include/xt_utils.h:82
--- (inlined by) esp_cpu_wait_for_intr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_hw_support/cpu.c:55
--- 0x400d5746: esp_vApplicationIdleHook at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/freertos_hooks.c:58
--- 0x4008ee07: prvIdleTask at C:/Espressif/frameworks/esp-idf-v5.4.2/components/freertos/FreeRTOS-Kernel/tasks.c:4341

E (107985) task_wdt: Print CPU 1 backtrace


Backtrace: 0x40085C4F:0x3FFB27F0 0x40084521:0x3FFB2810 0x4008B3B7:0x3FFCC340 0x400D5746:0x3FFCC360 0x4008EE07:0x3FFCC380
--- 0x40085c4f: esp_crosscore_isr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/crosscore_int.c:73
--- 0x40084521: _xt_lowint1 at C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa/xtensa_vectors.S:1240
--- 0x4008b3b7: xt_utils_wait_for_intr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa/include/xt_utils.h:82
--- (inlined by) esp_cpu_wait_for_intr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_hw_support/cpu.c:55
--- 0x400d5746: esp_vApplicationIdleHook at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/freertos_hooks.c:58
--- 0x4008ee07: prvIdleTask at C:/Espressif/frameworks/esp-idf-v5.4.2/components/freertos/FreeRTOS-Kernel/tasks.c:4341

I (115268) TTS: No audio data received after 20+ seconds. Exiting playback task (likely connection issue).
I (115269) TTS: ğŸµ TTS playback task exiting (played 0 bytes, result: ESP_OK)
I (115276) TTS:   âœ“ DMA buffer freed from PSRAM
I (115281) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
E (117985) task_wdt: Task watchdog got triggered. The following tasks/users did not reset the watchdog in time:
E (117985) task_wdt:  - ws_health_check (CPU 0/1)
E (117985) task_wdt: Tasks currently running:
E (117985) task_wdt: CPU 0: IDLE0
E (117985) task_wdt: CPU 1: IDLE1
E (117985) task_wdt: Print CPU 0 (current core) backtrace


Backtrace: 0x400F4E1F:0x3FFB21E0 0x40084521:0x3FFB2210 0x4008B3B7:0x3FFCBD40 0x400D5746:0x3FFCBD60 0x4008EE07:0x3FFCBD80
--- 0x400f4e1f: task_wdt_timeout_handling at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/task_wdt/task_wdt.c:434
--- (inlined by) task_wdt_isr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/task_wdt/task_wdt.c:507
--- 0x40084521: _xt_lowint1 at C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa/xtensa_vectors.S:1240
--- 0x4008b3b7: xt_utils_wait_for_intr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa/include/xt_utils.h:82
--- (inlined by) esp_cpu_wait_for_intr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_hw_support/cpu.c:55
--- 0x400d5746: esp_vApplicationIdleHook at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/freertos_hooks.c:58
--- 0x4008ee07: prvIdleTask at C:/Espressif/frameworks/esp-idf-v5.4.2/components/freertos/FreeRTOS-Kernel/tasks.c:4341

E (117985) task_wdt: Print CPU 1 backtrace


Backtrace: 0x40085C4F:0x3FFB27F0 0x40084521:0x3FFB2810 0x4008B3B7:0x3FFCC340 0x400D5746:0x3FFCC360 0x4008EE07:0x3FFCC380
--- 0x40085c4f: esp_crosscore_isr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/crosscore_int.c:73
--- 0x40084521: _xt_lowint1 at C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa/xtensa_vectors.S:1240
--- 0x4008b3b7: xt_utils_wait_for_intr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa/include/xt_utils.h:82
--- (inlined by) esp_cpu_wait_for_intr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_hw_support/cpu.c:55
--- 0x400d5746: esp_vApplicationIdleHook at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/freertos_hooks.c:58
--- 0x4008ee07: prvIdleTask at C:/Espressif/frameworks/esp-idf-v5.4.2/components/freertos/FreeRTOS-Kernel/tasks.c:4341

E (127985) task_wdt: Task watchdog got triggered. The following tasks/users did not reset the watchdog in time:
E (127985) task_wdt:  - ws_health_check (CPU 0/1)
E (127985) task_wdt: Tasks currently running:
E (127985) task_wdt: CPU 0: IDLE0
E (127985) task_wdt: CPU 1: IDLE1
E (127985) task_wdt: Print CPU 0 (current core) backtrace


Backtrace: 0x400F4E1F:0x3FFB21E0 0x40084521:0x3FFB2210 0x4008B3B7:0x3FFCBD40 0x400D5746:0x3FFCBD60 0x4008EE07:0x3FFCBD80
--- 0x400f4e1f: task_wdt_timeout_handling at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/task_wdt/task_wdt.c:434
--- (inlined by) task_wdt_isr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/task_wdt/task_wdt.c:507
--- 0x40084521: _xt_lowint1 at C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa/xtensa_vectors.S:1240
--- 0x4008b3b7: xt_utils_wait_for_intr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa/include/xt_utils.h:82
--- (inlined by) esp_cpu_wait_for_intr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_hw_support/cpu.c:55
--- 0x400d5746: esp_vApplicationIdleHook at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/freertos_hooks.c:58
--- 0x4008ee07: prvIdleTask at C:/Espressif/frameworks/esp-idf-v5.4.2/components/freertos/FreeRTOS-Kernel/tasks.c:4341

E (127985) task_wdt: Print CPU 1 backtrace


Backtrace: 0x40085C4F:0x3FFB27F0 0x40084521:0x3FFB2810 0x4008B3B7:0x3FFCC340 0x400D5746:0x3FFCC360 0x4008EE07:0x3FFCC380
--- 0x40085c4f: esp_crosscore_isr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/crosscore_int.c:73
--- 0x40084521: _xt_lowint1 at C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa/xtensa_vectors.S:1240
--- 0x4008b3b7: xt_utils_wait_for_intr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa/include/xt_utils.h:82
--- (inlined by) esp_cpu_wait_for_intr at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_hw_support/cpu.c:55
--- 0x400d5746: esp_vApplicationIdleHook at C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system/freertos_hooks.c:58
--- 0x4008ee07: prvIdleTask at C:/Espressif/frameworks/esp-idf-v5.4.2/components/freertos/FreeRTOS-Kernel/tasks.c:4341

ï¿½ï¿½)@