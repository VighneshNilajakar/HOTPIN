PS F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware> idf.py monitor
Executing action: monitor
Serial port COM7
Connecting.....
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP32
Running idf_monitor in directory F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware
Executing "C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe C:\Espressif\frameworks\esp-idf-v5.4.2\tools/idf_monitor.py -p COM7 -b 115200 --toolchain-prefix xtensa-esp32-elf- --target esp32 --revision 0 F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware\build\hotpin_esp32_firmware.elf --force-color -m 'C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe' 'C:\Espressif\frameworks\esp-idf-v5.4.2\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM7 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM7 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ï¿½ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:2
load:0x3fff0030,len:6276
load:0x40078000,len:15736
load:0x40080400,len:4
--- 0x40080400: _init at ??:?
load:0x40080404,len:3860
entry 0x4008063c
I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Nov  4 2025 09:18:16
I (29) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory0image
I (98) esp_image: segment 0: paddr=0001oï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½2Ñ‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:2
load:0x3fff0030,len:6276
load:0x40078000,len:15736
load:0x40080400,len:4
--- 0x40080400: _init at ??:?
load:0x40080404,len:3860
entry 0x4008063c
I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Nov  4 2025 09:18:16
I (29) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=3b114h (241940) map
I (188) esp_image: segment 1: paddr=0004b13c vaddr=3ff80000 size=0001ch (    28) load
I (188) esp_image: segment 2: paddr=0004b160 vaddr=3ffb0000 size=04eb8h ( 20152) load
I (199) esp_image: segment 3: paddr=00050020 vaddr=400d0020 size=be1a4h (778660) map
I (466) esp_image: segment 4: paddr=0010e1cc vaddr=3ffb4eb8 size=0ce0ch ( 52748) load
I (485) esp_image: segment 5: paddr=0011afe0 vaddr=40080000 size=1ad60h (109920) load
I (544) boot: Loaded app from partition at offset 0x10000
I (544) boot: Disabling RNG early entropy source...
I (555) quad_psram: This chip is ESP32-D0WD
I (555) esp_psram: Found 4MB PSRAM device
I (555) esp_psram: Speed: 40MHz
I (558) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (566) cpu_start: Multicore app
I (1460) esp_psram: SPI SRAM memory test OK
I (1468) cpu_start: Pro cpu start user code
I (1468) cpu_start: cpu freq: 240000000 Hz
I (1468) app_init: Application information:
I (1471) app_init: Project name:     hotpin_esp32_firmware
I (1477) app_init: App version:      f4ceb69-dirty
I (1483) app_init: Compile time:     Nov  4 2025 09:18:00
I (1489) app_init: ELF file SHA256:  f5b45db5b...
I (1494) app_init: ESP-IDF:          v5.4.2-dirty
I (1500) efuse_init: Min chip rev:     v0.0
I (1504) efuse_init: Max chip rev:     v3.99
I (1509) efuse_init: Chip rev:         v3.1
I (1515) heap_init: Initializing. RAM available for dynamic allocation:
I (1522) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1528) heap_init: At 3FFC9480 len 00016B80 (90 KiB): DRAM
I (1534) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1540) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1547) heap_init: At 4009AD60 len 000052A0 (20 KiB): IRAM
I (1554) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1562) spi_flash: detected chip: generic
I (1566) spi_flash: flash io: dio
W (1570) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1584) main_task: Started on CPU0
I (1587) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1596) main_task: Calling app_main()
I (1600) HOTPIN_MAIN: ====================================
I (1606) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1612) HOTPIN_MAIN: ====================================
W (1618) HOTPIN_MAIN: Brownout detector disabled
I (1623) HOTPIN_MAIN: Validating PSRAM...
I (1628) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1634) HOTPIN_MAIN: PSRAM validation passed
I (1639) HOTPIN_MAIN: ====================================
I (1646) HOTPIN_MAIN: System Information:
I (1650) HOTPIN_MAIN: Chip: esp32
I (1654) HOTPIN_MAIN: Cores: 2
I (1658) HOTPIN_MAIN: Silicon revision: 301
I (1663) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1668) HOTPIN_MAIN: Flash: 2 MB external
I (1673) HOTPIN_MAIN: Free heap: 4364844 bytes
I (1678) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1683) HOTPIN_MAIN: ====================================
I (1689) HOTPIN_MAIN: Initializing memory manager...
I (1694) MEM_MGR: Initializing memory manager...
I (1700) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1718) MEM_MGR: â•‘ Memory Manager Initialized
I (1723) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1742) MEM_MGR: â•‘ Baseline Memory State:
I (1747) MEM_MGR: â•‘   Internal RAM:     225179 bytes (219 KB)
I (1753) MEM_MGR: â•‘   DMA-capable:      204763 bytes (199 KB)
I (1760) MEM_MGR: â•‘   PSRAM:            4192016 bytes (4093 KB)
I (1766) MEM_MGR: â•‘   Total Heap:       4364748 bytes (4262 KB)
I (1773) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1792) MEM_MGR: â•‘ Configured Thresholds:
I (1797) MEM_MGR: â•‘   Internal RAM:     WARN=50KB, CRIT=20KB
I (1803) MEM_MGR: â•‘   DMA-capable:      WARN=35KB, CRIT=20KB
I (1810) MEM_MGR: â•‘   PSRAM:            WARN=500KB, CRIT=200KB
I (1816) MEM_MGR: â•‘   Fragmentation:    WARN=30%, CRIT=50%
I (1823) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1841) MEM_MGR: Starting memory monitoring (interval: 15000 ms)
I (1848) MEM_MGR: âœ… Memory monitoring started
I (1848) MEM_MGR: Memory monitor task started (interval: 15000 ms)
I (1853) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
W (1860) MEM_MGR: âš ï¸ WARNING: Memory fragmentation increasing! DMA:46% PSRAM:2%
I (1878) MEM_MGR: â•‘ Memory Statistics - System Boot
I (1892) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1910) MEM_MGR: â•‘ Internal RAM:
I (1915) MEM_MGR: â•‘   Free:             225179 bytes (219 KB)
I (1921) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1928) MEM_MGR: â•‘   Fragmentation:     51%
I (1933) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1951) MEM_MGR: â•‘ DMA-capable RAM:
I (1956) MEM_MGR: â•‘   Free:             204763 bytes (199 KB)
I (1962) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1969) MEM_MGR: â•‘   Fragmentation:     46%
I (1974) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1992) MEM_MGR: â•‘ PSRAM:
I (1996) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (2003) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (2009) MEM_MGR: â•‘   Fragmentation:      2%
I (2014) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2033) MEM_MGR: â•‘ Total Heap:
I (2037) MEM_MGR: â•‘   Free:             4364748 bytes (4262 KB)
I (2044) MEM_MGR: â•‘   Minimum Ever:     4364748 bytes (4262 KB)
I (2050) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2069) MEM_MGR: â•‘ Memory Delta from Baseline:
I (2074) MEM_MGR: â•‘   Internal RAM:          +0 bytes (  +0 KB)
I (2081) MEM_MGR: â•‘   DMA-capable:           +0 bytes (  +0 KB)
I (2088) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (2094) MEM_MGR: â•‘   Total Heap:            +0 bytes (  +0 KB)
I (2101) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2119) HOTPIN_MAIN: Initializing NVS...
I (2149) HOTPIN_MAIN: NVS initialized successfully
I (2149) event_dispatcher: System event queue ready (16 entries)
I (2150) HOTPIN_MAIN: Synchronization primitives created
I (2156) HOTPIN_MAIN: Initializing WiFi...
I (2165) wifi:wifi driver task: 3ffdaac4, prio:23, stack:6656, core=0
I (2178) wifi:wifi firmware version: bea31f3
I (2178) wifi:wifi certification version: v7.0
I (2178) wifi:config NVS flash: enabled
I (2179) wifi:config nano formatting: disabled
I (2183) wifi:Init data frame dynamic rx buffer num: 32
I (2188) wifi:Init static rx mgmt buffer num: 5
I (2192) wifi:Init management short buffer num: 32
I (2197) wifi:Init dynamic tx buffer num: 32
I (2201) wifi:Init static rx buffer size: 1600
I (2205) wifi:Init static rx buffer num: 10
I (2209) wifi:Init dynamic rx buffer num: 32
I (2214) wifi_init: rx ba win: 6
I (2217) wifi_init: accept mbox: 6
I (2221) wifi_init: tcpip mbox: 32
I (2225) wifi_init: udp mbox: 6
I (2229) wifi_init: tcp mbox: 6
I (2232) wifi_init: tcp tx win: 5760
I (2237) wifi_init: tcp rx win: 5760
I (2241) wifi_init: tcp mss: 1440
I (2245) wifi_init: WiFi IRAM OP enabled
I (2250) wifi_init: WiFi RX IRAM OP enabled
I (2256) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (2333) wifi:mode : sta (80:f3:da:99:8c:64)
I (2333) wifi:enable tsf
I (2336) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (2336) HOTPIN_MAIN: Waiting for WiFi connection...
I (2337) HOTPIN_MAIN: WiFi station started, connecting...
I (2359) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (2361) wifi:state: init -> auth (0xb0)
I (3380) wifi:state: auth -> assoc (0x0)
I (3390) wifi:state: assoc -> run (0x10)
I (3414) wifi:connected with wifi, aid = 2, channel 11, BW20, bssid = ee:d4:b9:ed:90:50
I (3415) wifi:security: WPA3-SAE, phy: bgn, rssi: -53
I (3419) wifi:pm start, type: 1

I (3419) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (3430) wifi:<ba-add>idx:0 (ifx:0, ee:d4:b9:ed:90:50), tid:0, ssn:0, winSize:64
I (3437) HOTPIN_MAIN: WiFi connected to AP
I (3494) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (3494) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (4462) esp_netif_handlers: sta ip: 10.143.111.214, mask: 255.255.255.0, gw: 10.143.111.248
I (4463) HOTPIN_MAIN: âœ… Got IP address: 10.143.111.214
I (4467) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (7351) HOTPIN_MAIN: Initializing button handler...
I (7351) BUTTON: Initializing button handler on GPIO 12
I (7352) gpio: GPIO[12]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (7361) BUTTON: Button FSM task started
I (7366) BUTTON: GPIO ISR service installed successfully
I (7371) BUTTON: Button handler initialized successfully (initial level=1, primed=1)
I (7380) HOTPIN_MAIN: Initializing LED controller...
I (7385) LED_CTRL: Initializing LED controller on GPIO 33
I (7392) LED_CTRL: LED controller ready
I (7396) LED_CTRL: LED pattern -> 2
I (7400) HOTPIN_MAIN: Initializing WebSocket client...
I (7406) WEBSOCKET: Initializing WebSocket client...
I (7412) WEBSOCKET: Server URI: ws://10.143.111.58:8000/ws
I (7418) WEBSOCKET: Authorization header configured
I (7424) WEBSOCKET: âœ… WebSocket client initialized
I (7429) WEBSOCKET: Status callback registered
I (7434) HOTPIN_MAIN: WebSocket status callback registered
I (7440) HOTPIN_MAIN: Initializing HTTP client...
I (7446) HTTP_CLIENT: Initializing HTTP client
I (7451) HTTP_CLIENT: Authorization token configured
I (7456) HTTP_CLIENT: HTTP client initialized (server: http://10.143.111.58:8000)
I (7465) HOTPIN_MAIN: Initializing STT pipeline...
I (7470) STT: Initializing STT pipeline...
I (7475) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7493) STT: â•‘ STT Ring Buffer Allocation (PSRAM)
I (7499) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7517) STT: [MEMORY] Pre-allocation state:
I (7522) STT:   Free internal RAM: 166287 bytes
I (7527) STT:   Free DMA-capable: 145871 bytes
I (7532) STT:   Free PSRAM: 4126020 bytes
I (7537) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (7545) STT:   âœ“ Ring buffer allocated at 0x3f810ac0 (PSRAM address)
I (7552) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (7561) STT: [MEMORY] Post-allocation state:
I (7566) STT:   Free internal RAM: 166287 bytes
I (7571) STT:   Free DMA-capable: 145871 bytes
I (7576) STT:   Free PSRAM: 4060480 bytes
I (7587) STT: [CORE AFFINITY] Creating persistent audio streaming task on Core 0
I (7589) STT: Persistent audio streaming task started on Core 0
I (7595) STT:   âœ“ Stream buffer allocated at 0x3ffd1b7c (with safety padding)
I (7603) STT: âœ… STT pipeline initialized
I (7608) HOTPIN_MAIN: Initializing TTS decoder...
I (7613) TTS: Initializing TTS decoder...
I (7618) TTS: Allocating 196608 byte PSRAM buffer for TTS stream
I (7625) TTS:   PSRAM available: 4060480 bytes (3965 KB)
I (7631) TTS:   âœ“ TTS stream buffer allocated at 0x3f820ac4
I (7663) WEBSOCKET: Audio callback registered
I (7664) TTS: âœ… TTS decoder initialized
I (7664) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (7670) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (7675) HOTPIN_MAIN: State manager task created on Core 1
I (7675) STATE_MGR: State manager task started on Core 1
I (7687) STATE_MGR: Priority: 10
I (7682) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (7691) STATE_MGR: Starting in camera mode...
I (7698) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 1)...
I (7703) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (7711) WEBSOCKET: Connecting to WebSocket server...
I (7717) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7731) websocket_client: Started
I (7741) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (7745) WEBSOCKET: WebSocket client started (health check disabled - managed by main connection task)
I (7752) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7780) MEM_MGR: â•‘ Internal RAM:
I (7682) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (7784) MEM_MGR: â•‘   Free:             222771 bytes (217 KB)
I (7791) HOTPIN_MAIN: Configuring task watchdog for critical tasks...
I (7797) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7805) HOTPIN_MAIN: âœ… State manager task added to watchdog
I (7811) MEM_MGR: â•‘   Fragmentation:     51%
I (7818) HOTPIN_MAIN: âœ… WebSocket connection task added to watchdog
I (7823) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7830) HOTPIN_MAIN: Task watchdog configuration complete
I (7848) MEM_MGR: â•‘ DMA-capable RAM:
I (7854) HOTPIN_MAIN: ====================================
I (7859) MEM_MGR: â•‘   Free:             202355 bytes (197 KB)
I (7865) HOTPIN_MAIN: System initialization complete!
I (7871) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (7877) HOTPIN_MAIN: Entering camera standby mode...
I (7884) MEM_MGR: â•‘   Fragmentation:     46%
I (7890) HOTPIN_MAIN: ====================================
I (7895) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7901) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7919) MEM_MGR: â•‘ PSRAM:
I (7937) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (7941) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (7948) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7954) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (7972) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (7979) MEM_MGR: â•‘   Fragmentation:      2%
I (7986) AUDIO:   âœ“ I2S access mutex created successfully
I (7991) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7998) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8016) MEM_MGR: â•‘ Total Heap:
I (8034) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (8038) MEM_MGR: â•‘   Free:             4362340 bytes (4260 KB)
I (8045) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8052) MEM_MGR: â•‘   Minimum Ever:     4362340 bytes (4260 KB)
I (8070) AUDIO: [DIAG] Pre-init state:
I (8076) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8081) AUDIO:   Free heap: 3965360 bytes
I (8099) MEM_MGR: â•‘ Memory Delta from Baseline:
I (8104) AUDIO:   Free internal RAM: 122167 bytes
I (8115) AUDIO:   Free DMA-capable: 100195 bytes
I (8109) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (8120) AUDIO:   Free PSRAM: 3863732 bytes
I (8127) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (8132) AUDIO:   Timestamp: 6578 ms
I (8138) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (8143) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (8149) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (8156) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (8163) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8171) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (8189) STATE_MGR: Acquiring I2S mutex...
I (8197) AUDIO:   DMA frame num (per desc): 1020
I (8124) WEBSOCKET: âœ… WebSocket connected to server
I (8207) AUDIO:   DMA total samples (effective): 4080
I (8213) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (8219) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (8230) WEBSOCKET: Handshake sent successfully
I (8233) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (8238) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (8245) AUDIO: âœ… I2S channels created (took 0 ms)
I (8257) AUDIO:   TX handle: 0x3ffe1b08 | RX handle: 0x3ffe1d5c
I (8263) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (8270) AUDIO:   Sample rate: 16000 Hz
I (8274) AUDIO:   MCLK: DISABLED
I (8278) AUDIO:   BCLK: GPIO14 (shared)
I (8283) AUDIO:   WS:   GPIO15 (shared)
I (8287) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (8289) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (8294) AUDIO: âœ… TX channel configured (took 1 ms)
I (8303) WEBSOCKET: Server status: connected
I (8308) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (8320) AUDIO:   Sample rate: 16000 Hz
I (8324) AUDIO:   MCLK: DISABLED
I (8328) AUDIO:   BCLK: GPIO14 (shared)
I (8333) AUDIO:   WS:   GPIO15 (shared)
I (8337) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (8344) AUDIO: âœ… RX channel configured (took 1 ms)
I (8349) AUDIO: [STEP 4/6] Enabling TX channel...
I (8354) AUDIO: âœ… TX channel enabled (took 0 ms)
I (8359) AUDIO: [STEP 5/6] Enabling RX channel...
I (8365) AUDIO: âœ… RX channel enabled (took 0 ms)
I (8370) AUDIO: [STEP 6/6] Hardware stabilization...
I (8376) AUDIO:   Phase 1: Initial settle (50ms)
I (8381) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (8431) AUDIO:   Phase 2: DMA verification
I (8431) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (8431) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (8588) AUDIO: [DIAG] Post-init state:
I (8588) AUDIO:   Free heap: 3939372 bytes
I (8588) AUDIO:   Free internal RAM: 96063 bytes
I (8591) AUDIO:   Free DMA-capable: 75647 bytes
I (8597) AUDIO:   Free PSRAM: 3863732 bytes
I (8601) AUDIO:   Timestamp: 7048 ms
I (8606) AUDIO:   Total init time: 202 ms
I (8610) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8628) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (8634) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (8640) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (8648) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (8655) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8673) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8691) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (8697) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (8704) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (8710) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (8717) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10001) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10008) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (10016) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10034) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (10040) AUDIO: âœ… RX channel disabled (took 0 ms)
I (10046) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (10052) AUDIO: âœ… TX channel disabled (took 0 ms)
I (10058) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (10115) AUDIO: [STEP 4/5] Deleting RX channel...
I (10115) AUDIO: âœ… RX channel deleted (took 0 ms)
I (10115) AUDIO: [STEP 5/5] Deleting TX channel...
I (10120) AUDIO: âœ… TX channel deleted (took 0 ms)
I (10125) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (10183) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10190) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (10196) AUDIO: â•‘ Camera Can Now Initialize
I (10201) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10219) STATE_MGR: Audio drivers already inactive; skipping deinit
I (10219) LED_CTRL: LED pattern -> 3
I (10226) STATE_MGR: Allowing memory stabilization (100ms)...
I (10230) HOTPIN_MAIN: Main task exiting - system running
I (10243) main_task: Returned from app_main()
I (10337) STATE_MGR: Camera will be initialized on-demand during capture
I (10337) STATE_MGR: I2S mutex released
I (10338) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10356) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (10363) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10382) MEM_MGR: â•‘ Internal RAM:
I (10386) MEM_MGR: â•‘   Free:             222771 bytes (217 KB)
I (10393) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10399) MEM_MGR: â•‘   Fragmentation:     51%
I (10405) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10423) MEM_MGR: â•‘ DMA-capable RAM:
I (10428) MEM_MGR: â•‘   Free:             202355 bytes (197 KB)
I (10434) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10441) MEM_MGR: â•‘   Fragmentation:     46%
I (10446) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10464) MEM_MGR: â•‘ PSRAM:
I (10468) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (10475) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (10482) MEM_MGR: â•‘   Fragmentation:      2%
I (10487) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10505) MEM_MGR: â•‘ Total Heap:
I (10510) MEM_MGR: â•‘   Free:             4362340 bytes (4260 KB)
I (10516) MEM_MGR: â•‘   Minimum Ever:     4362340 bytes (4260 KB)
I (10523) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10542) MEM_MGR: â•‘ Memory Delta from Baseline:
I (10547) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (10554) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (10561) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (10568) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (10575) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10593) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (10602) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (10618) STATE_MGR: âœ… WebSocket connected
I (20228) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (20228) BUTTON: Single click confirmed
I (20228) STATE_MGR: Single click - mode toggle requested
I (20235) STATE_MGR: Switching: Camera â†’ Voice (count: 1)
I (20291) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (20291) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20304) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (20311) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20330) MEM_MGR: â•‘ Internal RAM:
I (20334) MEM_MGR: â•‘   Free:             126619 bytes (123 KB)
I (20341) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (20347) MEM_MGR: â•‘   Fragmentation:     26%
I (20352) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20371) MEM_MGR: â•‘ DMA-capable RAM:
I (20375) MEM_MGR: â•‘   Free:             106203 bytes (103 KB)
I (20382) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (20389) MEM_MGR: â•‘   Fragmentation:     12%
I (20394) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20412) MEM_MGR: â•‘ PSRAM:
I (20416) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (20423) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (20430) MEM_MGR: â•‘   Fragmentation:      2%
I (20435) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20453) MEM_MGR: â•‘ Total Heap:
I (20457) MEM_MGR: â•‘   Free:             3969860 bytes (3876 KB)
I (20464) MEM_MGR: â•‘   Minimum Ever:     3936704 bytes (3844 KB)
I (20471) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20489) MEM_MGR: â•‘ Memory Delta from Baseline:
I (20495) MEM_MGR: â•‘   Internal RAM:      -98560 bytes ( -96 KB)
I (20502) MEM_MGR: â•‘   DMA-capable:       -98560 bytes ( -96 KB)
I (20509) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (20516) MEM_MGR: â•‘   Total Heap:       -394888 bytes (-385 KB)
I (20522) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20541) STATE_MGR: Stopping camera...
I (20545) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20562) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (20568) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20585) STATE_MGR:   Timeout: 5000 ms
I (20589) STATE_MGR:   Timestamp: 19036 ms
I (20594) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (20600) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20616) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (20622) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20639) STATE_MGR:   Free heap before: 3969860 bytes
I (20645) STATE_MGR:   Free PSRAM before: 3863732 bytes
I (20650) CAMERA: Deinitializing camera...
I (20655) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (20661) STATE_MGR:   Free heap after: 3969860 bytes
I (20667) STATE_MGR:   Free PSRAM after: 3863732 bytes
I (20673) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20689) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (20695) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20712) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (20820) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (20920) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (20970) STATE_MGR:   âœ“ Total stabilization: 250ms
I (20970) STATE_MGR:   Timestamp: 19417 ms
I (20970) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (20986) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (20993) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21009) STATE_MGR:   Free heap before: 3969860 bytes
I (21015) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21033) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (21040) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21058) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21076) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (21083) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21101) AUDIO: [DIAG] Pre-init state:
I (21105) AUDIO:   Free heap: 3969860 bytes
I (21110) AUDIO:   Free internal RAM: 126619 bytes
I (21116) AUDIO:   Free DMA-capable: 106203 bytes
I (21121) AUDIO:   Free PSRAM: 3863732 bytes
I (21126) AUDIO:   Timestamp: 19573 ms
I (21130) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (21137) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (21145) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (21153) AUDIO:   DMA frame num (per desc): 1020
I (21159) AUDIO:   DMA total samples (effective): 4080
I (21165) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (21172) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (21178) AUDIO: âœ… I2S channels created (took 0 ms)
I (21184) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7f0
I (21190) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (21197) AUDIO:   Sample rate: 16000 Hz
I (21201) AUDIO:   MCLK: DISABLED
I (21205) AUDIO:   BCLK: GPIO14 (shared)
I (21210) AUDIO:   WS:   GPIO15 (shared)
I (21215) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (21222) AUDIO: âœ… TX channel configured (took 1 ms)
I (21226) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (21233) AUDIO:   Sample rate: 16000 Hz
I (21237) AUDIO:   MCLK: DISABLED
I (21241) AUDIO:   BCLK: GPIO14 (shared)
I (21246) AUDIO:   WS:   GPIO15 (shared)
I (21251) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (21257) AUDIO: âœ… RX channel configured (took 0 ms)
I (21262) AUDIO: [STEP 4/6] Enabling TX channel...
I (21268) AUDIO: âœ… TX channel enabled (took 0 ms)
I (21273) AUDIO: [STEP 5/6] Enabling RX channel...
I (21279) AUDIO: âœ… RX channel enabled (took 0 ms)
I (21284) AUDIO: [STEP 6/6] Hardware stabilization...
I (21290) AUDIO:   Phase 1: Initial settle (50ms)
I (21345) AUDIO:   Phase 2: DMA verification
I (21345) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (21346) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (21503) AUDIO: [DIAG] Post-init state:
I (21503) AUDIO:   Free heap: 3943856 bytes
I (21503) AUDIO:   Free internal RAM: 100615 bytes
I (21507) AUDIO:   Free DMA-capable: 80199 bytes
I (21512) AUDIO:   Free PSRAM: 3863732 bytes
I (21517) AUDIO:   Timestamp: 19964 ms
I (21522) AUDIO:   Total init time: 201 ms
I (21527) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21545) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (21551) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (21556) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (21565) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (21572) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21590) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21607) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (21614) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (21620) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (21627) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (21633) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21651) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (21658) STATE_MGR:   Free heap after: 3943856 bytes
I (21663) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21680) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (21685) STATE_MGR: â•‘ Total transition time: 890 ms
I (21691) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21707) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21723) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (21730) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (21746) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (21754) TTS: No pending audio to flush
I (21783) TTS: TTS decoder session reset for next audio stream
I (21783) TTS: âœ… TTS decoder flushed and reset for next session
I (21785) STT: Starting STT pipeline...
I (21789) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (21799) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (21806) STT:   Current time: 20253 ms
I (21809) STT: âœ… STT pipeline started
I (21810) STT:   Free heap: 3935304 bytes
I (21810) STT: Audio streaming session activated
I (21825) STT: Connection stabilization delay (2000ms)...
I (21865) TTS: ğŸµ Starting TTS decoder...
I (21865) TTS: Initializing TTS decoder...
W (21866) TTS: TTS decoder already initialized
I (21894) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (21894) TTS: âœ… TTS decoder started successfully
I (21898) TTS: ğŸµ TTS playback task started on Core 1
I (21904) TTS: âœ… TTS playback task registered with watchdog
I (21910) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (22020) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (22020) STT:   âœ“ Audio driver initialized
I (22021) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (22130) STT:   Total stabilization: 300ms
I (22130) STT:   Timestamp: 20577 ms
I (22130) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (22134) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37bc (with safety padding)
I (22143) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22159) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (22164) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (22170) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22223) LED_CTRL: LED pattern -> 1
I (22224) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22235) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (22242) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22260) MEM_MGR: â•‘ Internal RAM:
I (22264) MEM_MGR: â•‘   Free:             126619 bytes (123 KB)
I (22271) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (22278) MEM_MGR: â•‘   Fragmentation:     26%
I (22283) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22301) MEM_MGR: â•‘ DMA-capable RAM:
I (22306) MEM_MGR: â•‘   Free:             106203 bytes (103 KB)
I (22313) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (22319) MEM_MGR: â•‘   Fragmentation:     12%
I (22325) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22343) MEM_MGR: â•‘ PSRAM:
I (22347) MEM_MGR: â•‘   Free:             3863732 bytes (3773 KB)
I (22353) MEM_MGR: â•‘   Largest Block:    3801088 bytes (3712 KB)
I (22360) MEM_MGR: â•‘   Fragmentation:      2%
I (22365) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22384) MEM_MGR: â•‘ Total Heap:
I (22388) MEM_MGR: â•‘   Free:             3969860 bytes (3876 KB)
I (22395) MEM_MGR: â•‘   Minimum Ever:     3936704 bytes (3844 KB)
I (22402) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22420) MEM_MGR: â•‘ Memory Delta from Baseline:
I (22426) MEM_MGR: â•‘   Internal RAM:      -98560 bytes ( -96 KB)
I (22432) MEM_MGR: â•‘   DMA-capable:       -98560 bytes ( -96 KB)
I (22439) MEM_MGR: â•‘   PSRAM:            -328284 bytes (-320 KB)
I (22446) MEM_MGR: â•‘   Total Heap:       -394888 bytes (-385 KB)
I (22453) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (22471) STATE_MGR: âœ… Voice mode transition complete
I (22477) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (22493) STATE_MGR: STT pipeline reported start
I (22503) STATE_MGR: TTS playback start event received
I (23831) STT: Starting audio streaming to server...
W (24108) STT: Waiting for server ACK (sent: 2, acked: 0, unack: 2)
I (24146) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (24146) WEBSOCKET: Server status: receiving
I (24151) STT: Flow control: ACK received, resuming (sent=2, acked=2)
I (24158) WEBSOCKET: Server ACK: 2 chunks processed
I (24164) STT: ACK received, resuming (unack now: 0)
I (24214) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (24215) WEBSOCKET: Server status: receiving
I (24220) WEBSOCKET: Server ACK: 4 chunks processed
I (24274) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (24274) WEBSOCKET: Server status: receiving
I (24279) WEBSOCKET: Server ACK: 6 chunks processed
I (24335) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (24336) WEBSOCKET: Server status: receiving
I (24341) WEBSOCKET: Server ACK: 8 chunks processed
I (24397) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (24398) WEBSOCKET: Server status: receiving
I (24403) WEBSOCKET: Server ACK: 10 chunks processed
I (24458) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (24459) WEBSOCKET: Server status: receiving
I (24463) WEBSOCKET: Server ACK: 12 chunks processed
W (24529) STT: Waiting for server ACK (sent: 14, acked: 12, unack: 2)
I (24560) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (24561) WEBSOCKET: Server status: receiving
I (24566) STT: Flow control: ACK received, resuming (sent=14, acked=14)
I (24573) WEBSOCKET: Server ACK: 14 chunks processed
I (24579) STT: ACK received, resuming (unack now: 0)
I (24631) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (24632) WEBSOCKET: Server status: receiving
I (24637) WEBSOCKET: Server ACK: 16 chunks processed
I (24693) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (24693) WEBSOCKET: Server status: receiving
I (24698) WEBSOCKET: Server ACK: 18 chunks processed
W (24762) STT: Waiting for server ACK (sent: 20, acked: 18, unack: 2)
I (24797) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (24798) WEBSOCKET: Server status: receiving
I (24803) STT: Flow control: ACK received, resuming (sent=20, acked=20)
I (24810) WEBSOCKET: Server ACK: 20 chunks processed
I (24813) STT: ACK received, resuming (unack now: 0)
I (24868) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (24868) WEBSOCKET: Server status: receiving
I (24873) WEBSOCKET: Server ACK: 22 chunks processed
I (25184) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (25185) WEBSOCKET: Server status: receiving
I (25189) WEBSOCKET: Server ACK: 24 chunks processed
I (25398) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (25398) WEBSOCKET: Server status: receiving
I (25403) WEBSOCKET: Server ACK: 26 chunks processed
I (25663) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (25664) WEBSOCKET: Server status: receiving
I (25669) WEBSOCKET: Server ACK: 28 chunks processed
I (25934) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (25934) BUTTON: Single click confirmed
I (25934) STATE_MGR: User cancellation request accepted - STT will stop, awaiting server response
I (25944) STATE_MGR: Single click - mode toggle requested
I (25950) STATE_MGR: User requested to end voice session (count: 2). Stopping STT and awaiting server response.
I (25961) STT: Stopping STT pipeline...
I (25965) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (25981) STT: Ring buffer drained and cleared successfully
I (25986) STT: Capture stopped and ring buffer drained; ending streaming loop
I (25987) STT: Sending EOS signal...
I (25991) WEBSOCKET: Sending EOS signal
I (25998) STT: Audio capture task stopped (captured 126976 bytes total)
I (26002) STT: Audio streaming session complete (streamed 122880 bytes in 30 chunks)
I (26031) STT: STT pipeline stopped
I (26031) LED_CTRL: LED pattern -> 4
I (26031) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (26047) STATE_MGR: STT pipeline reported stop
I (26047) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (26051) LED_CTRL: LED pattern -> 1
I (26136) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (26137) WEBSOCKET: Server status: receiving
I (26142) WEBSOCKET: Server ACK: 30 chunks processed
I (26237) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (26238) WEBSOCKET: Server status: processing
I (26241) WEBSOCKET: Server stage: transcription
I (26246) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (26253) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (26766) LED_CTRL: LED pattern -> 4
I (26766) STATE_MGR: Pipeline stage event: transcription
I (26767) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (26771) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hello", "has_image": false}
I (26786) WEBSOCKET: Server status: processing
I (26791) WEBSOCKET: Server stage: llm
I (26795) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (26802) WEBSOCKET: Entering LLM stage - continuing processing indication
I (26810) STATE_MGR: Pipeline stage event: llm
W (26986) TTS: âš ï¸ No audio data received for 5+ seconds while waiting for header
W (26986) TTS:    This suggests a network disconnection. Exiting playback task gracefully.
W (26993) TTS:    websocket_connection_task will handle reconnection automatically.
I (27001) TTS: ğŸµ TTS playback task exiting (played 0 bytes, result: ESP_ERR_TIMEOUT)
I (27010) TTS:   âœ“ DMA buffer freed from PSRAM
I (27015) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (27154) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I'm Hotpin, your compact, helpful, and private voice assistant, here to provide you with quick and concise answers."}
I (27163) WEBSOCKET: Server status: processing
I (27168) WEBSOCKET: Server stage: tts
I (27173) WEBSOCKET: Pipeline stage changed: llm -> tts
I (27178) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (27186) LED_CTRL: LED pattern -> 3
I (27190) TTS: ğŸµ Starting TTS decoder...
I (27195) TTS: Initializing TTS decoder...
W (27200) TTS: TTS decoder already initialized
I (27233) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (27234) TTS: ğŸµ TTS playback task started on Core 1
I (27234) STATE_MGR: TTS playback start event received
I (27234) TTS: âœ… TTS decoder started successfully
I (27244) LED_CTRL: LED pattern -> 1
I (27244) TTS: âœ… TTS playback task registered with watchdog
I (27260) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f850b50 (4096 bytes)
I (27264) STATE_MGR: Pipeline stage event: tts
I (27568) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 1, total: 4096)
I (27569) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 26015 ms, bytes: 4096)
I (27575) TTS: Received audio chunk #1: 4096 bytes
I (27580) TTS: Chunk #1 first 12 bytes: 52 49 46 46 EA E7 03 00 57 41 56 45
I (27588) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (27596) STATE_MGR: TTS playback start event received
I (27602) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 2, total: 8192)
I (27610) TTS: Received audio chunk #2: 4096 bytes
I (27615) TTS: Chunk #2 first 12 bytes: 93 FA D2 FC F4 00 D8 04 10 06 C4 05
I (27629) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 3, total: 12288)
I (27631) TTS: Received audio chunk #3: 4096 bytes
I (27636) TTS: Chunk #3 first 12 bytes: FC F9 C8 F9 BB F9 D3 F9 9A F9 04 F9
I (27651) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 4, total: 16384)
I (27652) TTS: Received audio chunk #4: 4096 bytes
I (27658) TTS: Chunk #4 first 12 bytes: 55 0D 74 FD 5C F1 74 E7 0A E3 0E E3
I (27667) TTS: âœ… WAV header parsed successfully
I (27671) TTS: === WAV File Info ===
I (27674) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 5, total: 20480)
I (27675) TTS: Sample Rate: 16000 Hz
I (27683) TTS: Received audio chunk #5: 4096 bytes
I (27687) TTS: Channels: 1
I (27693) TTS: Chunk #5 first 12 bytes: 6D 01 29 00 30 00 E2 00 6D 01 B1 00
I (27696) TTS: Bits per Sample: 16
I (27708) TTS: Audio Format: 1 (PCM)
I (27711) TTS: Received audio chunk #6: 4096 bytes
I (27712) TTS: Declared Data Size: 255942 bytes
I (27723) TTS: Block Align: 2
I (27724) TTS: Received audio chunk #7: 4096 bytes
I (27727) TTS: Byte Rate: 32000
I (27736) TTS: ====================
I (27739) TTS: Received audio chunk #8: 4096 bytes
I (27752) TTS: Received audio chunk #9: 4096 bytes
I (27762) TTS: Received audio chunk #10: 4096 bytes
I (27764) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=36864)
I (27765) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (27773) TTS: Received audio chunk #11: 4096 bytes
I (27787) TTS: Received audio chunk #12: 4096 bytes
I (27795) TTS: Received audio chunk #13: 4096 bytes
I (27804) TTS: Received audio chunk #14: 4096 bytes
I (27812) TTS: Received audio chunk #15: 4096 bytes
I (27820) TTS: Received audio chunk #16: 4096 bytes
I (27829) TTS: Received audio chunk #17: 4096 bytes
I (27839) TTS: Received audio chunk #18: 4096 bytes
I (27847) TTS: Received audio chunk #19: 4096 bytes
I (27856) TTS: Received audio chunk #20: 4096 bytes
I (27864) TTS: Received audio chunk #21: 4096 bytes
I (27875) TTS: Received audio chunk #22: 4096 bytes
I (27883) TTS: Received audio chunk #23: 4096 bytes
I (27892) TTS: Received audio chunk #24: 4096 bytes
I (27903) TTS: Received audio chunk #25: 4096 bytes
I (27912) TTS: Received audio chunk #26: 4096 bytes
I (27920) TTS: Received audio chunk #27: 4096 bytes
I (27927) TTS: Received audio chunk #28: 1441 bytes
I (27953) TTS: Received audio chunk #29: 2655 bytes
I (27960) TTS: Received audio chunk #30: 4096 bytes
I (27971) TTS: Received audio chunk #31: 4096 bytes
I (27980) TTS: Received audio chunk #32: 4096 bytes
I (27989) TTS: Received audio chunk #33: 4096 bytes
I (27997) TTS: Received audio chunk #34: 4096 bytes
I (28006) TTS: Received audio chunk #35: 4096 bytes
I (28014) TTS: Received audio chunk #36: 4096 bytes
I (28023) TTS: Received audio chunk #37: 4096 bytes
I (28034) TTS: Received audio chunk #38: 4096 bytes
I (28041) TTS: Received audio chunk #39: 761 bytes
I (28045) TTS: Received audio chunk #40: 3335 bytes
I (28053) TTS: Received audio chunk #41: 4096 bytes
I (28062) TTS: Received audio chunk #42: 4096 bytes
I (28072) TTS: Received audio chunk #43: 4096 bytes
I (28081) TTS: Received audio chunk #44: 4096 bytes
I (28090) TTS: Received audio chunk #45: 4096 bytes
I (28099) TTS: Received audio chunk #46: 4096 bytes
I (28107) TTS: Received audio chunk #47: 4096 bytes
I (28116) TTS: Received audio chunk #48: 4096 bytes
I (28124) TTS: Received audio chunk #49: 4096 bytes
I (28133) TTS: Received audio chunk #50: 4096 bytes
I (28141) TTS: Received audio chunk #51: 4096 bytes
I (28148) TTS: Received audio chunk #52: 521 bytes
I (28154) TTS: Received audio chunk #53: 3575 bytes
I (28165) TTS: Received audio chunk #54: 4096 bytes
I (28177) TTS: Received audio chunk #55: 4096 bytes
I (28186) TTS: Received audio chunk #56: 4096 bytes
I (28288) TTS: Received audio chunk #57: 4096 bytes
I (28416) TTS: Received audio chunk #58: 4096 bytes
I (28544) TTS: Received audio chunk #59: 4096 bytes
I (28671) TTS: Received audio chunk #60: 4096 bytes
I (28798) TTS: Received audio chunk #61: 4096 bytes
I (28926) TTS: Received audio chunk #62: 4096 bytes
I (29053) TTS: Received audio chunk #63: 4096 bytes
I (29181) TTS: Received audio chunk #64: 4096 bytes
I (29308) TTS: Received audio chunk #65: 4096 bytes
I (29435) TTS: Received audio chunk #66: 2034 bytes
I (29439) WEBSOCKET: Received text message: {"status": "complete"}
I (29439) WEBSOCKET: Server status: complete
I (29442) WEBSOCKET: Pipeline stage changed: tts -> complete
I (29448) WEBSOCKET: Exiting TTS stage (transition to complete)
I (29554) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (29555) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (29559) STATE_MGR: Pipeline stage event: complete
I (29565) TTS: TTS end-of-stream signaled (bytes_received=255986, header_parsed=1)
I (29573) TTS: Flushing 190450 bytes from stream buffer
I (29679) TTS: Force draining 190450 bytes from stream buffer
E (29684) TTS: âŒ Failed to find WAV header after accumulating 4096 bytes
E (29684) TTS:    First 4 bytes: 0x4A 0xEF 0xF3 0xEA
E (29688) TTS:    This suggests the stream is not a valid WAV file
I (29695) TTS: ğŸµ TTS playback task exiting (played 4096 bytes, result: ESP_ERR_INVALID_ARG)
I (29704) TTS:   âœ“ DMA buffer freed from PSRAM
I (29709) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (29717) TTS:   âœ“ Clearing 182258 bytes from stream buffer
I (29748) TTS: Flushed 5120 bytes from stream buffer (attempts: 0)
I (29749) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (29785) TTS: TTS decoder session reset for next audio stream
W (38389) HOTPIN_MAIN: âš ï¸ Connection health check timeout - forcing reconnect to prevent stale connection
W (38389) HOTPIN_MAIN: âš ï¸ WebSocket link not healthy, initiating reconnection sequence
I (38398) WEBSOCKET: Force stopping WebSocket client
W (38421) websocket_client: Client was not started
W (38421) WEBSOCKET: Force stop returned ESP_FAIL
I (39421) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 2)...
I (39421) WEBSOCKET: Connecting to WebSocket server...
I (39429) websocket_client: Started
I (39430) WEBSOCKET: WebSocket client started (health check disabled - managed by main connection task)
I (39450) WEBSOCKET: âœ… WebSocket connected to server
I (39451) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (39456) WEBSOCKET: Handshake sent successfully
I (39458) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (39465) STATE_MGR: âœ… WebSocket connected
I (39508) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (39508) WEBSOCKET: Server status: connected
I (39638) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (50687) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (50687) BUTTON: Single click confirmed
I (50687) STATE_MGR: Single click - mode toggle requested
I (50693) STATE_MGR: User requested to end voice session (count: 3). Stopping STT and awaiting server response.
I (50704) STT: Stopping STT pipeline...
W (50709) STT: STT pipeline already stopped
I (50714) LED_CTRL: LED pattern -> 4
I (50718) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
W (69638) HOTPIN_MAIN: âš ï¸ Connection health check timeout - forcing reconnect to prevent stale connection
W (69638) HOTPIN_MAIN: âš ï¸ WebSocket link not healthy, initiating reconnection sequence
I (69646) WEBSOCKET: Force stopping WebSocket client
W (69652) websocket_client: Client was not started
W (69657) WEBSOCKET: Graceful close returned ESP_FAIL
W (69663) websocket_client: Client was not started
W (69669) WEBSOCKET: Force stop returned ESP_FAIL
I (70674) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 3)...
I (70674) WEBSOCKET: Connecting to WebSocket server...
I (70678) websocket_client: Started
I (70683) WEBSOCKET: WebSocket client started (health check disabled - managed by main connection task)
I (70698) WEBSOCKET: âœ… WebSocket connected to server
I (70699) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (70707) WEBSOCKET: Handshake sent successfully
I (70709) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (70709) STATE_MGR: âœ… WebSocket connected
I (70721) LED_CTRL: LED pattern -> 1
I (70783) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (70783) WEBSOCKET: Server status: connected
I (70891) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (77865) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (77865) BUTTON: Single click confirmed
I (77865) STATE_MGR: Single click - mode toggle requested
I (77871) STATE_MGR: User requested to end voice session (count: 4). Stopping STT and awaiting server response.
I (77882) STT: Stopping STT pipeline...
W (77887) STT: STT pipeline already stopped
I (77891) LED_CTRL: LED pattern -> 4
I (77896) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (81785) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (81785) BUTTON: Single click confirmed
I (81785) STATE_MGR: Single click - mode toggle requested
I (81791) STATE_MGR: User requested to end voice session (count: 5). Stopping STT and awaiting server response.
I (81802) STT: Stopping STT pipeline...
W (81807) STT: STT pipeline already stopped
I (81811) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (83180) STATE_MGR: Button event received: 2 in state VOICE_ACTIVE
I (83180) STATE_MGR: Double-click detected - triggering capture sequence
I (83183) STATE_MGR: Starting camera capture sequence
W (83189) STATE_MGR: Camera capture not allowed while voice mode is active
E (83196) STATE_MGR: Camera capture sequence failed (ESP_ERR_INVALID_STATE)
I (83204) LED_CTRL: LED pattern -> 5
I (85208) LED_CTRL: LED pattern -> 1
I (87125) STATE_MGR: Button event received: 3 in state VOICE_ACTIVE
I (87125) BUTTON: Long press detected (3000 ms)
W (87125) STATE_MGR: Long press - shutdown requested
W (87131) STATE_MGR: Shutdown state reached
W (87136) STATE_MGR: === SYSTEM SHUTDOWN ===
I (87892) HOTPIN_MAIN: System shutdown detected, terminating WebSocket connection task
I (87892) HOTPIN_MAIN: Unregistering WebSocket connection task from watchdog
I (87897) HOTPIN_MAIN: WebSocket connection task terminated
I (88925) LED_CTRL: LED pattern -> 3
I (90125) LED_CTRL: LED pattern -> 0
I (90125) STATE_MGR: Stopping all subsystems...
I (90125) STATE_MGR: Shutting down audio...
I (90129) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90146) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (90154) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90172) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (90179) AUDIO: âœ… RX channel disabled (took 0 ms)
I (90185) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (90191) AUDIO: âœ… TX channel disabled (took 0 ms)
I (90197) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (90253) AUDIO: [STEP 4/5] Deleting RX channel...
I (90254) AUDIO: âœ… RX channel deleted (took 0 ms)
I (90254) AUDIO: [STEP 5/5] Deleting TX channel...
I (90259) AUDIO: âœ… TX channel deleted (took 0 ms)
I (90264) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (90322) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90329) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (90336) AUDIO: â•‘ Camera Can Now Initialize
I (90341) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90359) STATE_MGR: Shutting down camera...
I (90364) CAMERA: Deinitializing camera...
I (90368) STT: Stopping STT pipeline...
W (90373) STT: STT pipeline already stopped
I (90378) TTS: â¹ï¸ Stopping TTS decoder...
W (90383) TTS: TTS decoder already stopped.
I (90412) STATE_MGR: Stopping WebSocket client
I (90412) WEBSOCKET: Disconnecting from WebSocket server...
W (90645) websocket_client: Client was not started
W (90646) WEBSOCKET: WebSocket client stop reported ESP_FAIL, continuing cleanup
I (90649) WEBSOCKET: WebSocket disconnected
I (90653) WEBSOCKET: Force stopping WebSocket client
W (90659) websocket_client: Client was not started
W (90664) WEBSOCKET: Graceful close returned ESP_FAIL
I (90670) STATE_MGR: âœ… Shutdown complete
