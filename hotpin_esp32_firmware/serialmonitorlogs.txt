PS F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware> idf.py monitor
Executing action: monitor
Serial port COM7
Connecting.....
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP32
Running idf_monitor in directory F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware
Executing "C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe C:\Espressif\frameworks\esp-idf-v5.4.2\tools/idf_monitor.py -p COM7 -b 115200 --toolchain-prefix xtensa-esp32-elf- --target esp32 --revision 0 F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware\build\hotpin_esp32_firmware.elf --force-color -m 'C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe' 'C:\Espressif\frameworks\esp-idf-v5.4.2\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM7 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM7 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:2
load:0x3fff0030,len:6276
load:0x40078000,len:15736
load:0x40080400,len:4
--- 0x40080400: _init at ??:?
load:0x40080404,len:3860
entry 0x4008063c
I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Nov 14 2025 14:10:40
I (30) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=3b440h (242752) map
I (188) esp_image: segment 1: paddr=0004b468 vaddr=3ff80000 size=0001ch (    28) load
I (189) esp_image: segment 2: paddr=0004b48c vaddr=3ffb0000 size=04b8ch ( 19340) load
I (199) esp_image: segment 3: paddr=00050020 vaddr=400d0020 size=be3f4h (779252) map
I (466) esp_image: segment 4: paddr=0010e41c vaddr=3ffb4b8c size=0d138h ( 53560) load
I (486) esp_image: segment 5: paddr=0011b55c vaddr=40080000 size=1ad60h (109920) load
I (545) boot: Loaded app from partition at offset 0x10000
I (545) boot: Disabling RNG early entropy source...
I (555) quad_psram: This chip is ESP32-D0WD
I (556) esp_psram: Found 4MB PSRAM device
I (556) esp_psram: Speed: 40MHz
I (559) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (566) cpu_start: Multicore app
I (1461) esp_psram: SPI SRAM memory test OK
I (1469) cpu_start: Pro cpu start user code
I (1469) cpu_start: cpu freq: 240000000 Hz
I (1469) app_init: Application information:
I (1472) app_init: Project name:     hotpin_esp32_firmware
I (1478) app_init: App version:      a67f01a-dirty
I (1484) app_init: Compile time:     Nov 14 2025 14:10:28
I (1490) app_init: ELF file SHA256:  1bff74028...
I (1495) app_init: ESP-IDF:          v5.4.2-dirty
I (1500) efuse_init: Min chip rev:     v0.0
I (1505) efuse_init: Max chip rev:     v3.99
I (1510) efuse_init: Chip rev:         v3.1
I (1516) heap_init: Initializing. RAM available for dynamic allocation:
I (1523) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1529) heap_init: At 3FFC9480 len 00016B80 (90 KiB): DRAM
I (1535) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1541) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1548) heap_init: At 4009AD60 len 000052A0 (20 KiB): IRAM
I (1555) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1562) spi_flash: detected chip: generic
I (1566) spi_flash: flash io: dio
W (1570) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1585) main_task: Started on CPU0
I (1588) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1597) main_task: Calling app_main()
I (1601) HOTPIN_MAIN: ====================================
I (1607) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1613) HOTPIN_MAIN: ====================================
W (1619) HOTPIN_MAIN: Brownout detector disabled
I (1624) HOTPIN_MAIN: Validating PSRAM...
I (1629) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1635) HOTPIN_MAIN: PSRAM validation passed
I (1641) HOTPIN_MAIN: ====================================
I (1647) HOTPIN_MAIN: System Information:
I (1651) HOTPIN_MAIN: Chip: esp32
I (1655) HOTPIN_MAIN: Cores: 2
I (1659) HOTPIN_MAIN: Silicon revision: 301
I (1664) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1669) HOTPIN_MAIN: Flash: 2 MB external
I (1674) HOTPIN_MAIN: Free heap: 4364844 bytes
I (1679) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1684) HOTPIN_MAIN: ====================================
I (1690) HOTPIN_MAIN: Initializing memory manager...
I (1695) MEM_MGR: Initializing memory manager...
I (1701) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1719) MEM_MGR: â•‘ Memory Manager Initialized
I (1724) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1743) MEM_MGR: â•‘ Baseline Memory State:
I (1748) MEM_MGR: â•‘   Internal RAM:     225179 bytes (219 KB)
I (1754) MEM_MGR: â•‘   DMA-capable:      204763 bytes (199 KB)
I (1761) MEM_MGR: â•‘   PSRAM:            4192016 bytes (4093 KB)
I (1768) MEM_MGR: â•‘   Total Heap:       4364748 bytes (4262 KB)
I (1774) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1793) MEM_MGR: â•‘ Configured Thresholds:
I (1798) MEM_MGR: â•‘   Internal RAM:     WARN=50KB, CRIT=20KB
I (1804) MEM_MGR: â•‘   DMA-capable:      WARN=35KB, CRIT=20KB
I (1811) MEM_MGR: â•‘   PSRAM:            WARN=500KB, CRIT=200KB
I (1817) MEM_MGR: â•‘   Fragmentation:    WARN=30%, CRIT=50%
I (1824) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1842) MEM_MGR: Starting memory monitoring (interval: 15000 ms)
I (1849) MEM_MGR: âœ… Memory monitoring started
I (1849) MEM_MGR: Memory monitor task started (interval: 15000 ms)
I (1854) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
W (1861) MEM_MGR: âš ï¸ WARNING: Memory fragmentation increasing! DMA:46% PSRAM:2%
I (1879) MEM_MGR: â•‘ Memory Statistics - System Boot
I (1893) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1911) MEM_MGR: â•‘ Internal RAM:
I (1916) MEM_MGR: â•‘   Free:             225179 bytes (219 KB)
I (1922) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1929) MEM_MGR: â•‘   Fragmentation:     51%
I (1934) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1952) MEM_MGR: â•‘ DMA-capable RAM:
I (1957) MEM_MGR: â•‘   Free:             204763 bytes (199 KB)
I (1963) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1970) MEM_MGR: â•‘   Fragmentation:     46%
I (1975) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1993) MEM_MGR: â•‘ PSRAM:
I (1997) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (2004) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (2010) MEM_MGR: â•‘   Fragmentation:      2%
I (2016) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2034) MEM_MGR: â•‘ Total Heap:
I (2038) MEM_MGR: â•‘   Free:             4364748 bytes (4262 KB)
I (2045) MEM_MGR: â•‘   Minimum Ever:     4364748 bytes (4262 KB)
I (2051) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2070) MEM_MGR: â•‘ Memory Delta from Baseline:
I (2075) MEM_MGR: â•‘   Internal RAM:          +0 bytes (  +0 KB)
I (2082) MEM_MGR: â•‘   DMA-capable:           +0 bytes (  +0 KB)
I (2089) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (2095) MEM_MGR: â•‘   Total Heap:            +0 bytes (  +0 KB)
I (2102) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2120) HOTPIN_MAIN: Initializing NVS...
I (2150) HOTPIN_MAIN: NVS initialized successfully
I (2151) event_dispatcher: System event queue ready (16 entries)
I (2152) HOTPIN_MAIN: Synchronization primitives created
I (2158) HOTPIN_MAIN: Initializing WiFi...
I (2166) wifi:wifi driver task: 3ffdaa40, prio:23, stack:6656, core=0
I (2179) wifi:wifi firmware version: bea31f3
I (2180) wifi:wifi certification version: v7.0
I (2180) wifi:config NVS flash: enabled
I (2183) wifi:config nano formatting: disabled
I (2187) wifi:Init data frame dynamic rx buffer num: 32
I (2192) wifi:Init static rx mgmt buffer num: 5
I (2196) wifi:Init management short buffer num: 32
I (2200) wifi:Init dynamic tx buffer num: 32
I (2205) wifi:Init static rx buffer size: 1600
I (2209) wifi:Init static rx buffer num: 10
I (2212) wifi:Init dynamic rx buffer num: 32
I (2218) wifi_init: rx ba win: 6
I (2220) wifi_init: accept mbox: 6
I (2224) wifi_init: tcpip mbox: 32
I (2229) wifi_init: udp mbox: 6
I (2232) wifi_init: tcp mbox: 6
I (2236) wifi_init: tcp tx win: 5760
I (2240) wifi_init: tcp rx win: 5760
I (2245) wifi_init: tcp mss: 1440
I (2249) wifi_init: WiFi IRAM OP enabled
I (2253) wifi_init: WiFi RX IRAM OP enabled
I (2260) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (2343) phy_init: Saving new calibration data due to checksum failure or outdated calibration data, mode(0)
I (2400) wifi:mode : sta (80:f3:da:ac:63:70)
I (2401) wifi:enable tsf
I (2403) HOTPIN_MAIN: Disabling WiFi power save mode for stable streaming...
I (2405) wifi:Set ps type: 0, coexist: 0

I (2408) HOTPIN_MAIN: WiFi station started, connecting...
I (2417) HOTPIN_MAIN: âœ… WiFi power save disabled - maximum throughput and stability
I (2427) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (2430) wifi:state: init -> auth (0xb0)
I (2959) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (2960) HOTPIN_MAIN: Waiting for WiFi connection...
I (3289) wifi:state: auth -> assoc (0x0)
I (3300) wifi:state: assoc -> run (0x10)
I (3324) wifi:connected with wifi, aid = 2, channel 11, BW20, bssid = ee:d4:b9:ed:90:50
I (3324) wifi:security: WPA3-SAE, phy: bgn, rssi: -60
I (3328) wifi:pm start, type: 0

I (3329) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (3339) wifi:<ba-add>idx:0 (ifx:0, ee:d4:b9:ed:90:50), tid:0, ssn:0, winSize:64
I (3346) HOTPIN_MAIN: WiFi connected to AP
I (3362) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (3362) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (4376) esp_netif_handlers: sta ip: 10.242.175.204, mask: 255.255.255.0, gw: 10.242.175.123
I (4377) HOTPIN_MAIN: âœ… Got IP address: 10.242.175.204
I (4381) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (7962) HOTPIN_MAIN: Initializing button handler...
I (7962) BUTTON: Initializing button handler on GPIO 12
I (7963) gpio: GPIO[12]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (7972) BUTTON: Button FSM task started
I (7977) BUTTON: GPIO ISR service installed successfully
I (7982) BUTTON: Button handler initialized successfully (initial level=1, primed=1)
I (7991) HOTPIN_MAIN: Initializing LED controller...
I (7996) LED_CTRL: Initializing LED controller on GPIO 33
I (8003) LED_CTRL: LED controller ready
I (8007) LED_CTRL: LED pattern -> 2
I (8011) HOTPIN_MAIN: Initializing WebSocket client...
I (8017) WEBSOCKET: Initializing WebSocket client...
I (8023) WEBSOCKET: Server URI: ws://10.242.175.58:8000/ws
I (8029) WEBSOCKET: Authorization header configured
I (8035) WEBSOCKET: âœ… WebSocket client initialized
I (8040) WEBSOCKET: Status callback registered
I (8045) HOTPIN_MAIN: WebSocket status callback registered
I (8051) HOTPIN_MAIN: Initializing HTTP client...
I (8057) HTTP_CLIENT: Initializing HTTP client
I (8062) HTTP_CLIENT: Authorization token configured
I (8067) HTTP_CLIENT: HTTP client initialized (server: http://10.242.175.58:8000)
I (8076) HOTPIN_MAIN: Initializing STT pipeline...
I (8081) STT: Initializing STT pipeline...
I (8086) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8104) STT: â•‘ STT Ring Buffer Allocation (PSRAM)
I (8110) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8128) STT: [MEMORY] Pre-allocation state:
I (8133) STT:   Free internal RAM: 166427 bytes
I (8138) STT:   Free DMA-capable: 146011 bytes
I (8143) STT:   Free PSRAM: 4060484 bytes
I (8148) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (8156) STT:   âœ“ Ring buffer allocated at 0x3f820ac0 (PSRAM address)
I (8163) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (8172) STT: [MEMORY] Post-allocation state:
I (8177) STT:   Free internal RAM: 166427 bytes
I (8182) STT:   Free DMA-capable: 146011 bytes
I (8187) STT:   Free PSRAM: 3994944 bytes
I (8198) STT: [CORE AFFINITY] Creating persistent audio streaming task on Core 0
I (8200) STT: Persistent audio streaming task started on Core 0
I (8206) STT:   âœ“ Stream buffer allocated at 0x3ffd1ac8 (with safety padding)
I (8214) STT: âœ… STT pipeline initialized
I (8219) HOTPIN_MAIN: Initializing TTS decoder...
I (8224) TTS: Initializing TTS decoder...
I (8229) TTS: Allocating 327680 byte PSRAM buffer for TTS stream
I (8236) TTS:   PSRAM available: 3994944 bytes (3901 KB)
I (8242) TTS:   âœ“ TTS stream buffer allocated at 0x3f830ac4
I (8293) WEBSOCKET: Audio callback registered
I (8294) TTS: âœ… TTS decoder initialized
I (8294) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (8300) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (8306) HOTPIN_MAIN: State manager task created on Core 1
I (8306) STATE_MGR: State manager task started on Core 1
I (8312) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (8318) STATE_MGR: Priority: 10
I (8325) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 1)...
I (8329) STATE_MGR: Starting in camera mode...
I (8336) WEBSOCKET: Connecting to WebSocket server...
I (8341) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (8353) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8354) websocket_client: Started
I (8371) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (8375) WEBSOCKET: WebSocket client started (health check disabled - managed by main connection task)
I (8382) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8312) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (8410) MEM_MGR: â•‘ Internal RAM:
I (8421) MEM_MGR: â•‘   Free:             222771 bytes (217 KB)
I (8417) HOTPIN_MAIN: Configuring task watchdog for critical tasks...
I (8428) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (8435) HOTPIN_MAIN: âœ… State manager task added to watchdog
I (8441) MEM_MGR: â•‘   Fragmentation:     51%
I (8448) HOTPIN_MAIN: âœ… WebSocket connection task added to watchdog
I (8453) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8460) HOTPIN_MAIN: Task watchdog configuration complete
I (8479) MEM_MGR: â•‘ DMA-capable RAM:
I (8485) HOTPIN_MAIN: ====================================
I (8489) MEM_MGR: â•‘   Free:             202355 bytes (197 KB)
I (8502) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (8495) HOTPIN_MAIN: System initialization complete!
I (8508) MEM_MGR: â•‘   Fragmentation:     46%
I (8519) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8520) WEBSOCKET: âœ… WebSocket connected to server
I (8514) HOTPIN_MAIN: Entering camera standby mode...
I (8544) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (8544) MEM_MGR: â•‘ PSRAM:
I (8560) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (8561) WEBSOCKET: Handshake sent successfully
I (8558) HOTPIN_MAIN: ====================================
I (8572) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (8572) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (8592) MEM_MGR: â•‘   Fragmentation:      2%
I (8592) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (8597) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8585) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8622) MEM_MGR: â•‘ Total Heap:
I (8640) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (8644) MEM_MGR: â•‘   Free:             4362340 bytes (4260 KB)
I (8651) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8658) MEM_MGR: â•‘   Minimum Ever:     4362340 bytes (4260 KB)
I (8676) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (8683) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8690) AUDIO:   âœ“ I2S access mutex created successfully
I (8708) MEM_MGR: â•‘ Memory Delta from Baseline:
I (8714) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8720) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (8738) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (8744) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (8752) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8758) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (8776) AUDIO: [DIAG] Pre-init state:
I (8783) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (8788) AUDIO:   Free heap: 3768868 bytes
I (8794) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8799) AUDIO:   Free internal RAM: 122095 bytes
I (8817) STATE_MGR: Acquiring I2S mutex...
I (8823) AUDIO:   Free DMA-capable: 101679 bytes
I (8635) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (8833) AUDIO:   Free PSRAM: 3667260 bytes
I (8843) WEBSOCKET: Server status: connected
I (8848) AUDIO:   Timestamp: 7293 ms
I (8857) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (8863) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (8871) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (8879) AUDIO:   DMA frame num (per desc): 1020
I (8885) AUDIO:   DMA total samples (effective): 4080
I (8890) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (8897) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (8904) AUDIO: âœ… I2S channels created (took 0 ms)
I (8909) AUDIO:   TX handle: 0x3ffe1aec | RX handle: 0x3ffe1c38
I (8916) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (8922) AUDIO:   Sample rate: 16000 Hz
I (8927) AUDIO:   MCLK: DISABLED
I (8931) AUDIO:   BCLK: GPIO14 (shared)
I (8935) AUDIO:   WS:   GPIO15 (shared)
I (8940) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (8947) AUDIO: âœ… TX channel configured (took 1 ms)
I (8951) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (8958) AUDIO:   Sample rate: 16000 Hz
I (8962) AUDIO:   MCLK: DISABLED
I (8966) AUDIO:   BCLK: GPIO14 (shared)
I (8971) AUDIO:   WS:   GPIO15 (shared)
I (8975) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (8981) AUDIO: âœ… RX channel configured (took 0 ms)
I (8986) AUDIO: [STEP 4/6] Enabling TX channel...
I (8992) AUDIO: âœ… TX channel enabled (took 0 ms)
I (8997) AUDIO: [STEP 5/6] Enabling RX channel...
I (9003) AUDIO: âœ… RX channel enabled (took 0 ms)
I (9008) AUDIO: [STEP 6/6] Hardware stabilization...
I (9014) AUDIO:   Phase 1: Initial settle (50ms)
I (9069) AUDIO:   Phase 2: DMA verification
I (9069) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (9069) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (9226) AUDIO: [DIAG] Post-init state:
I (9226) AUDIO:   Free heap: 3742916 bytes
I (9226) AUDIO:   Free internal RAM: 96215 bytes
I (9229) AUDIO:   Free DMA-capable: 75799 bytes
I (9234) AUDIO:   Free PSRAM: 3667124 bytes
I (9239) AUDIO:   Timestamp: 7685 ms
I (9244) AUDIO:   Total init time: 201 ms
I (9248) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9266) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (9272) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (9277) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (9286) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (9293) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9311) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9329) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (9335) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (9341) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (9348) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (9354) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10638) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10645) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (10652) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10670) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (10677) AUDIO: âœ… RX channel disabled (took 0 ms)
I (10683) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (10689) AUDIO: âœ… TX channel disabled (took 0 ms)
I (10695) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (10752) AUDIO: [STEP 4/5] Deleting RX channel...
I (10752) AUDIO: âœ… RX channel deleted (took 0 ms)
I (10752) AUDIO: [STEP 5/5] Deleting TX channel...
I (10757) AUDIO: âœ… TX channel deleted (took 0 ms)
I (10763) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (10820) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10826) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (10833) AUDIO: â•‘ Camera Can Now Initialize
I (10838) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10856) STATE_MGR: Audio drivers already inactive; skipping deinit
I (10857) LED_CTRL: LED pattern -> 3
I (10863) STATE_MGR: Allowing memory stabilization (100ms)...
I (10867) HOTPIN_MAIN: Main task exiting - system running
I (10880) main_task: Returned from app_main()
I (10974) STATE_MGR: Camera will be initialized on-demand during capture
I (10974) STATE_MGR: I2S mutex released
I (10975) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10993) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (11000) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11019) MEM_MGR: â•‘ Internal RAM:
I (11023) MEM_MGR: â•‘   Free:             222771 bytes (217 KB)
I (11030) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (11036) MEM_MGR: â•‘   Fragmentation:     51%
I (11042) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11060) MEM_MGR: â•‘ DMA-capable RAM:
I (11064) MEM_MGR: â•‘   Free:             202355 bytes (197 KB)
I (11071) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (11078) MEM_MGR: â•‘   Fragmentation:     46%
I (11083) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11101) MEM_MGR: â•‘ PSRAM:
I (11105) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (11112) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (11119) MEM_MGR: â•‘   Fragmentation:      2%
I (11124) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11142) MEM_MGR: â•‘ Total Heap:
I (11147) MEM_MGR: â•‘   Free:             4362340 bytes (4260 KB)
I (11153) MEM_MGR: â•‘   Minimum Ever:     4362340 bytes (4260 KB)
I (11160) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11179) MEM_MGR: â•‘ Memory Delta from Baseline:
I (11184) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (11191) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (11198) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (11205) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (11212) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11230) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (11239) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (11245) STATE_MGR: âœ… WebSocket connected
I (26062) BUTTON: Single click confirmed
I (26062) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (26063) STATE_MGR: Single click - mode toggle requested
I (26069) STATE_MGR: Switching: Camera â†’ Voice (count: 1)
I (26125) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (26125) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26138) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (26145) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26164) MEM_MGR: â•‘ Internal RAM:
I (26168) MEM_MGR: â•‘   Free:             126763 bytes (123 KB)
I (26175) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (26181) MEM_MGR: â•‘   Fragmentation:     26%
I (26186) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26205) MEM_MGR: â•‘ DMA-capable RAM:
I (26209) MEM_MGR: â•‘   Free:             106347 bytes (103 KB)
I (26216) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (26223) MEM_MGR: â•‘   Fragmentation:     12%
I (26228) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26246) MEM_MGR: â•‘ PSRAM:
I (26250) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (26257) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (26264) MEM_MGR: â•‘   Fragmentation:      2%
I (26269) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26287) MEM_MGR: â•‘ Total Heap:
I (26291) MEM_MGR: â•‘   Free:             3773400 bytes (3684 KB)
I (26298) MEM_MGR: â•‘   Minimum Ever:     3742900 bytes (3655 KB)
I (26305) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26323) MEM_MGR: â•‘ Memory Delta from Baseline:
I (26329) MEM_MGR: â•‘   Internal RAM:      -98416 bytes ( -96 KB)
I (26336) MEM_MGR: â•‘   DMA-capable:       -98416 bytes ( -96 KB)
I (26343) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (26350) MEM_MGR: â•‘   Total Heap:       -591348 bytes (-577 KB)
I (26356) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26375) STATE_MGR: Stopping camera...
I (26379) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26396) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (26402) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26419) STATE_MGR:   Timeout: 5000 ms
I (26423) STATE_MGR:   Timestamp: 24869 ms
I (26428) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (26434) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26450) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (26456) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26473) STATE_MGR:   Free heap before: 3773400 bytes
I (26478) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (26484) CAMERA: Deinitializing camera...
I (26489) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (26495) STATE_MGR:   Free heap after: 3773400 bytes
I (26501) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (26507) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26523) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (26529) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26546) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (26654) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (26754) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (26804) STATE_MGR:   âœ“ Total stabilization: 250ms
I (26804) STATE_MGR:   Timestamp: 25250 ms
I (26804) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26820) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (26827) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26843) STATE_MGR:   Free heap before: 3773400 bytes
I (26849) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26867) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (26874) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26892) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26910) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (26917) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26935) AUDIO: [DIAG] Pre-init state:
I (26939) AUDIO:   Free heap: 3773400 bytes
I (26944) AUDIO:   Free internal RAM: 126763 bytes
I (26950) AUDIO:   Free DMA-capable: 106347 bytes
I (26955) AUDIO:   Free PSRAM: 3667124 bytes
I (26960) AUDIO:   Timestamp: 25406 ms
I (26964) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (26971) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (26979) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (26987) AUDIO:   DMA frame num (per desc): 1020
I (26993) AUDIO:   DMA total samples (effective): 4080
I (26999) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (27006) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (27012) AUDIO: âœ… I2S channels created (took 0 ms)
I (27018) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7f0
I (27024) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (27031) AUDIO:   Sample rate: 16000 Hz
I (27035) AUDIO:   MCLK: DISABLED
I (27039) AUDIO:   BCLK: GPIO14 (shared)
I (27044) AUDIO:   WS:   GPIO15 (shared)
I (27049) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (27056) AUDIO: âœ… TX channel configured (took 1 ms)
I (27060) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (27067) AUDIO:   Sample rate: 16000 Hz
I (27071) AUDIO:   MCLK: DISABLED
I (27075) AUDIO:   BCLK: GPIO14 (shared)
I (27080) AUDIO:   WS:   GPIO15 (shared)
I (27085) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (27091) AUDIO: âœ… RX channel configured (took 0 ms)
I (27096) AUDIO: [STEP 4/6] Enabling TX channel...
I (27102) AUDIO: âœ… TX channel enabled (took 0 ms)
I (27107) AUDIO: [STEP 5/6] Enabling RX channel...
I (27113) AUDIO: âœ… RX channel enabled (took 0 ms)
I (27118) AUDIO: [STEP 6/6] Hardware stabilization...
I (27124) AUDIO:   Phase 1: Initial settle (50ms)
I (27179) AUDIO:   Phase 2: DMA verification
I (27179) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (27180) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (27337) AUDIO: [DIAG] Post-init state:
I (27337) AUDIO:   Free heap: 3747396 bytes
I (27337) AUDIO:   Free internal RAM: 100759 bytes
I (27341) AUDIO:   Free DMA-capable: 80343 bytes
I (27346) AUDIO:   Free PSRAM: 3667124 bytes
I (27351) AUDIO:   Timestamp: 25797 ms
I (27356) AUDIO:   Total init time: 201 ms
I (27361) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27379) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (27385) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (27390) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (27399) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (27406) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27424) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27441) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (27448) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (27454) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (27461) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (27467) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27485) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (27492) STATE_MGR:   Free heap after: 3747396 bytes
I (27497) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27513) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (27519) STATE_MGR: â•‘ Total transition time: 890 ms
I (27525) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27541) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27557) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (27567) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (27583) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (27591) TTS: No pending audio to flush
I (27640) TTS: TTS decoder session reset for next audio stream
I (27640) TTS: âœ… TTS decoder flushed and reset for next session
I (27642) STT: Starting STT pipeline...
I (27647) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (27656) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (27663) STT:   Current time: 26109 ms
I (27666) STT: âœ… STT pipeline started
I (27668) STT:   Free heap: 3738844 bytes
I (27672) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (27668) STT: Audio streaming session activated
I (27691) STT: Connection stabilization delay (2000ms)...
I (27877) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (27877) STT:   âœ“ Audio driver initialized
I (27878) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (27985) STT:   Total stabilization: 300ms
I (27985) STT:   Timestamp: 26431 ms
I (27985) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (27989) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37f4 (with safety padding)
I (27998) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28011) LED_CTRL: LED pattern -> 1
I (28014) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (28018) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28023) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (28042) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (28048) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28055) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28089) MEM_MGR: â•‘ Internal RAM:
I (28094) MEM_MGR: â•‘   Free:             126763 bytes (123 KB)
I (28100) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (28107) MEM_MGR: â•‘   Fragmentation:     26%
I (28112) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28131) MEM_MGR: â•‘ DMA-capable RAM:
I (28135) MEM_MGR: â•‘   Free:             106347 bytes (103 KB)
I (28142) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (28149) MEM_MGR: â•‘   Fragmentation:     12%
I (28154) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28172) MEM_MGR: â•‘ PSRAM:
I (28176) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (28183) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (28190) MEM_MGR: â•‘   Fragmentation:      2%
I (28195) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28213) MEM_MGR: â•‘ Total Heap:
I (28217) MEM_MGR: â•‘   Free:             3773400 bytes (3684 KB)
I (28224) MEM_MGR: â•‘   Minimum Ever:     3742900 bytes (3655 KB)
I (28231) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28249) MEM_MGR: â•‘ Memory Delta from Baseline:
I (28255) MEM_MGR: â•‘   Internal RAM:      -98416 bytes ( -96 KB)
I (28262) MEM_MGR: â•‘   DMA-capable:       -98416 bytes ( -96 KB)
I (28269) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (28275) MEM_MGR: â•‘   Total Heap:       -591348 bytes (-577 KB)
I (28282) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28301) STATE_MGR: âœ… Voice mode transition complete
I (28307) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (28322) STATE_MGR: STT pipeline reported start
I (29697) STT: Starting audio streaming to server...
W (29758) STT: Waiting for server ACK (sent: 2, acked: 0, unack: 2)
I (29765) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (29766) WEBSOCKET: Server status: receiving
I (29771) STT: Flow control: ACK received, resuming (sent=2, acked=2)
I (29778) WEBSOCKET: Server ACK: 2 chunks processed
I (29779) STT: ACK received, resuming (unack now: 0)
I (29846) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (29847) WEBSOCKET: Server status: receiving
I (29851) WEBSOCKET: Server ACK: 4 chunks processed
I (29920) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (29921) WEBSOCKET: Server status: receiving
I (29926) WEBSOCKET: Server ACK: 6 chunks processed
I (29991) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (29992) WEBSOCKET: Server status: receiving
I (29996) WEBSOCKET: Server ACK: 8 chunks processed
W (30061) STT: Waiting for server ACK (sent: 10, acked: 8, unack: 2)
I (30112) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (30113) WEBSOCKET: Server status: receiving
I (30117) STT: Flow control: ACK received, resuming (sent=10, acked=10)
I (30124) WEBSOCKET: Server ACK: 10 chunks processed
I (30131) STT: ACK received, resuming (unack now: 0)
I (30191) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (30192) WEBSOCKET: Server status: receiving
I (30196) WEBSOCKET: Server ACK: 12 chunks processed
I (30251) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (30252) WEBSOCKET: Server status: receiving
I (30257) WEBSOCKET: Server ACK: 14 chunks processed
I (30321) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (30322) WEBSOCKET: Server status: receiving
I (30327) WEBSOCKET: Server ACK: 16 chunks processed
I (30387) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (30388) WEBSOCKET: Server status: receiving
I (30392) WEBSOCKET: Server ACK: 18 chunks processed
I (30551) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (30552) WEBSOCKET: Server status: receiving
I (30557) WEBSOCKET: Server ACK: 20 chunks processed
I (30822) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (30823) WEBSOCKET: Server status: receiving
I (30827) WEBSOCKET: Server ACK: 22 chunks processed
I (31041) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (31042) WEBSOCKET: Server status: receiving
I (31047) WEBSOCKET: Server ACK: 24 chunks processed
I (31257) BUTTON: Single click confirmed
I (31257) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (31258) STATE_MGR: Single click - mode toggle requested
I (31264) STATE_MGR: User requested to end voice session (count: 2). Stopping STT and awaiting server response.
I (31275) STT: Stopping STT pipeline...
I (31279) STT: Draining ring buffer (5120 bytes pending) before shutdown...
I (31296) STT: Ring buffer drained and cleared successfully
I (31322) STT: Audio capture task stopped (captured 108544 bytes total)
I (31324) STT: Streaming task received stop signal
I (31324) STT: Sending EOS signal...
I (31328) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (31340) WEBSOCKET: Server status: receiving
I (31344) WEBSOCKET: Server ACK: 26 chunks processed
I (31351) WEBSOCKET: Sending EOS signal
I (31359) STT: Audio streaming session complete (streamed 106496 bytes in 26 chunks)
I (31389) STT: STT pipeline stopped
I (31389) LED_CTRL: LED pattern -> 4
I (31390) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (31405) STATE_MGR: STT pipeline reported stop
I (31405) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (31409) LED_CTRL: LED pattern -> 1
I (31425) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (31426) WEBSOCKET: Server status: processing
I (31430) WEBSOCKET: Server stage: transcription
I (31436) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (31442) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (31962) LED_CTRL: LED pattern -> 4
I (31962) STATE_MGR: Pipeline stage event: transcription
I (31963) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (31966) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hello", "has_image": false}
I (31982) WEBSOCKET: Server status: processing
I (31987) WEBSOCKET: Server stage: llm
I (31991) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (31998) WEBSOCKET: Entering LLM stage - continuing processing indication
I (32006) STATE_MGR: Pipeline stage event: llm
I (32469) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I'm Hotpin, your compact, helpful, and private voice assistant, here to provide you with quick and concise answers."}
I (32479) WEBSOCKET: Server status: processing
I (32484) WEBSOCKET: Server stage: tts
I (32488) WEBSOCKET: Pipeline stage changed: llm -> tts
I (32494) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (32501) LED_CTRL: LED pattern -> 3
I (32506) TTS: ğŸµ Starting TTS decoder...
I (32510) TTS: Initializing TTS decoder...
W (32515) TTS: TTS decoder already initialized
I (32564) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (32565) TTS: ğŸµ TTS playback task started on Core 1
I (32565) TTS: âœ… TTS decoder started successfully
I (32572) STATE_MGR: TTS playback start event received
I (32581) LED_CTRL: LED pattern -> 1
I (32569) TTS: âœ… TTS playback task registered with watchdog
I (32591) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (32595) STATE_MGR: Pipeline stage event: tts
I (32637) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 1, total: 4096)
I (32638) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 31083 ms, bytes: 4096)
I (32644) TTS: Received audio chunk #1: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (32652) TTS: Chunk #1 first 12 bytes: 52 49 46 46 EA E7 03 00 57 41 56 45
I (32660) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (32668) STATE_MGR: TTS playback start event received
I (32674) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 2, total: 8192)
I (32682) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (32691) TTS: Chunk #2 first 12 bytes: 93 FA D2 FC F4 00 D8 04 10 06 C4 05
I (32705) TTS: âœ… WAV header parsed successfully
I (32706) TTS: === WAV File Info ===
I (32708) TTS: Sample Rate: 16000 Hz
I (32706) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 3, total: 12288)
I (32712) TTS: Channels: 1
I (32721) TTS: Received audio chunk #3: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (32724) TTS: Bits per Sample: 16
I (32733) TTS: Chunk #3 first 12 bytes: FC F9 C8 F9 BB F9 D3 F9 9A F9 04 F9
I (32737) TTS: Audio Format: 1 (PCM)
I (32749) TTS: Declared Data Size: 255942 bytes
I (32753) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 4, total: 16384)
I (32754) TTS: Block Align: 2
I (32762) TTS: Received audio chunk #4: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (32766) TTS: Byte Rate: 32000
I (32775) TTS: Chunk #4 first 12 bytes: 55 0D 74 FD 5C F1 74 E7 0A E3 0E E3
I (32779) TTS: ====================
I (32793) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 5, total: 20480)
I (32799) TTS: Received audio chunk #5: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (32808) TTS: Chunk #5 first 12 bytes: 6D 01 29 00 30 00 E2 00 6D 01 B1 00
I (32814) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=16384)
I (32822) TTS: Received audio chunk #6: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (32823) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (32839) TTS: Received audio chunk #7: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (32860) TTS: Received audio chunk #8: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (32869) TTS: Received audio chunk #9: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (32877) TTS: Received audio chunk #10: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (32886) TTS: Received audio chunk #11: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (32895) TTS: Received audio chunk #12: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (32905) TTS: Received audio chunk #13: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (32911) TTS: Received audio chunk #14: 976 bytes (buffer: 45056/327680 used, 282623 free)
I (32917) TTS: Received audio chunk #15: 3120 bytes (buffer: 46032/327680 used, 281647 free)
I (32927) TTS: Received audio chunk #16: 1196 bytes (buffer: 49152/327680 used, 278527 free)
I (32961) TTS: Received audio chunk #17: 2900 bytes (buffer: 50348/327680 used, 277331 free)
I (32973) TTS: Received audio chunk #18: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (32982) TTS: Received audio chunk #19: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (32992) TTS: Received audio chunk #20: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (33000) TTS: Received audio chunk #21: 636 bytes (buffer: 61440/327680 used, 266239 free)
I (33005) TTS: Received audio chunk #22: 3460 bytes (buffer: 62076/327680 used, 265603 free)
I (33018) TTS: Received audio chunk #23: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (33028) TTS: Received audio chunk #24: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (33038) TTS: Received audio chunk #25: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (33047) TTS: Received audio chunk #26: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (33057) TTS: Received audio chunk #27: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (33068) TTS: Received audio chunk #28: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (33076) TTS: Received audio chunk #29: 736 bytes (buffer: 90112/327680 used, 237567 free)
I (33082) TTS: Received audio chunk #30: 3360 bytes (buffer: 90848/327680 used, 236831 free)
I (33098) TTS: Received audio chunk #31: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (33107) TTS: Received audio chunk #32: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (33117) TTS: Received audio chunk #33: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (33126) TTS: Received audio chunk #34: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (33132) TTS: Received audio chunk #35: 396 bytes (buffer: 106496/327680 used, 221183 free)
I (33138) TTS: Received audio chunk #36: 3700 bytes (buffer: 106892/327680 used, 220787 free)
I (33152) TTS: Received audio chunk #37: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (33166) TTS: Received audio chunk #38: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (33175) TTS: Received audio chunk #39: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (33184) TTS: Received audio chunk #40: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (33193) TTS: Received audio chunk #41: 1436 bytes (buffer: 126976/327680 used, 200703 free)
I (33199) TTS: Received audio chunk #42: 2660 bytes (buffer: 128412/327680 used, 199267 free)
I (33210) TTS: Received audio chunk #43: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (33226) TTS: Received audio chunk #44: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (33236) TTS: Received audio chunk #45: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (33252) TTS: Received audio chunk #46: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (33270) TTS: Received audio chunk #47: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (33282) TTS: Received audio chunk #48: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (33298) TTS: Received audio chunk #49: 4096 bytes (buffer: 151552/327680 used, 176127 free)
I (33314) TTS: Received audio chunk #50: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (33329) TTS: Received audio chunk #51: 4096 bytes (buffer: 159744/327680 used, 167935 free)
I (33373) TTS: Received audio chunk #52: 4096 bytes (buffer: 159744/327680 used, 167935 free)
I (33381) TTS: Received audio chunk #53: 4096 bytes (buffer: 163840/327680 used, 163839 free)
I (33390) TTS: Received audio chunk #54: 4096 bytes (buffer: 167936/327680 used, 159743 free)
I (33397) TTS: Received audio chunk #55: 656 bytes (buffer: 172032/327680 used, 155647 free)
I (33403) TTS: Received audio chunk #56: 3440 bytes (buffer: 172688/327680 used, 154991 free)
I (33415) TTS: Received audio chunk #57: 4096 bytes (buffer: 176128/327680 used, 151551 free)
I (33425) TTS: Received audio chunk #58: 4096 bytes (buffer: 180224/327680 used, 147455 free)
I (33438) TTS: Received audio chunk #59: 4096 bytes (buffer: 184320/327680 used, 143359 free)
I (33454) TTS: Received audio chunk #60: 4096 bytes (buffer: 188416/327680 used, 139263 free)
I (33471) TTS: Received audio chunk #61: 4096 bytes (buffer: 192512/327680 used, 135167 free)
I (33486) TTS: Received audio chunk #62: 4096 bytes (buffer: 192512/327680 used, 135167 free)
I (33499) TTS: Received audio chunk #63: 4096 bytes (buffer: 196608/327680 used, 131071 free)
I (33516) TTS: Received audio chunk #64: 4096 bytes (buffer: 200704/327680 used, 126975 free)
I (33531) TTS: Received audio chunk #65: 4096 bytes (buffer: 204800/327680 used, 122879 free)
I (33547) TTS: Received audio chunk #66: 4096 bytes (buffer: 208896/327680 used, 118783 free)
I (33563) TTS: Received audio chunk #67: 4096 bytes (buffer: 212992/327680 used, 114687 free)
I (33580) TTS: Received audio chunk #68: 4096 bytes (buffer: 217088/327680 used, 110591 free)
I (33592) TTS: Received audio chunk #69: 4096 bytes (buffer: 221184/327680 used, 106495 free)
I (33609) TTS: Received audio chunk #70: 2034 bytes (buffer: 221184/327680 used, 106495 free)
I (33730) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (33829) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (33830) TTS: TTS end-of-stream signaled (bytes_received=255986, header_parsed=1)
I (33835) TTS: ğŸµ Playback task will drain 219122 bytes of buffered audio
I (33843) TTS: Waiting for playback completion: 219122 bytes buffered, calculated timeout: 8847 ms
I (33858) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (33985) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (34112) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (34240) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (34367) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (34495) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (34622) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (34750) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (34877) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (35005) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (35132) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (35260) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (35387) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (35515) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (35642) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (35770) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (35897) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (36025) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (36152) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (36280) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (36407) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (36535) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (36662) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (36790) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (36917) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (37045) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (37172) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (37300) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (37427) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (37555) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (37682) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (37810) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (37937) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (38065) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (38192) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (38320) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (38447) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (38575) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (38702) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (38830) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (38957) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (39085) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (39212) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (39340) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (39467) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (39595) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (39722) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (39850) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (39977) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (40105) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (40232) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (40360) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (40487) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (40615) TTS: âœ… All audio data received (255986 bytes, expected 255942 + 44 header)
I (40778) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (40778) TTS: ğŸµ TTS playback task exiting (played 255942 bytes, result: ESP_OK)
I (40783) STATE_MGR: TTS playback finished successfully
I (40783) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (40783) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (40783) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40783) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (40825) TTS: TTS decoder session reset for next audio stream
I (40830) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40837) TTS: Received audio chunk #71: 0 bytes (buffer: 0/327680 used, 327679 free)
I (40855) MEM_MGR: â•‘ Internal RAM:
I (40864) TTS: New audio session detected - resetting chunk counter
I (40868) MEM_MGR: â•‘   Free:             100007 bytes ( 97 KB)
I (40875) WEBSOCKET: ğŸµ Audio session complete: 255986 bytes in 70 messages
I (40882) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (40893) WEBSOCKET: Received text message: {"status": "complete"}
I (40896) MEM_MGR: â•‘   Fragmentation:     27%
I (40903) WEBSOCKET: Server status: complete
I (40908) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40913) WEBSOCKET: Pipeline stage changed: tts -> complete
I (40931) MEM_MGR: â•‘ DMA-capable RAM:
I (40942) MEM_MGR: â•‘   Free:              79591 bytes ( 77 KB)
I (40938) WEBSOCKET: Exiting TTS stage (transition to complete)
I (40949) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (40962) MEM_MGR: â•‘   Fragmentation:      8%
I (40967) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (40986) MEM_MGR: â•‘ PSRAM:
I (40989) MEM_MGR: â•‘   Free:             3667260 bytes (3581 KB)
I (40996) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (41003) MEM_MGR: â•‘   Fragmentation:      2%
I (41008) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41027) MEM_MGR: â•‘ Total Heap:
I (41031) MEM_MGR: â•‘   Free:             3746780 bytes (3658 KB)
I (41038) MEM_MGR: â•‘   Minimum Ever:     3725036 bytes (3637 KB)
I (41045) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41056) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (41063) MEM_MGR: â•‘ Memory Delta from Baseline:
I (41076) MEM_MGR: â•‘   Internal RAM:     -125172 bytes (-122 KB)
I (41083) MEM_MGR: â•‘   DMA-capable:      -125172 bytes (-122 KB)
I (41090) MEM_MGR: â•‘   PSRAM:            -524756 bytes (-512 KB)
I (41097) MEM_MGR: â•‘   Total Heap:       -617968 bytes (-603 KB)
I (41104) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41122) STATE_MGR: Stopping voice mode components...
I (41128) STT: Stopping STT pipeline...
W (41133) STT: STT pipeline already stopped
I (41137) STATE_MGR: Voice pipeline reported COMPLETE
I (41143) STATE_MGR: TTS playback already drained - no pending audio
I (41150) STATE_MGR: Flushing and resetting TTS decoder for next session
I (41158) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (41165) TTS: Flushing pending audio before reset (~0 bytes)
I (40830) TTS: âœ… TTS playback finished event dispatched to state manager
I (41179) TTS:   âœ“ DMA buffer freed from PSRAM
I (41185) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (41192) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (41222) TTS: TTS playback task handle is NULL - task already exited (after 1 checks)
I (41267) TTS: TTS decoder session reset for next audio stream
I (41267) TTS: âœ… TTS decoder flushed and reset for next session
I (41469) TTS: â¹ï¸ Stopping TTS decoder...
W (41469) TTS: TTS decoder already stopped.
I (41613) STATE_MGR: Acquiring I2S mutex...
I (41613) STATE_MGR: Deinitializing audio drivers...
I (41613) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41631) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (41638) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41656) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (41663) AUDIO: âœ… RX channel disabled (took 0 ms)
I (41669) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (41675) AUDIO: âœ… TX channel disabled (took 0 ms)
I (41681) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (41737) AUDIO: [STEP 4/5] Deleting RX channel...
I (41738) AUDIO: âœ… RX channel deleted (took 0 ms)
I (41738) AUDIO: [STEP 5/5] Deleting TX channel...
I (41743) AUDIO: âœ… TX channel deleted (took 0 ms)
I (41748) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (41806) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41813) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (41820) AUDIO: â•‘ Camera Can Now Initialize
I (41825) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (41893) STATE_MGR: Allowing memory stabilization (100ms)...
I (41993) STATE_MGR: Camera will be initialized on-demand during capture
I (41993) STATE_MGR: I2S mutex released
I (41994) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42012) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (42019) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42038) MEM_MGR: â•‘ Internal RAM:
I (42042) MEM_MGR: â•‘   Free:             100007 bytes ( 97 KB)
I (42049) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (42055) MEM_MGR: â•‘   Fragmentation:     27%
I (42061) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42079) MEM_MGR: â•‘ DMA-capable RAM:
I (42083) MEM_MGR: â•‘   Free:              79591 bytes ( 77 KB)
I (42090) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (42097) MEM_MGR: â•‘   Fragmentation:      8%
I (42102) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42120) MEM_MGR: â•‘ PSRAM:
I (42124) MEM_MGR: â•‘   Free:             3667260 bytes (3581 KB)
I (42131) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (42138) MEM_MGR: â•‘   Fragmentation:      2%
I (42143) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42161) MEM_MGR: â•‘ Total Heap:
I (42166) MEM_MGR: â•‘   Free:             3746780 bytes (3658 KB)
I (42172) MEM_MGR: â•‘   Minimum Ever:     3725036 bytes (3637 KB)
I (42179) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42198) MEM_MGR: â•‘ Memory Delta from Baseline:
I (42203) MEM_MGR: â•‘   Internal RAM:     -125172 bytes (-122 KB)
I (42210) MEM_MGR: â•‘   DMA-capable:      -125172 bytes (-122 KB)
I (42217) MEM_MGR: â•‘   PSRAM:            -524756 bytes (-512 KB)
I (42224) MEM_MGR: â•‘   Total Heap:       -617968 bytes (-603 KB)
I (42231) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42249) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (42259) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42276) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (42283) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42301) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42319) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (42327) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42345) AUDIO: [DIAG] Pre-init state:
I (42349) AUDIO:   Free heap: 3773240 bytes
I (42354) AUDIO:   Free internal RAM: 126603 bytes
I (42359) AUDIO:   Free DMA-capable: 106187 bytes
I (42365) AUDIO:   Free PSRAM: 3667124 bytes
I (42370) AUDIO:   Timestamp: 40815 ms
I (42374) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (42381) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (42389) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (42397) AUDIO:   DMA frame num (per desc): 1020
I (42403) AUDIO:   DMA total samples (effective): 4080
I (42408) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (42415) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (42422) AUDIO: âœ… I2S channels created (took 0 ms)
I (42427) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7f0
I (42434) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (42441) AUDIO:   Sample rate: 16000 Hz
I (42445) AUDIO:   MCLK: DISABLED
I (42449) AUDIO:   BCLK: GPIO14 (shared)
I (42454) AUDIO:   WS:   GPIO15 (shared)
I (42458) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (42465) AUDIO: âœ… TX channel configured (took 1 ms)
I (42470) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (42477) AUDIO:   Sample rate: 16000 Hz
I (42481) AUDIO:   MCLK: DISABLED
I (42485) AUDIO:   BCLK: GPIO14 (shared)
I (42490) AUDIO:   WS:   GPIO15 (shared)
I (42494) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (42500) AUDIO: âœ… RX channel configured (took 0 ms)
I (42506) AUDIO: [STEP 4/6] Enabling TX channel...
I (42511) AUDIO: âœ… TX channel enabled (took 0 ms)
I (42517) AUDIO: [STEP 5/6] Enabling RX channel...
I (42522) AUDIO: âœ… RX channel enabled (took 0 ms)
I (42528) AUDIO: [STEP 6/6] Hardware stabilization...
I (42534) AUDIO:   Phase 1: Initial settle (50ms)
I (42589) AUDIO:   Phase 2: DMA verification
I (42589) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (42590) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (42747) AUDIO: [DIAG] Post-init state:
I (42747) AUDIO:   Free heap: 3747252 bytes
I (42747) AUDIO:   Free internal RAM: 100615 bytes
I (42751) AUDIO:   Free DMA-capable: 80199 bytes
I (42756) AUDIO:   Free PSRAM: 3667124 bytes
I (42761) AUDIO:   Timestamp: 41207 ms
I (42766) AUDIO:   Total init time: 201 ms
I (42771) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42789) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (42795) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (42800) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (42809) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (42816) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42833) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (42851) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (42858) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (42864) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (42871) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (42877) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43178) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43185) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (43193) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43211) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (43218) AUDIO: âœ… RX channel disabled (took 0 ms)
I (43223) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (43230) AUDIO: âœ… TX channel disabled (took 0 ms)
I (43235) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (43292) AUDIO: [STEP 4/5] Deleting RX channel...
I (43293) AUDIO: âœ… RX channel deleted (took 0 ms)
I (43293) AUDIO: [STEP 5/5] Deleting TX channel...
I (43298) AUDIO: âœ… TX channel deleted (took 0 ms)
I (43303) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (43361) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43368) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (43374) AUDIO: â•‘ Camera Can Now Initialize
I (43380) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43398) LED_CTRL: LED pattern -> 3
I (43402) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (43419) STATE_MGR: Pipeline stage event: complete
I (49223) BUTTON: Single click confirmed
I (49223) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (49224) STATE_MGR: Single click - mode toggle requested
I (49230) STATE_MGR: Switching: Camera â†’ Voice (count: 3)
I (49286) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (49286) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49299) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (49306) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49325) MEM_MGR: â•‘ Internal RAM:
I (49329) MEM_MGR: â•‘   Free:             126603 bytes (123 KB)
I (49336) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (49342) MEM_MGR: â•‘   Fragmentation:     26%
I (49347) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49366) MEM_MGR: â•‘ DMA-capable RAM:
I (49370) MEM_MGR: â•‘   Free:             106187 bytes (103 KB)
I (49377) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (49384) MEM_MGR: â•‘   Fragmentation:     12%
I (49389) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49407) MEM_MGR: â•‘ PSRAM:
I (49411) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (49418) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (49425) MEM_MGR: â•‘   Fragmentation:      2%
I (49430) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49448) MEM_MGR: â•‘ Total Heap:
I (49452) MEM_MGR: â•‘   Free:             3773240 bytes (3684 KB)
I (49459) MEM_MGR: â•‘   Minimum Ever:     3712620 bytes (3625 KB)
I (49466) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49484) MEM_MGR: â•‘ Memory Delta from Baseline:
I (49490) MEM_MGR: â•‘   Internal RAM:      -98576 bytes ( -96 KB)
I (49497) MEM_MGR: â•‘   DMA-capable:       -98576 bytes ( -96 KB)
I (49504) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (49511) MEM_MGR: â•‘   Total Heap:       -591508 bytes (-577 KB)
I (49517) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49536) STATE_MGR: Stopping camera...
I (49540) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49557) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (49563) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49580) STATE_MGR:   Timeout: 5000 ms
I (49584) STATE_MGR:   Timestamp: 48030 ms
I (49589) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (49595) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49611) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (49617) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49634) STATE_MGR:   Free heap before: 3773240 bytes
I (49639) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (49645) CAMERA: Deinitializing camera...
I (49650) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (49656) STATE_MGR:   Free heap after: 3773240 bytes
I (49662) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (49668) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49684) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (49690) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49707) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (49815) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (49915) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (49965) STATE_MGR:   âœ“ Total stabilization: 250ms
I (49965) STATE_MGR:   Timestamp: 48411 ms
I (49965) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (49981) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (49988) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50004) STATE_MGR:   Free heap before: 3773240 bytes
I (50010) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50028) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (50035) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50053) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50071) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (50078) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50096) AUDIO: [DIAG] Pre-init state:
I (50100) AUDIO:   Free heap: 3773240 bytes
I (50105) AUDIO:   Free internal RAM: 126603 bytes
I (50111) AUDIO:   Free DMA-capable: 106187 bytes
I (50116) AUDIO:   Free PSRAM: 3667124 bytes
I (50121) AUDIO:   Timestamp: 48567 ms
I (50125) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (50132) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (50140) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (50148) AUDIO:   DMA frame num (per desc): 1020
I (50154) AUDIO:   DMA total samples (effective): 4080
I (50160) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (50167) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (50173) AUDIO: âœ… I2S channels created (took 0 ms)
I (50179) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7f0
I (50185) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (50192) AUDIO:   Sample rate: 16000 Hz
I (50196) AUDIO:   MCLK: DISABLED
I (50200) AUDIO:   BCLK: GPIO14 (shared)
I (50205) AUDIO:   WS:   GPIO15 (shared)
I (50210) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (50216) AUDIO: âœ… TX channel configured (took 1 ms)
I (50221) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (50228) AUDIO:   Sample rate: 16000 Hz
I (50232) AUDIO:   MCLK: DISABLED
I (50236) AUDIO:   BCLK: GPIO14 (shared)
I (50241) AUDIO:   WS:   GPIO15 (shared)
I (50246) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (50252) AUDIO: âœ… RX channel configured (took 0 ms)
I (50257) AUDIO: [STEP 4/6] Enabling TX channel...
I (50263) AUDIO: âœ… TX channel enabled (took 0 ms)
I (50268) AUDIO: [STEP 5/6] Enabling RX channel...
I (50274) AUDIO: âœ… RX channel enabled (took 0 ms)
I (50279) AUDIO: [STEP 6/6] Hardware stabilization...
I (50285) AUDIO:   Phase 1: Initial settle (50ms)
I (50340) AUDIO:   Phase 2: DMA verification
I (50340) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (50341) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (50497) AUDIO: [DIAG] Post-init state:
I (50497) AUDIO:   Free heap: 3747252 bytes
I (50497) AUDIO:   Free internal RAM: 100615 bytes
I (50501) AUDIO:   Free DMA-capable: 80199 bytes
I (50506) AUDIO:   Free PSRAM: 3667124 bytes
I (50511) AUDIO:   Timestamp: 48957 ms
I (50516) AUDIO:   Total init time: 201 ms
I (50521) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50539) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (50545) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (50550) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (50559) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (50566) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50583) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50601) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (50608) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (50614) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (50621) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (50627) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50645) STATE_MGR:   âœ“ Audio initialized (took 635 ms)
I (50652) STATE_MGR:   Free heap after: 3747252 bytes
I (50657) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50673) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (50679) STATE_MGR: â•‘ Total transition time: 889 ms
I (50685) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50701) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50717) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (50727) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (50743) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (50751) TTS: No pending audio to flush
I (50800) TTS: TTS decoder session reset for next audio stream
I (50800) TTS: âœ… TTS decoder flushed and reset for next session
I (50802) STT: Starting STT pipeline...
I (50807) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (50816) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (50823) STT:   Current time: 49269 ms
I (50826) STT: âœ… STT pipeline started
I (50827) STT:   Free heap: 3738700 bytes
I (50832) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (50827) STT: Audio streaming session activated
I (50851) STT: Connection stabilization delay (2000ms)...
I (51036) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (51036) STT:   âœ“ Audio driver initialized
I (51037) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (51144) STT:   Total stabilization: 300ms
I (51144) STT:   Timestamp: 49589 ms
I (51144) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (51148) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37f4 (with safety padding)
I (51157) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (51170) LED_CTRL: LED pattern -> 1
I (51173) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (51177) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (51182) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (51201) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (51207) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (51214) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (51248) MEM_MGR: â•‘ Internal RAM:
I (51253) MEM_MGR: â•‘   Free:             126603 bytes (123 KB)
I (51259) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (51266) MEM_MGR: â•‘   Fragmentation:     26%
I (51271) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (51290) MEM_MGR: â•‘ DMA-capable RAM:
I (51294) MEM_MGR: â•‘   Free:             106187 bytes (103 KB)
I (51301) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (51307) MEM_MGR: â•‘   Fragmentation:     12%
I (51313) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (51331) MEM_MGR: â•‘ PSRAM:
I (51335) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (51342) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (51348) MEM_MGR: â•‘   Fragmentation:      2%
I (51354) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (51372) MEM_MGR: â•‘ Total Heap:
I (51376) MEM_MGR: â•‘   Free:             3773240 bytes (3684 KB)
I (51383) MEM_MGR: â•‘   Minimum Ever:     3712620 bytes (3625 KB)
I (51390) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (51408) MEM_MGR: â•‘ Memory Delta from Baseline:
I (51414) MEM_MGR: â•‘   Internal RAM:      -98576 bytes ( -96 KB)
I (51421) MEM_MGR: â•‘   DMA-capable:       -98576 bytes ( -96 KB)
I (51427) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (51434) MEM_MGR: â•‘   Total Heap:       -591508 bytes (-577 KB)
I (51441) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (51460) STATE_MGR: âœ… Voice mode transition complete
I (51465) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (51481) STATE_MGR: STT pipeline reported start
I (52857) STT: Starting audio streaming to server...
I (52959) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (52960) WEBSOCKET: Server status: receiving
I (52964) WEBSOCKET: Server ACK: 2 chunks processed
I (53055) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (53056) WEBSOCKET: Server status: receiving
I (53061) WEBSOCKET: Server ACK: 4 chunks processed
I (53136) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (53137) WEBSOCKET: Server status: receiving
I (53141) WEBSOCKET: Server ACK: 6 chunks processed
I (53204) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (53205) WEBSOCKET: Server status: receiving
I (53209) WEBSOCKET: Server ACK: 8 chunks processed
I (53279) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (53280) WEBSOCKET: Server status: receiving
I (53285) WEBSOCKET: Server ACK: 10 chunks processed
W (53359) STT: Waiting for server ACK (sent: 12, acked: 10, unack: 2)
I (53367) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (53370) WEBSOCKET: Server status: receiving
I (53374) STT: Flow control: ACK received, resuming (sent=12, acked=12)
I (53381) WEBSOCKET: Server ACK: 12 chunks processed
I (53388) STT: ACK received, resuming (unack now: 0)
W (53488) STT: Waiting for server ACK (sent: 14, acked: 12, unack: 2)
I (53504) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (53504) WEBSOCKET: Server status: receiving
I (53509) STT: Flow control: ACK received, resuming (sent=14, acked=14)
I (53516) WEBSOCKET: Server ACK: 14 chunks processed
I (53522) STT: ACK received, resuming (unack now: 0)
W (53596) STT: Waiting for server ACK (sent: 16, acked: 14, unack: 2)
I (53606) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (53607) WEBSOCKET: Server status: receiving
I (53612) STT: Flow control: ACK received, resuming (sent=16, acked=16)
I (53619) WEBSOCKET: Server ACK: 16 chunks processed
I (53626) STT: ACK received, resuming (unack now: 0)
I (53697) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (53698) WEBSOCKET: Server status: receiving
I (53703) WEBSOCKET: Server ACK: 18 chunks processed
I (53766) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (53767) WEBSOCKET: Server status: receiving
I (53772) WEBSOCKET: Server ACK: 20 chunks processed
I (53975) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (53976) WEBSOCKET: Server status: receiving
I (53980) WEBSOCKET: Server ACK: 22 chunks processed
I (54263) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (54264) WEBSOCKET: Server status: receiving
I (54269) WEBSOCKET: Server ACK: 24 chunks processed
I (54500) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (54501) WEBSOCKET: Server status: receiving
I (54505) WEBSOCKET: Server ACK: 26 chunks processed
I (54767) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (54768) WEBSOCKET: Server status: receiving
I (54773) WEBSOCKET: Server ACK: 28 chunks processed
I (55035) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (55036) WEBSOCKET: Server status: receiving
I (55041) WEBSOCKET: Server ACK: 30 chunks processed
I (55246) BUTTON: Single click confirmed
I (55246) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (55247) STATE_MGR: Single click - mode toggle requested
I (55253) STATE_MGR: User requested to end voice session (count: 4). Stopping STT and awaiting server response.
I (55263) STT: Stopping STT pipeline...
I (55268) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (55284) STT: Ring buffer drained and cleared successfully
I (55303) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (55304) WEBSOCKET: Server status: receiving
I (55309) WEBSOCKET: Server ACK: 32 chunks processed
I (55316) STT: Audio capture task stopped (captured 135168 bytes total)
I (55344) STT: Streaming task received stop signal
I (55344) STT: Sending EOS signal...
I (55344) WEBSOCKET: Sending EOS signal
I (55349) STT: Audio streaming session complete (streamed 132096 bytes in 33 chunks)
I (55369) STT: STT pipeline stopped
I (55370) LED_CTRL: LED pattern -> 4
I (55370) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (55386) STATE_MGR: STT pipeline reported stop
I (55387) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (55390) LED_CTRL: LED pattern -> 1
I (55394) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (55404) WEBSOCKET: Server status: processing
I (55408) WEBSOCKET: Server stage: transcription
I (55414) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (55421) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (55952) LED_CTRL: LED pattern -> 4
I (55954) STATE_MGR: Pipeline stage event: transcription
I (55954) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (56100) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "how can you help me", "has_image": false}
I (56103) WEBSOCKET: Server status: processing
I (56108) WEBSOCKET: Server stage: llm
I (56113) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (56119) WEBSOCKET: Entering LLM stage - continuing processing indication
I (56127) STATE_MGR: Pipeline stage event: llm
I (56461) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I can help you with information, tasks, and answering questions on various topics, and with my vision capabilities, I can also assist with image-related queries."}
I (56474) WEBSOCKET: Server status: processing
I (56479) WEBSOCKET: Server stage: tts
I (56484) WEBSOCKET: Pipeline stage changed: llm -> tts
I (56490) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (56497) LED_CTRL: LED pattern -> 3
I (56501) TTS: ğŸµ Starting TTS decoder...
I (56506) TTS: Initializing TTS decoder...
W (56511) TTS: TTS decoder already initialized
I (56557) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (56558) TTS: ğŸµ TTS playback task started on Core 1
I (56559) STATE_MGR: TTS playback start event received
I (56559) TTS: âœ… TTS decoder started successfully
I (56568) LED_CTRL: LED pattern -> 1
I (56569) TTS: âœ… TTS playback task registered with watchdog
I (56585) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (56588) STATE_MGR: Pipeline stage event: tts
I (56632) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 55078 ms, bytes: 4096)
I (56633) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (56639) TTS: Chunk #2 first 12 bytes: 52 49 46 46 50 5D 05 00 57 41 56 45
I (56647) TTS: New audio session detected - resetting chunk counter
I (56654) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (56662) STATE_MGR: TTS playback start event received
I (56668) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (56677) TTS: Chunk #2 first 12 bytes: 7A 03 62 0A 40 0E 23 0D C1 07 D1 FF
I (56690) TTS: Received audio chunk #3: 1436 bytes (buffer: 8192/327680 used, 319487 free)
I (56693) TTS: Chunk #3 first 12 bytes: 43 FE 64 FE CB FF 11 00 6B FF 93 00
I (56699) TTS: âœ… WAV header parsed successfully
I (56706) TTS: === WAV File Info ===
I (56710) TTS: Sample Rate: 16000 Hz
I (56714) TTS: Received audio chunk #4: 2660 bytes (buffer: 5532/327680 used, 322147 free)
I (56715) TTS: Channels: 1
I (56724) TTS: Chunk #4 first 12 bytes: D4 EF D7 EE 57 ED F3 EB B1 EA 86 E8
I (56727) TTS: Bits per Sample: 16
I (56739) TTS: Audio Format: 1 (PCM)
I (56741) TTS: Received audio chunk #5: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (56743) TTS: Declared Data Size: 351532 bytes
I (56752) TTS: Chunk #5 first 12 bytes: 5C FE BE FD 7B FD 99 FC 89 FA 34 F9
I (56757) TTS: Block Align: 2
I (56768) TTS: Byte Rate: 32000
I (56771) TTS: Received audio chunk #6: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (56772) TTS: ====================
I (56786) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=20480)
I (56789) TTS: Received audio chunk #7: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (56793) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (56810) TTS: Received audio chunk #8: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (56830) TTS: Received audio chunk #9: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (56838) TTS: Received audio chunk #10: 1316 bytes (buffer: 24576/327680 used, 303103 free)
I (56843) TTS: Received audio chunk #11: 2780 bytes (buffer: 25892/327680 used, 301787 free)
I (56855) TTS: Received audio chunk #12: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (56861) TTS: Received audio chunk #13: 316 bytes (buffer: 32768/327680 used, 294911 free)
I (56869) TTS: Received audio chunk #14: 3780 bytes (buffer: 33084/327680 used, 294595 free)
I (56883) TTS: Received audio chunk #15: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (56889) TTS: Received audio chunk #16: 756 bytes (buffer: 40960/327680 used, 286719 free)
I (56897) TTS: Received audio chunk #17: 3340 bytes (buffer: 41716/327680 used, 285963 free)
I (56910) TTS: Received audio chunk #18: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (56916) TTS: Received audio chunk #19: 1196 bytes (buffer: 49152/327680 used, 278527 free)
I (56925) TTS: Received audio chunk #20: 2900 bytes (buffer: 50348/327680 used, 277331 free)
I (56937) TTS: Received audio chunk #21: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (56945) TTS: Received audio chunk #22: 1636 bytes (buffer: 57344/327680 used, 270335 free)
I (56952) TTS: Received audio chunk #23: 2460 bytes (buffer: 58980/327680 used, 268699 free)
I (56966) TTS: Received audio chunk #24: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (56973) TTS: Received audio chunk #25: 636 bytes (buffer: 61440/327680 used, 266239 free)
I (56979) TTS: Received audio chunk #26: 3460 bytes (buffer: 62076/327680 used, 265603 free)
I (56992) TTS: Received audio chunk #27: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (56998) TTS: Received audio chunk #28: 1076 bytes (buffer: 69632/327680 used, 258047 free)
I (57006) TTS: Received audio chunk #29: 3020 bytes (buffer: 70708/327680 used, 256971 free)
I (57018) TTS: Received audio chunk #30: 1296 bytes (buffer: 73728/327680 used, 253951 free)
I (57027) TTS: Received audio chunk #31: 2800 bytes (buffer: 75024/327680 used, 252655 free)
I (57038) TTS: Received audio chunk #32: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (57043) TTS: Received audio chunk #33: 296 bytes (buffer: 81920/327680 used, 245759 free)
I (57052) TTS: Received audio chunk #34: 3800 bytes (buffer: 82216/327680 used, 245463 free)
I (57065) TTS: Received audio chunk #35: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (57071) TTS: Received audio chunk #36: 736 bytes (buffer: 90112/327680 used, 237567 free)
I (57079) TTS: Received audio chunk #37: 3360 bytes (buffer: 90848/327680 used, 236831 free)
I (57089) TTS: Received audio chunk #38: 956 bytes (buffer: 90112/327680 used, 237567 free)
I (57126) TTS: Received audio chunk #39: 3140 bytes (buffer: 91068/327680 used, 236611 free)
I (57131) TTS: Received audio chunk #40: 1176 bytes (buffer: 94208/327680 used, 233471 free)
I (57138) TTS: Received audio chunk #41: 2920 bytes (buffer: 95384/327680 used, 232295 free)
I (57151) TTS: Received audio chunk #42: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (57159) TTS: Received audio chunk #43: 1616 bytes (buffer: 102400/327680 used, 225279 free)
I (57165) TTS: Received audio chunk #44: 2480 bytes (buffer: 104016/327680 used, 223663 free)
I (57177) TTS: Received audio chunk #45: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (57188) TTS: Received audio chunk #46: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (57193) TTS: Received audio chunk #47: 836 bytes (buffer: 114688/327680 used, 212991 free)
I (57202) TTS: Received audio chunk #48: 3260 bytes (buffer: 115524/327680 used, 212155 free)
I (57219) TTS: Received audio chunk #49: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (57232) TTS: Received audio chunk #50: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (57239) TTS: Received audio chunk #51: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (57245) TTS: Received audio chunk #52: 276 bytes (buffer: 126976/327680 used, 200703 free)
I (57253) TTS: Received audio chunk #53: 3820 bytes (buffer: 127252/327680 used, 200427 free)
I (57266) TTS: Received audio chunk #54: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (57272) TTS: Received audio chunk #55: 716 bytes (buffer: 135168/327680 used, 192511 free)
I (57280) TTS: Received audio chunk #56: 3380 bytes (buffer: 135884/327680 used, 191795 free)
I (57294) TTS: Received audio chunk #57: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (57301) TTS: Received audio chunk #58: 1156 bytes (buffer: 143360/327680 used, 184319 free)
I (57308) TTS: Received audio chunk #59: 2940 bytes (buffer: 144516/327680 used, 183163 free)
I (57321) TTS: Received audio chunk #60: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (57331) TTS: Received audio chunk #61: 1596 bytes (buffer: 151552/327680 used, 176127 free)
I (57336) TTS: Received audio chunk #62: 2500 bytes (buffer: 153148/327680 used, 174531 free)
I (57350) TTS: Received audio chunk #63: 3256 bytes (buffer: 151552/327680 used, 176127 free)
I (57354) TTS: Received audio chunk #64: 840 bytes (buffer: 154808/327680 used, 172871 free)
I (57367) TTS: Received audio chunk #65: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (57375) TTS: Received audio chunk #66: 816 bytes (buffer: 159744/327680 used, 167935 free)
I (57381) TTS: Received audio chunk #67: 3280 bytes (buffer: 160560/327680 used, 167119 free)
I (57391) TTS: Received audio chunk #68: 1036 bytes (buffer: 163840/327680 used, 163839 free)
I (57419) TTS: Received audio chunk #69: 3060 bytes (buffer: 164876/327680 used, 162803 free)
I (57425) TTS: Received audio chunk #70: 1256 bytes (buffer: 167936/327680 used, 159743 free)
I (57433) TTS: Received audio chunk #71: 2840 bytes (buffer: 169192/327680 used, 158487 free)
I (57444) TTS: Received audio chunk #72: 4096 bytes (buffer: 172032/327680 used, 155647 free)
I (57455) TTS: Received audio chunk #73: 4096 bytes (buffer: 176128/327680 used, 151551 free)
I (57460) TTS: Received audio chunk #74: 476 bytes (buffer: 180224/327680 used, 147455 free)
I (57470) TTS: Received audio chunk #75: 3620 bytes (buffer: 176604/327680 used, 151075 free)
I (57482) TTS: Received audio chunk #76: 4096 bytes (buffer: 180224/327680 used, 147455 free)
I (57489) TTS: Received audio chunk #77: 916 bytes (buffer: 184320/327680 used, 143359 free)
I (57495) TTS: Received audio chunk #78: 3180 bytes (buffer: 185236/327680 used, 142443 free)
I (57505) TTS: Received audio chunk #79: 1136 bytes (buffer: 188416/327680 used, 139263 free)
I (57539) TTS: Received audio chunk #80: 2960 bytes (buffer: 189552/327680 used, 138127 free)
I (57545) TTS: Received audio chunk #81: 1356 bytes (buffer: 192512/327680 used, 135167 free)
I (57551) TTS: Received audio chunk #82: 2740 bytes (buffer: 193868/327680 used, 133811 free)
I (57565) TTS: Received audio chunk #83: 4096 bytes (buffer: 196608/327680 used, 131071 free)
I (57571) TTS: Received audio chunk #84: 356 bytes (buffer: 200704/327680 used, 126975 free)
I (57582) TTS: Received audio chunk #85: 3740 bytes (buffer: 201060/327680 used, 126619 free)
I (57595) TTS: Received audio chunk #86: 4096 bytes (buffer: 200704/327680 used, 126975 free)
I (57605) TTS: Received audio chunk #87: 4096 bytes (buffer: 204800/327680 used, 122879 free)
I (57611) TTS: Received audio chunk #88: 1016 bytes (buffer: 208896/327680 used, 118783 free)
I (57619) TTS: Received audio chunk #89: 3080 bytes (buffer: 209912/327680 used, 117767 free)
I (57632) TTS: Received audio chunk #90: 4096 bytes (buffer: 212992/327680 used, 114687 free)
I (57642) TTS: Received audio chunk #91: 1456 bytes (buffer: 217088/327680 used, 110591 free)
I (57647) TTS: Received audio chunk #92: 2640 bytes (buffer: 218544/327680 used, 109135 free)
I (57659) TTS: Received audio chunk #93: 3116 bytes (buffer: 221184/327680 used, 106495 free)
I (57662) TTS: Received audio chunk #94: 980 bytes (buffer: 224300/327680 used, 103379 free)
I (57676) TTS: Received audio chunk #95: 4096 bytes (buffer: 225280/327680 used, 102399 free)
I (57686) TTS: Received audio chunk #96: 4096 bytes (buffer: 229376/327680 used, 98303 free)
I (57694) TTS: Received audio chunk #97: 896 bytes (buffer: 233472/327680 used, 94207 free)
I (57700) TTS: Received audio chunk #98: 3200 bytes (buffer: 234368/327680 used, 93311 free)
I (57714) TTS: Received audio chunk #99: 4096 bytes (buffer: 237568/327680 used, 90111 free)
I (57721) TTS: Received audio chunk #100: 1336 bytes (buffer: 237568/327680 used, 90111 free)
I (57753) TTS: Received audio chunk #101: 2760 bytes (buffer: 238904/327680 used, 88775 free)
I (57761) TTS: Received audio chunk #102: 1556 bytes (buffer: 241664/327680 used, 86015 free)
I (57767) TTS: Received audio chunk #103: 2540 bytes (buffer: 243220/327680 used, 84459 free)
I (57777) TTS: Received audio chunk #104: 4096 bytes (buffer: 245760/327680 used, 81919 free)
I (57788) TTS: Received audio chunk #105: 4096 bytes (buffer: 249856/327680 used, 77823 free)
I (57797) TTS: Received audio chunk #106: 4096 bytes (buffer: 253952/327680 used, 73727 free)
I (57803) TTS: Received audio chunk #107: 996 bytes (buffer: 258048/327680 used, 69631 free)
I (57810) TTS: Received audio chunk #108: 3100 bytes (buffer: 259044/327680 used, 68635 free)
I (57824) TTS: Received audio chunk #109: 4096 bytes (buffer: 262144/327680 used, 65535 free)
I (57835) TTS: Received audio chunk #110: 4096 bytes (buffer: 266240/327680 used, 61439 free)
I (57846) TTS: Received audio chunk #111: 4096 bytes (buffer: 270336/327680 used, 57343 free)
I (57858) TTS: Received audio chunk #112: 4096 bytes (buffer: 270336/327680 used, 57343 free)
I (57868) TTS: Received audio chunk #113: 4096 bytes (buffer: 274432/327680 used, 53247 free)
I (57876) TTS: Received audio chunk #114: 876 bytes (buffer: 278528/327680 used, 49151 free)
I (57882) TTS: Received audio chunk #115: 3220 bytes (buffer: 279404/327680 used, 48275 free)
I (57895) TTS: Received audio chunk #116: 4096 bytes (buffer: 282624/327680 used, 45055 free)
I (57902) TTS: Received audio chunk #117: 1316 bytes (buffer: 286720/327680 used, 40959 free)
I (57909) TTS: Received audio chunk #118: 2780 bytes (buffer: 288036/327680 used, 39643 free)
I (57920) TTS: Received audio chunk #119: 1436 bytes (buffer: 290816/327680 used, 36863 free)
I (57945) TTS: Received audio chunk #120: 220 bytes (buffer: 292252/327680 used, 35427 free)
I (57951) TTS: Received audio chunk #121: 2440 bytes (buffer: 292472/327680 used, 35207 free)
I (57960) TTS: Received audio chunk #122: 3096 bytes (buffer: 294912/327680 used, 32767 free)
I (57964) TTS: Received audio chunk #123: 1000 bytes (buffer: 298008/327680 used, 29671 free)
I (57980) TTS: Received audio chunk #124: 4096 bytes (buffer: 294912/327680 used, 32767 free)
I (57991) TTS: Received audio chunk #125: 4096 bytes (buffer: 299008/327680 used, 28671 free)
I (58000) TTS: Received audio chunk #126: 3416 bytes (buffer: 303104/327680 used, 24575 free)
I (58103) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (58208) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (58209) TTS: TTS end-of-stream signaled (bytes_received=351576, header_parsed=1)
I (58214) TTS: ğŸµ Playback task will drain 302424 bytes of buffered audio
I (58221) TTS: Waiting for playback completion: 302424 bytes buffered, calculated timeout: 11450 ms
I (58230) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (58357) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (58485) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (58612) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (58740) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (58867) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (58995) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (59122) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (59250) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (59377) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (59505) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (59632) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (59760) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (59887) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (60015) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (60142) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (60270) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (60397) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (60525) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (60652) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (60780) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (60907) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (61035) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (61162) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (61290) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (61417) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (61545) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (61672) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (61800) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (61927) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (62055) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (62182) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (62310) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (62437) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (62565) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (62692) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (62820) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (62947) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (63075) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (63202) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (63330) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (63457) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (63585) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (63712) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (63840) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (63967) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (64095) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (64222) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (64350) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (64477) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (64605) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (64732) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (64860) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (64987) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (65115) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (65242) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (65370) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (65497) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (65625) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (65752) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (65880) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (66007) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (66135) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (66262) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (66390) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (66517) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (66645) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (66772) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (66900) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (67027) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (67155) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (67282) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (67410) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (67537) TTS: âœ… All audio data received (351576 bytes, expected 351532 + 44 header)
I (67764) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (67764) TTS: ğŸµ TTS playback task exiting (played 351532 bytes, result: ESP_OK)
I (67770) STATE_MGR: TTS playback finished successfully
I (67771) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (67771) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (67771) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67771) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (67815) TTS: TTS decoder session reset for next audio stream
I (67816) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67823) TTS: Received audio chunk #127: 0 bytes (buffer: 0/327680 used, 327679 free)
I (67841) MEM_MGR: â•‘ Internal RAM:
I (67850) TTS: New audio session detected - resetting chunk counter
I (67854) MEM_MGR: â•‘   Free:              91703 bytes ( 89 KB)
I (67868) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (67861) WEBSOCKET: ğŸµ Audio session complete: 351576 bytes in 126 messages
I (67874) MEM_MGR: â•‘   Fragmentation:     29%
I (67886) WEBSOCKET: Received text message: {"status": "complete"}
I (67887) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67895) WEBSOCKET: Server status: complete
I (67913) MEM_MGR: â•‘ DMA-capable RAM:
I (67918) WEBSOCKET: Pipeline stage changed: tts -> complete
I (67922) MEM_MGR: â•‘   Free:              71287 bytes ( 69 KB)
I (67928) WEBSOCKET: Exiting TTS stage (transition to complete)
I (67935) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (67948) MEM_MGR: â•‘   Fragmentation:      9%
I (67954) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (67972) MEM_MGR: â•‘ PSRAM:
I (67976) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (67983) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (67989) MEM_MGR: â•‘   Fragmentation:      2%
I (67995) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68013) MEM_MGR: â•‘ Total Heap:
I (68017) MEM_MGR: â•‘   Free:             3726180 bytes (3638 KB)
I (68024) MEM_MGR: â•‘   Minimum Ever:     3712552 bytes (3625 KB)
I (68031) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68042) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (68049) MEM_MGR: â•‘ Memory Delta from Baseline:
I (68063) MEM_MGR: â•‘   Internal RAM:     -133476 bytes (-130 KB)
I (68069) MEM_MGR: â•‘   DMA-capable:      -133476 bytes (-130 KB)
I (68076) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (68083) MEM_MGR: â•‘   Total Heap:       -638568 bytes (-623 KB)
I (68090) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68108) STATE_MGR: Stopping voice mode components...
I (68114) STT: Stopping STT pipeline...
W (68119) STT: STT pipeline already stopped
I (68124) STATE_MGR: Voice pipeline reported COMPLETE
I (68129) STATE_MGR: TTS playback already drained - no pending audio
I (68136) STATE_MGR: Flushing and resetting TTS decoder for next session
I (68144) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (68152) TTS: Flushing pending audio before reset (~0 bytes)
I (67816) TTS: âœ… TTS playback finished event dispatched to state manager
I (68166) TTS:   âœ“ DMA buffer freed from PSRAM
I (68171) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (68179) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (68208) TTS: TTS playback task handle is NULL - task already exited (after 1 checks)
I (68251) TTS: TTS decoder session reset for next audio stream
I (68251) TTS: âœ… TTS decoder flushed and reset for next session
I (68453) TTS: â¹ï¸ Stopping TTS decoder...
W (68453) TTS: TTS decoder already stopped.
I (68598) STATE_MGR: Acquiring I2S mutex...
I (68598) STATE_MGR: Deinitializing audio drivers...
I (68598) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68616) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (68623) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68641) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (68648) AUDIO: âœ… RX channel disabled (took 0 ms)
I (68654) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (68660) AUDIO: âœ… TX channel disabled (took 0 ms)
I (68666) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (68722) AUDIO: [STEP 4/5] Deleting RX channel...
I (68723) AUDIO: âœ… RX channel deleted (took 0 ms)
I (68723) AUDIO: [STEP 5/5] Deleting TX channel...
I (68728) AUDIO: âœ… TX channel deleted (took 0 ms)
I (68733) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (68791) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68798) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (68805) AUDIO: â•‘ Camera Can Now Initialize
I (68810) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68878) STATE_MGR: Allowing memory stabilization (100ms)...
I (68978) STATE_MGR: Camera will be initialized on-demand during capture
I (68978) STATE_MGR: I2S mutex released
I (68979) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68997) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (69004) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69023) MEM_MGR: â•‘ Internal RAM:
I (69027) MEM_MGR: â•‘   Free:              91703 bytes ( 89 KB)
I (69034) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (69040) MEM_MGR: â•‘   Fragmentation:     29%
I (69046) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69064) MEM_MGR: â•‘ DMA-capable RAM:
I (69068) MEM_MGR: â•‘   Free:              71287 bytes ( 69 KB)
I (69075) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (69082) MEM_MGR: â•‘   Fragmentation:      9%
I (69087) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69105) MEM_MGR: â•‘ PSRAM:
I (69109) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (69116) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (69123) MEM_MGR: â•‘   Fragmentation:      2%
I (69128) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69146) MEM_MGR: â•‘ Total Heap:
I (69151) MEM_MGR: â•‘   Free:             3726180 bytes (3638 KB)
I (69157) MEM_MGR: â•‘   Minimum Ever:     3712552 bytes (3625 KB)
I (69164) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69183) MEM_MGR: â•‘ Memory Delta from Baseline:
I (69188) MEM_MGR: â•‘   Internal RAM:     -133476 bytes (-130 KB)
I (69195) MEM_MGR: â•‘   DMA-capable:      -133476 bytes (-130 KB)
I (69202) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (69209) MEM_MGR: â•‘   Total Heap:       -638568 bytes (-623 KB)
I (69216) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69234) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (69244) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69261) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (69268) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69286) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69304) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (69312) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69330) AUDIO: [DIAG] Pre-init state:
I (69334) AUDIO:   Free heap: 3773232 bytes
I (69339) AUDIO:   Free internal RAM: 126595 bytes
I (69344) AUDIO:   Free DMA-capable: 106179 bytes
I (69350) AUDIO:   Free PSRAM: 3667124 bytes
I (69355) AUDIO:   Timestamp: 67800 ms
I (69359) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (69366) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (69374) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (69382) AUDIO:   DMA frame num (per desc): 1020
I (69388) AUDIO:   DMA total samples (effective): 4080
I (69393) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (69400) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (69407) AUDIO: âœ… I2S channels created (took 0 ms)
I (69412) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7f0
I (69419) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (69426) AUDIO:   Sample rate: 16000 Hz
I (69430) AUDIO:   MCLK: DISABLED
I (69434) AUDIO:   BCLK: GPIO14 (shared)
I (69439) AUDIO:   WS:   GPIO15 (shared)
I (69443) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (69450) AUDIO: âœ… TX channel configured (took 1 ms)
I (69455) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (69462) AUDIO:   Sample rate: 16000 Hz
I (69466) AUDIO:   MCLK: DISABLED
I (69470) AUDIO:   BCLK: GPIO14 (shared)
I (69475) AUDIO:   WS:   GPIO15 (shared)
I (69479) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (69485) AUDIO: âœ… RX channel configured (took 0 ms)
I (69491) AUDIO: [STEP 4/6] Enabling TX channel...
I (69496) AUDIO: âœ… TX channel enabled (took 0 ms)
I (69502) AUDIO: [STEP 5/6] Enabling RX channel...
I (69507) AUDIO: âœ… RX channel enabled (took 0 ms)
I (69513) AUDIO: [STEP 6/6] Hardware stabilization...
I (69519) AUDIO:   Phase 1: Initial settle (50ms)
I (69574) AUDIO:   Phase 2: DMA verification
I (69574) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (69575) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (69732) AUDIO: [DIAG] Post-init state:
I (69732) AUDIO:   Free heap: 3747244 bytes
I (69732) AUDIO:   Free internal RAM: 100607 bytes
I (69736) AUDIO:   Free DMA-capable: 80191 bytes
I (69741) AUDIO:   Free PSRAM: 3667124 bytes
I (69746) AUDIO:   Timestamp: 68192 ms
I (69751) AUDIO:   Total init time: 201 ms
I (69756) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69774) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (69780) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (69785) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (69794) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (69801) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69818) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69836) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (69843) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (69849) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (69856) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (69862) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70163) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70170) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (70178) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70196) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (70203) AUDIO: âœ… RX channel disabled (took 0 ms)
I (70208) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (70215) AUDIO: âœ… TX channel disabled (took 0 ms)
I (70220) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (70277) AUDIO: [STEP 4/5] Deleting RX channel...
I (70278) AUDIO: âœ… RX channel deleted (took 0 ms)
I (70278) AUDIO: [STEP 5/5] Deleting TX channel...
I (70283) AUDIO: âœ… TX channel deleted (took 0 ms)
I (70288) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (70346) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70353) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (70359) AUDIO: â•‘ Camera Can Now Initialize
I (70365) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70383) LED_CTRL: LED pattern -> 3
I (70387) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (70404) STATE_MGR: Pipeline stage event: complete
I (72955) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (72955) BUTTON: Single click confirmed
I (72955) STATE_MGR: Single click - mode toggle requested
I (72961) STATE_MGR: Switching: Camera â†’ Voice (count: 5)
I (73018) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (73018) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73031) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (73038) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73057) MEM_MGR: â•‘ Internal RAM:
I (73061) MEM_MGR: â•‘   Free:              91703 bytes ( 89 KB)
I (73068) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (73074) MEM_MGR: â•‘   Fragmentation:     29%
I (73079) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73098) MEM_MGR: â•‘ DMA-capable RAM:
I (73102) MEM_MGR: â•‘   Free:              71287 bytes ( 69 KB)
I (73109) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (73116) MEM_MGR: â•‘   Fragmentation:      9%
I (73121) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73139) MEM_MGR: â•‘ PSRAM:
I (73143) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (73150) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (73157) MEM_MGR: â•‘   Fragmentation:      2%
I (73162) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73180) MEM_MGR: â•‘ Total Heap:
I (73184) MEM_MGR: â•‘   Free:             3726180 bytes (3638 KB)
I (73191) MEM_MGR: â•‘   Minimum Ever:     3712552 bytes (3625 KB)
I (73198) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73216) MEM_MGR: â•‘ Memory Delta from Baseline:
I (73222) MEM_MGR: â•‘   Internal RAM:     -133476 bytes (-130 KB)
I (73229) MEM_MGR: â•‘   DMA-capable:      -133476 bytes (-130 KB)
I (73236) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (73243) MEM_MGR: â•‘   Total Heap:       -638568 bytes (-623 KB)
I (73249) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73268) STATE_MGR: Stopping camera...
I (73272) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73289) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (73295) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73312) STATE_MGR:   Timeout: 5000 ms
I (73316) STATE_MGR:   Timestamp: 71762 ms
I (73321) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (73327) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73343) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (73349) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73366) STATE_MGR:   Free heap before: 3773232 bytes
I (73371) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (73377) CAMERA: Deinitializing camera...
I (73382) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (73388) STATE_MGR:   Free heap after: 3773232 bytes
I (73394) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (73400) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73416) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (73422) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73439) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (73547) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (73647) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (73697) STATE_MGR:   âœ“ Total stabilization: 250ms
I (73697) STATE_MGR:   Timestamp: 72143 ms
I (73697) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73713) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (73720) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73736) STATE_MGR:   Free heap before: 3773232 bytes
I (73742) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73760) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (73767) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73785) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73803) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (73810) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (73828) AUDIO: [DIAG] Pre-init state:
I (73832) AUDIO:   Free heap: 3773232 bytes
I (73837) AUDIO:   Free internal RAM: 126595 bytes
I (73843) AUDIO:   Free DMA-capable: 106179 bytes
I (73848) AUDIO:   Free PSRAM: 3667124 bytes
I (73853) AUDIO:   Timestamp: 72299 ms
I (73857) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (73864) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (73872) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (73880) AUDIO:   DMA frame num (per desc): 1020
I (73886) AUDIO:   DMA total samples (effective): 4080
I (73892) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (73899) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (73905) AUDIO: âœ… I2S channels created (took 0 ms)
I (73911) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7f0
I (73917) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (73924) AUDIO:   Sample rate: 16000 Hz
I (73928) AUDIO:   MCLK: DISABLED
I (73932) AUDIO:   BCLK: GPIO14 (shared)
I (73937) AUDIO:   WS:   GPIO15 (shared)
I (73942) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (73948) AUDIO: âœ… TX channel configured (took 0 ms)
I (73953) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (73960) AUDIO:   Sample rate: 16000 Hz
I (73964) AUDIO:   MCLK: DISABLED
I (73968) AUDIO:   BCLK: GPIO14 (shared)
I (73973) AUDIO:   WS:   GPIO15 (shared)
I (73978) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (73984) AUDIO: âœ… RX channel configured (took 0 ms)
I (73989) AUDIO: [STEP 4/6] Enabling TX channel...
I (73995) AUDIO: âœ… TX channel enabled (took 0 ms)
I (74000) AUDIO: [STEP 5/6] Enabling RX channel...
I (74006) AUDIO: âœ… RX channel enabled (took 0 ms)
I (74011) AUDIO: [STEP 6/6] Hardware stabilization...
I (74017) AUDIO:   Phase 1: Initial settle (50ms)
I (74072) AUDIO:   Phase 2: DMA verification
I (74072) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (74073) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (74230) AUDIO: [DIAG] Post-init state:
I (74230) AUDIO:   Free heap: 3747244 bytes
I (74230) AUDIO:   Free internal RAM: 100607 bytes
I (74234) AUDIO:   Free DMA-capable: 80191 bytes
I (74239) AUDIO:   Free PSRAM: 3667124 bytes
I (74244) AUDIO:   Timestamp: 72690 ms
I (74249) AUDIO:   Total init time: 200 ms
I (74254) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74272) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (74278) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (74283) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (74292) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (74299) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74316) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74334) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (74341) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (74347) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (74354) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (74360) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74378) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (74385) STATE_MGR:   Free heap after: 3747244 bytes
I (74390) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74406) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (74412) STATE_MGR: â•‘ Total transition time: 890 ms
I (74418) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74434) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74450) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (74460) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74476) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (74484) TTS: No pending audio to flush
I (74533) TTS: TTS decoder session reset for next audio stream
I (74533) TTS: âœ… TTS decoder flushed and reset for next session
I (74536) STT: Starting STT pipeline...
I (74540) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (74549) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (74556) STT:   Current time: 73002 ms
I (74559) STT: âœ… STT pipeline started
I (74561) STT:   Free heap: 3738692 bytes
I (74565) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (74561) STT: Audio streaming session activated
I (74584) STT: Connection stabilization delay (2000ms)...
I (74770) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (74770) STT:   âœ“ Audio driver initialized
I (74771) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (74878) STT:   Total stabilization: 300ms
I (74878) STT:   Timestamp: 73323 ms
I (74878) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (74882) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37f4 (with safety padding)
I (74891) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74904) LED_CTRL: LED pattern -> 1
I (74907) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (74911) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74916) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (74935) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (74941) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74948) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (74982) MEM_MGR: â•‘ Internal RAM:
I (74987) MEM_MGR: â•‘   Free:              91703 bytes ( 89 KB)
I (74993) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (75000) MEM_MGR: â•‘   Fragmentation:     29%
I (75005) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75024) MEM_MGR: â•‘ DMA-capable RAM:
I (75028) MEM_MGR: â•‘   Free:              71287 bytes ( 69 KB)
I (75035) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (75041) MEM_MGR: â•‘   Fragmentation:      9%
I (75047) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75065) MEM_MGR: â•‘ PSRAM:
I (75069) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (75076) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (75082) MEM_MGR: â•‘   Fragmentation:      2%
I (75088) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75106) MEM_MGR: â•‘ Total Heap:
I (75110) MEM_MGR: â•‘   Free:             3726180 bytes (3638 KB)
I (75117) MEM_MGR: â•‘   Minimum Ever:     3712552 bytes (3625 KB)
I (75124) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75142) MEM_MGR: â•‘ Memory Delta from Baseline:
I (75148) MEM_MGR: â•‘   Internal RAM:     -133476 bytes (-130 KB)
I (75155) MEM_MGR: â•‘   DMA-capable:      -133476 bytes (-130 KB)
I (75161) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (75168) MEM_MGR: â•‘   Total Heap:       -638568 bytes (-623 KB)
I (75175) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (75194) STATE_MGR: âœ… Voice mode transition complete
I (75199) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (75215) STATE_MGR: STT pipeline reported start
I (76590) STT: Starting audio streaming to server...
I (76695) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (76696) WEBSOCKET: Server status: receiving
I (76700) WEBSOCKET: Server ACK: 2 chunks processed
W (76764) STT: Waiting for server ACK (sent: 4, acked: 2, unack: 2)
I (76852) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (76853) WEBSOCKET: Server status: receiving
I (76857) STT: Flow control: ACK received, resuming (sent=4, acked=4)
I (76864) WEBSOCKET: Server ACK: 4 chunks processed
I (76873) STT: ACK received, resuming (unack now: 0)
I (76922) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (76923) WEBSOCKET: Server status: receiving
I (76928) WEBSOCKET: Server ACK: 6 chunks processed
I (76995) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (76996) WEBSOCKET: Server status: receiving
I (77000) WEBSOCKET: Server ACK: 8 chunks processed
I (77059) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (77060) WEBSOCKET: Server status: receiving
I (77065) WEBSOCKET: Server ACK: 10 chunks processed
I (77123) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (77124) WEBSOCKET: Server status: receiving
I (77129) WEBSOCKET: Server ACK: 12 chunks processed
I (77209) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (77210) WEBSOCKET: Server status: receiving
I (77214) WEBSOCKET: Server ACK: 14 chunks processed
I (77270) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (77271) WEBSOCKET: Server status: receiving
I (77275) WEBSOCKET: Server ACK: 16 chunks processed
I (77329) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (77330) WEBSOCKET: Server status: receiving
I (77335) WEBSOCKET: Server ACK: 18 chunks processed
I (77491) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (77492) WEBSOCKET: Server status: receiving
I (77496) WEBSOCKET: Server ACK: 20 chunks processed
I (77763) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (77764) WEBSOCKET: Server status: receiving
I (77768) WEBSOCKET: Server ACK: 22 chunks processed
I (77953) BUTTON: Single click confirmed
I (77953) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (77954) STATE_MGR: Single click - mode toggle requested
I (77960) STATE_MGR: User requested to end voice session (count: 6). Stopping STT and awaiting server response.
I (77970) STT: Stopping STT pipeline...
I (77975) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (77990) STT: Ring buffer drained and cleared successfully
I (77990) STT: Capture stopped and ring buffer drained; ending streaming loop
I (77997) STT: Sending EOS signal...
I (78001) WEBSOCKET: Sending EOS signal
I (78010) STT: Audio streaming session complete (streamed 98304 bytes in 24 chunks)
I (78017) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (78025) WEBSOCKET: Server status: receiving
I (78030) WEBSOCKET: Server ACK: 24 chunks processed
I (78039) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (78045) WEBSOCKET: Server status: processing
I (78050) WEBSOCKET: Server stage: transcription
I (78055) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (78062) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (78078) STT: Audio capture task stopped (captured 102400 bytes total)
I (78085) STT: STT pipeline stopped
I (78085) LED_CTRL: LED pattern -> 4
I (78086) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (78105) STATE_MGR: STT pipeline reported stop
I (78105) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (78109) LED_CTRL: LED pattern -> 1
I (78600) LED_CTRL: LED pattern -> 4
I (78600) STATE_MGR: Pipeline stage event: transcription
I (78601) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (78604) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "cool", "has_image": false}
I (78620) WEBSOCKET: Server status: processing
I (78625) WEBSOCKET: Server stage: llm
I (78629) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (78636) WEBSOCKET: Entering LLM stage - continuing processing indication
I (78644) STATE_MGR: Pipeline stage event: llm
I (78774) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I'm ready to assist you, feel free to ask me anything or share an image for me to help with."}
I (78781) WEBSOCKET: Server status: processing
I (78786) WEBSOCKET: Server stage: tts
I (78791) WEBSOCKET: Pipeline stage changed: llm -> tts
I (78796) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (78804) LED_CTRL: LED pattern -> 3
I (78808) TTS: ğŸµ Starting TTS decoder...
I (78813) TTS: Initializing TTS decoder...
W (78818) TTS: TTS decoder already initialized
I (78866) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (78867) TTS: ğŸµ TTS playback task started on Core 1
I (78868) STATE_MGR: TTS playback start event received
I (78868) TTS: âœ… TTS decoder started successfully
I (78878) LED_CTRL: LED pattern -> 1
I (78878) TTS: âœ… TTS playback task registered with watchdog
I (78894) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (78897) STATE_MGR: Pipeline stage event: tts
I (78913) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 77358 ms, bytes: 4096)
I (78916) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (78924) TTS: Chunk #2 first 12 bytes: 52 49 46 46 EC F5 02 00 57 41 56 45
I (78932) TTS: New audio session detected - resetting chunk counter
I (78939) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (78947) STATE_MGR: TTS playback start event received
I (78953) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (78961) TTS: Chunk #2 first 12 bytes: 0A 0A 2A 05 ED FF 5B FB C8 F8 14 FB
I (78976) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (78978) TTS: Chunk #3 first 12 bytes: B4 1B 51 1A 96 18 BD 16 25 15 C5 12
I (78992) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (78995) TTS: Chunk #4 first 12 bytes: 7B 1D 6E 1D 65 1C 90 1A CD 18 75 17
I (79005) TTS: âœ… WAV header parsed successfully
I (79008) TTS: === WAV File Info ===
I (79011) TTS: Received audio chunk #5: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (79012) TTS: Sample Rate: 16000 Hz
I (79021) TTS: Chunk #5 first 12 bytes: 67 0F D7 0E 22 0D AA 0B D7 09 A1 09
I (79025) TTS: Channels: 1
I (79036) TTS: Bits per Sample: 16
I (79040) TTS: Audio Format: 1 (PCM)
I (79042) TTS: Received audio chunk #6: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (79045) TTS: Declared Data Size: 193992 bytes
I (79059) TTS: Block Align: 2
I (79060) TTS: Received audio chunk #7: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (79062) TTS: Byte Rate: 32000
I (79075) TTS: ====================
I (79078) TTS: Received audio chunk #8: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (79080) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=28672)
I (79097) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (79097) TTS: Received audio chunk #9: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (79122) TTS: Received audio chunk #10: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (79128) TTS: Received audio chunk #11: 316 bytes (buffer: 32768/327680 used, 294911 free)
I (79150) TTS: Received audio chunk #12: 3780 bytes (buffer: 33084/327680 used, 294595 free)
I (79158) TTS: Received audio chunk #13: 536 bytes (buffer: 36864/327680 used, 290815 free)
I (79162) TTS: Received audio chunk #14: 3560 bytes (buffer: 37400/327680 used, 290279 free)
I (79175) TTS: Received audio chunk #15: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (79185) TTS: Received audio chunk #16: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (79193) TTS: Received audio chunk #17: 1196 bytes (buffer: 49152/327680 used, 278527 free)
I (79198) TTS: Received audio chunk #18: 2900 bytes (buffer: 50348/327680 used, 277331 free)
I (79208) TTS: Received audio chunk #19: 1416 bytes (buffer: 53248/327680 used, 274431 free)
I (79247) TTS: Received audio chunk #20: 2680 bytes (buffer: 50568/327680 used, 277111 free)
I (79255) TTS: Received audio chunk #21: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (79266) TTS: Received audio chunk #22: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (79275) TTS: Received audio chunk #23: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (79283) TTS: Received audio chunk #24: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (79289) TTS: Received audio chunk #25: 1076 bytes (buffer: 69632/327680 used, 258047 free)
I (79299) TTS: Received audio chunk #26: 3020 bytes (buffer: 70708/327680 used, 256971 free)
I (79310) TTS: Received audio chunk #27: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (79320) TTS: Received audio chunk #28: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (79325) TTS: Received audio chunk #29: 296 bytes (buffer: 81920/327680 used, 245759 free)
I (79333) TTS: Received audio chunk #30: 3800 bytes (buffer: 82216/327680 used, 245463 free)
I (79349) TTS: Received audio chunk #31: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (79360) TTS: Received audio chunk #32: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (79366) TTS: Received audio chunk #33: 956 bytes (buffer: 90112/327680 used, 237567 free)
I (79373) TTS: Received audio chunk #34: 3140 bytes (buffer: 91068/327680 used, 236611 free)
I (79382) TTS: Received audio chunk #35: 1176 bytes (buffer: 94208/327680 used, 233471 free)
I (79390) TTS: Received audio chunk #36: 2920 bytes (buffer: 95384/327680 used, 232295 free)
I (79403) TTS: Received audio chunk #37: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (79413) TTS: Received audio chunk #38: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (79419) TTS: Received audio chunk #39: 396 bytes (buffer: 106496/327680 used, 221183 free)
I (79427) TTS: Received audio chunk #40: 3700 bytes (buffer: 106892/327680 used, 220787 free)
I (79441) TTS: Received audio chunk #41: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (79452) TTS: Received audio chunk #42: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (79461) TTS: Received audio chunk #43: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (79468) TTS: Received audio chunk #44: 1276 bytes (buffer: 122880/327680 used, 204799 free)
I (79473) TTS: Received audio chunk #45: 2820 bytes (buffer: 124156/327680 used, 203523 free)
I (79487) TTS: Received audio chunk #46: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (79496) TTS: Received audio chunk #47: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (79503) TTS: Received audio chunk #48: 496 bytes (buffer: 131072/327680 used, 196607 free)
I (79509) TTS: Received audio chunk #49: 3600 bytes (buffer: 131568/327680 used, 196111 free)
I (79524) TTS: Received audio chunk #50: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (79531) TTS: Received audio chunk #51: 936 bytes (buffer: 139264/327680 used, 188415 free)
I (79537) TTS: Received audio chunk #52: 3160 bytes (buffer: 140200/327680 used, 187479 free)
I (79552) TTS: Received audio chunk #53: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (79562) TTS: Received audio chunk #54: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (79572) TTS: Received audio chunk #55: 1596 bytes (buffer: 151552/327680 used, 176127 free)
I (79577) TTS: Received audio chunk #56: 2500 bytes (buffer: 153148/327680 used, 174531 free)
I (79588) TTS: Received audio chunk #57: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (79599) TTS: Received audio chunk #58: 4096 bytes (buffer: 159744/327680 used, 167935 free)
I (79611) TTS: Received audio chunk #59: 4096 bytes (buffer: 159744/327680 used, 167935 free)
I (79658) TTS: Received audio chunk #60: 1436 bytes (buffer: 163840/327680 used, 163839 free)
I (79663) TTS: Received audio chunk #61: 2660 bytes (buffer: 165276/327680 used, 162403 free)
I (79672) TTS: Received audio chunk #62: 1524 bytes (buffer: 167936/327680 used, 159743 free)
I (79731) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (79857) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (79859) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (79859) TTS: TTS end-of-stream signaled (bytes_received=194036, header_parsed=1)
I (79872) TTS: ğŸµ Playback task will drain 161268 bytes of buffered audio
I (79880) TTS: Waiting for playback completion: 161268 bytes buffered, calculated timeout: 7039 ms
I (79986) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (80113) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (80241) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (80368) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (80495) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (80623) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (80750) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (80878) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (81005) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (81133) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (81260) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (81388) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (81515) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (81643) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (81770) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (81898) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (82025) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (82153) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (82280) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (82408) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (82535) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (82663) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (82790) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (82918) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (83045) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (83173) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (83300) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (83428) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (83555) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (83683) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (83810) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (83938) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (84065) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (84193) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (84320) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (84448) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (84575) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (84703) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (84830) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (84958) TTS: âœ… All audio data received (194036 bytes, expected 193992 + 44 header)
I (85121) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (85121) TTS: ğŸµ TTS playback task exiting (played 193992 bytes, result: ESP_OK)
I (85127) STATE_MGR: TTS playback finished successfully
I (85129) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (85129) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (85129) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85129) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (85173) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85171) TTS: TTS decoder session reset for next audio stream
I (85192) MEM_MGR: â•‘ Internal RAM:
I (85198) TTS: Received audio chunk #63: 0 bytes (buffer: 0/327680 used, 327679 free)
I (85202) MEM_MGR: â•‘   Free:              87779 bytes ( 85 KB)
I (85211) TTS: New audio session detected - resetting chunk counter
I (85218) MEM_MGR: â•‘   Largest Block:     61440 bytes ( 60 KB)
I (85225) WEBSOCKET: ğŸµ Audio session complete: 194036 bytes in 62 messages
I (85231) MEM_MGR: â•‘   Fragmentation:     31%
I (85243) WEBSOCKET: Received text message: {"status": "complete"}
I (85244) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85251) WEBSOCKET: Server status: complete
I (85269) MEM_MGR: â•‘ DMA-capable RAM:
I (85275) WEBSOCKET: Pipeline stage changed: tts -> complete
I (85279) MEM_MGR: â•‘   Free:              67363 bytes ( 65 KB)
I (85285) WEBSOCKET: Exiting TTS stage (transition to complete)
I (85292) MEM_MGR: â•‘   Largest Block:     61440 bytes ( 60 KB)
I (85305) MEM_MGR: â•‘   Fragmentation:      9%
I (85310) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85329) MEM_MGR: â•‘ PSRAM:
I (85332) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (85339) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (85346) MEM_MGR: â•‘   Fragmentation:      2%
I (85351) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85370) MEM_MGR: â•‘ Total Heap:
I (85374) MEM_MGR: â•‘   Free:             3734416 bytes (3646 KB)
I (85381) MEM_MGR: â•‘   Minimum Ever:     3712552 bytes (3625 KB)
I (85388) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85399) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (85406) MEM_MGR: â•‘ Memory Delta from Baseline:
I (85419) MEM_MGR: â•‘   Internal RAM:     -137400 bytes (-134 KB)
I (85426) MEM_MGR: â•‘   DMA-capable:      -137400 bytes (-134 KB)
I (85433) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (85440) MEM_MGR: â•‘   Total Heap:       -630332 bytes (-615 KB)
I (85447) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85465) STATE_MGR: Stopping voice mode components...
I (85471) STT: Stopping STT pipeline...
W (85476) STT: STT pipeline already stopped
I (85480) STATE_MGR: Voice pipeline reported COMPLETE
I (85486) STATE_MGR: TTS playback already drained - no pending audio
I (85493) STATE_MGR: Flushing and resetting TTS decoder for next session
I (85501) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (85508) TTS: Flushing pending audio before reset (~0 bytes)
I (85192) TTS: âœ… TTS playback finished event dispatched to state manager
I (85522) TTS:   âœ“ DMA buffer freed from PSRAM
I (85528) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (85535) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (85565) TTS: TTS playback task handle is NULL - task already exited (after 1 checks)
I (85610) TTS: TTS decoder session reset for next audio stream
I (85610) TTS: âœ… TTS decoder flushed and reset for next session
I (85812) TTS: â¹ï¸ Stopping TTS decoder...
W (85812) TTS: TTS decoder already stopped.
I (85956) STATE_MGR: Acquiring I2S mutex...
I (85956) STATE_MGR: Deinitializing audio drivers...
I (85956) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85974) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (85981) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85999) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (86006) AUDIO: âœ… RX channel disabled (took 0 ms)
I (86012) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (86018) AUDIO: âœ… TX channel disabled (took 0 ms)
I (86024) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (86080) AUDIO: [STEP 4/5] Deleting RX channel...
I (86081) AUDIO: âœ… RX channel deleted (took 0 ms)
I (86081) AUDIO: [STEP 5/5] Deleting TX channel...
I (86086) AUDIO: âœ… TX channel deleted (took 0 ms)
I (86091) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (86149) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86156) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (86163) AUDIO: â•‘ Camera Can Now Initialize
I (86168) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86236) STATE_MGR: Allowing memory stabilization (100ms)...
I (86336) STATE_MGR: Camera will be initialized on-demand during capture
I (86336) STATE_MGR: I2S mutex released
I (86337) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86355) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (86362) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86381) MEM_MGR: â•‘ Internal RAM:
I (86385) MEM_MGR: â•‘   Free:              87779 bytes ( 85 KB)
I (86392) MEM_MGR: â•‘   Largest Block:     61440 bytes ( 60 KB)
I (86398) MEM_MGR: â•‘   Fragmentation:     31%
I (86404) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86422) MEM_MGR: â•‘ DMA-capable RAM:
I (86426) MEM_MGR: â•‘   Free:              67363 bytes ( 65 KB)
I (86433) MEM_MGR: â•‘   Largest Block:     61440 bytes ( 60 KB)
I (86440) MEM_MGR: â•‘   Fragmentation:      9%
I (86445) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86463) MEM_MGR: â•‘ PSRAM:
I (86467) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (86474) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (86481) MEM_MGR: â•‘   Fragmentation:      2%
I (86486) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86504) MEM_MGR: â•‘ Total Heap:
I (86509) MEM_MGR: â•‘   Free:             3734416 bytes (3646 KB)
I (86515) MEM_MGR: â•‘   Minimum Ever:     3712552 bytes (3625 KB)
I (86522) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86541) MEM_MGR: â•‘ Memory Delta from Baseline:
I (86546) MEM_MGR: â•‘   Internal RAM:     -137400 bytes (-134 KB)
I (86553) MEM_MGR: â•‘   DMA-capable:      -137400 bytes (-134 KB)
I (86560) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (86567) MEM_MGR: â•‘   Total Heap:       -630332 bytes (-615 KB)
I (86574) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86592) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (86602) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86619) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (86626) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86644) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86662) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (86670) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86688) AUDIO: [DIAG] Pre-init state:
I (86692) AUDIO:   Free heap: 3773232 bytes
I (86697) AUDIO:   Free internal RAM: 126595 bytes
I (86702) AUDIO:   Free DMA-capable: 106179 bytes
I (86708) AUDIO:   Free PSRAM: 3667124 bytes
I (86713) AUDIO:   Timestamp: 85158 ms
I (86717) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (86724) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (86732) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (86740) AUDIO:   DMA frame num (per desc): 1020
I (86746) AUDIO:   DMA total samples (effective): 4080
I (86751) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (86758) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (86765) AUDIO: âœ… I2S channels created (took 0 ms)
I (86770) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7f0
I (86777) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (86784) AUDIO:   Sample rate: 16000 Hz
I (86788) AUDIO:   MCLK: DISABLED
I (86792) AUDIO:   BCLK: GPIO14 (shared)
I (86797) AUDIO:   WS:   GPIO15 (shared)
I (86801) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (86808) AUDIO: âœ… TX channel configured (took 1 ms)
I (86813) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (86820) AUDIO:   Sample rate: 16000 Hz
I (86824) AUDIO:   MCLK: DISABLED
I (86828) AUDIO:   BCLK: GPIO14 (shared)
I (86833) AUDIO:   WS:   GPIO15 (shared)
I (86837) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (86843) AUDIO: âœ… RX channel configured (took 0 ms)
I (86849) AUDIO: [STEP 4/6] Enabling TX channel...
I (86854) AUDIO: âœ… TX channel enabled (took 0 ms)
I (86860) AUDIO: [STEP 5/6] Enabling RX channel...
I (86865) AUDIO: âœ… RX channel enabled (took 0 ms)
I (86871) AUDIO: [STEP 6/6] Hardware stabilization...
I (86877) AUDIO:   Phase 1: Initial settle (50ms)
I (86932) AUDIO:   Phase 2: DMA verification
I (86932) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (86933) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (87090) AUDIO: [DIAG] Post-init state:
I (87090) AUDIO:   Free heap: 3747244 bytes
I (87090) AUDIO:   Free internal RAM: 100607 bytes
I (87094) AUDIO:   Free DMA-capable: 80191 bytes
I (87099) AUDIO:   Free PSRAM: 3667124 bytes
I (87104) AUDIO:   Timestamp: 85550 ms
I (87109) AUDIO:   Total init time: 201 ms
I (87114) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87132) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (87138) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (87143) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (87152) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (87159) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87176) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87194) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (87201) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (87207) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (87214) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (87220) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87521) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87528) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (87536) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87554) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (87561) AUDIO: âœ… RX channel disabled (took 0 ms)
I (87566) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (87573) AUDIO: âœ… TX channel disabled (took 0 ms)
I (87578) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (87635) AUDIO: [STEP 4/5] Deleting RX channel...
I (87636) AUDIO: âœ… RX channel deleted (took 0 ms)
I (87636) AUDIO: [STEP 5/5] Deleting TX channel...
I (87641) AUDIO: âœ… TX channel deleted (took 0 ms)
I (87646) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (87704) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87711) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (87718) AUDIO: â•‘ Camera Can Now Initialize
I (87723) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (87741) LED_CTRL: LED pattern -> 3
I (87745) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (87762) STATE_MGR: Pipeline stage event: complete
I (89788) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (89788) STATE_MGR: Double-click detected - triggering capture sequence
I (89791) STATE_MGR: Starting camera capture sequence
I (89797) LED_CTRL: LED pattern -> 6
I (89802) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (89819) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (89826) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (89844) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (89862) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (89870) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (89888) AUDIO: [DIAG] Pre-init state:
I (89892) AUDIO:   Free heap: 3773232 bytes
I (89897) AUDIO:   Free internal RAM: 126595 bytes
I (89902) AUDIO:   Free DMA-capable: 106179 bytes
I (89908) AUDIO:   Free PSRAM: 3667124 bytes
I (89913) AUDIO:   Timestamp: 88358 ms
I (89917) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (89924) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (89932) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (89940) AUDIO:   DMA frame num (per desc): 1020
I (89946) AUDIO:   DMA total samples (effective): 4080
I (89951) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (89958) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (89965) AUDIO: âœ… I2S channels created (took 0 ms)
I (89970) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7f0
I (89977) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (89984) AUDIO:   Sample rate: 16000 Hz
I (89988) AUDIO:   MCLK: DISABLED
I (89992) AUDIO:   BCLK: GPIO14 (shared)
I (89997) AUDIO:   WS:   GPIO15 (shared)
I (90001) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (90008) AUDIO: âœ… TX channel configured (took 0 ms)
I (90013) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (90020) AUDIO:   Sample rate: 16000 Hz
I (90024) AUDIO:   MCLK: DISABLED
I (90028) AUDIO:   BCLK: GPIO14 (shared)
I (90033) AUDIO:   WS:   GPIO15 (shared)
I (90037) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (90043) AUDIO: âœ… RX channel configured (took 0 ms)
I (90049) AUDIO: [STEP 4/6] Enabling TX channel...
I (90054) AUDIO: âœ… TX channel enabled (took 0 ms)
I (90060) AUDIO: [STEP 5/6] Enabling RX channel...
I (90065) AUDIO: âœ… RX channel enabled (took 0 ms)
I (90071) AUDIO: [STEP 6/6] Hardware stabilization...
I (90077) AUDIO:   Phase 1: Initial settle (50ms)
I (90132) AUDIO:   Phase 2: DMA verification
I (90132) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (90133) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (90290) AUDIO: [DIAG] Post-init state:
I (90290) AUDIO:   Free heap: 3747244 bytes
I (90290) AUDIO:   Free internal RAM: 100607 bytes
I (90294) AUDIO:   Free DMA-capable: 80191 bytes
I (90299) AUDIO:   Free PSRAM: 3667124 bytes
I (90304) AUDIO:   Timestamp: 88750 ms
I (90309) AUDIO:   Total init time: 200 ms
I (90314) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90332) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (90338) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (90343) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (90352) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (90359) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90376) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90394) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (90401) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (90407) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (90414) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (90420) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90770) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90777) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (90785) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90803) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (90810) AUDIO: âœ… RX channel disabled (took 0 ms)
I (90815) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (90822) AUDIO: âœ… TX channel disabled (took 0 ms)
I (90827) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (90884) AUDIO: [STEP 4/5] Deleting RX channel...
I (90885) AUDIO: âœ… RX channel deleted (took 0 ms)
I (90885) AUDIO: [STEP 5/5] Deleting TX channel...
I (90890) AUDIO: âœ… TX channel deleted (took 0 ms)
I (90895) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (90953) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90960) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (90967) AUDIO: â•‘ Camera Can Now Initialize
I (90972) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (90990) STATE_MGR: Capturing frame from camera
I (90995) CAMERA: Initializing camera...
I (91000) gpio: GPIO[4]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (91009) CAMERA: Flash LED initialized on GPIO 4
I (91014) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (91024) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (91032) cam_hal: cam init ok
I (91036) sccb-ng: pin_sda 26 pin_scl 27
I (91040) sccb-ng: sccb_i2c_port=1
I (91045) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (91088) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (91088) camera: Detected OV2640 camera
I (91088) camera: Detected camera at address=0x30
I (91169) cam_hal: PSRAM DMA mode disabled
I (91169) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (91173) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (91180) cam_hal: cam config ok
I (91184) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (91267) CAMERA: Camera initialized successfully
I (91817) STATE_MGR: Frame captured: 14155 bytes
I (91818) STATE_MGR: Uploading image using session esp32-cam-hotpin
I (91819) HTTP_CLIENT: Uploading image: session=esp32-cam-hotpin, size=14155 bytes
I (91829) HTTP_CLIENT: POST body assembled: 14412 bytes
I (91834) HTTP_CLIENT: Sending POST request to http://10.242.175.58:8000/image
I (92132) HTTP_CLIENT: HTTP POST Status = 200, content_length = 245
I (92133) HTTP_CLIENT: Image uploaded successfully
I (92134) HTTP_CLIENT: Server response: {"status":"success","message":"Image received and stored for next voice interaction","session":"esp32-cam-hotpin","filename":"image.jpg","size_bytes":14155,"saved_path":"captured_images/esp32-cam-hotpin_20251114_141420.jpg","context_ready":true}
I (92162) CAMERA: Deinitializing camera...
I (92167) CAMERA: Camera deinitialized
I (92169) STATE_MGR: Camera deinitialized - DMA memory freed
I (92176) STATE_MGR: Image uploaded successfully
I (92181) LED_CTRL: LED pattern -> 3
I (92185) STATE_MGR: Camera capture sequence complete
I (92201) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (95874) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (95874) BUTTON: Single click confirmed
I (95874) STATE_MGR: Single click - mode toggle requested
I (95880) STATE_MGR: Switching: Camera â†’ Voice (count: 7)
I (95937) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (95937) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (95950) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (95957) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (95976) MEM_MGR: â•‘ Internal RAM:
I (95980) MEM_MGR: â•‘   Free:              78131 bytes ( 76 KB)
I (95987) MEM_MGR: â•‘   Largest Block:     51200 bytes ( 50 KB)
I (95993) MEM_MGR: â•‘   Fragmentation:     35%
I (95998) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96017) MEM_MGR: â•‘ DMA-capable RAM:
I (96021) MEM_MGR: â•‘   Free:              57715 bytes ( 56 KB)
I (96028) MEM_MGR: â•‘   Largest Block:     51200 bytes ( 50 KB)
I (96035) MEM_MGR: â•‘   Fragmentation:     12%
I (96040) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96058) MEM_MGR: â•‘ PSRAM:
I (96062) MEM_MGR: â•‘   Free:             3589576 bytes (3505 KB)
I (96069) MEM_MGR: â•‘   Largest Block:    3538944 bytes (3456 KB)
I (96076) MEM_MGR: â•‘   Fragmentation:      2%
I (96081) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96099) MEM_MGR: â•‘ Total Heap:
I (96103) MEM_MGR: â•‘   Free:             3647220 bytes (3561 KB)
I (96110) MEM_MGR: â•‘   Minimum Ever:     3642092 bytes (3556 KB)
I (96117) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96135) MEM_MGR: â•‘ Memory Delta from Baseline:
I (96141) MEM_MGR: â•‘   Internal RAM:     -147048 bytes (-143 KB)
I (96148) MEM_MGR: â•‘   DMA-capable:      -147048 bytes (-143 KB)
I (96155) MEM_MGR: â•‘   PSRAM:            -602440 bytes (-588 KB)
I (96162) MEM_MGR: â•‘   Total Heap:       -717528 bytes (-700 KB)
I (96168) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96187) STATE_MGR: Stopping camera...
I (96191) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96208) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (96214) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96231) STATE_MGR:   Timeout: 5000 ms
I (96235) STATE_MGR:   Timestamp: 94681 ms
I (96240) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (96246) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96262) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (96268) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96285) STATE_MGR:   Free heap before: 3772760 bytes
I (96290) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (96296) CAMERA: Deinitializing camera...
I (96301) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (96307) STATE_MGR:   Free heap after: 3772760 bytes
I (96313) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (96319) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96335) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (96341) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96358) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (96466) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (96566) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (96616) STATE_MGR:   âœ“ Total stabilization: 250ms
I (96616) STATE_MGR:   Timestamp: 95062 ms
I (96616) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96632) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (96639) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96655) STATE_MGR:   Free heap before: 3772760 bytes
I (96661) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96679) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (96686) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96704) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96722) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (96729) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96747) AUDIO: [DIAG] Pre-init state:
I (96751) AUDIO:   Free heap: 3772760 bytes
I (96756) AUDIO:   Free internal RAM: 126123 bytes
I (96762) AUDIO:   Free DMA-capable: 105707 bytes
I (96767) AUDIO:   Free PSRAM: 3667124 bytes
I (96772) AUDIO:   Timestamp: 95218 ms
I (96776) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (96783) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (96791) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (96799) AUDIO:   DMA frame num (per desc): 1020
I (96805) AUDIO:   DMA total samples (effective): 4080
I (96811) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (96818) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (96824) AUDIO: âœ… I2S channels created (took 0 ms)
I (96830) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca850
I (96836) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (96843) AUDIO:   Sample rate: 16000 Hz
I (96847) AUDIO:   MCLK: DISABLED
I (96851) AUDIO:   BCLK: GPIO14 (shared)
I (96856) AUDIO:   WS:   GPIO15 (shared)
I (96861) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (96868) AUDIO: âœ… TX channel configured (took 1 ms)
I (96872) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (96879) AUDIO:   Sample rate: 16000 Hz
I (96883) AUDIO:   MCLK: DISABLED
I (96887) AUDIO:   BCLK: GPIO14 (shared)
I (96892) AUDIO:   WS:   GPIO15 (shared)
I (96897) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (96903) AUDIO: âœ… RX channel configured (took 0 ms)
I (96908) AUDIO: [STEP 4/6] Enabling TX channel...
I (96914) AUDIO: âœ… TX channel enabled (took 0 ms)
I (96919) AUDIO: [STEP 5/6] Enabling RX channel...
I (96925) AUDIO: âœ… RX channel enabled (took 0 ms)
I (96930) AUDIO: [STEP 6/6] Hardware stabilization...
I (96936) AUDIO:   Phase 1: Initial settle (50ms)
I (96991) AUDIO:   Phase 2: DMA verification
I (96991) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (96992) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (97149) AUDIO: [DIAG] Post-init state:
I (97149) AUDIO:   Free heap: 3746776 bytes
I (97149) AUDIO:   Free internal RAM: 100139 bytes
I (97153) AUDIO:   Free DMA-capable: 79723 bytes
I (97158) AUDIO:   Free PSRAM: 3667124 bytes
I (97163) AUDIO:   Timestamp: 95609 ms
I (97168) AUDIO:   Total init time: 201 ms
I (97173) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97191) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (97197) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (97202) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (97211) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (97218) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97235) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97253) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (97260) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (97266) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (97273) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (97279) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97297) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (97304) STATE_MGR:   Free heap after: 3746776 bytes
I (97309) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97325) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (97331) STATE_MGR: â•‘ Total transition time: 890 ms
I (97337) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97353) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97369) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (97379) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97395) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (97403) TTS: No pending audio to flush
I (97450) TTS: TTS decoder session reset for next audio stream
I (97450) TTS: âœ… TTS decoder flushed and reset for next session
I (97452) STT: Starting STT pipeline...
I (97457) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (97466) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (97473) STT:   Current time: 95919 ms
I (97477) STT: âœ… STT pipeline started
I (97478) STT:   Free heap: 3738224 bytes
I (97482) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (97478) STT: Audio streaming session activated
I (97501) STT: Connection stabilization delay (2000ms)...
I (97687) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (97687) STT:   âœ“ Audio driver initialized
I (97688) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (97795) STT:   Total stabilization: 300ms
I (97795) STT:   Timestamp: 96240 ms
I (97795) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (97799) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37f4 (with safety padding)
I (97808) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97821) LED_CTRL: LED pattern -> 1
I (97824) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (97828) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97833) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (97852) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (97858) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97865) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97899) MEM_MGR: â•‘ Internal RAM:
I (97904) MEM_MGR: â•‘   Free:              78131 bytes ( 76 KB)
I (97910) MEM_MGR: â•‘   Largest Block:     51200 bytes ( 50 KB)
I (97917) MEM_MGR: â•‘   Fragmentation:     35%
I (97922) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97941) MEM_MGR: â•‘ DMA-capable RAM:
I (97945) MEM_MGR: â•‘   Free:              57715 bytes ( 56 KB)
I (97952) MEM_MGR: â•‘   Largest Block:     51200 bytes ( 50 KB)
I (97959) MEM_MGR: â•‘   Fragmentation:     12%
I (97964) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97982) MEM_MGR: â•‘ PSRAM:
I (97986) MEM_MGR: â•‘   Free:             3589576 bytes (3505 KB)
I (97993) MEM_MGR: â•‘   Largest Block:    3538944 bytes (3456 KB)
I (97999) MEM_MGR: â•‘   Fragmentation:      2%
I (98005) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98023) MEM_MGR: â•‘ Total Heap:
I (98027) MEM_MGR: â•‘   Free:             3647220 bytes (3561 KB)
I (98034) MEM_MGR: â•‘   Minimum Ever:     3642092 bytes (3556 KB)
I (98041) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98059) MEM_MGR: â•‘ Memory Delta from Baseline:
I (98065) MEM_MGR: â•‘   Internal RAM:     -147048 bytes (-143 KB)
I (98072) MEM_MGR: â•‘   DMA-capable:      -147048 bytes (-143 KB)
I (98078) MEM_MGR: â•‘   PSRAM:            -602440 bytes (-588 KB)
I (98085) MEM_MGR: â•‘   Total Heap:       -717528 bytes (-700 KB)
I (98092) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98111) STATE_MGR: âœ… Voice mode transition complete
I (98117) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (98132) STATE_MGR: STT pipeline reported start
I (99507) STT: Starting audio streaming to server...
I (99558) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (99559) WEBSOCKET: Server status: receiving
I (99563) WEBSOCKET: Server ACK: 2 chunks processed
I (99635) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (99636) WEBSOCKET: Server status: receiving
I (99640) WEBSOCKET: Server ACK: 4 chunks processed
I (99729) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (99730) WEBSOCKET: Server status: receiving
I (99735) WEBSOCKET: Server ACK: 6 chunks processed
I (99787) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (99788) WEBSOCKET: Server status: receiving
I (99793) WEBSOCKET: Server ACK: 8 chunks processed
I (99848) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (99849) WEBSOCKET: Server status: receiving
I (99853) WEBSOCKET: Server ACK: 10 chunks processed
I (99908) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (99909) WEBSOCKET: Server status: receiving
I (99914) WEBSOCKET: Server ACK: 12 chunks processed
I (99969) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (99970) WEBSOCKET: Server status: receiving
I (99975) WEBSOCKET: Server ACK: 14 chunks processed
I (100034) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (100035) WEBSOCKET: Server status: receiving
I (100040) WEBSOCKET: Server ACK: 16 chunks processed
I (100093) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (100094) WEBSOCKET: Server status: receiving
I (100099) WEBSOCKET: Server ACK: 18 chunks processed
I (100406) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (100407) WEBSOCKET: Server status: receiving
I (100412) WEBSOCKET: Server ACK: 20 chunks processed
I (100666) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (100667) WEBSOCKET: Server status: receiving
I (100671) WEBSOCKET: Server ACK: 22 chunks processed
I (100946) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (100947) WEBSOCKET: Server status: receiving
I (100951) WEBSOCKET: Server ACK: 24 chunks processed
I (101159) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (101160) WEBSOCKET: Server status: receiving
I (101165) WEBSOCKET: Server ACK: 26 chunks processed
I (101423) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (101424) WEBSOCKET: Server status: receiving
I (101429) WEBSOCKET: Server ACK: 28 chunks processed
I (101684) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (101685) WEBSOCKET: Server status: receiving
I (101690) WEBSOCKET: Server ACK: 30 chunks processed
I (101898) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (101899) WEBSOCKET: Server status: receiving
I (101904) WEBSOCKET: Server ACK: 32 chunks processed
I (102184) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 34, "bytes_received": 139264}
I (102185) WEBSOCKET: Server status: receiving
I (102190) WEBSOCKET: Server ACK: 34 chunks processed
I (102422) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 36, "bytes_received": 147456}
I (102423) WEBSOCKET: Server status: receiving
I (102428) WEBSOCKET: Server ACK: 36 chunks processed
I (102562) BUTTON: Single click confirmed
I (102562) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (102563) STATE_MGR: Single click - mode toggle requested
I (102569) STATE_MGR: User requested to end voice session (count: 8). Stopping STT and awaiting server response.
I (102580) STT: Stopping STT pipeline...
I (102584) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (102599) STT: Ring buffer drained and cleared successfully
I (102600) STT: Audio capture task stopped (captured 155648 bytes total)
I (102617) STT: Streaming task received stop signal
I (102617) STT: Sending EOS signal...
I (102617) WEBSOCKET: Sending EOS signal
I (102624) STT: Audio streaming session complete (streamed 151552 bytes in 37 chunks)
I (102656) STT: STT pipeline stopped
I (102656) LED_CTRL: LED pattern -> 4
I (102657) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (102661) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (102672) WEBSOCKET: Server status: processing
I (102673) STATE_MGR: STT pipeline reported stop
I (102677) WEBSOCKET: Server stage: transcription
I (102682) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (102688) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (102697) LED_CTRL: LED pattern -> 1
I (102704) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (103240) LED_CTRL: LED pattern -> 4
I (103240) STATE_MGR: Pipeline stage event: transcription
I (103240) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (103281) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what do you see in this image", "has_image": true}
I (103284) WEBSOCKET: Server status: processing
I (103289) WEBSOCKET: Server stage: llm
I (103294) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (103301) WEBSOCKET: Entering LLM stage - continuing processing indication
I (103308) STATE_MGR: Pipeline stage event: llm
I (104034) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I see a dark and blurry image of a person with short hair making a gesture in front of a wall with horizontal slats."}
I (104044) WEBSOCKET: Server status: processing
I (104048) WEBSOCKET: Server stage: tts
I (104053) WEBSOCKET: Pipeline stage changed: llm -> tts
I (104059) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (104066) LED_CTRL: LED pattern -> 3
I (104071) TTS: ğŸµ Starting TTS decoder...
I (104076) TTS: Initializing TTS decoder...
W (104081) TTS: TTS decoder already initialized
I (104129) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (104133) TTS: ğŸµ TTS playback task started on Core 1
I (104133) TTS: âœ… TTS decoder started successfully
I (104133) STATE_MGR: TTS playback start event received
I (104149) LED_CTRL: LED pattern -> 1
I (104138) TTS: âœ… TTS playback task registered with watchdog
I (104160) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (104163) STATE_MGR: Pipeline stage event: tts
I (104183) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 102628 ms, bytes: 4096)
I (104183) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (104191) TTS: Chunk #2 first 12 bytes: 52 49 46 46 74 8D 03 00 57 41 56 45
I (104198) TTS: New audio session detected - resetting chunk counter
I (104206) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (104214) STATE_MGR: TTS playback start event received
I (104232) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (104232) TTS: Chunk #2 first 12 bytes: 4E 0B DE 0D 62 0B B1 05 13 02 1D 08
I (104245) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (104247) TTS: Chunk #3 first 12 bytes: 2B 00 AC FE 6D 00 50 00 C7 FD 91 01
I (104262) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (104264) TTS: Chunk #4 first 12 bytes: 51 1B 60 1A AB 19 E1 18 56 16 83 13
I (104274) TTS: âœ… WAV header parsed successfully
I (104277) TTS: === WAV File Info ===
I (104280) TTS: Received audio chunk #5: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (104282) TTS: Sample Rate: 16000 Hz
I (104291) TTS: Chunk #5 first 12 bytes: 00 FF F6 FE EA FE F7 FE FF FE 23 FF
I (104295) TTS: Channels: 1
I (104306) TTS: Bits per Sample: 16
I (104310) TTS: Received audio chunk #6: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (104311) TTS: Audio Format: 1 (PCM)
I (104324) TTS: Declared Data Size: 232784 bytes
I (104327) TTS: Received audio chunk #7: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (104329) TTS: Block Align: 2
I (104342) TTS: Byte Rate: 32000
I (104346) TTS: Received audio chunk #8: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (104346) TTS: ====================
I (104360) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=32768)
I (104362) TTS: Received audio chunk #9: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (104368) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (104384) TTS: Received audio chunk #10: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (104402) TTS: Received audio chunk #11: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (104413) TTS: Received audio chunk #12: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (104423) TTS: Received audio chunk #13: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (104435) TTS: Received audio chunk #14: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (104445) TTS: Received audio chunk #15: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (104451) TTS: Received audio chunk #16: 1416 bytes (buffer: 53248/327680 used, 274431 free)
I (104458) TTS: Received audio chunk #17: 2680 bytes (buffer: 54664/327680 used, 273015 free)
I (104470) TTS: Received audio chunk #18: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (104481) TTS: Received audio chunk #19: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (104491) TTS: Received audio chunk #20: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (104503) TTS: Received audio chunk #21: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (104514) TTS: Received audio chunk #22: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (104523) TTS: Received audio chunk #23: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (104535) TTS: Received audio chunk #24: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (104545) TTS: Received audio chunk #25: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (104560) TTS: Received audio chunk #26: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (104577) TTS: Received audio chunk #27: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (104592) TTS: Received audio chunk #28: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (104644) TTS: Received audio chunk #29: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (104653) TTS: Received audio chunk #30: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (104662) TTS: Received audio chunk #31: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (104667) TTS: Received audio chunk #32: 656 bytes (buffer: 106496/327680 used, 221183 free)
I (104676) TTS: Received audio chunk #33: 3440 bytes (buffer: 107152/327680 used, 220527 free)
I (104688) TTS: Received audio chunk #34: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (104699) TTS: Received audio chunk #35: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (104708) TTS: Received audio chunk #36: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (104718) TTS: Received audio chunk #37: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (104742) TTS: Received audio chunk #38: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (104751) TTS: Received audio chunk #39: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (104766) TTS: Received audio chunk #40: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (104780) TTS: Received audio chunk #41: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (104797) TTS: Received audio chunk #42: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (104812) TTS: Received audio chunk #43: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (104828) TTS: Received audio chunk #44: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (104846) TTS: Received audio chunk #45: 4096 bytes (buffer: 151552/327680 used, 176127 free)
I (104859) TTS: Received audio chunk #46: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (104874) TTS: Received audio chunk #47: 4096 bytes (buffer: 159744/327680 used, 167935 free)
I (104892) TTS: Received audio chunk #48: 4096 bytes (buffer: 159744/327680 used, 167935 free)
I (104907) TTS: Received audio chunk #49: 4096 bytes (buffer: 163840/327680 used, 163839 free)
I (104923) TTS: Received audio chunk #50: 4096 bytes (buffer: 167936/327680 used, 159743 free)
I (104939) TTS: Received audio chunk #51: 4096 bytes (buffer: 172032/327680 used, 155647 free)
I (104954) TTS: Received audio chunk #52: 4096 bytes (buffer: 176128/327680 used, 151551 free)
I (104969) TTS: Received audio chunk #53: 4096 bytes (buffer: 180224/327680 used, 147455 free)
I (104984) TTS: Received audio chunk #54: 4096 bytes (buffer: 184320/327680 used, 143359 free)
I (105006) TTS: Received audio chunk #55: 4096 bytes (buffer: 188416/327680 used, 139263 free)
I (105053) TTS: Received audio chunk #56: 4096 bytes (buffer: 188416/327680 used, 139263 free)
I (105062) TTS: Received audio chunk #57: 4096 bytes (buffer: 192512/327680 used, 135167 free)
I (105069) TTS: Received audio chunk #58: 436 bytes (buffer: 196608/327680 used, 131071 free)
I (105075) TTS: Received audio chunk #59: 3660 bytes (buffer: 197044/327680 used, 130635 free)
I (105087) TTS: Received audio chunk #60: 3452 bytes (buffer: 200704/327680 used, 126975 free)
I (105136) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (105263) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (105281) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (105281) TTS: TTS end-of-stream signaled (bytes_received=232828, header_parsed=1)
I (105287) TTS: ğŸµ Playback task will drain 195964 bytes of buffered audio
I (105294) TTS: Waiting for playback completion: 195964 bytes buffered, calculated timeout: 8123 ms
I (105391) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (105518) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (105646) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (105773) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (105901) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (106028) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (106156) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (106283) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (106411) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (106538) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (106666) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (106793) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (106921) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (107048) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (107176) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (107303) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (107431) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (107558) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (107686) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (107813) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (107941) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (108068) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (108196) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (108323) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (108451) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (108578) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (108706) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (108833) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (108961) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (109088) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (109216) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (109343) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (109471) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (109598) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (109726) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (109853) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (109981) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (110108) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (110236) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (110363) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (110491) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (110618) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (110746) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (110873) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (111001) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (111128) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (111256) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (111383) TTS: âœ… All audio data received (232828 bytes, expected 232784 + 44 header)
I (111610) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (111610) TTS: ğŸµ TTS playback task exiting (played 232784 bytes, result: ESP_OK)
I (111615) STATE_MGR: TTS playback finished successfully
I (111615) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (111615) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (111615) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (111615) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (111658) TTS: TTS decoder session reset for next audio stream
I (111663) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (111670) TTS: Received audio chunk #61: 0 bytes (buffer: 0/327680 used, 327679 free)
I (111688) MEM_MGR: â•‘ Internal RAM:
I (111701) MEM_MGR: â•‘   Free:              91227 bytes ( 89 KB)
I (111697) TTS: New audio session detected - resetting chunk counter
I (111708) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (111715) WEBSOCKET: ğŸµ Audio session complete: 232828 bytes in 60 messages
I (111721) MEM_MGR: â•‘   Fragmentation:     29%
I (111733) WEBSOCKET: Received text message: {"status": "complete"}
I (111735) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (111742) WEBSOCKET: Server status: complete
I (111760) MEM_MGR: â•‘ DMA-capable RAM:
I (111765) WEBSOCKET: Pipeline stage changed: tts -> complete
I (111770) MEM_MGR: â•‘   Free:              70811 bytes ( 69 KB)
I (111776) WEBSOCKET: Exiting TTS stage (transition to complete)
I (111783) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (111796) MEM_MGR: â•‘   Fragmentation:      8%
I (111802) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (111820) MEM_MGR: â•‘ PSRAM:
I (111824) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (111831) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (111838) MEM_MGR: â•‘   Fragmentation:      2%
I (111843) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (111862) MEM_MGR: â•‘ Total Heap:
I (111866) MEM_MGR: â•‘   Free:             3725704 bytes (3638 KB)
I (111873) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (111880) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (111890) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (111898) MEM_MGR: â•‘ Memory Delta from Baseline:
I (111912) MEM_MGR: â•‘   Internal RAM:     -133952 bytes (-130 KB)
I (111919) MEM_MGR: â•‘   DMA-capable:      -133952 bytes (-130 KB)
I (111925) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (111932) MEM_MGR: â•‘   Total Heap:       -639044 bytes (-624 KB)
I (111939) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (111958) STATE_MGR: Stopping voice mode components...
I (111964) STT: Stopping STT pipeline...
W (111968) STT: STT pipeline already stopped
I (111973) STATE_MGR: Voice pipeline reported COMPLETE
I (111979) STATE_MGR: TTS playback already drained - no pending audio
I (111986) STATE_MGR: Flushing and resetting TTS decoder for next session
I (111994) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (112002) TTS: Flushing pending audio before reset (~0 bytes)
I (111663) TTS: âœ… TTS playback finished event dispatched to state manager
I (112016) TTS:   âœ“ DMA buffer freed from PSRAM
I (112021) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (112029) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (112058) TTS: TTS playback task handle is NULL - task already exited (after 1 checks)
I (112102) TTS: TTS decoder session reset for next audio stream
I (112102) TTS: âœ… TTS decoder flushed and reset for next session
I (112304) TTS: â¹ï¸ Stopping TTS decoder...
W (112304) TTS: TTS decoder already stopped.
I (112449) STATE_MGR: Acquiring I2S mutex...
I (112449) STATE_MGR: Deinitializing audio drivers...
I (112449) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112467) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (112475) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112493) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (112500) AUDIO: âœ… RX channel disabled (took 0 ms)
I (112505) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (112512) AUDIO: âœ… TX channel disabled (took 0 ms)
I (112518) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (112574) AUDIO: [STEP 4/5] Deleting RX channel...
I (112575) AUDIO: âœ… RX channel deleted (took 0 ms)
I (112575) AUDIO: [STEP 5/5] Deleting TX channel...
I (112580) AUDIO: âœ… TX channel deleted (took 0 ms)
I (112586) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (112643) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112650) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (112657) AUDIO: â•‘ Camera Can Now Initialize
I (112662) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112730) STATE_MGR: Allowing memory stabilization (100ms)...
I (112830) STATE_MGR: Camera will be initialized on-demand during capture
I (112830) STATE_MGR: I2S mutex released
I (112831) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112850) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (112857) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112875) MEM_MGR: â•‘ Internal RAM:
I (112880) MEM_MGR: â•‘   Free:              91227 bytes ( 89 KB)
I (112886) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (112893) MEM_MGR: â•‘   Fragmentation:     29%
I (112898) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112917) MEM_MGR: â•‘ DMA-capable RAM:
I (112921) MEM_MGR: â•‘   Free:              70811 bytes ( 69 KB)
I (112928) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (112935) MEM_MGR: â•‘   Fragmentation:      8%
I (112940) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112959) MEM_MGR: â•‘ PSRAM:
I (112962) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (112969) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (112976) MEM_MGR: â•‘   Fragmentation:      2%
I (112982) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113000) MEM_MGR: â•‘ Total Heap:
I (113004) MEM_MGR: â•‘   Free:             3725704 bytes (3638 KB)
I (113011) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (113018) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113037) MEM_MGR: â•‘ Memory Delta from Baseline:
I (113042) MEM_MGR: â•‘   Internal RAM:     -133952 bytes (-130 KB)
I (113049) MEM_MGR: â•‘   DMA-capable:      -133952 bytes (-130 KB)
I (113056) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (113063) MEM_MGR: â•‘   Total Heap:       -639044 bytes (-624 KB)
I (113070) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113089) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (113098) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113116) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (113123) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113141) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113159) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (113167) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113185) AUDIO: [DIAG] Pre-init state:
I (113189) AUDIO:   Free heap: 3772760 bytes
I (113194) AUDIO:   Free internal RAM: 126123 bytes
I (113200) AUDIO:   Free DMA-capable: 105707 bytes
I (113205) AUDIO:   Free PSRAM: 3667124 bytes
I (113210) AUDIO:   Timestamp: 111656 ms
I (113215) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (113222) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (113230) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (113238) AUDIO:   DMA frame num (per desc): 1020
I (113244) AUDIO:   DMA total samples (effective): 4080
I (113250) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (113257) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (113263) AUDIO: âœ… I2S channels created (took 0 ms)
I (113269) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca850
I (113276) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (113282) AUDIO:   Sample rate: 16000 Hz
I (113287) AUDIO:   MCLK: DISABLED
I (113291) AUDIO:   BCLK: GPIO14 (shared)
I (113296) AUDIO:   WS:   GPIO15 (shared)
I (113300) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (113307) AUDIO: âœ… TX channel configured (took 1 ms)
I (113312) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (113319) AUDIO:   Sample rate: 16000 Hz
I (113324) AUDIO:   MCLK: DISABLED
I (113328) AUDIO:   BCLK: GPIO14 (shared)
I (113332) AUDIO:   WS:   GPIO15 (shared)
I (113337) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (113343) AUDIO: âœ… RX channel configured (took 0 ms)
I (113349) AUDIO: [STEP 4/6] Enabling TX channel...
I (113354) AUDIO: âœ… TX channel enabled (took 0 ms)
I (113360) AUDIO: [STEP 5/6] Enabling RX channel...
I (113365) AUDIO: âœ… RX channel enabled (took 0 ms)
I (113371) AUDIO: [STEP 6/6] Hardware stabilization...
I (113377) AUDIO:   Phase 1: Initial settle (50ms)
I (113432) AUDIO:   Phase 2: DMA verification
I (113432) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (113433) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (113590) AUDIO: [DIAG] Post-init state:
I (113590) AUDIO:   Free heap: 3746776 bytes
I (113590) AUDIO:   Free internal RAM: 100139 bytes
I (113594) AUDIO:   Free DMA-capable: 79723 bytes
I (113600) AUDIO:   Free PSRAM: 3667124 bytes
I (113605) AUDIO:   Timestamp: 112050 ms
I (113609) AUDIO:   Total init time: 201 ms
I (113614) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113632) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (113638) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (113644) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (113653) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (113660) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113678) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113696) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (113702) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (113709) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (113716) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (113722) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114023) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114030) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (114038) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114056) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (114063) AUDIO: âœ… RX channel disabled (took 0 ms)
I (114069) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (114075) AUDIO: âœ… TX channel disabled (took 0 ms)
I (114081) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (114138) AUDIO: [STEP 4/5] Deleting RX channel...
I (114139) AUDIO: âœ… RX channel deleted (took 0 ms)
I (114139) AUDIO: [STEP 5/5] Deleting TX channel...
I (114144) AUDIO: âœ… TX channel deleted (took 0 ms)
I (114150) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (114207) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114214) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (114221) AUDIO: â•‘ Camera Can Now Initialize
I (114226) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114244) LED_CTRL: LED pattern -> 3
I (114248) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (114266) STATE_MGR: Pipeline stage event: complete
I (122618) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (122618) BUTTON: Single click confirmed
I (122618) STATE_MGR: Single click - mode toggle requested
I (122625) STATE_MGR: Switching: Camera â†’ Voice (count: 9)
I (122681) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (122681) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (122694) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (122701) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (122720) MEM_MGR: â•‘ Internal RAM:
I (122724) MEM_MGR: â•‘   Free:             126123 bytes (123 KB)
I (122731) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (122738) MEM_MGR: â•‘   Fragmentation:     26%
I (122743) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (122762) MEM_MGR: â•‘ DMA-capable RAM:
I (122766) MEM_MGR: â•‘   Free:             105707 bytes (103 KB)
I (122773) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (122780) MEM_MGR: â•‘   Fragmentation:     11%
I (122785) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (122804) MEM_MGR: â•‘ PSRAM:
I (122807) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (122814) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (122821) MEM_MGR: â•‘   Fragmentation:      2%
I (122826) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (122845) MEM_MGR: â•‘ Total Heap:
I (122849) MEM_MGR: â•‘   Free:             3772760 bytes (3684 KB)
I (122856) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (122863) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (122881) MEM_MGR: â•‘ Memory Delta from Baseline:
I (122887) MEM_MGR: â•‘   Internal RAM:      -99056 bytes ( -96 KB)
I (122894) MEM_MGR: â•‘   DMA-capable:       -99056 bytes ( -96 KB)
I (122901) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (122908) MEM_MGR: â•‘   Total Heap:       -591988 bytes (-578 KB)
I (122915) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (122933) STATE_MGR: Stopping camera...
I (122938) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (122954) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (122961) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (122977) STATE_MGR:   Timeout: 5000 ms
I (122982) STATE_MGR:   Timestamp: 121428 ms
I (122987) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (122993) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (123009) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (123016) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (123032) STATE_MGR:   Free heap before: 3772764 bytes
I (123038) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (123044) CAMERA: Deinitializing camera...
I (123049) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (123055) STATE_MGR:   Free heap after: 3772764 bytes
I (123061) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (123067) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (123083) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (123090) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (123106) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (123214) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (123314) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (123364) STATE_MGR:   âœ“ Total stabilization: 250ms
I (123364) STATE_MGR:   Timestamp: 121810 ms
I (123364) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (123380) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (123387) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (123403) STATE_MGR:   Free heap before: 3772784 bytes
I (123409) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (123427) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (123434) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (123452) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (123471) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (123478) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (123496) AUDIO: [DIAG] Pre-init state:
I (123501) AUDIO:   Free heap: 3772784 bytes
I (123506) AUDIO:   Free internal RAM: 126147 bytes
I (123511) AUDIO:   Free DMA-capable: 105731 bytes
I (123517) AUDIO:   Free PSRAM: 3667124 bytes
I (123522) AUDIO:   Timestamp: 121967 ms
I (123526) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (123533) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (123541) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (123549) AUDIO:   DMA frame num (per desc): 1020
I (123555) AUDIO:   DMA total samples (effective): 4080
I (123561) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (123568) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (123574) AUDIO: âœ… I2S channels created (took 0 ms)
I (123580) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca850
I (123587) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (123593) AUDIO:   Sample rate: 16000 Hz
I (123598) AUDIO:   MCLK: DISABLED
I (123602) AUDIO:   BCLK: GPIO14 (shared)
I (123607) AUDIO:   WS:   GPIO15 (shared)
I (123612) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (123618) AUDIO: âœ… TX channel configured (took 0 ms)
I (123623) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (123630) AUDIO:   Sample rate: 16000 Hz
I (123635) AUDIO:   MCLK: DISABLED
I (123639) AUDIO:   BCLK: GPIO14 (shared)
I (123644) AUDIO:   WS:   GPIO15 (shared)
I (123648) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (123654) AUDIO: âœ… RX channel configured (took 0 ms)
I (123660) AUDIO: [STEP 4/6] Enabling TX channel...
I (123665) AUDIO: âœ… TX channel enabled (took 0 ms)
I (123671) AUDIO: [STEP 5/6] Enabling RX channel...
I (123677) AUDIO: âœ… RX channel enabled (took 0 ms)
I (123682) AUDIO: [STEP 6/6] Hardware stabilization...
I (123688) AUDIO:   Phase 1: Initial settle (50ms)
I (123743) AUDIO:   Phase 2: DMA verification
I (123743) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (123744) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (123901) AUDIO: [DIAG] Post-init state:
I (123901) AUDIO:   Free heap: 3746804 bytes
I (123901) AUDIO:   Free internal RAM: 100167 bytes
I (123905) AUDIO:   Free DMA-capable: 79751 bytes
I (123911) AUDIO:   Free PSRAM: 3667124 bytes
I (123916) AUDIO:   Timestamp: 122361 ms
I (123920) AUDIO:   Total init time: 200 ms
I (123925) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (123943) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (123949) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (123955) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (123964) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (123971) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (123989) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124007) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (124013) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (124020) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (124027) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (124033) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124051) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (124057) STATE_MGR:   Free heap after: 3746804 bytes
I (124063) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124079) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (124085) STATE_MGR: â•‘ Total transition time: 895 ms
I (124091) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124107) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124124) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (124134) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124150) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (124158) TTS: No pending audio to flush
I (124207) TTS: TTS decoder session reset for next audio stream
I (124207) TTS: âœ… TTS decoder flushed and reset for next session
I (124209) STT: Starting STT pipeline...
I (124214) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (124223) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (124230) STT:   Current time: 122676 ms
I (124233) STT: âœ… STT pipeline started
I (124235) STT:   Free heap: 3738252 bytes
I (124239) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (124235) STT: Audio streaming session activated
I (124258) STT: Connection stabilization delay (2000ms)...
I (124444) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (124444) STT:   âœ“ Audio driver initialized
I (124445) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (124552) STT:   Total stabilization: 300ms
I (124552) STT:   Timestamp: 122997 ms
I (124552) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (124557) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37f4 (with safety padding)
I (124565) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124578) LED_CTRL: LED pattern -> 1
I (124581) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (124586) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124591) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (124609) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (124616) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124623) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124657) MEM_MGR: â•‘ Internal RAM:
I (124662) MEM_MGR: â•‘   Free:             126123 bytes (123 KB)
I (124669) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (124675) MEM_MGR: â•‘   Fragmentation:     26%
I (124681) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124699) MEM_MGR: â•‘ DMA-capable RAM:
I (124704) MEM_MGR: â•‘   Free:             105707 bytes (103 KB)
I (124710) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (124717) MEM_MGR: â•‘   Fragmentation:     11%
I (124723) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124741) MEM_MGR: â•‘ PSRAM:
I (124745) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (124752) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (124759) MEM_MGR: â•‘   Fragmentation:      2%
I (124764) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124782) MEM_MGR: â•‘ Total Heap:
I (124787) MEM_MGR: â•‘   Free:             3772760 bytes (3684 KB)
I (124794) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (124801) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124819) MEM_MGR: â•‘ Memory Delta from Baseline:
I (124824) STT: [CAPTURE] âœ… Alive... 500 reads completed (Free Heap: 3737096 bytes)
I (124825) MEM_MGR: â•‘   Internal RAM:      -99056 bytes ( -96 KB)
I (124840) MEM_MGR: â•‘   DMA-capable:       -99056 bytes ( -96 KB)
I (124847) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (124854) MEM_MGR: â•‘   Total Heap:       -591988 bytes (-578 KB)
I (124861) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124879) STATE_MGR: âœ… Voice mode transition complete
I (124885) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (124901) STATE_MGR: STT pipeline reported start
I (126265) STT: Starting audio streaming to server...
W (126362) STT: Waiting for server ACK (sent: 2, acked: 0, unack: 2)
I (126393) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (126394) WEBSOCKET: Server status: receiving
I (126398) STT: Flow control: ACK received, resuming (sent=2, acked=2)
I (126406) WEBSOCKET: Server ACK: 2 chunks processed
I (126412) STT: ACK received, resuming (unack now: 0)
W (126476) STT: Waiting for server ACK (sent: 4, acked: 2, unack: 2)
I (126538) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (126539) WEBSOCKET: Server status: receiving
I (126544) STT: Flow control: ACK received, resuming (sent=4, acked=4)
I (126551) WEBSOCKET: Server ACK: 4 chunks processed
I (126558) STT: ACK received, resuming (unack now: 0)
W (126619) STT: Waiting for server ACK (sent: 6, acked: 4, unack: 2)
I (126655) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (126656) WEBSOCKET: Server status: receiving
I (126661) STT: Flow control: ACK received, resuming (sent=6, acked=6)
I (126668) WEBSOCKET: Server ACK: 6 chunks processed
I (126675) STT: ACK received, resuming (unack now: 0)
I (126759) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (126760) WEBSOCKET: Server status: receiving
I (126765) WEBSOCKET: Server ACK: 8 chunks processed
I (126819) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (126820) WEBSOCKET: Server status: receiving
I (126824) WEBSOCKET: Server ACK: 10 chunks processed
I (126879) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (126880) WEBSOCKET: Server status: receiving
I (126885) WEBSOCKET: Server ACK: 12 chunks processed
W (126951) STT: Waiting for server ACK (sent: 14, acked: 12, unack: 2)
I (126987) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (126988) WEBSOCKET: Server status: receiving
I (126993) STT: Flow control: ACK received, resuming (sent=14, acked=14)
I (127000) WEBSOCKET: Server ACK: 14 chunks processed
I (127007) STT: ACK received, resuming (unack now: 0)
W (127069) STT: Waiting for server ACK (sent: 16, acked: 14, unack: 2)
I (127112) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (127113) WEBSOCKET: Server status: receiving
I (127117) STT: Flow control: ACK received, resuming (sent=16, acked=16)
I (127125) WEBSOCKET: Server ACK: 16 chunks processed
I (127131) STT: ACK received, resuming (unack now: 0)
I (127184) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (127184) WEBSOCKET: Server status: receiving
I (127189) WEBSOCKET: Server ACK: 18 chunks processed
I (127241) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (127242) WEBSOCKET: Server status: receiving
I (127247) WEBSOCKET: Server ACK: 20 chunks processed
I (127402) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (127403) WEBSOCKET: Server status: receiving
I (127407) WEBSOCKET: Server ACK: 22 chunks processed
I (127665) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (127666) WEBSOCKET: Server status: receiving
I (127671) WEBSOCKET: Server ACK: 24 chunks processed
I (127879) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (127881) WEBSOCKET: Server status: receiving
I (127884) WEBSOCKET: Server ACK: 26 chunks processed
I (128192) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (128193) WEBSOCKET: Server status: receiving
I (128198) WEBSOCKET: Server ACK: 28 chunks processed
I (128410) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (128411) WEBSOCKET: Server status: receiving
I (128416) WEBSOCKET: Server ACK: 30 chunks processed
I (128623) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (128624) WEBSOCKET: Server status: receiving
I (128629) WEBSOCKET: Server ACK: 32 chunks processed
I (128888) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 34, "bytes_received": 139264}
I (128889) WEBSOCKET: Server status: receiving
I (128893) WEBSOCKET: Server ACK: 34 chunks processed
I (129158) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 36, "bytes_received": 147456}
I (129159) WEBSOCKET: Server status: receiving
I (129164) WEBSOCKET: Server ACK: 36 chunks processed
I (129377) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 38, "bytes_received": 155648}
I (129378) WEBSOCKET: Server status: receiving
I (129383) WEBSOCKET: Server ACK: 38 chunks processed
I (129645) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 40, "bytes_received": 163840}
I (129646) WEBSOCKET: Server status: receiving
I (129651) WEBSOCKET: Server ACK: 40 chunks processed
I (129953) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 42, "bytes_received": 172032}
I (129954) WEBSOCKET: Server status: receiving
I (129959) WEBSOCKET: Server ACK: 42 chunks processed
I (130223) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 44, "bytes_received": 180224}
I (130224) WEBSOCKET: Server status: receiving
I (130229) WEBSOCKET: Server ACK: 44 chunks processed
I (130451) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 46, "bytes_received": 188416}
I (130452) WEBSOCKET: Server status: receiving
I (130457) WEBSOCKET: Server ACK: 46 chunks processed
I (130649) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 48, "bytes_received": 196608}
I (130651) WEBSOCKET: Server status: receiving
I (130655) WEBSOCKET: Server ACK: 48 chunks processed
I (130917) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 50, "bytes_received": 204800}
I (130920) WEBSOCKET: Server status: receiving
I (130925) WEBSOCKET: Server ACK: 50 chunks processed
I (131196) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 52, "bytes_received": 212992}
I (131197) WEBSOCKET: Server status: receiving
I (131202) WEBSOCKET: Server ACK: 52 chunks processed
I (131388) BUTTON: Single click confirmed
I (131388) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (131389) STATE_MGR: Single click - mode toggle requested
I (131395) STATE_MGR: User requested to end voice session (count: 10). Stopping STT and awaiting server response.
I (131406) STT: Stopping STT pipeline...
I (131410) STT: Draining ring buffer (5120 bytes pending) before shutdown...
I (131425) STT: Ring buffer drained and cleared successfully
I (131441) STT: Capture stopped and ring buffer drained; ending streaming loop
I (131442) STT: Sending EOS signal...
I (131443) WEBSOCKET: Sending EOS signal
I (131453) STT: Audio streaming session complete (streamed 217088 bytes in 53 chunks)
I (131456) STT: Audio capture task stopped (captured 223232 bytes total)
I (131472) STT: STT pipeline stopped
I (131472) LED_CTRL: LED pattern -> 4
I (131472) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (131490) STATE_MGR: STT pipeline reported stop
I (131490) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (131495) LED_CTRL: LED pattern -> 1
I (131515) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (131516) WEBSOCKET: Server status: processing
I (131519) WEBSOCKET: Server stage: transcription
I (131525) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (131532) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (132032) LED_CTRL: LED pattern -> 4
I (132032) STATE_MGR: Pipeline stage event: transcription
I (132033) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (132201) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "can you remember that", "has_image": false}
I (132204) WEBSOCKET: Server status: processing
I (132209) WEBSOCKET: Server stage: llm
I (132213) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (132220) WEBSOCKET: Entering LLM stage - continuing processing indication
I (132228) STATE_MGR: Pipeline stage event: llm
I (132576) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I can recall that the image showed a person with short hair making a gesture in front of a slatted wall."}
I (132584) WEBSOCKET: Server status: processing
I (132589) WEBSOCKET: Server stage: tts
I (132594) WEBSOCKET: Pipeline stage changed: llm -> tts
I (132600) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (132607) LED_CTRL: LED pattern -> 3
I (132611) TTS: ğŸµ Starting TTS decoder...
I (132616) TTS: Initializing TTS decoder...
W (132621) TTS: TTS decoder already initialized
I (132668) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (132669) TTS: ğŸµ TTS playback task started on Core 1
I (132669) STATE_MGR: TTS playback start event received
I (132669) TTS: âœ… TTS decoder started successfully
I (132679) LED_CTRL: LED pattern -> 1
I (132679) TTS: âœ… TTS playback task registered with watchdog
I (132696) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (132699) STATE_MGR: Pipeline stage event: tts
I (132731) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 131177 ms, bytes: 4096)
I (132732) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (132738) TTS: Chunk #2 first 12 bytes: 52 49 46 46 32 06 03 00 57 41 56 45
I (132746) TTS: New audio session detected - resetting chunk counter
I (132754) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (132761) STATE_MGR: TTS playback start event received
I (132767) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (132776) TTS: Chunk #2 first 12 bytes: 21 13 9A 14 9A 0E 7A 05 34 FF B0 04
I (132791) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (132793) TTS: Chunk #3 first 12 bytes: DB 03 53 0A 96 04 49 FE D3 FB B8 FA
I (132807) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (132810) TTS: Chunk #4 first 12 bytes: 62 F9 02 FD 62 00 A3 03 9F 06 BB 09
I (132811) TTS: âœ… WAV header parsed successfully
I (132823) TTS: === WAV File Info ===
I (132824) TTS: Received audio chunk #5: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (132827) TTS: Sample Rate: 16000 Hz
I (132836) TTS: Chunk #5 first 12 bytes: 2D 00 2B 00 27 00 29 00 22 00 1A 00
I (132841) TTS: Channels: 1
I (132852) TTS: Bits per Sample: 16
I (132855) TTS: Received audio chunk #6: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (132856) TTS: Audio Format: 1 (PCM)
I (132869) TTS: Declared Data Size: 198158 bytes
I (132871) TTS: Received audio chunk #7: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (132875) TTS: Block Align: 2
I (132888) TTS: Byte Rate: 32000
I (132888) TTS: Received audio chunk #8: 1096 bytes (buffer: 24576/327680 used, 303103 free)
I (132891) TTS: ====================
I (132905) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=29768)
I (132910) TTS: Received audio chunk #9: 3000 bytes (buffer: 25672/327680 used, 302007 free)
I (132913) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (132930) TTS: Received audio chunk #10: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (132948) TTS: Received audio chunk #11: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (132956) TTS: Received audio chunk #12: 316 bytes (buffer: 32768/327680 used, 294911 free)
I (132962) TTS: Received audio chunk #13: 3780 bytes (buffer: 33084/327680 used, 294595 free)
I (132975) TTS: Received audio chunk #14: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (132985) TTS: Received audio chunk #15: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (132992) TTS: Received audio chunk #16: 976 bytes (buffer: 45056/327680 used, 282623 free)
I (132999) TTS: Received audio chunk #17: 3120 bytes (buffer: 46032/327680 used, 281647 free)
I (133012) TTS: Received audio chunk #18: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (133022) TTS: Received audio chunk #19: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (133031) TTS: Received audio chunk #20: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (133044) TTS: Received audio chunk #21: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (133051) TTS: Received audio chunk #22: 636 bytes (buffer: 61440/327680 used, 266239 free)
I (133056) TTS: Received audio chunk #23: 3460 bytes (buffer: 62076/327680 used, 265603 free)
I (133068) TTS: Received audio chunk #24: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (133079) TTS: Received audio chunk #25: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (133088) TTS: Received audio chunk #26: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (133098) TTS: Received audio chunk #27: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (133109) TTS: Received audio chunk #28: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (133118) TTS: Received audio chunk #29: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (133127) TTS: Received audio chunk #30: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (133136) TTS: Received audio chunk #31: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (133146) TTS: Received audio chunk #32: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (133162) TTS: Received audio chunk #33: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (133180) TTS: Received audio chunk #34: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (133193) TTS: Received audio chunk #35: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (133210) TTS: Received audio chunk #36: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (133225) TTS: Received audio chunk #37: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (133241) TTS: Received audio chunk #38: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (133256) TTS: Received audio chunk #39: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (133272) TTS: Received audio chunk #40: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (133316) TTS: Received audio chunk #41: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (133325) TTS: Received audio chunk #42: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (133335) TTS: Received audio chunk #43: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (133344) TTS: Received audio chunk #44: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (133353) TTS: Received audio chunk #45: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (133366) TTS: Received audio chunk #46: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (133380) TTS: Received audio chunk #47: 4096 bytes (buffer: 151552/327680 used, 176127 free)
I (133395) TTS: Received audio chunk #48: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (133411) TTS: Received audio chunk #49: 4096 bytes (buffer: 159744/327680 used, 167935 free)
I (133429) TTS: Received audio chunk #50: 4096 bytes (buffer: 159744/327680 used, 167935 free)
I (133441) TTS: Received audio chunk #51: 4096 bytes (buffer: 163840/327680 used, 163839 free)
I (133457) TTS: Received audio chunk #52: 4096 bytes (buffer: 167936/327680 used, 159743 free)
I (133474) TTS: Received audio chunk #53: 1594 bytes (buffer: 172032/327680 used, 155647 free)
I (133545) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (133672) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (133718) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (133718) TTS: TTS end-of-stream signaled (bytes_received=198202, header_parsed=1)
I (133724) TTS: ğŸµ Playback task will drain 165434 bytes of buffered audio
I (133731) TTS: Waiting for playback completion: 165434 bytes buffered, calculated timeout: 7169 ms
I (133800) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (133928) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (134055) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (134182) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (134310) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (134438) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (134565) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (134692) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (134820) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (134948) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (135075) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (135202) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (135330) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (135458) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (135585) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (135712) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (135840) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (135968) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (136095) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (136222) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (136350) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (136478) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (136605) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (136732) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (136860) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (136988) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (137115) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (137242) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (137370) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (137498) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (137625) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (137752) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (137880) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (138008) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (138135) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (138262) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (138390) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (138518) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (138645) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (138772) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (138900) TTS: âœ… All audio data received (198202 bytes, expected 198158 + 44 header)
I (139063) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (139063) TTS: ğŸµ TTS playback task exiting (played 198158 bytes, result: ESP_OK)
I (139069) STATE_MGR: TTS playback finished successfully
I (139071) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (139071) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (139071) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (139071) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (139113) TTS: TTS decoder session reset for next audio stream
I (139116) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (139123) TTS: Received audio chunk #54: 0 bytes (buffer: 0/327680 used, 327679 free)
I (139141) MEM_MGR: â•‘ Internal RAM:
I (139150) TTS: New audio session detected - resetting chunk counter
I (139154) MEM_MGR: â•‘   Free:              91255 bytes ( 89 KB)
I (139161) WEBSOCKET: ğŸµ Audio session complete: 198202 bytes in 53 messages
I (139168) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (139179) WEBSOCKET: Received text message: {"status": "complete"}
I (139182) MEM_MGR: â•‘   Fragmentation:     29%
I (139190) WEBSOCKET: Server status: complete
I (139195) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (139200) WEBSOCKET: Pipeline stage changed: tts -> complete
I (139218) MEM_MGR: â•‘ DMA-capable RAM:
I (139225) WEBSOCKET: Exiting TTS stage (transition to complete)
I (139229) MEM_MGR: â•‘   Free:              70839 bytes ( 69 KB)
I (139243) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (139249) MEM_MGR: â•‘   Fragmentation:      8%
I (139255) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (139273) MEM_MGR: â•‘ PSRAM:
I (139277) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (139284) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (139291) MEM_MGR: â•‘   Fragmentation:      2%
I (139296) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (139315) MEM_MGR: â•‘ Total Heap:
I (139319) MEM_MGR: â•‘   Free:             3725732 bytes (3638 KB)
I (139326) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (139333) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (139336) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (139351) MEM_MGR: â•‘ Memory Delta from Baseline:
I (139365) MEM_MGR: â•‘   Internal RAM:     -133924 bytes (-130 KB)
I (139372) MEM_MGR: â•‘   DMA-capable:      -133924 bytes (-130 KB)
I (139378) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (139385) MEM_MGR: â•‘   Total Heap:       -639016 bytes (-624 KB)
I (139392) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (139411) STATE_MGR: Stopping voice mode components...
I (139417) STT: Stopping STT pipeline...
W (139421) STT: STT pipeline already stopped
I (139426) STATE_MGR: Voice pipeline reported COMPLETE
I (139432) STATE_MGR: TTS playback already drained - no pending audio
I (139439) STATE_MGR: Flushing and resetting TTS decoder for next session
I (139447) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (139455) TTS: Flushing pending audio before reset (~0 bytes)
I (139116) TTS: âœ… TTS playback finished event dispatched to state manager
I (139469) TTS:   âœ“ DMA buffer freed from PSRAM
I (139474) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (139482) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (139511) TTS: TTS playback task handle is NULL - task already exited (after 1 checks)
I (139556) TTS: TTS decoder session reset for next audio stream
I (139556) TTS: âœ… TTS decoder flushed and reset for next session
I (139758) TTS: â¹ï¸ Stopping TTS decoder...
W (139758) TTS: TTS decoder already stopped.
I (139902) STATE_MGR: Acquiring I2S mutex...
I (139902) STATE_MGR: Deinitializing audio drivers...
I (139902) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (139920) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (139928) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (139946) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (139953) AUDIO: âœ… RX channel disabled (took 0 ms)
I (139958) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (139965) AUDIO: âœ… TX channel disabled (took 0 ms)
I (139971) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (140027) AUDIO: [STEP 4/5] Deleting RX channel...
I (140028) AUDIO: âœ… RX channel deleted (took 0 ms)
I (140028) AUDIO: [STEP 5/5] Deleting TX channel...
I (140033) AUDIO: âœ… TX channel deleted (took 0 ms)
I (140039) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (140096) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (140103) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (140110) AUDIO: â•‘ Camera Can Now Initialize
I (140115) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (140183) STATE_MGR: Allowing memory stabilization (100ms)...
I (140283) STATE_MGR: Camera will be initialized on-demand during capture
I (140283) STATE_MGR: I2S mutex released
I (140284) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (140303) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (140310) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (140328) MEM_MGR: â•‘ Internal RAM:
I (140333) MEM_MGR: â•‘   Free:              91255 bytes ( 89 KB)
I (140339) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (140346) MEM_MGR: â•‘   Fragmentation:     29%
I (140351) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (140370) MEM_MGR: â•‘ DMA-capable RAM:
I (140374) MEM_MGR: â•‘   Free:              70839 bytes ( 69 KB)
I (140381) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (140388) MEM_MGR: â•‘   Fragmentation:      8%
I (140393) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (140412) MEM_MGR: â•‘ PSRAM:
I (140415) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (140422) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (140429) MEM_MGR: â•‘   Fragmentation:      2%
I (140435) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (140453) MEM_MGR: â•‘ Total Heap:
I (140457) MEM_MGR: â•‘   Free:             3725732 bytes (3638 KB)
I (140464) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (140471) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (140490) MEM_MGR: â•‘ Memory Delta from Baseline:
I (140495) MEM_MGR: â•‘   Internal RAM:     -133924 bytes (-130 KB)
I (140502) MEM_MGR: â•‘   DMA-capable:      -133924 bytes (-130 KB)
I (140509) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (140516) MEM_MGR: â•‘   Total Heap:       -639016 bytes (-624 KB)
I (140523) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (140542) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (140551) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (140569) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (140576) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (140594) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (140612) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (140620) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (140638) AUDIO: [DIAG] Pre-init state:
I (140642) AUDIO:   Free heap: 3772784 bytes
I (140647) AUDIO:   Free internal RAM: 126147 bytes
I (140653) AUDIO:   Free DMA-capable: 105731 bytes
I (140658) AUDIO:   Free PSRAM: 3667124 bytes
I (140663) AUDIO:   Timestamp: 139109 ms
I (140668) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (140675) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (140683) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (140691) AUDIO:   DMA frame num (per desc): 1020
I (140697) AUDIO:   DMA total samples (effective): 4080
I (140703) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (140710) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (140716) AUDIO: âœ… I2S channels created (took 0 ms)
I (140722) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca850
I (140729) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (140735) AUDIO:   Sample rate: 16000 Hz
I (140740) AUDIO:   MCLK: DISABLED
I (140744) AUDIO:   BCLK: GPIO14 (shared)
I (140749) AUDIO:   WS:   GPIO15 (shared)
I (140753) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (140760) AUDIO: âœ… TX channel configured (took 1 ms)
I (140765) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (140772) AUDIO:   Sample rate: 16000 Hz
I (140777) AUDIO:   MCLK: DISABLED
I (140781) AUDIO:   BCLK: GPIO14 (shared)
I (140785) AUDIO:   WS:   GPIO15 (shared)
I (140790) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (140796) AUDIO: âœ… RX channel configured (took 0 ms)
I (140802) AUDIO: [STEP 4/6] Enabling TX channel...
I (140807) AUDIO: âœ… TX channel enabled (took 0 ms)
I (140813) AUDIO: [STEP 5/6] Enabling RX channel...
I (140818) AUDIO: âœ… RX channel enabled (took 0 ms)
I (140824) AUDIO: [STEP 6/6] Hardware stabilization...
I (140830) AUDIO:   Phase 1: Initial settle (50ms)
I (140885) AUDIO:   Phase 2: DMA verification
I (140885) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (140886) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (141043) AUDIO: [DIAG] Post-init state:
I (141043) AUDIO:   Free heap: 3746804 bytes
I (141043) AUDIO:   Free internal RAM: 100167 bytes
I (141047) AUDIO:   Free DMA-capable: 79751 bytes
I (141053) AUDIO:   Free PSRAM: 3667124 bytes
I (141058) AUDIO:   Timestamp: 139503 ms
I (141062) AUDIO:   Total init time: 201 ms
I (141067) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (141085) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (141091) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (141097) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (141106) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (141113) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (141131) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (141149) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (141155) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (141162) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (141169) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (141175) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (141476) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (141483) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (141491) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (141509) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (141516) AUDIO: âœ… RX channel disabled (took 0 ms)
I (141522) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (141528) AUDIO: âœ… TX channel disabled (took 0 ms)
I (141534) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (141591) AUDIO: [STEP 4/5] Deleting RX channel...
I (141592) AUDIO: âœ… RX channel deleted (took 0 ms)
I (141592) AUDIO: [STEP 5/5] Deleting TX channel...
I (141597) AUDIO: âœ… TX channel deleted (took 0 ms)
I (141603) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (141660) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (141667) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (141674) AUDIO: â•‘ Camera Can Now Initialize
I (141679) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (141697) LED_CTRL: LED pattern -> 3
I (141701) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (141719) STATE_MGR: Pipeline stage event: complete
W (188824) HOTPIN_MAIN: âš ï¸ Connection health check timeout - forcing reconnect to prevent stale connection
W (188824) HOTPIN_MAIN: âš ï¸ WebSocket link not healthy, initiating reconnection sequence
I (188833) WEBSOCKET: Force stopping WebSocket client
W (188924) websocket_client: Client was not started
W (188925) WEBSOCKET: Force stop returned ESP_FAIL
I (189925) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 2)...
I (189925) WEBSOCKET: Connecting to WebSocket server...
I (189929) websocket_client: Started
I (189932) WEBSOCKET: WebSocket client started (health check disabled - managed by main connection task)
I (189951) WEBSOCKET: âœ… WebSocket connected to server
I (189952) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (189958) WEBSOCKET: Handshake sent successfully
I (189961) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (189961) STATE_MGR: âœ… WebSocket connected
I (190021) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (190021) WEBSOCKET: Server status: connected
I (190142) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (239436) BUTTON: Single click confirmed
I (239436) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (239437) STATE_MGR: Single click - mode toggle requested
I (239443) STATE_MGR: Switching: Camera â†’ Voice (count: 11)
I (239499) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (239499) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (239512) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (239519) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (239538) MEM_MGR: â•‘ Internal RAM:
I (239542) MEM_MGR: â•‘   Free:             126183 bytes (123 KB)
I (239549) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (239556) MEM_MGR: â•‘   Fragmentation:     26%
I (239561) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (239580) MEM_MGR: â•‘ DMA-capable RAM:
I (239584) MEM_MGR: â•‘   Free:             105767 bytes (103 KB)
I (239591) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (239598) MEM_MGR: â•‘   Fragmentation:     11%
I (239603) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (239622) MEM_MGR: â•‘ PSRAM:
I (239625) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (239632) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (239639) MEM_MGR: â•‘   Fragmentation:      2%
I (239644) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (239663) MEM_MGR: â•‘ Total Heap:
I (239667) MEM_MGR: â•‘   Free:             3772724 bytes (3684 KB)
I (239674) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (239681) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (239699) MEM_MGR: â•‘ Memory Delta from Baseline:
I (239705) MEM_MGR: â•‘   Internal RAM:      -98996 bytes ( -96 KB)
I (239712) MEM_MGR: â•‘   DMA-capable:       -98996 bytes ( -96 KB)
I (239719) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (239726) MEM_MGR: â•‘   Total Heap:       -592024 bytes (-578 KB)
I (239733) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (239751) STATE_MGR: Stopping camera...
I (239756) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (239772) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (239779) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (239795) STATE_MGR:   Timeout: 5000 ms
I (239800) STATE_MGR:   Timestamp: 238246 ms
I (239805) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (239811) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (239827) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (239834) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (239850) STATE_MGR:   Free heap before: 3772724 bytes
I (239856) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (239862) CAMERA: Deinitializing camera...
I (239867) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (239873) STATE_MGR:   Free heap after: 3772724 bytes
I (239879) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (239885) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (239901) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (239908) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (239924) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (240032) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (240132) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (240182) STATE_MGR:   âœ“ Total stabilization: 250ms
I (240182) STATE_MGR:   Timestamp: 238628 ms
I (240182) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240198) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (240205) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240221) STATE_MGR:   Free heap before: 3771164 bytes
I (240227) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240245) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (240252) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240270) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240289) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (240296) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240314) AUDIO: [DIAG] Pre-init state:
I (240319) AUDIO:   Free heap: 3772724 bytes
I (240324) AUDIO:   Free internal RAM: 126183 bytes
I (240329) AUDIO:   Free DMA-capable: 105767 bytes
I (240335) AUDIO:   Free PSRAM: 3667124 bytes
I (240340) AUDIO:   Timestamp: 238785 ms
I (240344) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (240351) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (240359) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (240367) AUDIO:   DMA frame num (per desc): 1020
I (240373) AUDIO:   DMA total samples (effective): 4080
I (240379) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (240386) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (240393) AUDIO: âœ… I2S channels created (took 0 ms)
I (240398) AUDIO:   TX handle: 0x3ffca89c | RX handle: 0x3ffcb700
I (240405) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (240411) AUDIO:   Sample rate: 16000 Hz
I (240416) AUDIO:   MCLK: DISABLED
I (240420) AUDIO:   BCLK: GPIO14 (shared)
I (240425) AUDIO:   WS:   GPIO15 (shared)
I (240430) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (240437) AUDIO: âœ… TX channel configured (took 1 ms)
I (240441) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (240448) AUDIO:   Sample rate: 16000 Hz
I (240453) AUDIO:   MCLK: DISABLED
I (240457) AUDIO:   BCLK: GPIO14 (shared)
I (240462) AUDIO:   WS:   GPIO15 (shared)
I (240466) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (240472) AUDIO: âœ… RX channel configured (took 0 ms)
I (240478) AUDIO: [STEP 4/6] Enabling TX channel...
I (240483) AUDIO: âœ… TX channel enabled (took 0 ms)
I (240489) AUDIO: [STEP 5/6] Enabling RX channel...
I (240495) AUDIO: âœ… RX channel enabled (took 0 ms)
I (240500) AUDIO: [STEP 6/6] Hardware stabilization...
I (240506) AUDIO:   Phase 1: Initial settle (50ms)
I (240561) AUDIO:   Phase 2: DMA verification
I (240561) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (240562) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (240719) AUDIO: [DIAG] Post-init state:
I (240719) AUDIO:   Free heap: 3746772 bytes
I (240719) AUDIO:   Free internal RAM: 100231 bytes
I (240723) AUDIO:   Free DMA-capable: 79815 bytes
I (240729) AUDIO:   Free PSRAM: 3667124 bytes
I (240734) AUDIO:   Timestamp: 239179 ms
I (240738) AUDIO:   Total init time: 201 ms
I (240743) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240761) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (240767) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (240773) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (240782) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (240789) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240807) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240825) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (240831) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (240838) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (240845) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (240851) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240869) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (240875) STATE_MGR:   Free heap after: 3746772 bytes
I (240881) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240897) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (240903) STATE_MGR: â•‘ Total transition time: 895 ms
I (240909) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240925) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240942) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (240952) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (240968) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (240976) TTS: No pending audio to flush
I (241023) TTS: TTS decoder session reset for next audio stream
I (241023) TTS: âœ… TTS decoder flushed and reset for next session
I (241025) STT: Starting STT pipeline...
I (241030) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (241039) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (241046) STT:   Current time: 239492 ms
I (241048) STT: âœ… STT pipeline started
I (241051) STT:   Free heap: 3738220 bytes
I (241055) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (241051) STT: Audio streaming session activated
I (241075) STT: Connection stabilization delay (2000ms)...
I (241260) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (241260) STT:   âœ“ Audio driver initialized
I (241261) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (241368) STT:   Total stabilization: 300ms
I (241368) STT:   Timestamp: 239814 ms
I (241368) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (241373) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37f4 (with safety padding)
I (241381) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (241394) LED_CTRL: LED pattern -> 1
I (241398) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (241402) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (241407) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (241426) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (241432) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (241439) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (241474) MEM_MGR: â•‘ Internal RAM:
I (241478) MEM_MGR: â•‘   Free:             126183 bytes (123 KB)
I (241485) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (241491) MEM_MGR: â•‘   Fragmentation:     26%
I (241497) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (241515) MEM_MGR: â•‘ DMA-capable RAM:
I (241520) MEM_MGR: â•‘   Free:             105767 bytes (103 KB)
I (241527) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (241533) MEM_MGR: â•‘   Fragmentation:     11%
I (241539) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (241557) MEM_MGR: â•‘ PSRAM:
I (241561) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (241568) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (241575) MEM_MGR: â•‘   Fragmentation:      2%
I (241580) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (241599) MEM_MGR: â•‘ Total Heap:
I (241603) MEM_MGR: â•‘   Free:             3772724 bytes (3684 KB)
I (241610) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (241617) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (241635) MEM_MGR: â•‘ Memory Delta from Baseline:
I (241641) MEM_MGR: â•‘   Internal RAM:      -98996 bytes ( -96 KB)
I (241648) MEM_MGR: â•‘   DMA-capable:       -98996 bytes ( -96 KB)
I (241655) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (241661) MEM_MGR: â•‘   Total Heap:       -592024 bytes (-578 KB)
I (241668) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (241687) STATE_MGR: âœ… Voice mode transition complete
I (241693) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (241709) STATE_MGR: STT pipeline reported start
I (243081) STT: Starting audio streaming to server...
I (243138) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (243139) WEBSOCKET: Server status: receiving
I (243143) WEBSOCKET: Server ACK: 2 chunks processed
I (243200) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (243201) WEBSOCKET: Server status: receiving
I (243206) WEBSOCKET: Server ACK: 4 chunks processed
I (243257) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (243258) WEBSOCKET: Server status: receiving
I (243263) WEBSOCKET: Server ACK: 6 chunks processed
I (243328) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (243329) WEBSOCKET: Server status: receiving
I (243333) WEBSOCKET: Server ACK: 8 chunks processed
I (243388) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (243389) WEBSOCKET: Server status: receiving
I (243393) WEBSOCKET: Server ACK: 10 chunks processed
I (243450) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (243451) WEBSOCKET: Server status: receiving
I (243456) WEBSOCKET: Server ACK: 12 chunks processed
W (243523) STT: Waiting for server ACK (sent: 14, acked: 12, unack: 2)
I (243561) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (243561) WEBSOCKET: Server status: receiving
I (243566) STT: Flow control: ACK received, resuming (sent=14, acked=14)
I (243573) WEBSOCKET: Server ACK: 14 chunks processed
I (243574) STT: ACK received, resuming (unack now: 0)
I (243642) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (243643) WEBSOCKET: Server status: receiving
I (243647) WEBSOCKET: Server ACK: 16 chunks processed
I (243704) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (243705) WEBSOCKET: Server status: receiving
I (243710) WEBSOCKET: Server ACK: 18 chunks processed
I (243969) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (243970) WEBSOCKET: Server status: receiving
I (243975) WEBSOCKET: Server ACK: 20 chunks processed
I (244244) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (244245) WEBSOCKET: Server status: receiving
I (244250) WEBSOCKET: Server ACK: 22 chunks processed
I (244443) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (244444) WEBSOCKET: Server status: receiving
I (244448) WEBSOCKET: Server ACK: 24 chunks processed
I (244734) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (244734) WEBSOCKET: Server status: receiving
I (244739) WEBSOCKET: Server ACK: 26 chunks processed
I (244979) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (244980) WEBSOCKET: Server status: receiving
I (244984) WEBSOCKET: Server ACK: 28 chunks processed
I (245198) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (245199) WEBSOCKET: Server status: receiving
I (245204) WEBSOCKET: Server ACK: 30 chunks processed
I (245548) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (245549) WEBSOCKET: Server status: receiving
I (245554) WEBSOCKET: Server ACK: 32 chunks processed
I (245781) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 34, "bytes_received": 139264}
I (245781) WEBSOCKET: Server status: receiving
I (245786) WEBSOCKET: Server ACK: 34 chunks processed
I (245846) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (245846) BUTTON: Single click confirmed
I (245846) STATE_MGR: Single click - mode toggle requested
I (245853) STATE_MGR: User requested to end voice session (count: 12). Stopping STT and awaiting server response.
I (245864) STT: Stopping STT pipeline...
I (245868) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (245883) STT: Ring buffer drained and cleared successfully
I (245915) STT: Audio capture task stopped (captured 147456 bytes total)
I (245919) STT: Streaming task received stop signal
I (245919) STT: Sending EOS signal...
I (245922) WEBSOCKET: Sending EOS signal
I (245930) STT: Audio streaming session complete (streamed 143360 bytes in 35 chunks)
I (245946) STT: STT pipeline stopped
I (245947) LED_CTRL: LED pattern -> 4
I (245947) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (245958) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (245964) WEBSOCKET: Server status: processing
I (245964) STATE_MGR: STT pipeline reported stop
I (245969) WEBSOCKET: Server stage: transcription
I (245974) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (245979) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (245988) LED_CTRL: LED pattern -> 1
I (245995) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (246491) LED_CTRL: LED pattern -> 4
I (246491) STATE_MGR: Pipeline stage event: transcription
I (246491) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (246584) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what was the name of the person again", "has_image": false}
I (246588) WEBSOCKET: Server status: processing
I (246593) WEBSOCKET: Server stage: llm
I (246598) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (246604) WEBSOCKET: Entering LLM stage - continuing processing indication
I (246619) STATE_MGR: Pipeline stage event: llm
I (246956) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "You didn't mention a person's name previously."}
I (246960) WEBSOCKET: Server status: processing
I (246965) WEBSOCKET: Server stage: tts
I (246969) WEBSOCKET: Pipeline stage changed: llm -> tts
I (246975) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (246983) LED_CTRL: LED pattern -> 3
I (246987) TTS: ğŸµ Starting TTS decoder...
I (246992) TTS: Initializing TTS decoder...
W (246997) TTS: TTS decoder already initialized
I (247044) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (247045) TTS: ğŸµ TTS playback task started on Core 1
I (247045) STATE_MGR: TTS playback start event received
I (247045) TTS: âœ… TTS decoder started successfully
I (247055) LED_CTRL: LED pattern -> 1
I (247055) TTS: âœ… TTS playback task registered with watchdog
I (247071) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (247075) STATE_MGR: Pipeline stage event: tts
I (247096) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 245542 ms, bytes: 4096)
I (247097) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (247104) TTS: Chunk #2 first 12 bytes: 52 49 46 46 42 A7 01 00 57 41 56 45
I (247112) TTS: New audio session detected - resetting chunk counter
I (247120) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (247127) STATE_MGR: TTS playback start event received
I (247133) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (247142) TTS: Chunk #2 first 12 bytes: 72 00 6C 00 3B 00 3D 00 65 00 61 00
I (247156) TTS: Received audio chunk #3: 1436 bytes (buffer: 8192/327680 used, 319487 free)
I (247159) TTS: Chunk #3 first 12 bytes: 7C 08 90 07 C9 06 04 06 4A 05 AC 04
I (247179) TTS: Received audio chunk #4: 2660 bytes (buffer: 9628/327680 used, 318051 free)
I (247181) TTS: Chunk #4 first 12 bytes: 16 02 63 00 62 00 68 02 0B 02 4A 01
I (247185) TTS: âœ… WAV header parsed successfully
I (247192) TTS: === WAV File Info ===
I (247193) TTS: Received audio chunk #5: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (247196) TTS: Sample Rate: 16000 Hz
I (247205) TTS: Chunk #5 first 12 bytes: 0A E4 50 E4 33 E5 A2 E6 BD E7 78 E9
I (247209) TTS: Channels: 1
I (247221) TTS: Bits per Sample: 16
I (247224) TTS: Received audio chunk #6: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (247225) TTS: Audio Format: 1 (PCM)
I (247238) TTS: Declared Data Size: 108318 bytes
I (247241) TTS: Received audio chunk #7: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (247244) TTS: Block Align: 2
I (247256) TTS: Byte Rate: 32000
I (247259) TTS: Received audio chunk #8: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (247260) TTS: ====================
I (247274) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=28672)
I (247277) TTS: Received audio chunk #9: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (247282) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (247298) TTS: Received audio chunk #10: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (247317) TTS: Received audio chunk #11: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (247323) TTS: Received audio chunk #12: 316 bytes (buffer: 32768/327680 used, 294911 free)
I (247332) TTS: Received audio chunk #13: 3780 bytes (buffer: 33084/327680 used, 294595 free)
I (247344) TTS: Received audio chunk #14: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (247354) TTS: Received audio chunk #15: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (247363) TTS: Received audio chunk #16: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (247373) TTS: Received audio chunk #17: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (247385) TTS: Received audio chunk #18: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (247394) TTS: Received audio chunk #19: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (247403) TTS: Received audio chunk #20: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (247410) TTS: Received audio chunk #21: 636 bytes (buffer: 65536/327680 used, 262143 free)
I (247416) TTS: Received audio chunk #22: 3460 bytes (buffer: 66172/327680 used, 261507 free)
I (247428) TTS: Received audio chunk #23: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (247442) TTS: Received audio chunk #24: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (247451) TTS: Received audio chunk #25: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (247460) TTS: Received audio chunk #26: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (247469) TTS: Received audio chunk #27: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (247479) TTS: Received audio chunk #28: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (247495) TTS: Received audio chunk #29: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (247516) TTS: Received audio chunk #30: 1866 bytes (buffer: 94208/327680 used, 233471 free)
I (247558) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (247685) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (247734) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (247734) TTS: TTS end-of-stream signaled (bytes_received=108362, header_parsed=1)
I (247740) TTS: ğŸµ Playback task will drain 87882 bytes of buffered audio
I (247747) TTS: Waiting for playback completion: 87882 bytes buffered, calculated timeout: 4746 ms
I (247813) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (247941) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (248068) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (248195) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (248323) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (248450) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (248578) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (248705) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (248833) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (248960) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (249088) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (249215) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (249343) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (249470) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (249598) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (249725) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (249853) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (249980) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (250108) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (250235) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (250363) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (250490) TTS: âœ… All audio data received (108362 bytes, expected 108318 + 44 header)
I (250654) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (250654) TTS: ğŸµ TTS playback task exiting (played 108318 bytes, result: ESP_OK)
I (250659) TTS: âœ… TTS playback finished event dispatched to state manager
I (250659) TTS: Playing TTS completion feedback to signal readiness for next input
I (250701) STATE_MGR: TTS playback finished successfully
I (250701) TTS: TTS decoder session reset for next audio stream
I (250701) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (250703) TTS: Received audio chunk #31: 0 bytes (buffer: 0/327680 used, 327679 free)
I (250713) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (250721) TTS: New audio session detected - resetting chunk counter
I (250727) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (250734) WEBSOCKET: ğŸµ Audio session complete: 108362 bytes in 30 messages
I (250753) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (250765) WEBSOCKET: Received text message: {"status": "complete"}
I (250767) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (250775) WEBSOCKET: Server status: complete
I (250793) MEM_MGR: â•‘ Internal RAM:
I (250798) WEBSOCKET: Pipeline stage changed: tts -> complete
I (250802) MEM_MGR: â•‘   Free:              90523 bytes ( 88 KB)
I (250809) WEBSOCKET: Exiting TTS stage (transition to complete)
I (250815) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (250829) MEM_MGR: â•‘   Fragmentation:     28%
I (250834) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (250853) MEM_MGR: â•‘ DMA-capable RAM:
I (250857) MEM_MGR: â•‘   Free:              70107 bytes ( 68 KB)
I (250864) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (250871) MEM_MGR: â•‘   Fragmentation:      7%
I (250876) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (250895) MEM_MGR: â•‘ PSRAM:
I (250898) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (250905) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (250912) MEM_MGR: â•‘   Fragmentation:      2%
I (250918) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (250922) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (250936) MEM_MGR: â•‘ Total Heap:
I (250948) MEM_MGR: â•‘   Free:             3737064 bytes (3649 KB)
I (250955) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (250962) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (250981) MEM_MGR: â•‘ Memory Delta from Baseline:
I (250986) MEM_MGR: â•‘   Internal RAM:     -134656 bytes (-131 KB)
I (250993) MEM_MGR: â•‘   DMA-capable:      -134656 bytes (-131 KB)
I (251000) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (251008) MEM_MGR: â•‘   Total Heap:       -627684 bytes (-612 KB)
I (251014) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (251032) STATE_MGR: Stopping voice mode components...
I (251038) STT: Stopping STT pipeline...
W (251043) STT: STT pipeline already stopped
I (251048) STATE_MGR: Voice pipeline reported COMPLETE
I (251054) STATE_MGR: TTS playback already drained - no pending audio
I (251061) STATE_MGR: Flushing and resetting TTS decoder for next session
I (251068) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (251076) TTS: Flushing pending audio before reset (~0 bytes)
I (251083) TTS:   âœ“ DMA buffer freed from PSRAM
I (251088) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (251096) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (251133) TTS: TTS playback task handle is NULL - task already exited (after 1 checks)
I (251178) TTS: TTS decoder session reset for next audio stream
I (251178) TTS: âœ… TTS decoder flushed and reset for next session
I (251380) TTS: â¹ï¸ Stopping TTS decoder...
W (251380) TTS: TTS decoder already stopped.
I (251524) STATE_MGR: Acquiring I2S mutex...
I (251524) STATE_MGR: Deinitializing audio drivers...
I (251524) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (251542) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (251550) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (251568) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (251575) AUDIO: âœ… RX channel disabled (took 0 ms)
I (251580) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (251587) AUDIO: âœ… TX channel disabled (took 0 ms)
I (251593) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (251649) AUDIO: [STEP 4/5] Deleting RX channel...
I (251650) AUDIO: âœ… RX channel deleted (took 0 ms)
I (251650) AUDIO: [STEP 5/5] Deleting TX channel...
I (251655) AUDIO: âœ… TX channel deleted (took 0 ms)
I (251661) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (251718) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (251725) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (251732) AUDIO: â•‘ Camera Can Now Initialize
I (251737) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (251805) STATE_MGR: Allowing memory stabilization (100ms)...
I (251905) STATE_MGR: Camera will be initialized on-demand during capture
I (251905) STATE_MGR: I2S mutex released
I (251906) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (251925) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (251932) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (251950) MEM_MGR: â•‘ Internal RAM:
I (251955) MEM_MGR: â•‘   Free:              90523 bytes ( 88 KB)
I (251961) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (251968) MEM_MGR: â•‘   Fragmentation:     28%
I (251973) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (251992) MEM_MGR: â•‘ DMA-capable RAM:
I (251996) MEM_MGR: â•‘   Free:              70107 bytes ( 68 KB)
I (252003) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (252010) MEM_MGR: â•‘   Fragmentation:      7%
I (252015) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (252034) MEM_MGR: â•‘ PSRAM:
I (252037) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (252044) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (252051) MEM_MGR: â•‘   Fragmentation:      2%
I (252057) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (252075) MEM_MGR: â•‘ Total Heap:
I (252079) MEM_MGR: â•‘   Free:             3737064 bytes (3649 KB)
I (252086) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (252093) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (252112) MEM_MGR: â•‘ Memory Delta from Baseline:
I (252117) MEM_MGR: â•‘   Internal RAM:     -134656 bytes (-131 KB)
I (252124) MEM_MGR: â•‘   DMA-capable:      -134656 bytes (-131 KB)
I (252131) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (252138) MEM_MGR: â•‘   Total Heap:       -627684 bytes (-612 KB)
I (252145) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (252164) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (252173) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (252191) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (252198) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (252216) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (252234) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (252242) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (252260) AUDIO: [DIAG] Pre-init state:
I (252264) AUDIO:   Free heap: 3772724 bytes
I (252269) AUDIO:   Free internal RAM: 126183 bytes
I (252275) AUDIO:   Free DMA-capable: 105767 bytes
I (252280) AUDIO:   Free PSRAM: 3667124 bytes
I (252285) AUDIO:   Timestamp: 250731 ms
I (252290) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (252297) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (252305) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (252313) AUDIO:   DMA frame num (per desc): 1020
I (252319) AUDIO:   DMA total samples (effective): 4080
I (252325) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (252332) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (252338) AUDIO: âœ… I2S channels created (took 0 ms)
I (252344) AUDIO:   TX handle: 0x3ffca89c | RX handle: 0x3ffcb700
I (252351) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (252357) AUDIO:   Sample rate: 16000 Hz
I (252362) AUDIO:   MCLK: DISABLED
I (252366) AUDIO:   BCLK: GPIO14 (shared)
I (252371) AUDIO:   WS:   GPIO15 (shared)
I (252375) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (252382) AUDIO: âœ… TX channel configured (took 1 ms)
I (252387) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (252394) AUDIO:   Sample rate: 16000 Hz
I (252399) AUDIO:   MCLK: DISABLED
I (252403) AUDIO:   BCLK: GPIO14 (shared)
I (252407) AUDIO:   WS:   GPIO15 (shared)
I (252412) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (252418) AUDIO: âœ… RX channel configured (took 0 ms)
I (252424) AUDIO: [STEP 4/6] Enabling TX channel...
I (252429) AUDIO: âœ… TX channel enabled (took 0 ms)
I (252435) AUDIO: [STEP 5/6] Enabling RX channel...
I (252440) AUDIO: âœ… RX channel enabled (took 0 ms)
I (252446) AUDIO: [STEP 6/6] Hardware stabilization...
I (252452) AUDIO:   Phase 1: Initial settle (50ms)
I (252507) AUDIO:   Phase 2: DMA verification
I (252507) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (252508) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (252665) AUDIO: [DIAG] Post-init state:
I (252665) AUDIO:   Free heap: 3746772 bytes
I (252665) AUDIO:   Free internal RAM: 100231 bytes
I (252669) AUDIO:   Free DMA-capable: 79815 bytes
I (252675) AUDIO:   Free PSRAM: 3667124 bytes
I (252680) AUDIO:   Timestamp: 251125 ms
I (252684) AUDIO:   Total init time: 201 ms
I (252689) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (252707) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (252713) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (252719) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (252728) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (252735) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (252753) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (252771) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (252777) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (252784) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (252791) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (252797) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (253098) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (253105) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (253113) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (253131) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (253138) AUDIO: âœ… RX channel disabled (took 0 ms)
I (253144) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (253150) AUDIO: âœ… TX channel disabled (took 0 ms)
I (253156) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (253213) AUDIO: [STEP 4/5] Deleting RX channel...
I (253214) AUDIO: âœ… RX channel deleted (took 0 ms)
I (253214) AUDIO: [STEP 5/5] Deleting TX channel...
I (253219) AUDIO: âœ… TX channel deleted (took 0 ms)
I (253225) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (253282) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (253289) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (253296) AUDIO: â•‘ Camera Can Now Initialize
I (253301) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (253319) LED_CTRL: LED pattern -> 3
I (253323) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (253341) STATE_MGR: Pipeline stage event: complete
I (259693) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (259693) BUTTON: Single click confirmed
I (259693) STATE_MGR: Single click - mode toggle requested
I (259700) STATE_MGR: Switching: Camera â†’ Voice (count: 13)
I (259756) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (259756) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (259769) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (259776) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (259795) MEM_MGR: â•‘ Internal RAM:
I (259799) MEM_MGR: â•‘   Free:             126183 bytes (123 KB)
I (259806) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (259813) MEM_MGR: â•‘   Fragmentation:     26%
I (259818) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (259837) MEM_MGR: â•‘ DMA-capable RAM:
I (259841) MEM_MGR: â•‘   Free:             105767 bytes (103 KB)
I (259848) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (259855) MEM_MGR: â•‘   Fragmentation:     11%
I (259860) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (259879) MEM_MGR: â•‘ PSRAM:
I (259882) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (259889) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (259896) MEM_MGR: â•‘   Fragmentation:      2%
I (259901) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (259920) MEM_MGR: â•‘ Total Heap:
I (259924) MEM_MGR: â•‘   Free:             3772724 bytes (3684 KB)
I (259931) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (259938) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (259956) MEM_MGR: â•‘ Memory Delta from Baseline:
I (259962) MEM_MGR: â•‘   Internal RAM:      -98996 bytes ( -96 KB)
I (259969) MEM_MGR: â•‘   DMA-capable:       -98996 bytes ( -96 KB)
I (259976) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (259983) MEM_MGR: â•‘   Total Heap:       -592024 bytes (-578 KB)
I (259990) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260008) STATE_MGR: Stopping camera...
I (260013) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260029) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (260036) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260052) STATE_MGR:   Timeout: 5000 ms
I (260057) STATE_MGR:   Timestamp: 258503 ms
I (260062) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (260068) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260084) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (260091) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260107) STATE_MGR:   Free heap before: 3772724 bytes
I (260113) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (260119) CAMERA: Deinitializing camera...
I (260124) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (260130) STATE_MGR:   Free heap after: 3772724 bytes
I (260136) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (260142) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260158) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (260165) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260181) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (260289) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (260389) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (260439) STATE_MGR:   âœ“ Total stabilization: 250ms
I (260439) STATE_MGR:   Timestamp: 258885 ms
I (260439) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260455) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (260462) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260478) STATE_MGR:   Free heap before: 3772724 bytes
I (260484) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260502) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (260509) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260527) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260546) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (260553) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260571) AUDIO: [DIAG] Pre-init state:
I (260576) AUDIO:   Free heap: 3772724 bytes
I (260581) AUDIO:   Free internal RAM: 126183 bytes
I (260586) AUDIO:   Free DMA-capable: 105767 bytes
I (260592) AUDIO:   Free PSRAM: 3667124 bytes
I (260597) AUDIO:   Timestamp: 259042 ms
I (260601) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (260608) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (260616) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (260624) AUDIO:   DMA frame num (per desc): 1020
I (260630) AUDIO:   DMA total samples (effective): 4080
I (260636) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (260643) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (260649) AUDIO: âœ… I2S channels created (took 0 ms)
I (260655) AUDIO:   TX handle: 0x3ffca89c | RX handle: 0x3ffcb700
I (260662) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (260668) AUDIO:   Sample rate: 16000 Hz
I (260673) AUDIO:   MCLK: DISABLED
I (260677) AUDIO:   BCLK: GPIO14 (shared)
I (260682) AUDIO:   WS:   GPIO15 (shared)
I (260687) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (260693) AUDIO: âœ… TX channel configured (took 0 ms)
I (260698) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (260705) AUDIO:   Sample rate: 16000 Hz
I (260710) AUDIO:   MCLK: DISABLED
I (260714) AUDIO:   BCLK: GPIO14 (shared)
I (260719) AUDIO:   WS:   GPIO15 (shared)
I (260723) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (260729) AUDIO: âœ… RX channel configured (took 0 ms)
I (260735) AUDIO: [STEP 4/6] Enabling TX channel...
I (260740) AUDIO: âœ… TX channel enabled (took 0 ms)
I (260746) AUDIO: [STEP 5/6] Enabling RX channel...
I (260752) AUDIO: âœ… RX channel enabled (took 0 ms)
I (260757) AUDIO: [STEP 6/6] Hardware stabilization...
I (260763) AUDIO:   Phase 1: Initial settle (50ms)
I (260818) AUDIO:   Phase 2: DMA verification
I (260818) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (260819) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (260976) AUDIO: [DIAG] Post-init state:
I (260976) AUDIO:   Free heap: 3746772 bytes
I (260977) AUDIO:   Free internal RAM: 100231 bytes
I (260980) AUDIO:   Free DMA-capable: 79815 bytes
I (260986) AUDIO:   Free PSRAM: 3667124 bytes
I (260991) AUDIO:   Timestamp: 259437 ms
I (260996) AUDIO:   Total init time: 200 ms
I (261000) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261018) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (261025) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (261030) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (261039) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (261046) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261064) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261082) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (261088) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (261095) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (261102) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (261108) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261126) STATE_MGR:   âœ“ Audio initialized (took 642 ms)
I (261133) STATE_MGR:   Free heap after: 3746772 bytes
I (261138) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261155) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (261160) STATE_MGR: â•‘ Total transition time: 896 ms
I (261166) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261182) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261199) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (261209) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261225) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (261233) TTS: No pending audio to flush
I (261280) TTS: TTS decoder session reset for next audio stream
I (261280) TTS: âœ… TTS decoder flushed and reset for next session
I (261282) STT: Starting STT pipeline...
I (261287) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (261296) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (261303) STT:   Current time: 259749 ms
I (261307) STT: âœ… STT pipeline started
I (261309) STT:   Free heap: 3738220 bytes
I (261313) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (261309) STT: Audio streaming session activated
I (261332) STT: Connection stabilization delay (2000ms)...
I (261517) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (261517) STT:   âœ“ Audio driver initialized
I (261518) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (261625) STT:   Total stabilization: 300ms
I (261625) STT:   Timestamp: 260070 ms
I (261625) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (261630) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37f4 (with safety padding)
I (261638) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261651) LED_CTRL: LED pattern -> 1
I (261654) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (261659) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261664) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (261682) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (261689) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261696) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261730) MEM_MGR: â•‘ Internal RAM:
I (261735) MEM_MGR: â•‘   Free:             126183 bytes (123 KB)
I (261742) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (261748) MEM_MGR: â•‘   Fragmentation:     26%
I (261754) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261772) MEM_MGR: â•‘ DMA-capable RAM:
I (261777) MEM_MGR: â•‘   Free:             105767 bytes (103 KB)
I (261783) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (261790) MEM_MGR: â•‘   Fragmentation:     11%
I (261796) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261814) MEM_MGR: â•‘ PSRAM:
I (261818) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (261825) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (261832) MEM_MGR: â•‘   Fragmentation:      2%
I (261837) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261855) MEM_MGR: â•‘ Total Heap:
I (261860) MEM_MGR: â•‘   Free:             3772724 bytes (3684 KB)
I (261867) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (261874) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261892) MEM_MGR: â•‘ Memory Delta from Baseline:
I (261898) MEM_MGR: â•‘   Internal RAM:      -98996 bytes ( -96 KB)
I (261904) MEM_MGR: â•‘   DMA-capable:       -98996 bytes ( -96 KB)
I (261911) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (261918) MEM_MGR: â•‘   Total Heap:       -592024 bytes (-578 KB)
I (261925) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261944) STATE_MGR: âœ… Voice mode transition complete
I (261950) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (261965) STATE_MGR: STT pipeline reported start
I (263338) STT: Starting audio streaming to server...
W (263397) STT: Waiting for server ACK (sent: 2, acked: 0, unack: 2)
I (263468) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (263469) WEBSOCKET: Server status: receiving
I (263474) STT: Flow control: ACK received, resuming (sent=2, acked=2)
I (263481) WEBSOCKET: Server ACK: 2 chunks processed
I (263488) STT: ACK received, resuming (unack now: 0)
W (263584) STT: Waiting for server ACK (sent: 4, acked: 2, unack: 2)
I (263625) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (263626) WEBSOCKET: Server status: receiving
I (263631) STT: Flow control: ACK received, resuming (sent=4, acked=4)
I (263638) WEBSOCKET: Server ACK: 4 chunks processed
I (263644) STT: ACK received, resuming (unack now: 0)
I (263698) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (263699) WEBSOCKET: Server status: receiving
I (263704) WEBSOCKET: Server ACK: 6 chunks processed
I (263758) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (263760) WEBSOCKET: Server status: receiving
I (263764) WEBSOCKET: Server ACK: 8 chunks processed
I (263819) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (263820) WEBSOCKET: Server status: receiving
I (263824) WEBSOCKET: Server ACK: 10 chunks processed
I (263887) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (263888) WEBSOCKET: Server status: receiving
I (263893) WEBSOCKET: Server ACK: 12 chunks processed
W (263989) STT: Waiting for server ACK (sent: 14, acked: 12, unack: 2)
I (264028) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (264029) WEBSOCKET: Server status: receiving
I (264033) STT: Flow control: ACK received, resuming (sent=14, acked=14)
I (264041) WEBSOCKET: Server ACK: 14 chunks processed
I (264047) STT: ACK received, resuming (unack now: 0)
I (264098) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (264099) WEBSOCKET: Server status: receiving
I (264104) WEBSOCKET: Server ACK: 16 chunks processed
I (264172) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (264173) WEBSOCKET: Server status: receiving
I (264177) WEBSOCKET: Server ACK: 18 chunks processed
I (264233) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (264234) WEBSOCKET: Server status: receiving
I (264238) WEBSOCKET: Server ACK: 20 chunks processed
I (264498) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (264499) WEBSOCKET: Server status: receiving
I (264503) WEBSOCKET: Server ACK: 22 chunks processed
I (264659) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (264660) WEBSOCKET: Server status: receiving
I (264665) WEBSOCKET: Server ACK: 24 chunks processed
I (264975) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (264976) WEBSOCKET: Server status: receiving
I (264980) WEBSOCKET: Server ACK: 26 chunks processed
I (265267) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (265268) WEBSOCKET: Server status: receiving
I (265273) WEBSOCKET: Server ACK: 28 chunks processed
I (265498) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (265499) WEBSOCKET: Server status: receiving
I (265503) WEBSOCKET: Server ACK: 30 chunks processed
I (265714) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (265715) WEBSOCKET: Server status: receiving
I (265720) WEBSOCKET: Server ACK: 32 chunks processed
I (265889) BUTTON: Single click confirmed
I (265889) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (265890) STATE_MGR: Single click - mode toggle requested
I (265896) STATE_MGR: User requested to end voice session (count: 14). Stopping STT and awaiting server response.
I (265907) STT: Stopping STT pipeline...
I (265911) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (265917) STT: Audio capture task stopped (captured 139264 bytes total)
I (265926) STT: Ring buffer drained and cleared successfully
I (265960) STT: Streaming task received stop signal
I (265960) STT: Sending EOS signal...
I (265960) WEBSOCKET: Sending EOS signal
I (265970) STT: Audio streaming session complete (streamed 135168 bytes in 33 chunks)
I (265981) STT: STT pipeline stopped
I (265981) LED_CTRL: LED pattern -> 4
I (265981) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (265999) STATE_MGR: STT pipeline reported stop
I (265999) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (266004) LED_CTRL: LED pattern -> 1
I (266034) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (266035) WEBSOCKET: Server status: processing
I (266038) WEBSOCKET: Server stage: transcription
I (266043) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (266050) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (266557) LED_CTRL: LED pattern -> 4
I (266557) STATE_MGR: Pipeline stage event: transcription
I (266558) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (266564) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "who was hitler", "has_image": false}
I (266578) WEBSOCKET: Server status: processing
I (266583) WEBSOCKET: Server stage: llm
I (266588) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (266594) WEBSOCKET: Entering LLM stage - continuing processing indication
I (266602) STATE_MGR: Pipeline stage event: llm
I (266903) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "Adolf Hitler was a German politician who served as the dictator of Nazi Germany."}
I (266909) WEBSOCKET: Server status: processing
I (266914) WEBSOCKET: Server stage: tts
I (266919) WEBSOCKET: Pipeline stage changed: llm -> tts
I (266924) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (266932) LED_CTRL: LED pattern -> 3
I (266936) TTS: ğŸµ Starting TTS decoder...
I (266941) TTS: Initializing TTS decoder...
W (266946) TTS: TTS decoder already initialized
I (266993) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (266994) TTS: ğŸµ TTS playback task started on Core 1
I (266994) STATE_MGR: TTS playback start event received
I (266994) TTS: âœ… TTS decoder started successfully
I (267004) LED_CTRL: LED pattern -> 1
I (267005) TTS: âœ… TTS playback task registered with watchdog
I (267021) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (267024) STATE_MGR: Pipeline stage event: tts
I (267030) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 265476 ms, bytes: 4096)
I (267043) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (267052) TTS: Chunk #2 first 12 bytes: 52 49 46 46 18 98 02 00 57 41 56 45
I (267060) TTS: New audio session detected - resetting chunk counter
I (267067) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (267075) STATE_MGR: TTS playback start event received
I (267081) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (267090) TTS: Chunk #2 first 12 bytes: 93 29 62 38 4C 40 01 3A B0 2D 60 1B
I (267104) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (267107) TTS: Chunk #3 first 12 bytes: 5E 02 55 02 29 02 40 02 0A 02 DD 01
I (267120) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (267123) TTS: Chunk #4 first 12 bytes: AC D5 96 D8 FE DE 50 E5 7E ED CF F6
I (267133) TTS: âœ… WAV header parsed successfully
I (267136) TTS: === WAV File Info ===
I (267139) TTS: Received audio chunk #5: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (267141) TTS: Sample Rate: 16000 Hz
I (267150) TTS: Chunk #5 first 12 bytes: CB FE 48 00 78 FF 4F 00 F4 00 5B 00
I (267154) TTS: Channels: 1
I (267165) TTS: Bits per Sample: 16
I (267169) TTS: Received audio chunk #6: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (267169) TTS: Audio Format: 1 (PCM)
I (267183) TTS: Declared Data Size: 169972 bytes
I (267185) TTS: Received audio chunk #7: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (267188) TTS: Block Align: 2
I (267201) TTS: Byte Rate: 32000
I (267204) TTS: Received audio chunk #8: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (267205) TTS: ====================
I (267219) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=32768)
I (267219) TTS: Received audio chunk #9: 1316 bytes (buffer: 28672/327680 used, 299007 free)
I (267226) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (267254) TTS: Received audio chunk #10: 2780 bytes (buffer: 25892/327680 used, 301787 free)
I (267263) TTS: Received audio chunk #11: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (267270) TTS: Received audio chunk #12: 316 bytes (buffer: 32768/327680 used, 294911 free)
I (267276) TTS: Received audio chunk #13: 3780 bytes (buffer: 33084/327680 used, 294595 free)
I (267288) TTS: Received audio chunk #14: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (267298) TTS: Received audio chunk #15: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (267308) TTS: Received audio chunk #16: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (267315) TTS: Received audio chunk #17: 1196 bytes (buffer: 49152/327680 used, 278527 free)
I (267322) TTS: Received audio chunk #18: 2900 bytes (buffer: 50348/327680 used, 277331 free)
I (267332) TTS: Received audio chunk #19: 1416 bytes (buffer: 53248/327680 used, 274431 free)
I (267340) TTS: Received audio chunk #20: 2680 bytes (buffer: 54664/327680 used, 273015 free)
I (267354) TTS: Received audio chunk #21: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (267363) TTS: Received audio chunk #22: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (267375) TTS: Received audio chunk #23: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (267384) TTS: Received audio chunk #24: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (267392) TTS: Received audio chunk #25: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (267402) TTS: Received audio chunk #26: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (267411) TTS: Received audio chunk #27: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (267421) TTS: Received audio chunk #28: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (267429) TTS: Received audio chunk #29: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (267439) TTS: Received audio chunk #30: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (267449) TTS: Received audio chunk #31: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (267460) TTS: Received audio chunk #32: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (267468) TTS: Received audio chunk #33: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (267483) TTS: Received audio chunk #34: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (267502) TTS: Received audio chunk #35: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (267514) TTS: Received audio chunk #36: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (267529) TTS: Received audio chunk #37: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (267545) TTS: Received audio chunk #38: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (267562) TTS: Received audio chunk #39: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (267576) TTS: Received audio chunk #40: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (267592) TTS: Received audio chunk #41: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (267608) TTS: Received audio chunk #42: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (267623) TTS: Received audio chunk #43: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (267665) TTS: Received audio chunk #44: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (267673) TTS: Received audio chunk #45: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (267681) TTS: Received audio chunk #46: 2080 bytes (buffer: 147456/327680 used, 180223 free)
I (267752) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (267879) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (267882) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (267885) TTS: TTS end-of-stream signaled (bytes_received=170016, header_parsed=1)
I (267893) TTS: ğŸµ Playback task will drain 141344 bytes of buffered audio
I (267901) TTS: Waiting for playback completion: 141344 bytes buffered, calculated timeout: 6417 ms
I (268006) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (268134) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (268262) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (268389) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (268516) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (268644) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (268771) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (268899) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (269026) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (269154) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (269281) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (269409) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (269536) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (269664) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (269791) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (269919) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (270046) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (270174) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (270301) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (270429) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (270556) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (270684) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (270811) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (270939) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (271066) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (271194) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (271321) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (271449) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (271576) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (271704) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (271831) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (271959) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (272086) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (272214) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (272341) TTS: âœ… All audio data received (170016 bytes, expected 169972 + 44 header)
I (272505) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (272505) TTS: ğŸµ TTS playback task exiting (played 169972 bytes, result: ESP_OK)
I (272511) STATE_MGR: TTS playback finished successfully
I (272511) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (272511) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (272511) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (272511) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (272553) TTS: TTS decoder session reset for next audio stream
I (272558) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (272565) TTS: Received audio chunk #47: 0 bytes (buffer: 0/327680 used, 327679 free)
I (272583) MEM_MGR: â•‘ Internal RAM:
I (272592) TTS: New audio session detected - resetting chunk counter
I (272596) MEM_MGR: â•‘   Free:              91059 bytes ( 88 KB)
I (272603) WEBSOCKET: ğŸµ Audio session complete: 170016 bytes in 46 messages
I (272610) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (272621) WEBSOCKET: Received text message: {"status": "complete"}
I (272624) MEM_MGR: â•‘   Fragmentation:     29%
I (272632) WEBSOCKET: Server status: complete
I (272637) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (272642) WEBSOCKET: Pipeline stage changed: tts -> complete
I (272660) MEM_MGR: â•‘ DMA-capable RAM:
I (272667) WEBSOCKET: Exiting TTS stage (transition to complete)
I (272671) MEM_MGR: â•‘   Free:              70643 bytes ( 68 KB)
I (272685) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (272691) MEM_MGR: â•‘   Fragmentation:      8%
I (272697) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (272715) MEM_MGR: â•‘ PSRAM:
I (272719) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (272726) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (272733) MEM_MGR: â•‘   Fragmentation:      2%
I (272738) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (272757) MEM_MGR: â•‘ Total Heap:
I (272761) MEM_MGR: â•‘   Free:             3725440 bytes (3638 KB)
I (272768) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (272775) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (272778) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (272793) MEM_MGR: â•‘ Memory Delta from Baseline:
I (272807) MEM_MGR: â•‘   Internal RAM:     -134120 bytes (-130 KB)
I (272814) MEM_MGR: â•‘   DMA-capable:      -134120 bytes (-130 KB)
I (272820) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (272827) MEM_MGR: â•‘   Total Heap:       -639308 bytes (-624 KB)
I (272834) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (272853) STATE_MGR: Stopping voice mode components...
I (272859) STT: Stopping STT pipeline...
W (272863) STT: STT pipeline already stopped
I (272868) STATE_MGR: Voice pipeline reported COMPLETE
I (272874) STATE_MGR: TTS playback already drained - no pending audio
I (272881) STATE_MGR: Flushing and resetting TTS decoder for next session
I (272889) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (272897) TTS: Flushing pending audio before reset (~0 bytes)
I (272558) TTS: âœ… TTS playback finished event dispatched to state manager
I (272911) TTS:   âœ“ DMA buffer freed from PSRAM
I (272916) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (272924) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (272953) TTS: TTS playback task handle is NULL - task already exited (after 1 checks)
I (272998) TTS: TTS decoder session reset for next audio stream
I (272998) TTS: âœ… TTS decoder flushed and reset for next session
I (273200) TTS: â¹ï¸ Stopping TTS decoder...
W (273200) TTS: TTS decoder already stopped.
I (273344) STATE_MGR: Acquiring I2S mutex...
I (273344) STATE_MGR: Deinitializing audio drivers...
I (273344) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (273362) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (273370) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (273388) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (273395) AUDIO: âœ… RX channel disabled (took 0 ms)
I (273400) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (273407) AUDIO: âœ… TX channel disabled (took 0 ms)
I (273413) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (273469) AUDIO: [STEP 4/5] Deleting RX channel...
I (273470) AUDIO: âœ… RX channel deleted (took 0 ms)
I (273470) AUDIO: [STEP 5/5] Deleting TX channel...
I (273475) AUDIO: âœ… TX channel deleted (took 0 ms)
I (273481) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (273538) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (273545) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (273552) AUDIO: â•‘ Camera Can Now Initialize
I (273557) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (273625) STATE_MGR: Allowing memory stabilization (100ms)...
I (273725) STATE_MGR: Camera will be initialized on-demand during capture
I (273725) STATE_MGR: I2S mutex released
I (273726) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (273745) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (273752) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (273770) MEM_MGR: â•‘ Internal RAM:
I (273775) MEM_MGR: â•‘   Free:              91059 bytes ( 88 KB)
I (273781) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (273788) MEM_MGR: â•‘   Fragmentation:     29%
I (273793) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (273812) MEM_MGR: â•‘ DMA-capable RAM:
I (273816) MEM_MGR: â•‘   Free:              70643 bytes ( 68 KB)
I (273823) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (273830) MEM_MGR: â•‘   Fragmentation:      8%
I (273835) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (273854) MEM_MGR: â•‘ PSRAM:
I (273857) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (273864) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (273871) MEM_MGR: â•‘   Fragmentation:      2%
I (273877) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (273895) MEM_MGR: â•‘ Total Heap:
I (273899) MEM_MGR: â•‘   Free:             3725440 bytes (3638 KB)
I (273906) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (273913) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (273932) MEM_MGR: â•‘ Memory Delta from Baseline:
I (273937) MEM_MGR: â•‘   Internal RAM:     -134120 bytes (-130 KB)
I (273944) MEM_MGR: â•‘   DMA-capable:      -134120 bytes (-130 KB)
I (273951) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (273958) MEM_MGR: â•‘   Total Heap:       -639308 bytes (-624 KB)
I (273965) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (273984) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (273993) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274011) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (274018) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274036) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274054) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (274062) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274080) AUDIO: [DIAG] Pre-init state:
I (274084) AUDIO:   Free heap: 3772724 bytes
I (274089) AUDIO:   Free internal RAM: 126183 bytes
I (274095) AUDIO:   Free DMA-capable: 105767 bytes
I (274100) AUDIO:   Free PSRAM: 3667124 bytes
I (274105) AUDIO:   Timestamp: 272551 ms
I (274110) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (274117) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (274125) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (274133) AUDIO:   DMA frame num (per desc): 1020
I (274139) AUDIO:   DMA total samples (effective): 4080
I (274145) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (274152) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (274158) AUDIO: âœ… I2S channels created (took 0 ms)
I (274164) AUDIO:   TX handle: 0x3ffca89c | RX handle: 0x3ffcb700
I (274171) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (274177) AUDIO:   Sample rate: 16000 Hz
I (274182) AUDIO:   MCLK: DISABLED
I (274186) AUDIO:   BCLK: GPIO14 (shared)
I (274191) AUDIO:   WS:   GPIO15 (shared)
I (274195) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (274202) AUDIO: âœ… TX channel configured (took 1 ms)
I (274207) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (274214) AUDIO:   Sample rate: 16000 Hz
I (274219) AUDIO:   MCLK: DISABLED
I (274223) AUDIO:   BCLK: GPIO14 (shared)
I (274227) AUDIO:   WS:   GPIO15 (shared)
I (274232) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (274238) AUDIO: âœ… RX channel configured (took 0 ms)
I (274244) AUDIO: [STEP 4/6] Enabling TX channel...
I (274249) AUDIO: âœ… TX channel enabled (took 0 ms)
I (274255) AUDIO: [STEP 5/6] Enabling RX channel...
I (274260) AUDIO: âœ… RX channel enabled (took 0 ms)
I (274266) AUDIO: [STEP 6/6] Hardware stabilization...
I (274272) AUDIO:   Phase 1: Initial settle (50ms)
I (274327) AUDIO:   Phase 2: DMA verification
I (274327) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (274328) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (274485) AUDIO: [DIAG] Post-init state:
I (274485) AUDIO:   Free heap: 3746772 bytes
I (274485) AUDIO:   Free internal RAM: 100231 bytes
I (274489) AUDIO:   Free DMA-capable: 79815 bytes
I (274495) AUDIO:   Free PSRAM: 3667124 bytes
I (274500) AUDIO:   Timestamp: 272945 ms
I (274504) AUDIO:   Total init time: 201 ms
I (274509) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274527) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (274533) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (274539) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (274548) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (274555) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274573) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274591) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (274597) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (274604) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (274611) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (274617) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274918) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274925) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (274933) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274951) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (274958) AUDIO: âœ… RX channel disabled (took 0 ms)
I (274964) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (274970) AUDIO: âœ… TX channel disabled (took 0 ms)
I (274976) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (275033) AUDIO: [STEP 4/5] Deleting RX channel...
I (275034) AUDIO: âœ… RX channel deleted (took 0 ms)
I (275034) AUDIO: [STEP 5/5] Deleting TX channel...
I (275039) AUDIO: âœ… TX channel deleted (took 0 ms)
I (275045) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (275102) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (275109) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (275116) AUDIO: â•‘ Camera Can Now Initialize
I (275121) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (275139) LED_CTRL: LED pattern -> 3
I (275143) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (275161) STATE_MGR: Pipeline stage event: complete
I (278253) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (278253) BUTTON: Single click confirmed
I (278253) STATE_MGR: Single click - mode toggle requested
I (278260) STATE_MGR: Switching: Camera â†’ Voice (count: 15)
I (278316) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (278316) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (278329) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (278336) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (278355) MEM_MGR: â•‘ Internal RAM:
I (278359) MEM_MGR: â•‘   Free:              91059 bytes ( 88 KB)
I (278366) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (278373) MEM_MGR: â•‘   Fragmentation:     29%
I (278378) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (278397) MEM_MGR: â•‘ DMA-capable RAM:
I (278401) MEM_MGR: â•‘   Free:              70643 bytes ( 68 KB)
I (278408) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (278415) MEM_MGR: â•‘   Fragmentation:      8%
I (278420) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (278439) MEM_MGR: â•‘ PSRAM:
I (278442) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (278449) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (278456) MEM_MGR: â•‘   Fragmentation:      2%
I (278461) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (278480) MEM_MGR: â•‘ Total Heap:
I (278484) MEM_MGR: â•‘   Free:             3725440 bytes (3638 KB)
I (278491) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (278498) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (278516) MEM_MGR: â•‘ Memory Delta from Baseline:
I (278522) MEM_MGR: â•‘   Internal RAM:     -134120 bytes (-130 KB)
I (278529) MEM_MGR: â•‘   DMA-capable:      -134120 bytes (-130 KB)
I (278536) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (278543) MEM_MGR: â•‘   Total Heap:       -639308 bytes (-624 KB)
I (278550) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (278568) STATE_MGR: Stopping camera...
I (278573) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (278589) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (278596) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (278612) STATE_MGR:   Timeout: 5000 ms
I (278617) STATE_MGR:   Timestamp: 277063 ms
I (278622) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (278628) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (278644) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (278651) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (278667) STATE_MGR:   Free heap before: 3772724 bytes
I (278673) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (278679) CAMERA: Deinitializing camera...
I (278684) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (278690) STATE_MGR:   Free heap after: 3772724 bytes
I (278696) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (278702) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (278718) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (278725) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (278741) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (278849) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (278949) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (278999) STATE_MGR:   âœ“ Total stabilization: 250ms
I (278999) STATE_MGR:   Timestamp: 277445 ms
I (278999) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279015) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (279022) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279038) STATE_MGR:   Free heap before: 3772724 bytes
I (279044) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279062) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (279069) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279087) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279106) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (279113) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279131) AUDIO: [DIAG] Pre-init state:
I (279136) AUDIO:   Free heap: 3772724 bytes
I (279141) AUDIO:   Free internal RAM: 126183 bytes
I (279146) AUDIO:   Free DMA-capable: 105767 bytes
I (279152) AUDIO:   Free PSRAM: 3667124 bytes
I (279157) AUDIO:   Timestamp: 277602 ms
I (279161) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (279168) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (279176) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (279184) AUDIO:   DMA frame num (per desc): 1020
I (279190) AUDIO:   DMA total samples (effective): 4080
I (279196) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (279203) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (279209) AUDIO: âœ… I2S channels created (took 0 ms)
I (279215) AUDIO:   TX handle: 0x3ffca89c | RX handle: 0x3ffcb700
I (279222) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (279228) AUDIO:   Sample rate: 16000 Hz
I (279233) AUDIO:   MCLK: DISABLED
I (279237) AUDIO:   BCLK: GPIO14 (shared)
I (279242) AUDIO:   WS:   GPIO15 (shared)
I (279247) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (279253) AUDIO: âœ… TX channel configured (took 0 ms)
I (279258) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (279265) AUDIO:   Sample rate: 16000 Hz
I (279270) AUDIO:   MCLK: DISABLED
I (279274) AUDIO:   BCLK: GPIO14 (shared)
I (279279) AUDIO:   WS:   GPIO15 (shared)
I (279283) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (279289) AUDIO: âœ… RX channel configured (took 0 ms)
I (279295) AUDIO: [STEP 4/6] Enabling TX channel...
I (279300) AUDIO: âœ… TX channel enabled (took 0 ms)
I (279306) AUDIO: [STEP 5/6] Enabling RX channel...
I (279312) AUDIO: âœ… RX channel enabled (took 0 ms)
I (279317) AUDIO: [STEP 6/6] Hardware stabilization...
I (279323) AUDIO:   Phase 1: Initial settle (50ms)
I (279378) AUDIO:   Phase 2: DMA verification
I (279378) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (279379) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (279536) AUDIO: [DIAG] Post-init state:
I (279536) AUDIO:   Free heap: 3746772 bytes
I (279536) AUDIO:   Free internal RAM: 100231 bytes
I (279540) AUDIO:   Free DMA-capable: 79815 bytes
I (279546) AUDIO:   Free PSRAM: 3667124 bytes
I (279551) AUDIO:   Timestamp: 277996 ms
I (279555) AUDIO:   Total init time: 200 ms
I (279560) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279578) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (279584) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (279590) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (279599) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (279606) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279624) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279642) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (279648) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (279655) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (279662) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (279668) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279686) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (279692) STATE_MGR:   Free heap after: 3746772 bytes
I (279698) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279714) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (279720) STATE_MGR: â•‘ Total transition time: 895 ms
I (279726) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279742) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279759) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (279769) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (279785) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (279793) TTS: No pending audio to flush
I (279842) TTS: TTS decoder session reset for next audio stream
I (279842) TTS: âœ… TTS decoder flushed and reset for next session
I (279844) STT: Starting STT pipeline...
I (279849) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (279858) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (279866) STT:   Current time: 278311 ms
I (279868) STT: âœ… STT pipeline started
I (279870) STT:   Free heap: 3738220 bytes
I (279875) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (279870) STT: Audio streaming session activated
I (279894) STT: Connection stabilization delay (2000ms)...
I (280079) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (280079) STT:   âœ“ Audio driver initialized
I (280080) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (280187) STT:   Total stabilization: 300ms
I (280187) STT:   Timestamp: 278632 ms
I (280187) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (280192) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37f4 (with safety padding)
I (280200) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (280213) LED_CTRL: LED pattern -> 1
I (280216) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (280221) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (280226) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (280244) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (280251) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (280258) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (280292) MEM_MGR: â•‘ Internal RAM:
I (280297) MEM_MGR: â•‘   Free:              91059 bytes ( 88 KB)
I (280304) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (280310) MEM_MGR: â•‘   Fragmentation:     29%
I (280316) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (280334) MEM_MGR: â•‘ DMA-capable RAM:
I (280339) MEM_MGR: â•‘   Free:              70643 bytes ( 68 KB)
I (280346) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (280352) MEM_MGR: â•‘   Fragmentation:      8%
I (280358) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (280376) MEM_MGR: â•‘ PSRAM:
I (280380) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (280387) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (280394) MEM_MGR: â•‘   Fragmentation:      2%
I (280399) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (280417) MEM_MGR: â•‘ Total Heap:
I (280422) MEM_MGR: â•‘   Free:             3725440 bytes (3638 KB)
I (280429) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (280436) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (280454) MEM_MGR: â•‘ Memory Delta from Baseline:
I (280460) MEM_MGR: â•‘   Internal RAM:     -134120 bytes (-130 KB)
I (280467) MEM_MGR: â•‘   DMA-capable:      -134120 bytes (-130 KB)
I (280473) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (280480) MEM_MGR: â•‘   Total Heap:       -639308 bytes (-624 KB)
I (280487) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (280506) STATE_MGR: âœ… Voice mode transition complete
I (280512) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (280523) STT: [CAPTURE] âœ… Alive... 1000 reads completed (Free Heap: 3737064 bytes)
I (280527) STATE_MGR: STT pipeline reported start
I (281900) STT: Starting audio streaming to server...
I (281951) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (281952) WEBSOCKET: Server status: receiving
I (281956) WEBSOCKET: Server ACK: 2 chunks processed
I (282018) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (282019) WEBSOCKET: Server status: receiving
I (282024) WEBSOCKET: Server ACK: 4 chunks processed
W (282088) STT: Waiting for server ACK (sent: 6, acked: 4, unack: 2)
I (282122) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (282123) WEBSOCKET: Server status: receiving
I (282127) STT: Flow control: ACK received, resuming (sent=6, acked=6)
I (282134) WEBSOCKET: Server ACK: 6 chunks processed
I (282141) STT: ACK received, resuming (unack now: 0)
I (282190) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (282192) WEBSOCKET: Server status: receiving
I (282197) WEBSOCKET: Server ACK: 8 chunks processed
I (282253) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (282254) WEBSOCKET: Server status: receiving
I (282258) WEBSOCKET: Server ACK: 10 chunks processed
I (282314) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (282315) WEBSOCKET: Server status: receiving
I (282320) WEBSOCKET: Server ACK: 12 chunks processed
W (282425) STT: Waiting for server ACK (sent: 14, acked: 12, unack: 2)
I (282466) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (282467) WEBSOCKET: Server status: receiving
I (282472) STT: Flow control: ACK received, resuming (sent=14, acked=14)
I (282479) WEBSOCKET: Server ACK: 14 chunks processed
I (282486) STT: ACK received, resuming (unack now: 0)
I (282538) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (282539) WEBSOCKET: Server status: receiving
I (282544) WEBSOCKET: Server ACK: 16 chunks processed
I (282605) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (282607) WEBSOCKET: Server status: receiving
I (282611) WEBSOCKET: Server ACK: 18 chunks processed
I (282765) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (282766) WEBSOCKET: Server status: receiving
I (282771) WEBSOCKET: Server ACK: 20 chunks processed
I (283041) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (283042) WEBSOCKET: Server status: receiving
I (283047) WEBSOCKET: Server ACK: 22 chunks processed
I (283314) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (283315) WEBSOCKET: Server status: receiving
I (283320) WEBSOCKET: Server ACK: 24 chunks processed
I (283532) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (283533) WEBSOCKET: Server status: receiving
I (283538) WEBSOCKET: Server ACK: 26 chunks processed
I (283753) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (283754) WEBSOCKET: Server status: receiving
I (283758) WEBSOCKET: Server ACK: 28 chunks processed
I (284105) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (284106) WEBSOCKET: Server status: receiving
I (284111) WEBSOCKET: Server ACK: 30 chunks processed
I (284333) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (284334) WEBSOCKET: Server status: receiving
I (284339) WEBSOCKET: Server ACK: 32 chunks processed
I (284545) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 34, "bytes_received": 139264}
I (284546) WEBSOCKET: Server status: receiving
I (284550) WEBSOCKET: Server ACK: 34 chunks processed
I (284810) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 36, "bytes_received": 147456}
I (284811) WEBSOCKET: Server status: receiving
I (284816) WEBSOCKET: Server ACK: 36 chunks processed
I (285076) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 38, "bytes_received": 155648}
I (285077) WEBSOCKET: Server status: receiving
I (285082) WEBSOCKET: Server ACK: 38 chunks processed
I (285348) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 40, "bytes_received": 163840}
I (285349) WEBSOCKET: Server status: receiving
I (285353) WEBSOCKET: Server ACK: 40 chunks processed
I (285553) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (285553) BUTTON: Single click confirmed
I (285553) STATE_MGR: Single click - mode toggle requested
I (285560) STATE_MGR: User requested to end voice session (count: 16). Stopping STT and awaiting server response.
I (285571) STT: Stopping STT pipeline...
I (285575) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (285590) STT: Ring buffer drained and cleared successfully
I (285610) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 42, "bytes_received": 172032}
I (285611) WEBSOCKET: Server status: receiving
I (285616) WEBSOCKET: Server ACK: 42 chunks processed
I (285623) STT: Capture stopped and ring buffer drained; ending streaming loop
I (285629) STT: Sending EOS signal...
I (285634) WEBSOCKET: Sending EOS signal
I (285626) STT: Audio capture task stopped (captured 176128 bytes total)
I (285645) STT: Audio streaming session complete (streamed 172032 bytes in 42 chunks)
I (285675) STT: STT pipeline stopped
I (285675) LED_CTRL: LED pattern -> 4
I (285676) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (285691) STATE_MGR: STT pipeline reported stop
I (285691) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (285696) LED_CTRL: LED pattern -> 1
I (285734) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (285735) WEBSOCKET: Server status: processing
I (285738) WEBSOCKET: Server stage: transcription
I (285743) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (285751) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (286265) LED_CTRL: LED pattern -> 4
I (286265) STATE_MGR: Pipeline stage event: transcription
I (286266) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (286424) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what particular model lemon currently using", "has_image": false}
I (286429) WEBSOCKET: Server status: processing
I (286434) WEBSOCKET: Server stage: llm
I (286439) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (286446) WEBSOCKET: Entering LLM stage - continuing processing indication
I (286453) STATE_MGR: Pipeline stage event: llm
I (286796) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I'm not seeing any information about a lemon or its model."}
I (286801) WEBSOCKET: Server status: processing
I (286806) WEBSOCKET: Server stage: tts
I (286810) WEBSOCKET: Pipeline stage changed: llm -> tts
I (286816) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (286824) LED_CTRL: LED pattern -> 3
I (286828) TTS: ğŸµ Starting TTS decoder...
I (286833) TTS: Initializing TTS decoder...
W (286838) TTS: TTS decoder already initialized
I (286885) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (286886) TTS: ğŸµ TTS playback task started on Core 1
I (286886) STATE_MGR: TTS playback start event received
I (286886) TTS: âœ… TTS decoder started successfully
I (286896) LED_CTRL: LED pattern -> 1
I (286896) TTS: âœ… TTS playback task registered with watchdog
I (286913) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (286916) STATE_MGR: Pipeline stage event: tts
I (286935) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 285380 ms, bytes: 4096)
I (286935) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (286943) TTS: Chunk #2 first 12 bytes: 52 49 46 46 BA EB 01 00 57 41 56 45
I (286951) TTS: New audio session detected - resetting chunk counter
I (286960) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (286966) STATE_MGR: TTS playback start event received
I (286972) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (286981) TTS: Chunk #2 first 12 bytes: BD 03 0C 02 0C FD CD F6 9D F0 18 ED
I (286995) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (286998) TTS: Chunk #3 first 12 bytes: 06 28 E2 25 07 23 9F 1F 75 1C A3 19
I (287014) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (287015) TTS: Chunk #4 first 12 bytes: 02 EF 44 EC C0 E9 EF E5 C4 E4 05 E7
I (287024) TTS: âœ… WAV header parsed successfully
I (287028) TTS: === WAV File Info ===
I (287030) TTS: Received audio chunk #5: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (287032) TTS: Sample Rate: 16000 Hz
I (287041) TTS: Chunk #5 first 12 bytes: 90 01 D9 FC 7A 02 13 00 A0 FD B5 00
I (287046) TTS: Channels: 1
I (287057) TTS: Bits per Sample: 16
I (287060) TTS: Received audio chunk #6: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (287061) TTS: Audio Format: 1 (PCM)
I (287075) TTS: Declared Data Size: 125846 bytes
I (287077) TTS: Received audio chunk #7: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (287080) TTS: Block Align: 2
I (287093) TTS: Byte Rate: 32000
I (287096) TTS: Received audio chunk #8: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (287097) TTS: ====================
I (287110) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=32768)
I (287115) TTS: Received audio chunk #9: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (287118) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (287134) TTS: Received audio chunk #10: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (287153) TTS: Received audio chunk #11: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (287163) TTS: Received audio chunk #12: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (287172) TTS: Received audio chunk #13: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (287182) TTS: Received audio chunk #14: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (287190) TTS: Received audio chunk #15: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (287199) TTS: Received audio chunk #16: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (287210) TTS: Received audio chunk #17: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (287222) TTS: Received audio chunk #18: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (287232) TTS: Received audio chunk #19: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (287240) TTS: Received audio chunk #20: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (287249) TTS: Received audio chunk #21: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (287265) TTS: Received audio chunk #22: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (287283) TTS: Received audio chunk #23: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (287327) TTS: Received audio chunk #24: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (287336) TTS: Received audio chunk #25: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (287345) TTS: Received audio chunk #26: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (287355) TTS: Received audio chunk #27: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (287363) TTS: Received audio chunk #28: 1436 bytes (buffer: 98304/327680 used, 229375 free)
I (287369) TTS: Received audio chunk #29: 2660 bytes (buffer: 99740/327680 used, 227939 free)
I (287380) TTS: Received audio chunk #30: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (287391) TTS: Received audio chunk #31: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (287406) TTS: Received audio chunk #32: 3010 bytes (buffer: 106496/327680 used, 221183 free)
I (287523) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (287619) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (287620) TTS: TTS end-of-stream signaled (bytes_received=125890, header_parsed=1)
I (287625) TTS: ğŸµ Playback task will drain 105410 bytes of buffered audio
I (287633) TTS: Waiting for playback completion: 105410 bytes buffered, calculated timeout: 5294 ms
I (287650) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (287778) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (287905) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (288032) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (288160) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (288287) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (288415) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (288542) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (288670) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (288797) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (288925) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (289052) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (289180) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (289307) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (289435) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (289562) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (289690) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (289817) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (289945) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (290072) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (290200) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (290327) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (290455) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (290582) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (290710) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (290837) TTS: âœ… All audio data received (125890 bytes, expected 125846 + 44 header)
I (291001) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (291001) TTS: ğŸµ TTS playback task exiting (played 125846 bytes, result: ESP_OK)
I (291006) STATE_MGR: TTS playback finished successfully
I (291006) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (291006) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (291006) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291006) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (291048) TTS: TTS decoder session reset for next audio stream
I (291054) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291061) TTS: Received audio chunk #33: 0 bytes (buffer: 0/327680 used, 327679 free)
I (291079) MEM_MGR: â•‘ Internal RAM:
I (291088) TTS: New audio session detected - resetting chunk counter
I (291092) MEM_MGR: â•‘   Free:              86359 bytes ( 84 KB)
I (291106) MEM_MGR: â•‘   Largest Block:     61440 bytes ( 60 KB)
I (291099) WEBSOCKET: ğŸµ Audio session complete: 125890 bytes in 32 messages
I (291112) MEM_MGR: â•‘   Fragmentation:     29%
I (291124) WEBSOCKET: Received text message: {"status": "complete"}
I (291126) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291133) WEBSOCKET: Server status: complete
I (291151) MEM_MGR: â•‘ DMA-capable RAM:
I (291156) WEBSOCKET: Pipeline stage changed: tts -> complete
I (291161) MEM_MGR: â•‘   Free:              65943 bytes ( 64 KB)
I (291167) WEBSOCKET: Exiting TTS stage (transition to complete)
I (291174) MEM_MGR: â•‘   Largest Block:     61440 bytes ( 60 KB)
I (291187) MEM_MGR: â•‘   Fragmentation:      7%
I (291193) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291211) MEM_MGR: â•‘ PSRAM:
I (291215) MEM_MGR: â•‘   Free:             3663044 bytes (3577 KB)
I (291222) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (291229) MEM_MGR: â•‘   Fragmentation:      2%
I (291234) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291253) MEM_MGR: â•‘ Total Heap:
I (291257) MEM_MGR: â•‘   Free:             3728820 bytes (3641 KB)
I (291264) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (291271) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291281) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (291289) MEM_MGR: â•‘ Memory Delta from Baseline:
I (291303) MEM_MGR: â•‘   Internal RAM:     -138820 bytes (-135 KB)
I (291310) MEM_MGR: â•‘   DMA-capable:      -138820 bytes (-135 KB)
I (291316) MEM_MGR: â•‘   PSRAM:            -528972 bytes (-516 KB)
I (291323) MEM_MGR: â•‘   Total Heap:       -635928 bytes (-621 KB)
I (291330) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291349) STATE_MGR: Stopping voice mode components...
I (291355) STT: Stopping STT pipeline...
W (291359) STT: STT pipeline already stopped
I (291364) STATE_MGR: Voice pipeline reported COMPLETE
I (291370) STATE_MGR: TTS playback already drained - no pending audio
I (291377) STATE_MGR: Flushing and resetting TTS decoder for next session
I (291385) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (291393) TTS: Flushing pending audio before reset (~0 bytes)
I (291054) TTS: âœ… TTS playback finished event dispatched to state manager
I (291407) TTS:   âœ“ DMA buffer freed from PSRAM
I (291412) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (291420) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (291449) TTS: TTS playback task handle is NULL - task already exited (after 1 checks)
I (291492) TTS: TTS decoder session reset for next audio stream
I (291492) TTS: âœ… TTS decoder flushed and reset for next session
I (291694) TTS: â¹ï¸ Stopping TTS decoder...
W (291694) TTS: TTS decoder already stopped.
I (291839) STATE_MGR: Acquiring I2S mutex...
I (291839) STATE_MGR: Deinitializing audio drivers...
I (291839) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291857) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (291865) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291883) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (291890) AUDIO: âœ… RX channel disabled (took 0 ms)
I (291895) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (291902) AUDIO: âœ… TX channel disabled (took 0 ms)
I (291908) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (291964) AUDIO: [STEP 4/5] Deleting RX channel...
I (291965) AUDIO: âœ… RX channel deleted (took 0 ms)
I (291965) AUDIO: [STEP 5/5] Deleting TX channel...
I (291970) AUDIO: âœ… TX channel deleted (took 0 ms)
I (291976) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (292033) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292040) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (292047) AUDIO: â•‘ Camera Can Now Initialize
I (292052) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292120) STATE_MGR: Allowing memory stabilization (100ms)...
I (292220) STATE_MGR: Camera will be initialized on-demand during capture
I (292220) STATE_MGR: I2S mutex released
I (292221) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292240) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (292247) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292265) MEM_MGR: â•‘ Internal RAM:
I (292270) MEM_MGR: â•‘   Free:              86359 bytes ( 84 KB)
I (292276) MEM_MGR: â•‘   Largest Block:     61440 bytes ( 60 KB)
I (292283) MEM_MGR: â•‘   Fragmentation:     29%
I (292288) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292307) MEM_MGR: â•‘ DMA-capable RAM:
I (292311) MEM_MGR: â•‘   Free:              65943 bytes ( 64 KB)
I (292318) MEM_MGR: â•‘   Largest Block:     61440 bytes ( 60 KB)
I (292325) MEM_MGR: â•‘   Fragmentation:      7%
I (292330) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292349) MEM_MGR: â•‘ PSRAM:
I (292352) MEM_MGR: â•‘   Free:             3663044 bytes (3577 KB)
I (292359) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (292366) MEM_MGR: â•‘   Fragmentation:      2%
I (292372) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292390) MEM_MGR: â•‘ Total Heap:
I (292394) MEM_MGR: â•‘   Free:             3728820 bytes (3641 KB)
I (292401) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (292408) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292427) MEM_MGR: â•‘ Memory Delta from Baseline:
I (292432) MEM_MGR: â•‘   Internal RAM:     -138820 bytes (-135 KB)
I (292439) MEM_MGR: â•‘   DMA-capable:      -138820 bytes (-135 KB)
I (292446) MEM_MGR: â•‘   PSRAM:            -528972 bytes (-516 KB)
I (292453) MEM_MGR: â•‘   Total Heap:       -635928 bytes (-621 KB)
I (292460) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292479) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (292488) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292506) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (292513) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292531) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292549) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (292557) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292575) AUDIO: [DIAG] Pre-init state:
I (292579) AUDIO:   Free heap: 3772724 bytes
I (292584) AUDIO:   Free internal RAM: 126183 bytes
I (292590) AUDIO:   Free DMA-capable: 105767 bytes
I (292595) AUDIO:   Free PSRAM: 3667124 bytes
I (292600) AUDIO:   Timestamp: 291046 ms
I (292605) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (292612) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (292620) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (292628) AUDIO:   DMA frame num (per desc): 1020
I (292634) AUDIO:   DMA total samples (effective): 4080
I (292640) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (292647) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (292653) AUDIO: âœ… I2S channels created (took 0 ms)
I (292659) AUDIO:   TX handle: 0x3ffca89c | RX handle: 0x3ffcb700
I (292666) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (292672) AUDIO:   Sample rate: 16000 Hz
I (292677) AUDIO:   MCLK: DISABLED
I (292681) AUDIO:   BCLK: GPIO14 (shared)
I (292686) AUDIO:   WS:   GPIO15 (shared)
I (292690) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (292697) AUDIO: âœ… TX channel configured (took 1 ms)
I (292702) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (292709) AUDIO:   Sample rate: 16000 Hz
I (292714) AUDIO:   MCLK: DISABLED
I (292718) AUDIO:   BCLK: GPIO14 (shared)
I (292722) AUDIO:   WS:   GPIO15 (shared)
I (292727) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (292733) AUDIO: âœ… RX channel configured (took 0 ms)
I (292739) AUDIO: [STEP 4/6] Enabling TX channel...
I (292744) AUDIO: âœ… TX channel enabled (took 0 ms)
I (292750) AUDIO: [STEP 5/6] Enabling RX channel...
I (292755) AUDIO: âœ… RX channel enabled (took 0 ms)
I (292761) AUDIO: [STEP 6/6] Hardware stabilization...
I (292767) AUDIO:   Phase 1: Initial settle (50ms)
I (292822) AUDIO:   Phase 2: DMA verification
I (292822) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (292823) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (292980) AUDIO: [DIAG] Post-init state:
I (292981) AUDIO:   Free heap: 3745212 bytes
I (292981) AUDIO:   Free internal RAM: 98671 bytes
I (292984) AUDIO:   Free DMA-capable: 79815 bytes
I (292990) AUDIO:   Free PSRAM: 3667124 bytes
I (292995) AUDIO:   Timestamp: 291441 ms
I (292999) AUDIO:   Total init time: 201 ms
I (293004) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293022) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (293029) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (293034) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (293043) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (293050) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293068) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293086) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (293092) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (293099) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (293106) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (293112) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293413) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293420) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (293428) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293446) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (293453) AUDIO: âœ… RX channel disabled (took 0 ms)
I (293459) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (293465) AUDIO: âœ… TX channel disabled (took 0 ms)
I (293471) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (293528) AUDIO: [STEP 4/5] Deleting RX channel...
I (293529) AUDIO: âœ… RX channel deleted (took 0 ms)
I (293529) AUDIO: [STEP 5/5] Deleting TX channel...
I (293534) AUDIO: âœ… TX channel deleted (took 0 ms)
I (293540) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (293597) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293604) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (293611) AUDIO: â•‘ Camera Can Now Initialize
I (293616) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293634) LED_CTRL: LED pattern -> 3
I (293638) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (293656) STATE_MGR: Pipeline stage event: complete
I (302920) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (302920) STATE_MGR: Double-click detected - triggering capture sequence
I (302923) STATE_MGR: Starting camera capture sequence
I (302929) LED_CTRL: LED pattern -> 6
I (302934) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (302952) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (302959) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (302977) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (302995) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (303002) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (303020) AUDIO: [DIAG] Pre-init state:
I (303025) AUDIO:   Free heap: 3772724 bytes
I (303030) AUDIO:   Free internal RAM: 126183 bytes
I (303035) AUDIO:   Free DMA-capable: 105767 bytes
I (303041) AUDIO:   Free PSRAM: 3667124 bytes
I (303046) AUDIO:   Timestamp: 301492 ms
I (303051) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (303058) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (303066) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (303074) AUDIO:   DMA frame num (per desc): 1020
I (303079) AUDIO:   DMA total samples (effective): 4080
I (303085) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (303092) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (303099) AUDIO: âœ… I2S channels created (took 0 ms)
I (303104) AUDIO:   TX handle: 0x3ffca89c | RX handle: 0x3ffcb700
I (303111) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (303118) AUDIO:   Sample rate: 16000 Hz
I (303123) AUDIO:   MCLK: DISABLED
I (303127) AUDIO:   BCLK: GPIO14 (shared)
I (303131) AUDIO:   WS:   GPIO15 (shared)
I (303136) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (303143) AUDIO: âœ… TX channel configured (took 0 ms)
I (303148) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (303154) AUDIO:   Sample rate: 16000 Hz
I (303159) AUDIO:   MCLK: DISABLED
I (303163) AUDIO:   BCLK: GPIO14 (shared)
I (303168) AUDIO:   WS:   GPIO15 (shared)
I (303173) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (303179) AUDIO: âœ… RX channel configured (took 0 ms)
I (303184) AUDIO: [STEP 4/6] Enabling TX channel...
I (303190) AUDIO: âœ… TX channel enabled (took 0 ms)
I (303195) AUDIO: [STEP 5/6] Enabling RX channel...
I (303201) AUDIO: âœ… RX channel enabled (took 0 ms)
I (303207) AUDIO: [STEP 6/6] Hardware stabilization...
I (303212) AUDIO:   Phase 1: Initial settle (50ms)
I (303268) AUDIO:   Phase 2: DMA verification
I (303268) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (303269) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (303426) AUDIO: [DIAG] Post-init state:
I (303426) AUDIO:   Free heap: 3746772 bytes
I (303426) AUDIO:   Free internal RAM: 100231 bytes
I (303430) AUDIO:   Free DMA-capable: 79815 bytes
I (303436) AUDIO:   Free PSRAM: 3667124 bytes
I (303441) AUDIO:   Timestamp: 301886 ms
I (303445) AUDIO:   Total init time: 200 ms
I (303450) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (303468) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (303474) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (303480) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (303489) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (303496) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (303514) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (303532) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (303538) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (303545) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (303552) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (303558) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (303908) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (303915) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (303923) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (303941) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (303948) AUDIO: âœ… RX channel disabled (took 0 ms)
I (303954) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (303960) AUDIO: âœ… TX channel disabled (took 0 ms)
I (303966) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (304023) AUDIO: [STEP 4/5] Deleting RX channel...
I (304024) AUDIO: âœ… RX channel deleted (took 0 ms)
I (304024) AUDIO: [STEP 5/5] Deleting TX channel...
I (304029) AUDIO: âœ… TX channel deleted (took 0 ms)
I (304035) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (304092) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (304099) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (304106) AUDIO: â•‘ Camera Can Now Initialize
I (304111) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (304129) STATE_MGR: Capturing frame from camera
I (304134) CAMERA: Initializing camera...
I (304139) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (304149) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (304157) cam_hal: cam init ok
W (304161) ledc: GPIO 0 is not usable, maybe conflict with others
I (304167) sccb-ng: pin_sda 26 pin_scl 27
I (304172) sccb-ng: sccb_i2c_port=1
I (304177) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
E (304219) camera: Detected camera not supported.
E (304219) camera: Camera probe failed with error 0x106(ESP_ERR_NOT_SUPPORTED)
E (304222) CAMERA: Camera init failed: ESP_ERR_NOT_SUPPORTED
E (304228) STATE_MGR: Failed to initialize camera for capture: ESP_ERR_NOT_SUPPORTED
I (304236) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (304254) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (304261) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (304279) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (304297) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (304305) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (304323) AUDIO: [DIAG] Pre-init state:
I (304327) AUDIO:   Free heap: 3772724 bytes
I (304332) AUDIO:   Free internal RAM: 126183 bytes
I (304338) AUDIO:   Free DMA-capable: 105767 bytes
I (304343) AUDIO:   Free PSRAM: 3667124 bytes
I (304348) AUDIO:   Timestamp: 302794 ms
I (304353) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (304360) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (304368) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (304376) AUDIO:   DMA frame num (per desc): 1020
I (304382) AUDIO:   DMA total samples (effective): 4080
I (304388) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (304395) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (304401) AUDIO: âœ… I2S channels created (took 0 ms)
I (304407) AUDIO:   TX handle: 0x3ffca89c | RX handle: 0x3ffcb700
I (304414) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (304420) AUDIO:   Sample rate: 16000 Hz
I (304425) AUDIO:   MCLK: DISABLED
I (304429) AUDIO:   BCLK: GPIO14 (shared)
I (304434) AUDIO:   WS:   GPIO15 (shared)
I (304438) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (304445) AUDIO: âœ… TX channel configured (took 0 ms)
I (304450) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (304457) AUDIO:   Sample rate: 16000 Hz
I (304462) AUDIO:   MCLK: DISABLED
I (304466) AUDIO:   BCLK: GPIO14 (shared)
I (304470) AUDIO:   WS:   GPIO15 (shared)
I (304475) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (304481) AUDIO: âœ… RX channel configured (took 0 ms)
I (304487) AUDIO: [STEP 4/6] Enabling TX channel...
I (304492) AUDIO: âœ… TX channel enabled (took 0 ms)
I (304498) AUDIO: [STEP 5/6] Enabling RX channel...
I (304503) AUDIO: âœ… RX channel enabled (took 0 ms)
I (304509) AUDIO: [STEP 6/6] Hardware stabilization...
I (304515) AUDIO:   Phase 1: Initial settle (50ms)
I (304570) AUDIO:   Phase 2: DMA verification
I (304570) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (304571) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (304728) AUDIO: [DIAG] Post-init state:
I (304728) AUDIO:   Free heap: 3746772 bytes
I (304728) AUDIO:   Free internal RAM: 100231 bytes
I (304732) AUDIO:   Free DMA-capable: 79815 bytes
I (304738) AUDIO:   Free PSRAM: 3667124 bytes
I (304743) AUDIO:   Timestamp: 303188 ms
I (304747) AUDIO:   Total init time: 200 ms
I (304752) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (304770) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (304776) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (304782) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (304791) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (304798) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (304816) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (304834) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (304840) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (304847) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (304854) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (304860) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (306246) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (306253) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (306261) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (306279) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (306286) AUDIO: âœ… RX channel disabled (took 0 ms)
I (306292) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (306298) AUDIO: âœ… TX channel disabled (took 0 ms)
I (306304) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (306361) AUDIO: [STEP 4/5] Deleting RX channel...
I (306362) AUDIO: âœ… RX channel deleted (took 0 ms)
I (306362) AUDIO: [STEP 5/5] Deleting TX channel...
I (306367) AUDIO: âœ… TX channel deleted (took 0 ms)
I (306373) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (306430) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (306437) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (306444) AUDIO: â•‘ Camera Can Now Initialize
I (306449) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (306467) LED_CTRL: LED pattern -> 3
E (306471) STATE_MGR: Camera capture sequence failed (ESP_ERR_NOT_SUPPORTED)
I (306479) LED_CTRL: LED pattern -> 5
I (308483) LED_CTRL: LED pattern -> 3
I (315760) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (315760) STATE_MGR: Double-click detected - triggering capture sequence
I (315764) STATE_MGR: Starting camera capture sequence
I (315769) LED_CTRL: LED pattern -> 6
I (315774) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (315792) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (315799) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (315817) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (315835) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (315842) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (315860) AUDIO: [DIAG] Pre-init state:
I (315865) AUDIO:   Free heap: 3772724 bytes
I (315870) AUDIO:   Free internal RAM: 126183 bytes
I (315876) AUDIO:   Free DMA-capable: 105767 bytes
I (315881) AUDIO:   Free PSRAM: 3667124 bytes
I (315886) AUDIO:   Timestamp: 314332 ms
I (315891) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (315898) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (315906) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (315914) AUDIO:   DMA frame num (per desc): 1020
I (315919) AUDIO:   DMA total samples (effective): 4080
I (315925) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (315932) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (315939) AUDIO: âœ… I2S channels created (took 0 ms)
I (315944) AUDIO:   TX handle: 0x3ffca89c | RX handle: 0x3ffcb700
I (315951) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (315958) AUDIO:   Sample rate: 16000 Hz
I (315963) AUDIO:   MCLK: DISABLED
I (315967) AUDIO:   BCLK: GPIO14 (shared)
I (315971) AUDIO:   WS:   GPIO15 (shared)
I (315976) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (315983) AUDIO: âœ… TX channel configured (took 1 ms)
I (315988) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (315995) AUDIO:   Sample rate: 16000 Hz
I (315999) AUDIO:   MCLK: DISABLED
I (316003) AUDIO:   BCLK: GPIO14 (shared)
I (316008) AUDIO:   WS:   GPIO15 (shared)
I (316013) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (316019) AUDIO: âœ… RX channel configured (took 0 ms)
I (316024) AUDIO: [STEP 4/6] Enabling TX channel...
I (316030) AUDIO: âœ… TX channel enabled (took 0 ms)
I (316035) AUDIO: [STEP 5/6] Enabling RX channel...
I (316041) AUDIO: âœ… RX channel enabled (took 0 ms)
I (316047) AUDIO: [STEP 6/6] Hardware stabilization...
I (316052) AUDIO:   Phase 1: Initial settle (50ms)
I (316108) AUDIO:   Phase 2: DMA verification
I (316108) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (316109) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (316266) AUDIO: [DIAG] Post-init state:
I (316266) AUDIO:   Free heap: 3746772 bytes
I (316266) AUDIO:   Free internal RAM: 100231 bytes
I (316270) AUDIO:   Free DMA-capable: 79815 bytes
I (316276) AUDIO:   Free PSRAM: 3667124 bytes
I (316281) AUDIO:   Timestamp: 314726 ms
I (316285) AUDIO:   Total init time: 201 ms
I (316290) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (316308) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (316314) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (316320) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (316329) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (316336) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (316354) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (316372) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (316378) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (316385) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (316392) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (316398) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (316748) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (316755) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (316763) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (316781) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (316788) AUDIO: âœ… RX channel disabled (took 0 ms)
I (316794) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (316800) AUDIO: âœ… TX channel disabled (took 0 ms)
I (316806) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (316863) AUDIO: [STEP 4/5] Deleting RX channel...
I (316864) AUDIO: âœ… RX channel deleted (took 0 ms)
I (316864) AUDIO: [STEP 5/5] Deleting TX channel...
I (316869) AUDIO: âœ… TX channel deleted (took 0 ms)
I (316875) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (316932) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (316939) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (316946) AUDIO: â•‘ Camera Can Now Initialize
I (316951) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (316969) STATE_MGR: Capturing frame from camera
I (316974) CAMERA: Initializing camera...
I (316979) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (316989) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (316997) cam_hal: cam init ok
W (317001) ledc: GPIO 0 is not usable, maybe conflict with others
I (317007) sccb-ng: pin_sda 26 pin_scl 27
I (317012) sccb-ng: sccb_i2c_port=1
I (317017) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
E (317059) camera: Detected camera not supported.
E (317059) camera: Camera probe failed with error 0x106(ESP_ERR_NOT_SUPPORTED)
E (317062) CAMERA: Camera init failed: ESP_ERR_NOT_SUPPORTED
E (317068) STATE_MGR: Failed to initialize camera for capture: ESP_ERR_NOT_SUPPORTED
I (317076) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (317094) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (317101) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (317119) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (317137) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (317145) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (317163) AUDIO: [DIAG] Pre-init state:
I (317167) AUDIO:   Free heap: 3772724 bytes
I (317172) AUDIO:   Free internal RAM: 126183 bytes
I (317178) AUDIO:   Free DMA-capable: 105767 bytes
I (317183) AUDIO:   Free PSRAM: 3667124 bytes
I (317188) AUDIO:   Timestamp: 315634 ms
I (317193) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (317200) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (317208) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (317216) AUDIO:   DMA frame num (per desc): 1020
I (317222) AUDIO:   DMA total samples (effective): 4080
I (317228) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (317235) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (317241) AUDIO: âœ… I2S channels created (took 0 ms)
I (317247) AUDIO:   TX handle: 0x3ffca89c | RX handle: 0x3ffcb700
I (317254) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (317260) AUDIO:   Sample rate: 16000 Hz
I (317265) AUDIO:   MCLK: DISABLED
I (317269) AUDIO:   BCLK: GPIO14 (shared)
I (317274) AUDIO:   WS:   GPIO15 (shared)
I (317278) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (317285) AUDIO: âœ… TX channel configured (took 0 ms)
I (317290) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (317297) AUDIO:   Sample rate: 16000 Hz
I (317302) AUDIO:   MCLK: DISABLED
I (317306) AUDIO:   BCLK: GPIO14 (shared)
I (317310) AUDIO:   WS:   GPIO15 (shared)
I (317315) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (317321) AUDIO: âœ… RX channel configured (took 0 ms)
I (317327) AUDIO: [STEP 4/6] Enabling TX channel...
I (317332) AUDIO: âœ… TX channel enabled (took 0 ms)
I (317338) AUDIO: [STEP 5/6] Enabling RX channel...
I (317343) AUDIO: âœ… RX channel enabled (took 0 ms)
I (317349) AUDIO: [STEP 6/6] Hardware stabilization...
I (317355) AUDIO:   Phase 1: Initial settle (50ms)
I (317410) AUDIO:   Phase 2: DMA verification
I (317410) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (317411) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (317568) AUDIO: [DIAG] Post-init state:
I (317568) AUDIO:   Free heap: 3746772 bytes
I (317568) AUDIO:   Free internal RAM: 100231 bytes
I (317572) AUDIO:   Free DMA-capable: 79815 bytes
I (317578) AUDIO:   Free PSRAM: 3667124 bytes
I (317583) AUDIO:   Timestamp: 316028 ms
I (317587) AUDIO:   Total init time: 200 ms
I (317592) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (317610) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (317616) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (317622) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (317631) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (317638) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (317656) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (317674) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (317680) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (317687) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (317694) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (317700) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (319086) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (319093) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (319101) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (319119) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (319126) AUDIO: âœ… RX channel disabled (took 0 ms)
I (319132) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (319138) AUDIO: âœ… TX channel disabled (took 0 ms)
I (319144) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (319201) AUDIO: [STEP 4/5] Deleting RX channel...
I (319202) AUDIO: âœ… RX channel deleted (took 0 ms)
I (319202) AUDIO: [STEP 5/5] Deleting TX channel...
I (319207) AUDIO: âœ… TX channel deleted (took 0 ms)
I (319213) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (319270) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (319277) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (319284) AUDIO: â•‘ Camera Can Now Initialize
I (319289) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (319307) LED_CTRL: LED pattern -> 3
E (319311) STATE_MGR: Camera capture sequence failed (ESP_ERR_NOT_SUPPORTED)
I (319319) LED_CTRL: LED pattern -> 5
I (321323) LED_CTRL: LED pattern -> 3
I (327881) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (327881) BUTTON: Single click confirmed
I (327881) STATE_MGR: Single click - mode toggle requested
I (327888) STATE_MGR: Switching: Camera â†’ Voice (count: 17)
I (327944) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (327944) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (327957) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (327964) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (327983) MEM_MGR: â•‘ Internal RAM:
I (327987) MEM_MGR: â•‘   Free:             126183 bytes (123 KB)
I (327994) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (328001) MEM_MGR: â•‘   Fragmentation:     26%
I (328006) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328025) MEM_MGR: â•‘ DMA-capable RAM:
I (328029) MEM_MGR: â•‘   Free:             105767 bytes (103 KB)
I (328036) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (328043) MEM_MGR: â•‘   Fragmentation:     11%
I (328048) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328067) MEM_MGR: â•‘ PSRAM:
I (328070) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (328077) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (328084) MEM_MGR: â•‘   Fragmentation:      2%
I (328089) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328108) MEM_MGR: â•‘ Total Heap:
I (328112) MEM_MGR: â•‘   Free:             3772724 bytes (3684 KB)
I (328119) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (328126) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328144) MEM_MGR: â•‘ Memory Delta from Baseline:
I (328150) MEM_MGR: â•‘   Internal RAM:      -98996 bytes ( -96 KB)
I (328157) MEM_MGR: â•‘   DMA-capable:       -98996 bytes ( -96 KB)
I (328164) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (328171) MEM_MGR: â•‘   Total Heap:       -592024 bytes (-578 KB)
I (328178) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328196) STATE_MGR: Stopping camera...
I (328201) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328217) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (328224) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328240) STATE_MGR:   Timeout: 5000 ms
I (328245) STATE_MGR:   Timestamp: 326691 ms
I (328250) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (328256) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328272) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (328279) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328295) STATE_MGR:   Free heap before: 3772724 bytes
I (328301) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (328307) CAMERA: Deinitializing camera...
I (328312) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (328318) STATE_MGR:   Free heap after: 3772724 bytes
I (328324) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (328330) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328346) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (328353) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328369) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (328477) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (328577) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (328627) STATE_MGR:   âœ“ Total stabilization: 250ms
I (328627) STATE_MGR:   Timestamp: 327073 ms
I (328627) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328643) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (328650) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328666) STATE_MGR:   Free heap before: 3772724 bytes
I (328672) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328690) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (328697) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328715) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328734) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (328741) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (328759) AUDIO: [DIAG] Pre-init state:
I (328764) AUDIO:   Free heap: 3772724 bytes
I (328769) AUDIO:   Free internal RAM: 126183 bytes
I (328774) AUDIO:   Free DMA-capable: 105767 bytes
I (328780) AUDIO:   Free PSRAM: 3667124 bytes
I (328785) AUDIO:   Timestamp: 327230 ms
I (328789) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (328796) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (328804) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (328812) AUDIO:   DMA frame num (per desc): 1020
I (328818) AUDIO:   DMA total samples (effective): 4080
I (328824) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (328831) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (328838) AUDIO: âœ… I2S channels created (took 0 ms)
I (328843) AUDIO:   TX handle: 0x3ffca89c | RX handle: 0x3ffcb700
I (328850) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (328856) AUDIO:   Sample rate: 16000 Hz
I (328861) AUDIO:   MCLK: DISABLED
I (328865) AUDIO:   BCLK: GPIO14 (shared)
I (328870) AUDIO:   WS:   GPIO15 (shared)
I (328875) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (328881) AUDIO: âœ… TX channel configured (took 1 ms)
I (328886) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (328893) AUDIO:   Sample rate: 16000 Hz
I (328898) AUDIO:   MCLK: DISABLED
I (328902) AUDIO:   BCLK: GPIO14 (shared)
I (328907) AUDIO:   WS:   GPIO15 (shared)
I (328911) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (328917) AUDIO: âœ… RX channel configured (took 0 ms)
I (328923) AUDIO: [STEP 4/6] Enabling TX channel...
I (328928) AUDIO: âœ… TX channel enabled (took 0 ms)
I (328934) AUDIO: [STEP 5/6] Enabling RX channel...
I (328940) AUDIO: âœ… RX channel enabled (took 0 ms)
I (328945) AUDIO: [STEP 6/6] Hardware stabilization...
I (328951) AUDIO:   Phase 1: Initial settle (50ms)
I (329006) AUDIO:   Phase 2: DMA verification
I (329006) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (329007) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (329164) AUDIO: [DIAG] Post-init state:
I (329164) AUDIO:   Free heap: 3746772 bytes
I (329164) AUDIO:   Free internal RAM: 100231 bytes
I (329168) AUDIO:   Free DMA-capable: 79815 bytes
I (329174) AUDIO:   Free PSRAM: 3667124 bytes
I (329179) AUDIO:   Timestamp: 327624 ms
I (329183) AUDIO:   Total init time: 201 ms
I (329188) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (329206) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (329212) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (329218) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (329227) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (329234) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (329252) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (329270) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (329276) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (329283) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (329290) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (329296) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (329314) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (329320) STATE_MGR:   Free heap after: 3746772 bytes
I (329326) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (329342) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (329348) STATE_MGR: â•‘ Total transition time: 895 ms
I (329354) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (329370) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (329387) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (329397) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (329413) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (329421) TTS: No pending audio to flush
I (329468) TTS: TTS decoder session reset for next audio stream
I (329468) TTS: âœ… TTS decoder flushed and reset for next session
I (329470) STT: Starting STT pipeline...
I (329475) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (329484) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (329491) STT:   Current time: 327937 ms
I (329494) STT: âœ… STT pipeline started
I (329496) STT:   Free heap: 3738220 bytes
I (329500) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (329496) STT: Audio streaming session activated
I (329520) STT: Connection stabilization delay (2000ms)...
I (329707) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (329707) STT:   âœ“ Audio driver initialized
I (329708) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (329815) STT:   Total stabilization: 300ms
I (329815) STT:   Timestamp: 328260 ms
I (329815) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (329820) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37f4 (with safety padding)
I (329828) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (329839) LED_CTRL: LED pattern -> 1
I (329844) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (329849) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (329854) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (329872) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (329879) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (329886) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (329920) MEM_MGR: â•‘ Internal RAM:
I (329925) MEM_MGR: â•‘   Free:             126183 bytes (123 KB)
I (329932) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (329938) MEM_MGR: â•‘   Fragmentation:     26%
I (329944) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (329962) MEM_MGR: â•‘ DMA-capable RAM:
I (329967) MEM_MGR: â•‘   Free:             105767 bytes (103 KB)
I (329974) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (329980) MEM_MGR: â•‘   Fragmentation:     11%
I (329986) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (330004) MEM_MGR: â•‘ PSRAM:
I (330008) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (330015) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (330022) MEM_MGR: â•‘   Fragmentation:      2%
I (330027) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (330045) MEM_MGR: â•‘ Total Heap:
I (330050) MEM_MGR: â•‘   Free:             3772724 bytes (3684 KB)
I (330057) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (330064) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (330082) MEM_MGR: â•‘ Memory Delta from Baseline:
I (330088) MEM_MGR: â•‘   Internal RAM:      -98996 bytes ( -96 KB)
I (330095) MEM_MGR: â•‘   DMA-capable:       -98996 bytes ( -96 KB)
I (330101) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (330108) MEM_MGR: â•‘   Total Heap:       -592024 bytes (-578 KB)
I (330115) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (330134) STATE_MGR: âœ… Voice mode transition complete
I (330140) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (330155) STATE_MGR: STT pipeline reported start
I (331526) STT: Starting audio streaming to server...
I (331641) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (331642) WEBSOCKET: Server status: receiving
I (331646) WEBSOCKET: Server ACK: 2 chunks processed
W (331712) STT: Waiting for server ACK (sent: 4, acked: 2, unack: 2)
I (331749) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (331750) WEBSOCKET: Server status: receiving
I (331755) STT: Flow control: ACK received, resuming (sent=4, acked=4)
I (331762) WEBSOCKET: Server ACK: 4 chunks processed
I (331769) STT: ACK received, resuming (unack now: 0)
I (331826) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (331827) WEBSOCKET: Server status: receiving
I (331831) WEBSOCKET: Server ACK: 6 chunks processed
I (331886) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (331887) WEBSOCKET: Server status: receiving
I (331892) WEBSOCKET: Server ACK: 8 chunks processed
I (331973) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (331974) WEBSOCKET: Server status: receiving
I (331978) WEBSOCKET: Server ACK: 10 chunks processed
I (332038) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (332039) WEBSOCKET: Server status: receiving
I (332043) WEBSOCKET: Server ACK: 12 chunks processed
W (332109) STT: Waiting for server ACK (sent: 14, acked: 12, unack: 2)
I (332158) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (332159) WEBSOCKET: Server status: receiving
I (332163) STT: Flow control: ACK received, resuming (sent=14, acked=14)
I (332171) WEBSOCKET: Server ACK: 14 chunks processed
I (332178) STT: ACK received, resuming (unack now: 0)
I (332234) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (332235) WEBSOCKET: Server status: receiving
I (332240) WEBSOCKET: Server ACK: 16 chunks processed
W (332304) STT: Waiting for server ACK (sent: 18, acked: 16, unack: 2)
I (332385) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (332386) WEBSOCKET: Server status: receiving
I (332391) STT: Flow control: ACK received, resuming (sent=18, acked=18)
I (332398) WEBSOCKET: Server ACK: 18 chunks processed
I (332404) STT: ACK received, resuming (unack now: 0)
I (332461) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (332462) WEBSOCKET: Server status: receiving
I (332466) WEBSOCKET: Server ACK: 20 chunks processed
I (332628) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (332629) WEBSOCKET: Server status: receiving
I (332634) WEBSOCKET: Server ACK: 22 chunks processed
I (332942) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (332943) WEBSOCKET: Server status: receiving
I (332948) WEBSOCKET: Server ACK: 24 chunks processed
I (333114) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (333115) WEBSOCKET: Server status: receiving
I (333120) WEBSOCKET: Server ACK: 26 chunks processed
I (333442) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (333443) WEBSOCKET: Server status: receiving
I (333447) WEBSOCKET: Server ACK: 28 chunks processed
I (333501) BUTTON: Single click confirmed
I (333501) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (333502) STATE_MGR: Single click - mode toggle requested
I (333508) STATE_MGR: User requested to end voice session (count: 18). Stopping STT and awaiting server response.
I (333519) STT: Stopping STT pipeline...
I (333524) STT: Draining ring buffer (1024 bytes pending) before shutdown...
I (333531) STT: Audio capture task stopped (captured 120832 bytes total)
I (333539) STT: Ring buffer drained and cleared successfully
I (333569) STT: Streaming task received stop signal
I (333569) STT: Sending EOS signal...
I (333569) WEBSOCKET: Sending EOS signal
I (333576) STT: Audio streaming session complete (streamed 118784 bytes in 29 chunks)
I (333593) STT: STT pipeline stopped
I (333593) LED_CTRL: LED pattern -> 4
I (333593) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (333611) STATE_MGR: STT pipeline reported stop
I (333611) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (333615) LED_CTRL: LED pattern -> 1
I (333625) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (333629) WEBSOCKET: Server status: processing
I (333634) WEBSOCKET: Server stage: transcription
I (333639) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (333647) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (334171) LED_CTRL: LED pattern -> 4
I (334174) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "when did he die", "has_image": false}
I (334178) WEBSOCKET: Server status: processing
I (334179) STATE_MGR: Pipeline stage event: transcription
I (334183) WEBSOCKET: Server stage: llm
I (334189) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (334193) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (334208) WEBSOCKET: Entering LLM stage - continuing processing indication
I (334216) STATE_MGR: Pipeline stage event: llm
I (334475) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "Adolf Hitler died on April 30, 1945."}
I (334477) WEBSOCKET: Server status: processing
I (334482) WEBSOCKET: Server stage: tts
I (334487) WEBSOCKET: Pipeline stage changed: llm -> tts
I (334493) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (334500) LED_CTRL: LED pattern -> 3
I (334504) TTS: ğŸµ Starting TTS decoder...
I (334509) TTS: Initializing TTS decoder...
W (334514) TTS: TTS decoder already initialized
I (334563) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (334564) TTS: ğŸµ TTS playback task started on Core 1
I (334564) TTS: âœ… TTS decoder started successfully
I (334571) STATE_MGR: TTS playback start event received
I (334580) LED_CTRL: LED pattern -> 1
I (334568) TTS: âœ… TTS playback task registered with watchdog
I (334591) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (334594) STATE_MGR: Pipeline stage event: tts
I (334613) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 333059 ms, bytes: 4096)
I (334614) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (334622) TTS: Chunk #2 first 12 bytes: 52 49 46 46 50 5A 02 00 57 41 56 45
I (334629) TTS: New audio session detected - resetting chunk counter
I (334637) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (334644) STATE_MGR: TTS playback start event received
I (334651) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (334659) TTS: Chunk #2 first 12 bytes: 93 29 62 38 4C 40 01 3A B0 2D 60 1B
I (334673) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (334676) TTS: Chunk #3 first 12 bytes: 66 02 48 02 2B 02 3D 02 FC 01 D9 01
I (334690) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (334693) TTS: Chunk #4 first 12 bytes: 7B 04 51 02 09 02 D6 00 69 FD 39 FA
I (334702) TTS: âœ… WAV header parsed successfully
I (334706) TTS: === WAV File Info ===
I (334708) TTS: Received audio chunk #5: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (334710) TTS: Sample Rate: 16000 Hz
I (334720) TTS: Chunk #5 first 12 bytes: B1 FF F6 FF D8 00 B1 00 E6 FF 57 00
I (334724) TTS: Channels: 1
I (334735) TTS: Bits per Sample: 16
I (334739) TTS: Received audio chunk #6: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (334739) TTS: Audio Format: 1 (PCM)
I (334753) TTS: Declared Data Size: 154156 bytes
I (334755) TTS: Received audio chunk #7: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (334758) TTS: Block Align: 2
I (334771) TTS: Byte Rate: 32000
I (334774) TTS: Received audio chunk #8: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (334775) TTS: ====================
I (334788) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=32768)
I (334791) TTS: Received audio chunk #9: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (334796) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (334811) TTS: Received audio chunk #10: 1536 bytes (buffer: 32768/327680 used, 294911 free)
I (334841) TTS: Received audio chunk #11: 2560 bytes (buffer: 30208/327680 used, 297471 free)
I (334848) TTS: Received audio chunk #12: 3196 bytes (buffer: 32768/327680 used, 294911 free)
I (334851) TTS: Received audio chunk #13: 900 bytes (buffer: 35964/327680 used, 291715 free)
I (334864) TTS: Received audio chunk #14: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (334876) TTS: Received audio chunk #15: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (334885) TTS: Received audio chunk #16: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (334892) TTS: Received audio chunk #17: 1196 bytes (buffer: 49152/327680 used, 278527 free)
I (334898) TTS: Received audio chunk #18: 2900 bytes (buffer: 50348/327680 used, 277331 free)
I (334910) TTS: Received audio chunk #19: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (334924) TTS: Received audio chunk #20: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (334935) TTS: Received audio chunk #21: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (334942) TTS: Received audio chunk #22: 636 bytes (buffer: 61440/327680 used, 266239 free)
I (334947) TTS: Received audio chunk #23: 3460 bytes (buffer: 62076/327680 used, 265603 free)
I (334960) TTS: Received audio chunk #24: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (334969) TTS: Received audio chunk #25: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (334980) TTS: Received audio chunk #26: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (334989) TTS: Received audio chunk #27: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (334998) TTS: Received audio chunk #28: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (335009) TTS: Received audio chunk #29: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (335019) TTS: Received audio chunk #30: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (335026) TTS: Received audio chunk #31: 956 bytes (buffer: 94208/327680 used, 233471 free)
I (335032) TTS: Received audio chunk #32: 3140 bytes (buffer: 95164/327680 used, 232515 free)
I (335046) TTS: Received audio chunk #33: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (335058) TTS: Received audio chunk #34: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (335066) TTS: Received audio chunk #35: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (335075) TTS: Received audio chunk #36: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (335086) TTS: Received audio chunk #37: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (335095) TTS: Received audio chunk #38: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (335104) TTS: Received audio chunk #39: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (335146) TTS: Received audio chunk #40: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (335156) TTS: Received audio chunk #41: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (335165) TTS: Received audio chunk #42: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (335173) TTS: Received audio chunk #43: 2648 bytes (buffer: 135168/327680 used, 192511 free)
I (335302) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (335385) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (335385) TTS: TTS end-of-stream signaled (bytes_received=154200, header_parsed=1)
I (335391) TTS: ğŸµ Playback task will drain 129624 bytes of buffered audio
I (335398) TTS: Waiting for playback completion: 129624 bytes buffered, calculated timeout: 6050 ms
I (335429) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (335557) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (335684) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (335812) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (335939) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (336067) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (336194) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (336322) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (336449) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (336577) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (336704) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (336832) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (336959) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (337087) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (337214) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (337342) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (337469) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (337597) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (337724) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (337852) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (337979) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (338107) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (338234) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (338362) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (338489) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (338617) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (338744) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (338872) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (338999) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (339127) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (339254) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (339382) TTS: âœ… All audio data received (154200 bytes, expected 154156 + 44 header)
I (339545) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (339545) TTS: ğŸµ TTS playback task exiting (played 154156 bytes, result: ESP_OK)
I (339548) STATE_MGR: TTS playback finished successfully
I (339548) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (339548) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (339548) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (339590) TTS: TTS decoder session reset for next audio stream
I (339591) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (339598) TTS: Received audio chunk #44: 0 bytes (buffer: 0/327680 used, 327679 free)
I (339604) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (339613) TTS: New audio session detected - resetting chunk counter
I (339632) MEM_MGR: â•‘ Internal RAM:
I (339643) MEM_MGR: â•‘   Free:              87403 bytes ( 85 KB)
I (339639) WEBSOCKET: ğŸµ Audio session complete: 154200 bytes in 43 messages
I (339650) MEM_MGR: â•‘   Largest Block:     59392 bytes ( 58 KB)
I (339661) WEBSOCKET: Received text message: {"status": "complete"}
I (339664) MEM_MGR: â•‘   Fragmentation:     33%
I (339672) WEBSOCKET: Server status: complete
I (339677) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (339682) WEBSOCKET: Pipeline stage changed: tts -> complete
I (339700) MEM_MGR: â•‘ DMA-capable RAM:
I (339707) WEBSOCKET: Exiting TTS stage (transition to complete)
I (339711) MEM_MGR: â•‘   Free:              66987 bytes ( 65 KB)
I (339725) MEM_MGR: â•‘   Largest Block:     59392 bytes ( 58 KB)
I (339731) MEM_MGR: â•‘   Fragmentation:     12%
I (339737) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (339755) MEM_MGR: â•‘ PSRAM:
I (339759) MEM_MGR: â•‘   Free:             3667008 bytes (3581 KB)
I (339766) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (339773) MEM_MGR: â•‘   Fragmentation:      2%
I (339778) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (339797) MEM_MGR: â•‘ Total Heap:
I (339801) MEM_MGR: â•‘   Free:             3733828 bytes (3646 KB)
I (339808) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (339815) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (339818) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (339833) MEM_MGR: â•‘ Memory Delta from Baseline:
I (339847) MEM_MGR: â•‘   Internal RAM:     -137776 bytes (-134 KB)
I (339854) MEM_MGR: â•‘   DMA-capable:      -137776 bytes (-134 KB)
I (339860) MEM_MGR: â•‘   PSRAM:            -525008 bytes (-512 KB)
I (339867) MEM_MGR: â•‘   Total Heap:       -630920 bytes (-616 KB)
I (339874) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (339893) STATE_MGR: Stopping voice mode components...
I (339899) STT: Stopping STT pipeline...
W (339903) STT: STT pipeline already stopped
I (339908) STATE_MGR: Voice pipeline reported COMPLETE
I (339914) STATE_MGR: TTS playback already drained - no pending audio
I (339921) STATE_MGR: Flushing and resetting TTS decoder for next session
I (339929) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (339937) TTS: Flushing pending audio before reset (~0 bytes)
I (339591) TTS: âœ… TTS playback finished event dispatched to state manager
I (339951) TTS:   âœ“ DMA buffer freed from PSRAM
I (339956) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (339964) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (339993) TTS: TTS playback task handle is NULL - task already exited (after 1 checks)
I (340036) TTS: TTS decoder session reset for next audio stream
I (340036) TTS: âœ… TTS decoder flushed and reset for next session
I (340239) TTS: â¹ï¸ Stopping TTS decoder...
W (340239) TTS: TTS decoder already stopped.
I (340386) STATE_MGR: Acquiring I2S mutex...
I (340386) STATE_MGR: Deinitializing audio drivers...
I (340386) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (340404) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (340412) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (340430) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (340437) AUDIO: âœ… RX channel disabled (took 0 ms)
I (340442) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (340449) AUDIO: âœ… TX channel disabled (took 0 ms)
I (340455) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (340511) AUDIO: [STEP 4/5] Deleting RX channel...
I (340512) AUDIO: âœ… RX channel deleted (took 0 ms)
I (340512) AUDIO: [STEP 5/5] Deleting TX channel...
I (340517) AUDIO: âœ… TX channel deleted (took 0 ms)
I (340523) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (340580) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (340587) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (340594) AUDIO: â•‘ Camera Can Now Initialize
I (340599) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (340667) STATE_MGR: Allowing memory stabilization (100ms)...
I (340767) STATE_MGR: Camera will be initialized on-demand during capture
I (340767) STATE_MGR: I2S mutex released
I (340768) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (340787) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (340794) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (340812) MEM_MGR: â•‘ Internal RAM:
I (340817) MEM_MGR: â•‘   Free:              87403 bytes ( 85 KB)
I (340823) MEM_MGR: â•‘   Largest Block:     59392 bytes ( 58 KB)
I (340830) MEM_MGR: â•‘   Fragmentation:     33%
I (340835) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (340854) MEM_MGR: â•‘ DMA-capable RAM:
I (340858) MEM_MGR: â•‘   Free:              66987 bytes ( 65 KB)
I (340865) MEM_MGR: â•‘   Largest Block:     59392 bytes ( 58 KB)
I (340872) MEM_MGR: â•‘   Fragmentation:     12%
I (340877) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (340896) MEM_MGR: â•‘ PSRAM:
I (340899) MEM_MGR: â•‘   Free:             3667008 bytes (3581 KB)
I (340906) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (340913) MEM_MGR: â•‘   Fragmentation:      2%
I (340919) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (340937) MEM_MGR: â•‘ Total Heap:
I (340941) MEM_MGR: â•‘   Free:             3733828 bytes (3646 KB)
I (340948) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (340955) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (340974) MEM_MGR: â•‘ Memory Delta from Baseline:
I (340979) MEM_MGR: â•‘   Internal RAM:     -137776 bytes (-134 KB)
I (340986) MEM_MGR: â•‘   DMA-capable:      -137776 bytes (-134 KB)
I (340993) MEM_MGR: â•‘   PSRAM:            -525008 bytes (-512 KB)
I (341000) MEM_MGR: â•‘   Total Heap:       -630920 bytes (-616 KB)
I (341007) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (341026) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (341035) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (341053) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (341060) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (341078) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (341096) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (341104) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (341122) AUDIO: [DIAG] Pre-init state:
I (341126) AUDIO:   Free heap: 3772724 bytes
I (341131) AUDIO:   Free internal RAM: 126183 bytes
I (341137) AUDIO:   Free DMA-capable: 105767 bytes
I (341142) AUDIO:   Free PSRAM: 3667124 bytes
I (341147) AUDIO:   Timestamp: 339593 ms
I (341152) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (341159) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (341167) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (341175) AUDIO:   DMA frame num (per desc): 1020
I (341181) AUDIO:   DMA total samples (effective): 4080
I (341187) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (341194) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (341200) AUDIO: âœ… I2S channels created (took 0 ms)
I (341206) AUDIO:   TX handle: 0x3ffca89c | RX handle: 0x3ffcb700
I (341213) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (341219) AUDIO:   Sample rate: 16000 Hz
I (341224) AUDIO:   MCLK: DISABLED
I (341228) AUDIO:   BCLK: GPIO14 (shared)
I (341233) AUDIO:   WS:   GPIO15 (shared)
I (341237) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (341244) AUDIO: âœ… TX channel configured (took 1 ms)
I (341249) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (341256) AUDIO:   Sample rate: 16000 Hz
I (341261) AUDIO:   MCLK: DISABLED
I (341265) AUDIO:   BCLK: GPIO14 (shared)
I (341269) AUDIO:   WS:   GPIO15 (shared)
I (341274) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (341280) AUDIO: âœ… RX channel configured (took 0 ms)
I (341286) AUDIO: [STEP 4/6] Enabling TX channel...
I (341291) AUDIO: âœ… TX channel enabled (took 0 ms)
I (341297) AUDIO: [STEP 5/6] Enabling RX channel...
I (341302) AUDIO: âœ… RX channel enabled (took 0 ms)
I (341308) AUDIO: [STEP 6/6] Hardware stabilization...
I (341314) AUDIO:   Phase 1: Initial settle (50ms)
I (341369) AUDIO:   Phase 2: DMA verification
I (341369) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (341370) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (341527) AUDIO: [DIAG] Post-init state:
I (341527) AUDIO:   Free heap: 3746772 bytes
I (341527) AUDIO:   Free internal RAM: 100231 bytes
I (341531) AUDIO:   Free DMA-capable: 79815 bytes
I (341537) AUDIO:   Free PSRAM: 3667124 bytes
I (341542) AUDIO:   Timestamp: 339987 ms
I (341546) AUDIO:   Total init time: 201 ms
I (341551) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (341569) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (341575) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (341581) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (341590) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (341597) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (341615) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (341633) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (341639) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (341646) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (341653) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (341659) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (341960) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (341967) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (341975) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (341993) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (342000) AUDIO: âœ… RX channel disabled (took 0 ms)
I (342006) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (342012) AUDIO: âœ… TX channel disabled (took 0 ms)
I (342018) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (342075) AUDIO: [STEP 4/5] Deleting RX channel...
I (342076) AUDIO: âœ… RX channel deleted (took 0 ms)
I (342076) AUDIO: [STEP 5/5] Deleting TX channel...
I (342081) AUDIO: âœ… TX channel deleted (took 0 ms)
I (342087) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (342144) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (342151) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (342158) AUDIO: â•‘ Camera Can Now Initialize
I (342163) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (342181) LED_CTRL: LED pattern -> 3
I (342185) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (342203) STATE_MGR: Pipeline stage event: complete
I (350344) BUTTON: Single click confirmed
I (350353) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (350354) STATE_MGR: Single click - mode toggle requested
I (350356) STATE_MGR: Switching: Camera â†’ Voice (count: 19)
I (350412) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (350412) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (350425) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (350432) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (350451) MEM_MGR: â•‘ Internal RAM:
I (350455) MEM_MGR: â•‘   Free:             126183 bytes (123 KB)
I (350462) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (350469) MEM_MGR: â•‘   Fragmentation:     26%
I (350474) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (350493) MEM_MGR: â•‘ DMA-capable RAM:
I (350497) MEM_MGR: â•‘   Free:             105767 bytes (103 KB)
I (350504) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (350511) MEM_MGR: â•‘   Fragmentation:     11%
I (350516) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (350535) MEM_MGR: â•‘ PSRAM:
I (350538) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (350545) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (350552) MEM_MGR: â•‘   Fragmentation:      2%
I (350557) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (350576) MEM_MGR: â•‘ Total Heap:
I (350580) MEM_MGR: â•‘   Free:             3772724 bytes (3684 KB)
I (350587) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (350594) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (350612) MEM_MGR: â•‘ Memory Delta from Baseline:
I (350618) MEM_MGR: â•‘   Internal RAM:      -98996 bytes ( -96 KB)
I (350625) MEM_MGR: â•‘   DMA-capable:       -98996 bytes ( -96 KB)
I (350632) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (350639) MEM_MGR: â•‘   Total Heap:       -592024 bytes (-578 KB)
I (350646) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (350664) STATE_MGR: Stopping camera...
I (350669) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (350685) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (350692) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (350708) STATE_MGR:   Timeout: 5000 ms
I (350713) STATE_MGR:   Timestamp: 349159 ms
I (350718) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (350724) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (350740) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (350747) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (350763) STATE_MGR:   Free heap before: 3772724 bytes
I (350769) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (350775) CAMERA: Deinitializing camera...
I (350780) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (350786) STATE_MGR:   Free heap after: 3772724 bytes
I (350792) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (350798) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (350814) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (350821) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (350837) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (350945) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (351045) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (351095) STATE_MGR:   âœ“ Total stabilization: 250ms
I (351095) STATE_MGR:   Timestamp: 349541 ms
I (351095) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351111) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (351118) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351134) STATE_MGR:   Free heap before: 3772724 bytes
I (351140) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351158) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (351165) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351183) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351202) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (351209) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351227) AUDIO: [DIAG] Pre-init state:
I (351232) AUDIO:   Free heap: 3772724 bytes
I (351237) AUDIO:   Free internal RAM: 126183 bytes
I (351242) AUDIO:   Free DMA-capable: 105767 bytes
I (351248) AUDIO:   Free PSRAM: 3667124 bytes
I (351253) AUDIO:   Timestamp: 349698 ms
I (351257) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (351264) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (351272) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (351280) AUDIO:   DMA frame num (per desc): 1020
I (351286) AUDIO:   DMA total samples (effective): 4080
I (351292) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (351299) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (351305) AUDIO: âœ… I2S channels created (took 0 ms)
I (351311) AUDIO:   TX handle: 0x3ffca89c | RX handle: 0x3ffcb700
I (351318) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (351324) AUDIO:   Sample rate: 16000 Hz
I (351329) AUDIO:   MCLK: DISABLED
I (351333) AUDIO:   BCLK: GPIO14 (shared)
I (351338) AUDIO:   WS:   GPIO15 (shared)
I (351343) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (351349) AUDIO: âœ… TX channel configured (took 1 ms)
I (351354) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (351361) AUDIO:   Sample rate: 16000 Hz
I (351366) AUDIO:   MCLK: DISABLED
I (351370) AUDIO:   BCLK: GPIO14 (shared)
I (351375) AUDIO:   WS:   GPIO15 (shared)
I (351379) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (351385) AUDIO: âœ… RX channel configured (took 0 ms)
I (351391) AUDIO: [STEP 4/6] Enabling TX channel...
I (351396) AUDIO: âœ… TX channel enabled (took 0 ms)
I (351402) AUDIO: [STEP 5/6] Enabling RX channel...
I (351408) AUDIO: âœ… RX channel enabled (took 0 ms)
I (351413) AUDIO: [STEP 6/6] Hardware stabilization...
I (351419) AUDIO:   Phase 1: Initial settle (50ms)
I (351474) AUDIO:   Phase 2: DMA verification
I (351474) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (351475) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (351632) AUDIO: [DIAG] Post-init state:
I (351632) AUDIO:   Free heap: 3746772 bytes
I (351633) AUDIO:   Free internal RAM: 100231 bytes
I (351636) AUDIO:   Free DMA-capable: 79815 bytes
I (351642) AUDIO:   Free PSRAM: 3667124 bytes
I (351647) AUDIO:   Timestamp: 350092 ms
I (351651) AUDIO:   Total init time: 201 ms
I (351656) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351674) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (351680) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (351686) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (351695) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (351702) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351720) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351738) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (351744) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (351751) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (351758) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (351764) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351782) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (351788) STATE_MGR:   Free heap after: 3746772 bytes
I (351794) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351810) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (351816) STATE_MGR: â•‘ Total transition time: 895 ms
I (351822) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351838) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351855) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (351865) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (351881) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (351889) TTS: No pending audio to flush
I (351938) TTS: TTS decoder session reset for next audio stream
I (351938) TTS: âœ… TTS decoder flushed and reset for next session
I (351940) STT: Starting STT pipeline...
I (351945) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (351954) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (351961) STT:   Current time: 350407 ms
I (351964) STT: âœ… STT pipeline started
I (351966) STT:   Free heap: 3738220 bytes
I (351970) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (351966) STT: Audio streaming session activated
I (351989) STT: Connection stabilization delay (2000ms)...
I (352175) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (352175) STT:   âœ“ Audio driver initialized
I (352176) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (352283) STT:   Total stabilization: 300ms
I (352283) STT:   Timestamp: 350728 ms
I (352283) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (352288) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37f4 (with safety padding)
I (352296) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (352309) LED_CTRL: LED pattern -> 1
I (352312) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (352317) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (352340) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (352322) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (352347) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (352354) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (352372) MEM_MGR: â•‘ Internal RAM:
I (352393) MEM_MGR: â•‘   Free:             126183 bytes (123 KB)
I (352400) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (352406) MEM_MGR: â•‘   Fragmentation:     26%
I (352412) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (352430) MEM_MGR: â•‘ DMA-capable RAM:
I (352435) MEM_MGR: â•‘   Free:             105767 bytes (103 KB)
I (352442) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (352448) MEM_MGR: â•‘   Fragmentation:     11%
I (352454) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (352472) MEM_MGR: â•‘ PSRAM:
I (352476) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (352483) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (352490) MEM_MGR: â•‘   Fragmentation:      2%
I (352495) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (352513) MEM_MGR: â•‘ Total Heap:
I (352518) MEM_MGR: â•‘   Free:             3772724 bytes (3684 KB)
I (352525) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (352532) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (352550) MEM_MGR: â•‘ Memory Delta from Baseline:
I (352556) MEM_MGR: â•‘   Internal RAM:      -98996 bytes ( -96 KB)
I (352563) MEM_MGR: â•‘   DMA-capable:       -98996 bytes ( -96 KB)
I (352569) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (352576) MEM_MGR: â•‘   Total Heap:       -592024 bytes (-578 KB)
I (352583) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (352602) STATE_MGR: âœ… Voice mode transition complete
I (352608) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (352623) STATE_MGR: STT pipeline reported start
I (353996) STT: Starting audio streaming to server...
W (354054) STT: Waiting for server ACK (sent: 2, acked: 0, unack: 2)
I (354085) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (354086) WEBSOCKET: Server status: receiving
I (354091) STT: Flow control: ACK received, resuming (sent=2, acked=2)
I (354098) WEBSOCKET: Server ACK: 2 chunks processed
I (354104) STT: ACK received, resuming (unack now: 0)
I (354159) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (354160) WEBSOCKET: Server status: receiving
I (354165) WEBSOCKET: Server ACK: 4 chunks processed
I (354220) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (354221) WEBSOCKET: Server status: receiving
I (354226) WEBSOCKET: Server ACK: 6 chunks processed
I (354283) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (354284) WEBSOCKET: Server status: receiving
I (354289) WEBSOCKET: Server ACK: 8 chunks processed
W (354354) STT: Waiting for server ACK (sent: 10, acked: 8, unack: 2)
I (354385) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (354386) WEBSOCKET: Server status: receiving
I (354390) STT: Flow control: ACK received, resuming (sent=10, acked=10)
I (354398) WEBSOCKET: Server ACK: 10 chunks processed
I (354405) STT: ACK received, resuming (unack now: 0)
W (354472) STT: Waiting for server ACK (sent: 12, acked: 10, unack: 2)
I (354496) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (354496) WEBSOCKET: Server status: receiving
I (354501) STT: Flow control: ACK received, resuming (sent=12, acked=12)
I (354509) WEBSOCKET: Server ACK: 12 chunks processed
I (354517) STT: ACK received, resuming (unack now: 0)
I (354569) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (354570) WEBSOCKET: Server status: receiving
I (354575) WEBSOCKET: Server ACK: 14 chunks processed
I (354630) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (354632) WEBSOCKET: Server status: receiving
I (354636) WEBSOCKET: Server ACK: 16 chunks processed
I (354693) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (354694) WEBSOCKET: Server status: receiving
I (354698) WEBSOCKET: Server ACK: 18 chunks processed
I (354909) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (354910) WEBSOCKET: Server status: receiving
I (354915) WEBSOCKET: Server ACK: 20 chunks processed
I (355073) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (355074) WEBSOCKET: Server status: receiving
I (355079) WEBSOCKET: Server ACK: 22 chunks processed
I (355343) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (355344) WEBSOCKET: Server status: receiving
I (355348) WEBSOCKET: Server ACK: 24 chunks processed
I (355635) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (355636) WEBSOCKET: Server status: receiving
I (355640) WEBSOCKET: Server ACK: 26 chunks processed
I (355870) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (355871) WEBSOCKET: Server status: receiving
I (355876) WEBSOCKET: Server ACK: 28 chunks processed
I (356091) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (356092) WEBSOCKET: Server status: receiving
I (356096) WEBSOCKET: Server ACK: 30 chunks processed
I (356432) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (356434) WEBSOCKET: Server status: receiving
I (356438) WEBSOCKET: Server ACK: 32 chunks processed
I (356670) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 34, "bytes_received": 139264}
I (356671) WEBSOCKET: Server status: receiving
I (356676) WEBSOCKET: Server ACK: 34 chunks processed
I (356947) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 36, "bytes_received": 147456}
I (356948) WEBSOCKET: Server status: receiving
I (356952) WEBSOCKET: Server ACK: 36 chunks processed
I (357159) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 38, "bytes_received": 155648}
I (357160) WEBSOCKET: Server status: receiving
I (357165) WEBSOCKET: Server ACK: 38 chunks processed
I (357423) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 40, "bytes_received": 163840}
I (357424) WEBSOCKET: Server status: receiving
I (357428) WEBSOCKET: Server ACK: 40 chunks processed
I (357640) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 42, "bytes_received": 172032}
I (357641) WEBSOCKET: Server status: receiving
I (357646) WEBSOCKET: Server ACK: 42 chunks processed
I (357905) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 44, "bytes_received": 180224}
I (357906) WEBSOCKET: Server status: receiving
I (357911) WEBSOCKET: Server ACK: 44 chunks processed
I (358189) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 46, "bytes_received": 188416}
I (358190) WEBSOCKET: Server status: receiving
I (358195) WEBSOCKET: Server ACK: 46 chunks processed
I (358380) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 48, "bytes_received": 196608}
I (358381) WEBSOCKET: Server status: receiving
I (358386) WEBSOCKET: Server ACK: 48 chunks processed
I (358645) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 50, "bytes_received": 204800}
I (358647) WEBSOCKET: Server status: receiving
I (358651) WEBSOCKET: Server ACK: 50 chunks processed
I (358915) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 52, "bytes_received": 212992}
I (358916) WEBSOCKET: Server status: receiving
I (358921) WEBSOCKET: Server ACK: 52 chunks processed
I (359183) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 54, "bytes_received": 221184}
I (359184) WEBSOCKET: Server status: receiving
I (359189) WEBSOCKET: Server ACK: 54 chunks processed
I (359313) STT: [CAPTURE] âœ… Alive... 1500 reads completed (Free Heap: 3733944 bytes)
I (359417) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 56, "bytes_received": 229376}
I (359418) WEBSOCKET: Server status: receiving
I (359423) WEBSOCKET: Server ACK: 56 chunks processed
I (359712) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 58, "bytes_received": 237568}
I (359714) WEBSOCKET: Server status: receiving
I (359718) WEBSOCKET: Server ACK: 58 chunks processed
I (359928) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 60, "bytes_received": 245760}
I (359930) WEBSOCKET: Server status: receiving
I (359934) WEBSOCKET: Server ACK: 60 chunks processed
I (360238) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 62, "bytes_received": 253952}
I (360239) WEBSOCKET: Server status: receiving
I (360243) WEBSOCKET: Server ACK: 62 chunks processed
I (360498) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 64, "bytes_received": 262144}
I (360499) WEBSOCKET: Server status: receiving
I (360504) WEBSOCKET: Server ACK: 64 chunks processed
I (360718) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 66, "bytes_received": 270336}
I (360719) WEBSOCKET: Server status: receiving
I (360724) WEBSOCKET: Server ACK: 66 chunks processed
I (360979) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 68, "bytes_received": 278528}
I (360980) WEBSOCKET: Server status: receiving
I (360980) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (360985) WEBSOCKET: Server ACK: 68 chunks processed
I (360992) STATE_MGR: Single click - mode toggle requested
I (360980) BUTTON: Single click confirmed
I (361003) STATE_MGR: User requested to end voice session (count: 20). Stopping STT and awaiting server response.
I (361019) STT: Stopping STT pipeline...
I (361024) STT: Draining ring buffer (2048 bytes pending) before shutdown...
I (361038) STT: Ring buffer drained and cleared successfully
I (361041) STT: Audio capture task stopped (captured 281600 bytes total)
I (361049) STT: Streaming task received stop signal
I (361051) STT: Sending EOS signal...
I (361055) WEBSOCKET: Sending EOS signal
I (361065) STT: Audio streaming session complete (streamed 278528 bytes in 68 chunks)
I (361093) STT: STT pipeline stopped
I (361093) LED_CTRL: LED pattern -> 4
I (361094) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (361109) STATE_MGR: STT pipeline reported stop
I (361109) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (361114) LED_CTRL: LED pattern -> 1
I (361139) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (361140) WEBSOCKET: Server status: processing
I (361143) WEBSOCKET: Server stage: transcription
I (361149) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (361156) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (361676) LED_CTRL: LED pattern -> 4
I (361678) STATE_MGR: Pipeline stage event: transcription
I (361679) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (362017) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what they take over germany when hitler was a dictator over there", "has_image": false}
I (362024) WEBSOCKET: Server status: processing
I (362029) WEBSOCKET: Server stage: llm
I (362034) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (362040) WEBSOCKET: Entering LLM stage - continuing processing indication
I (362048) STATE_MGR: Pipeline stage event: llm
I (362390) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "When Adolf Hitler was dictator, the Nazi regime under his control took over Germany in 1933."}
I (362397) WEBSOCKET: Server status: processing
I (362402) WEBSOCKET: Server stage: tts
I (362407) WEBSOCKET: Pipeline stage changed: llm -> tts
I (362413) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (362420) LED_CTRL: LED pattern -> 3
I (362424) TTS: ğŸµ Starting TTS decoder...
I (362429) TTS: Initializing TTS decoder...
W (362434) TTS: TTS decoder already initialized
I (362483) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (362484) TTS: ğŸµ TTS playback task started on Core 1
I (362484) STATE_MGR: TTS playback start event received
I (362484) TTS: âœ… TTS decoder started successfully
I (362494) LED_CTRL: LED pattern -> 1
I (362494) TTS: âœ… TTS playback task registered with watchdog
I (362511) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (362514) STATE_MGR: Pipeline stage event: tts
I (362533) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 360979 ms, bytes: 4096)
I (362534) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (362542) TTS: Chunk #2 first 12 bytes: 52 49 46 46 20 81 03 00 57 41 56 45
I (362550) TTS: New audio session detected - resetting chunk counter
I (362557) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (362565) STATE_MGR: TTS playback start event received
I (362571) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (362579) TTS: Chunk #2 first 12 bytes: 85 00 87 00 8E 00 90 00 9A 00 A1 00
I (362594) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (362596) TTS: Chunk #3 first 12 bytes: E1 D7 A2 DB 01 E0 C7 E4 6D E9 ED ED
I (362610) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (362613) TTS: Chunk #4 first 12 bytes: F8 FF 13 00 76 00 56 00 21 00 E7 FF
I (362623) TTS: âœ… WAV header parsed successfully
I (362626) TTS: === WAV File Info ===
I (362629) TTS: Received audio chunk #5: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (362631) TTS: Sample Rate: 16000 Hz
I (362640) TTS: Chunk #5 first 12 bytes: F7 F7 16 F7 75 F6 FA F5 90 F5 51 F5
I (362644) TTS: Channels: 1
I (362655) TTS: Bits per Sample: 16
I (362658) TTS: Received audio chunk #6: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (362659) TTS: Audio Format: 1 (PCM)
I (362673) TTS: Declared Data Size: 229628 bytes
I (362678) TTS: Block Align: 2
I (362673) TTS: Received audio chunk #7: 876 bytes (buffer: 20480/327680 used, 307199 free)
I (362682) TTS: Byte Rate: 32000
I (362695) TTS: ====================
I (362695) TTS: Received audio chunk #8: 3220 bytes (buffer: 21356/327680 used, 306323 free)
I (362699) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=25452)
I (362715) TTS: Received audio chunk #9: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (362716) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (362732) TTS: Received audio chunk #10: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (362752) TTS: Received audio chunk #11: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (362761) TTS: Received audio chunk #12: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (362768) TTS: Received audio chunk #13: 536 bytes (buffer: 36864/327680 used, 290815 free)
I (362775) TTS: Received audio chunk #14: 3560 bytes (buffer: 37400/327680 used, 290279 free)
I (362790) TTS: Received audio chunk #15: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (362800) TTS: Received audio chunk #16: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (362807) TTS: Received audio chunk #17: 1196 bytes (buffer: 49152/327680 used, 278527 free)
I (362812) TTS: Received audio chunk #18: 2900 bytes (buffer: 50348/327680 used, 277331 free)
I (362823) TTS: Received audio chunk #19: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (362835) TTS: Received audio chunk #20: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (362842) TTS: Received audio chunk #21: 416 bytes (buffer: 61440/327680 used, 266239 free)
I (362848) TTS: Received audio chunk #22: 3680 bytes (buffer: 61856/327680 used, 265823 free)
I (362860) TTS: Received audio chunk #23: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (362875) TTS: Received audio chunk #24: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (362885) TTS: Received audio chunk #25: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (362896) TTS: Received audio chunk #26: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (362905) TTS: Received audio chunk #27: 1516 bytes (buffer: 77824/327680 used, 249855 free)
I (362911) TTS: Received audio chunk #28: 2580 bytes (buffer: 79340/327680 used, 248339 free)
I (362922) TTS: Received audio chunk #29: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (362933) TTS: Received audio chunk #30: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (362943) TTS: Received audio chunk #31: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (362952) TTS: Received audio chunk #32: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (362961) TTS: Received audio chunk #33: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (362976) TTS: Received audio chunk #34: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (362993) TTS: Received audio chunk #35: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (363009) TTS: Received audio chunk #36: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (363021) TTS: Received audio chunk #37: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (363037) TTS: Received audio chunk #38: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (363052) TTS: Received audio chunk #39: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (363102) TTS: Received audio chunk #40: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (363111) TTS: Received audio chunk #41: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (363120) TTS: Received audio chunk #42: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (363133) TTS: Received audio chunk #43: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (363142) TTS: Received audio chunk #44: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (363151) TTS: Received audio chunk #45: 1436 bytes (buffer: 139264/327680 used, 188415 free)
I (363155) TTS: Received audio chunk #46: 2660 bytes (buffer: 140700/327680 used, 186979 free)
I (363167) TTS: Received audio chunk #47: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (363182) TTS: Received audio chunk #48: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (363199) TTS: Received audio chunk #49: 4096 bytes (buffer: 151552/327680 used, 176127 free)
I (363214) TTS: Received audio chunk #50: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (363228) TTS: Received audio chunk #51: 4096 bytes (buffer: 159744/327680 used, 167935 free)
I (363243) TTS: Received audio chunk #52: 4096 bytes (buffer: 163840/327680 used, 163839 free)
I (363262) TTS: Received audio chunk #53: 4096 bytes (buffer: 163840/327680 used, 163839 free)
I (363305) TTS: Received audio chunk #54: 4096 bytes (buffer: 167936/327680 used, 159743 free)
I (363313) TTS: Received audio chunk #55: 1656 bytes (buffer: 172032/327680 used, 155647 free)
I (363319) TTS: Received audio chunk #56: 2440 bytes (buffer: 173688/327680 used, 153991 free)
I (363329) TTS: Received audio chunk #57: 4096 bytes (buffer: 176128/327680 used, 151551 free)
I (363341) TTS: Received audio chunk #58: 4096 bytes (buffer: 180224/327680 used, 147455 free)
I (363350) TTS: Received audio chunk #59: 4096 bytes (buffer: 184320/327680 used, 143359 free)
I (363359) TTS: Received audio chunk #60: 4096 bytes (buffer: 188416/327680 used, 139263 free)
I (363369) TTS: Received audio chunk #61: 4096 bytes (buffer: 192512/327680 used, 135167 free)
I (363389) TTS: Received audio chunk #62: 4096 bytes (buffer: 192512/327680 used, 135167 free)
I (363405) TTS: Received audio chunk #63: 4096 bytes (buffer: 196608/327680 used, 131071 free)
I (363411) TTS: Received audio chunk #64: 296 bytes (buffer: 200704/327680 used, 126975 free)
I (363508) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (363635) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (363636) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (363636) TTS: TTS end-of-stream signaled (bytes_received=229672, header_parsed=1)
I (363650) TTS: ğŸµ Playback task will drain 192808 bytes of buffered audio
I (363657) TTS: Waiting for playback completion: 192808 bytes buffered, calculated timeout: 8025 ms
I (363762) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (363890) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (364017) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (364145) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (364272) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (364400) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (364527) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (364655) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (364782) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (364910) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (365037) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (365165) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (365292) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (365420) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (365547) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (365675) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (365802) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (365930) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (366057) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (366185) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (366312) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (366440) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (366567) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (366695) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (366822) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (366950) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (367077) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (367205) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (367332) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (367460) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (367587) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (367715) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (367842) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (367970) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (368097) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (368225) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (368352) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (368480) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (368607) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (368735) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (368862) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (368990) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (369117) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (369245) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (369372) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (369500) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (369627) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (369754) TTS: âœ… All audio data received (229672 bytes, expected 229628 + 44 header)
I (369855) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (369855) TTS: ğŸµ TTS playback task exiting (played 229628 bytes, result: ESP_OK)
I (369860) STATE_MGR: TTS playback finished successfully
I (369860) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (369860) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (369860) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (369860) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (369902) TTS: TTS decoder session reset for next audio stream
I (369908) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (369915) TTS: Received audio chunk #65: 0 bytes (buffer: 0/327680 used, 327679 free)
I (369933) MEM_MGR: â•‘ Internal RAM:
I (369942) TTS: New audio session detected - resetting chunk counter
I (369946) MEM_MGR: â•‘   Free:             100231 bytes ( 97 KB)
I (369955) WEBSOCKET: ğŸµ Audio session complete: 229672 bytes in 64 messages
I (369960) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (369971) WEBSOCKET: Received text message: {"status": "complete"}
I (369974) MEM_MGR: â•‘   Fragmentation:     27%
I (369982) WEBSOCKET: Server status: complete
I (369987) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (369992) WEBSOCKET: Pipeline stage changed: tts -> complete
I (370010) MEM_MGR: â•‘ DMA-capable RAM:
I (370017) WEBSOCKET: Exiting TTS stage (transition to complete)
I (370021) MEM_MGR: â•‘   Free:              79815 bytes ( 77 KB)
I (370035) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (370041) MEM_MGR: â•‘   Fragmentation:      8%
I (370047) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (370065) MEM_MGR: â•‘ PSRAM:
I (370069) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (370076) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (370083) MEM_MGR: â•‘   Fragmentation:      2%
I (370088) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (370107) MEM_MGR: â•‘ Total Heap:
I (370111) MEM_MGR: â•‘   Free:             3746772 bytes (3658 KB)
I (370118) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (370125) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (370128) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (370143) MEM_MGR: â•‘ Memory Delta from Baseline:
I (370157) MEM_MGR: â•‘   Internal RAM:     -124948 bytes (-122 KB)
I (370164) MEM_MGR: â•‘   DMA-capable:      -124948 bytes (-122 KB)
I (370170) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (370177) MEM_MGR: â•‘   Total Heap:       -617976 bytes (-603 KB)
I (370184) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (370203) STATE_MGR: Stopping voice mode components...
I (370209) STT: Stopping STT pipeline...
W (370213) STT: STT pipeline already stopped
I (370218) STATE_MGR: Voice pipeline reported COMPLETE
I (370224) STATE_MGR: TTS playback already drained - no pending audio
I (370231) STATE_MGR: Flushing and resetting TTS decoder for next session
I (370239) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (370247) TTS: Flushing pending audio before reset (~0 bytes)
W (370250) HOTPIN_MAIN: âš ï¸ Connection health check timeout - forcing reconnect to prevent stale connection
I (369908) TTS: âœ… TTS playback finished event dispatched to state manager
W (370264) HOTPIN_MAIN: âš ï¸ WebSocket link not healthy, initiating reconnection sequence
I (370271) TTS:   âœ“ DMA buffer freed from PSRAM
I (370280) WEBSOCKET: Force stopping WebSocket client
I (370286) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (370299) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (370303) TTS: TTS playback task handle is NULL - task already exited (after 1 checks)
W (370312) websocket_client: Client was not started
W (370321) WEBSOCKET: Force stop returned ESP_FAIL
I (370359) TTS: TTS decoder session reset for next audio stream
I (370359) TTS: âœ… TTS decoder flushed and reset for next session
I (370562) TTS: â¹ï¸ Stopping TTS decoder...
W (370562) TTS: TTS decoder already stopped.
I (370707) STATE_MGR: Acquiring I2S mutex...
I (370707) STATE_MGR: Deinitializing audio drivers...
I (370707) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (370725) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (370733) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (370751) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (370758) AUDIO: âœ… RX channel disabled (took 0 ms)
I (370763) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (370770) AUDIO: âœ… TX channel disabled (took 0 ms)
I (370776) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (370832) AUDIO: [STEP 4/5] Deleting RX channel...
I (370833) AUDIO: âœ… RX channel deleted (took 0 ms)
I (370833) AUDIO: [STEP 5/5] Deleting TX channel...
I (370838) AUDIO: âœ… TX channel deleted (took 0 ms)
I (370844) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (370901) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (370908) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (370915) AUDIO: â•‘ Camera Can Now Initialize
I (370920) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (370988) STATE_MGR: Allowing memory stabilization (100ms)...
I (371088) STATE_MGR: Camera will be initialized on-demand during capture
I (371088) STATE_MGR: I2S mutex released
I (371089) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (371108) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (371115) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (371133) MEM_MGR: â•‘ Internal RAM:
I (371138) MEM_MGR: â•‘   Free:             100231 bytes ( 97 KB)
I (371144) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (371151) MEM_MGR: â•‘   Fragmentation:     27%
I (371156) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (371175) MEM_MGR: â•‘ DMA-capable RAM:
I (371179) MEM_MGR: â•‘   Free:              79815 bytes ( 77 KB)
I (371186) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (371193) MEM_MGR: â•‘   Fragmentation:      8%
I (371198) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (371217) MEM_MGR: â•‘ PSRAM:
I (371220) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (371227) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (371234) MEM_MGR: â•‘   Fragmentation:      2%
I (371240) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (371258) MEM_MGR: â•‘ Total Heap:
I (371262) MEM_MGR: â•‘   Free:             3746772 bytes (3658 KB)
I (371269) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (371276) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (371295) MEM_MGR: â•‘ Memory Delta from Baseline:
I (371300) MEM_MGR: â•‘   Internal RAM:     -124948 bytes (-122 KB)
I (371307) MEM_MGR: â•‘   DMA-capable:      -124948 bytes (-122 KB)
I (371314) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (371321) MEM_MGR: â•‘   Total Heap:       -617976 bytes (-603 KB)
I (371327) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 3)...
I (371328) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (371336) WEBSOCKET: Connecting to WebSocket server...
I (371354) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (371367) websocket_client: Started
I (371374) WEBSOCKET: WebSocket client started (health check disabled - managed by main connection task)
I (371370) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (371386) WEBSOCKET: âœ… WebSocket connected to server
I (371402) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (371408) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (371415) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (371427) WEBSOCKET: Handshake sent successfully
I (371441) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (371446) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (371464) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (371478) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (371486) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (371496) AUDIO: [DIAG] Pre-init state:
I (371507) WEBSOCKET: Server status: connected
I (371511) AUDIO:   Free heap: 3772572 bytes
I (371521) AUDIO:   Free internal RAM: 126175 bytes
I (371527) AUDIO:   Free DMA-capable: 105759 bytes
I (371532) AUDIO:   Free PSRAM: 3667124 bytes
I (371537) AUDIO:   Timestamp: 369983 ms
I (371542) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (371549) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (371557) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (371565) AUDIO:   DMA frame num (per desc): 1020
I (371570) AUDIO:   DMA total samples (effective): 4080
I (371576) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (371583) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (371584) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (371590) AUDIO: âœ… I2S channels created (took 0 ms)
I (371603) AUDIO:   TX handle: 0x3ffcab38 | RX handle: 0x3ffcb5f0
I (371610) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (371617) AUDIO:   Sample rate: 16000 Hz
I (371621) AUDIO:   MCLK: DISABLED
I (371625) AUDIO:   BCLK: GPIO14 (shared)
I (371630) AUDIO:   WS:   GPIO15 (shared)
I (371635) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (371642) AUDIO: âœ… TX channel configured (took 1 ms)
I (371646) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (371653) AUDIO:   Sample rate: 16000 Hz
I (371658) AUDIO:   MCLK: DISABLED
I (371662) AUDIO:   BCLK: GPIO14 (shared)
I (371667) AUDIO:   WS:   GPIO15 (shared)
I (371671) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (371677) AUDIO: âœ… RX channel configured (took 0 ms)
I (371683) AUDIO: [STEP 4/6] Enabling TX channel...
I (371689) AUDIO: âœ… TX channel enabled (took 0 ms)
I (371694) AUDIO: [STEP 5/6] Enabling RX channel...
I (371700) AUDIO: âœ… RX channel enabled (took 0 ms)
I (371705) AUDIO: [STEP 6/6] Hardware stabilization...
I (371711) AUDIO:   Phase 1: Initial settle (50ms)
I (371766) AUDIO:   Phase 2: DMA verification
I (371766) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (371767) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (371924) AUDIO: [DIAG] Post-init state:
I (371924) AUDIO:   Free heap: 3746748 bytes
I (371924) AUDIO:   Free internal RAM: 100207 bytes
I (371928) AUDIO:   Free DMA-capable: 79791 bytes
I (371934) AUDIO:   Free PSRAM: 3667124 bytes
I (371939) AUDIO:   Timestamp: 370384 ms
I (371943) AUDIO:   Total init time: 201 ms
I (371948) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (371966) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (371972) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (371978) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (371987) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (371994) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (372012) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (372030) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (372036) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (372043) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (372050) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (372056) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (372357) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (372364) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (372372) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (372390) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (372397) AUDIO: âœ… RX channel disabled (took 0 ms)
I (372403) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (372409) AUDIO: âœ… TX channel disabled (took 0 ms)
I (372415) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (372472) AUDIO: [STEP 4/5] Deleting RX channel...
I (372473) AUDIO: âœ… RX channel deleted (took 0 ms)
I (372473) AUDIO: [STEP 5/5] Deleting TX channel...
I (372478) AUDIO: âœ… TX channel deleted (took 0 ms)
I (372484) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (372541) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (372548) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (372555) AUDIO: â•‘ Camera Can Now Initialize
I (372560) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (372578) LED_CTRL: LED pattern -> 3
I (372582) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (372600) STATE_MGR: Pipeline stage event: complete
I (372610) STATE_MGR: âœ… WebSocket connected
I (375344) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (375344) BUTTON: Single click confirmed
I (375344) STATE_MGR: Single click - mode toggle requested
I (375351) STATE_MGR: Switching: Camera â†’ Voice (count: 21)
I (375407) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (375407) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (375420) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (375427) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (375446) MEM_MGR: â•‘ Internal RAM:
I (375450) MEM_MGR: â•‘   Free:             100231 bytes ( 97 KB)
I (375457) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (375464) MEM_MGR: â•‘   Fragmentation:     27%
I (375469) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (375488) MEM_MGR: â•‘ DMA-capable RAM:
I (375492) MEM_MGR: â•‘   Free:              79815 bytes ( 77 KB)
I (375499) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (375506) MEM_MGR: â•‘   Fragmentation:      8%
I (375511) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (375530) MEM_MGR: â•‘ PSRAM:
I (375533) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (375540) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (375547) MEM_MGR: â•‘   Fragmentation:      2%
I (375552) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (375571) MEM_MGR: â•‘ Total Heap:
I (375575) MEM_MGR: â•‘   Free:             3746772 bytes (3658 KB)
I (375582) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (375589) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (375607) MEM_MGR: â•‘ Memory Delta from Baseline:
I (375613) MEM_MGR: â•‘   Internal RAM:     -124948 bytes (-122 KB)
I (375620) MEM_MGR: â•‘   DMA-capable:      -124948 bytes (-122 KB)
I (375627) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (375634) MEM_MGR: â•‘   Total Heap:       -617976 bytes (-603 KB)
I (375641) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (375659) STATE_MGR: Stopping camera...
I (375664) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (375680) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (375687) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (375703) STATE_MGR:   Timeout: 5000 ms
I (375708) STATE_MGR:   Timestamp: 374154 ms
I (375713) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (375719) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (375735) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (375742) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (375758) STATE_MGR:   Free heap before: 3772716 bytes
I (375764) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (375770) CAMERA: Deinitializing camera...
I (375775) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (375781) STATE_MGR:   Free heap after: 3772716 bytes
I (375787) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (375793) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (375809) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (375816) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (375832) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (375940) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (376040) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (376090) STATE_MGR:   âœ“ Total stabilization: 250ms
I (376090) STATE_MGR:   Timestamp: 374536 ms
I (376090) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376106) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (376113) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376129) STATE_MGR:   Free heap before: 3772716 bytes
I (376135) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376153) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (376160) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376178) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376197) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (376204) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376222) AUDIO: [DIAG] Pre-init state:
I (376227) AUDIO:   Free heap: 3772716 bytes
I (376232) AUDIO:   Free internal RAM: 126175 bytes
I (376237) AUDIO:   Free DMA-capable: 105759 bytes
I (376243) AUDIO:   Free PSRAM: 3667124 bytes
I (376248) AUDIO:   Timestamp: 374693 ms
I (376252) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (376259) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (376267) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (376275) AUDIO:   DMA frame num (per desc): 1020
I (376281) AUDIO:   DMA total samples (effective): 4080
I (376287) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (376294) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (376300) AUDIO: âœ… I2S channels created (took 0 ms)
I (376306) AUDIO:   TX handle: 0x3ffcab38 | RX handle: 0x3ffcb5f0
I (376313) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (376319) AUDIO:   Sample rate: 16000 Hz
I (376324) AUDIO:   MCLK: DISABLED
I (376328) AUDIO:   BCLK: GPIO14 (shared)
I (376333) AUDIO:   WS:   GPIO15 (shared)
I (376338) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (376344) AUDIO: âœ… TX channel configured (took 0 ms)
I (376349) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (376356) AUDIO:   Sample rate: 16000 Hz
I (376361) AUDIO:   MCLK: DISABLED
I (376365) AUDIO:   BCLK: GPIO14 (shared)
I (376370) AUDIO:   WS:   GPIO15 (shared)
I (376374) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (376380) AUDIO: âœ… RX channel configured (took 0 ms)
I (376386) AUDIO: [STEP 4/6] Enabling TX channel...
I (376391) AUDIO: âœ… TX channel enabled (took 0 ms)
I (376397) AUDIO: [STEP 5/6] Enabling RX channel...
I (376403) AUDIO: âœ… RX channel enabled (took 0 ms)
I (376408) AUDIO: [STEP 6/6] Hardware stabilization...
I (376414) AUDIO:   Phase 1: Initial settle (50ms)
I (376469) AUDIO:   Phase 2: DMA verification
I (376469) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (376470) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (376627) AUDIO: [DIAG] Post-init state:
I (376627) AUDIO:   Free heap: 3746748 bytes
I (376627) AUDIO:   Free internal RAM: 100207 bytes
I (376631) AUDIO:   Free DMA-capable: 79791 bytes
I (376637) AUDIO:   Free PSRAM: 3667124 bytes
I (376642) AUDIO:   Timestamp: 375087 ms
I (376646) AUDIO:   Total init time: 200 ms
I (376651) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376669) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (376675) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (376681) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (376690) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (376697) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376715) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376733) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (376739) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (376746) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (376753) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (376759) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376777) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (376783) STATE_MGR:   Free heap after: 3746748 bytes
I (376789) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376805) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (376811) STATE_MGR: â•‘ Total transition time: 895 ms
I (376817) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376833) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376850) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (376860) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (376876) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (376884) TTS: No pending audio to flush
I (376932) TTS: TTS decoder session reset for next audio stream
I (376933) TTS: âœ… TTS decoder flushed and reset for next session
I (376935) STT: Starting STT pipeline...
I (376940) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (376949) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (376956) STT:   Current time: 375402 ms
I (376959) STT: âœ… STT pipeline started
I (376961) STT:   Free heap: 3738196 bytes
I (376965) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (376961) STT: Audio streaming session activated
I (376984) STT: Connection stabilization delay (2000ms)...
I (377170) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (377170) STT:   âœ“ Audio driver initialized
I (377171) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (377278) STT:   Total stabilization: 300ms
I (377278) STT:   Timestamp: 375723 ms
I (377278) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (377283) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37f4 (with safety padding)
I (377291) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (377304) LED_CTRL: LED pattern -> 1
I (377307) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (377312) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (377317) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (377335) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (377342) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (377349) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (377383) MEM_MGR: â•‘ Internal RAM:
I (377388) MEM_MGR: â•‘   Free:              91655 bytes ( 89 KB)
I (377395) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (377401) MEM_MGR: â•‘   Fragmentation:     29%
I (377407) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (377425) MEM_MGR: â•‘ DMA-capable RAM:
I (377430) MEM_MGR: â•‘   Free:              71239 bytes ( 69 KB)
I (377437) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (377443) MEM_MGR: â•‘   Fragmentation:      9%
I (377449) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (377467) MEM_MGR: â•‘ PSRAM:
I (377471) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (377478) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (377485) MEM_MGR: â•‘   Fragmentation:      2%
I (377490) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (377508) MEM_MGR: â•‘ Total Heap:
I (377513) MEM_MGR: â•‘   Free:             3738196 bytes (3650 KB)
I (377520) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (377527) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (377545) MEM_MGR: â•‘ Memory Delta from Baseline:
I (377551) MEM_MGR: â•‘   Internal RAM:     -133524 bytes (-130 KB)
I (377558) MEM_MGR: â•‘   DMA-capable:      -133524 bytes (-130 KB)
I (377564) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (377571) MEM_MGR: â•‘   Total Heap:       -626552 bytes (-611 KB)
I (377578) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (377597) STATE_MGR: âœ… Voice mode transition complete
I (377603) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (377618) STATE_MGR: STT pipeline reported start
I (378990) STT: Starting audio streaming to server...
W (379050) STT: Waiting for server ACK (sent: 2, acked: 0, unack: 2)
I (379079) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (379080) WEBSOCKET: Server status: receiving
I (379084) STT: Flow control: ACK received, resuming (sent=2, acked=2)
I (379091) WEBSOCKET: Server ACK: 2 chunks processed
I (379098) STT: ACK received, resuming (unack now: 0)
I (379155) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (379156) WEBSOCKET: Server status: receiving
I (379160) WEBSOCKET: Server ACK: 4 chunks processed
I (379219) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (379220) WEBSOCKET: Server status: receiving
I (379225) WEBSOCKET: Server ACK: 6 chunks processed
I (379289) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (379290) WEBSOCKET: Server status: receiving
I (379294) WEBSOCKET: Server ACK: 8 chunks processed
W (379358) STT: Waiting for server ACK (sent: 10, acked: 8, unack: 2)
I (379411) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (379412) WEBSOCKET: Server status: receiving
I (379416) STT: Flow control: ACK received, resuming (sent=10, acked=10)
I (379424) WEBSOCKET: Server ACK: 10 chunks processed
I (379430) STT: ACK received, resuming (unack now: 0)
I (379497) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (379498) WEBSOCKET: Server status: receiving
I (379503) WEBSOCKET: Server ACK: 12 chunks processed
I (379559) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (379560) WEBSOCKET: Server status: receiving
I (379565) WEBSOCKET: Server ACK: 14 chunks processed
I (379624) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (379625) WEBSOCKET: Server status: receiving
I (379630) WEBSOCKET: Server ACK: 16 chunks processed
I (379686) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (379687) WEBSOCKET: Server status: receiving
I (379692) WEBSOCKET: Server ACK: 18 chunks processed
I (379892) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (379893) WEBSOCKET: Server status: receiving
I (379897) WEBSOCKET: Server ACK: 20 chunks processed
I (380059) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (380060) WEBSOCKET: Server status: receiving
I (380064) WEBSOCKET: Server ACK: 22 chunks processed
I (380377) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (380378) WEBSOCKET: Server status: receiving
I (380382) WEBSOCKET: Server ACK: 24 chunks processed
I (380646) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (380647) WEBSOCKET: Server status: receiving
I (380652) WEBSOCKET: Server ACK: 26 chunks processed
I (380911) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (380912) WEBSOCKET: Server status: receiving
I (380917) WEBSOCKET: Server ACK: 28 chunks processed
I (381132) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (381133) WEBSOCKET: Server status: receiving
I (381137) WEBSOCKET: Server ACK: 30 chunks processed
I (381180) BUTTON: Single click confirmed
I (381180) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (381181) STATE_MGR: Single click - mode toggle requested
I (381187) STATE_MGR: User requested to end voice session (count: 22). Stopping STT and awaiting server response.
I (381198) STT: Stopping STT pipeline...
I (381202) STT: Draining ring buffer (5120 bytes pending) before shutdown...
I (381218) STT: Ring buffer drained and cleared successfully
I (381231) STT: Capture stopped and ring buffer drained; ending streaming loop
I (381232) STT: Sending EOS signal...
I (381233) WEBSOCKET: Sending EOS signal
I (381243) STT: Audio streaming session complete (streamed 122880 bytes in 30 chunks)
I (381249) STT: Audio capture task stopped (captured 129024 bytes total)
I (381260) STT: STT pipeline stopped
I (381260) LED_CTRL: LED pattern -> 4
I (381262) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (381280) STATE_MGR: STT pipeline reported stop
I (381280) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (381285) LED_CTRL: LED pattern -> 1
I (381301) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (381302) WEBSOCKET: Server status: processing
I (381306) WEBSOCKET: Server stage: transcription
I (381311) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (381318) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (381826) LED_CTRL: LED pattern -> 4
I (381827) STATE_MGR: Pipeline stage event: transcription
I (381827) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (381838) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "tell me a long story", "has_image": false}
I (381848) WEBSOCKET: Server status: processing
I (381853) WEBSOCKET: Server stage: llm
I (381858) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (381864) WEBSOCKET: Entering LLM stage - continuing processing indication
I (381872) STATE_MGR: Pipeline stage event: llm
I (382242) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I'm not able to provide long stories, but I can offer you a series of connected one-liners if you'd like."}
I (382250) WEBSOCKET: Server status: processing
I (382255) WEBSOCKET: Server stage: tts
I (382259) WEBSOCKET: Pipeline stage changed: llm -> tts
I (382265) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (382273) LED_CTRL: LED pattern -> 3
I (382277) TTS: ğŸµ Starting TTS decoder...
I (382282) TTS: Initializing TTS decoder...
W (382287) TTS: TTS decoder already initialized
I (382334) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (382335) TTS: âœ… TTS decoder started successfully
I (382340) TTS: ğŸµ TTS playback task started on Core 1
I (382344) STATE_MGR: TTS playback start event received
I (382351) LED_CTRL: LED pattern -> 1
I (382355) TTS: âœ… TTS playback task registered with watchdog
I (382362) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (382365) STATE_MGR: Pipeline stage event: tts
I (382384) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 380830 ms, bytes: 4096)
I (382384) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (382392) TTS: Chunk #2 first 12 bytes: 52 49 46 46 FE 4D 03 00 57 41 56 45
I (382400) TTS: New audio session detected - resetting chunk counter
I (382408) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (382415) STATE_MGR: TTS playback start event received
I (382426) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (382430) TTS: Chunk #2 first 12 bytes: 67 04 AA 08 01 0A 21 08 01 06 70 02
I (382443) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (382447) TTS: Chunk #3 first 12 bytes: A2 18 D4 15 CF 12 D3 0F 09 0D 4B 0A
I (382459) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (382464) TTS: Chunk #4 first 12 bytes: D1 EE 1E ED 86 EC B6 EB 62 EC 2B EE
I (382476) TTS: Received audio chunk #5: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (382481) TTS: Chunk #5 first 12 bytes: 15 32 CE 2A 30 26 1A 28 B0 2A 04 25
I (382493) TTS: Received audio chunk #6: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (382503) TTS: Received audio chunk #7: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (382510) TTS: Received audio chunk #8: 1096 bytes (buffer: 28672/327680 used, 299007 free)
I (382517) TTS: âœ… WAV header parsed successfully
I (382521) TTS: === WAV File Info ===
I (382525) TTS: Sample Rate: 16000 Hz
I (382530) TTS: Channels: 1
I (382533) TTS: Bits per Sample: 16
I (382537) TTS: Audio Format: 1 (PCM)
I (382545) TTS: Received audio chunk #9: 3000 bytes (buffer: 25672/327680 used, 302007 free)
I (382557) TTS: Received audio chunk #10: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (382566) TTS: Received audio chunk #11: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (382575) TTS: Received audio chunk #12: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (382584) TTS: Received audio chunk #13: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (382594) TTS: Received audio chunk #14: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (382603) TTS: Received audio chunk #15: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (382612) TTS: Received audio chunk #16: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (382622) TTS: Received audio chunk #17: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (382630) TTS: Received audio chunk #18: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (382640) TTS: Received audio chunk #19: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (382644) TTS: Declared Data Size: 216538 bytes
I (382648) TTS: Block Align: 2
I (382654) TTS: Received audio chunk #20: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (382662) TTS: Byte Rate: 32000
I (382665) TTS: ====================
I (382671) TTS: Received audio chunk #21: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (382684) TTS: Received audio chunk #22: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (382689) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=86016)
I (382700) TTS: Received audio chunk #23: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (382706) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (382715) TTS: Received audio chunk #24: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (382757) TTS: Received audio chunk #25: 1436 bytes (buffer: 86016/327680 used, 241663 free)
I (382760) TTS: Received audio chunk #26: 2660 bytes (buffer: 87452/327680 used, 240227 free)
I (382770) TTS: Received audio chunk #27: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (382781) TTS: Received audio chunk #28: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (382790) TTS: Received audio chunk #29: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (382799) TTS: Received audio chunk #30: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (382808) TTS: Received audio chunk #31: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (382825) TTS: Received audio chunk #32: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (382840) TTS: Received audio chunk #33: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (382855) TTS: Received audio chunk #34: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (382873) TTS: Received audio chunk #35: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (382887) TTS: Received audio chunk #36: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (382903) TTS: Received audio chunk #37: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (382918) TTS: Received audio chunk #38: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (382933) TTS: Received audio chunk #39: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (382950) TTS: Received audio chunk #40: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (382967) TTS: Received audio chunk #41: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (382980) TTS: Received audio chunk #42: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (382996) TTS: Received audio chunk #43: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (383013) TTS: Received audio chunk #44: 4096 bytes (buffer: 151552/327680 used, 176127 free)
I (383028) TTS: Received audio chunk #45: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (383043) TTS: Received audio chunk #46: 4096 bytes (buffer: 159744/327680 used, 167935 free)
I (383059) TTS: Received audio chunk #47: 4096 bytes (buffer: 163840/327680 used, 163839 free)
I (383075) TTS: Received audio chunk #48: 4096 bytes (buffer: 167936/327680 used, 159743 free)
I (383091) TTS: Received audio chunk #49: 4096 bytes (buffer: 167936/327680 used, 159743 free)
I (383107) TTS: Received audio chunk #50: 4096 bytes (buffer: 172032/327680 used, 155647 free)
I (383116) TTS: Received audio chunk #51: 4096 bytes (buffer: 176128/327680 used, 151551 free)
I (383187) TTS: Received audio chunk #52: 4096 bytes (buffer: 180224/327680 used, 147455 free)
I (383207) TTS: Received audio chunk #53: 4096 bytes (buffer: 184320/327680 used, 143359 free)
I (383212) TTS: Received audio chunk #54: 1656 bytes (buffer: 188416/327680 used, 139263 free)
I (383217) TTS: Received audio chunk #55: 2440 bytes (buffer: 190072/327680 used, 137607 free)
I (383229) TTS: Received audio chunk #56: 3590 bytes (buffer: 192512/327680 used, 135167 free)
I (383235) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (383339) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (383385) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (383386) TTS: TTS end-of-stream signaled (bytes_received=216582, header_parsed=1)
I (383391) TTS: ğŸµ Playback task will drain 187910 bytes of buffered audio
I (383399) TTS: Waiting for playback completion: 187910 bytes buffered, calculated timeout: 7872 ms
I (383466) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (383593) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (383721) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (383848) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (383976) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (384103) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (384231) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (384358) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (384486) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (384613) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (384741) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (384868) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (384996) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (385123) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (385251) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (385378) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (385506) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (385633) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (385761) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (385888) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (386016) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (386143) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (386271) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (386398) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (386526) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (386653) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (386781) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (386908) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (387036) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (387163) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (387291) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (387418) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (387546) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (387673) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (387801) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (387928) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (388056) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (388183) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (388311) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (388438) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (388566) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (388693) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (388821) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (388948) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (389076) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (389203) TTS: âœ… All audio data received (216582 bytes, expected 216538 + 44 header)
I (389431) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (389431) TTS: ğŸµ TTS playback task exiting (played 216538 bytes, result: ESP_OK)
I (389437) STATE_MGR: TTS playback finished successfully
I (389443) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (389452) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (389458) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (389477) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (389484) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (389502) MEM_MGR: â•‘ Internal RAM:
I (389507) MEM_MGR: â•‘   Free:              91655 bytes ( 89 KB)
I (389513) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (389520) MEM_MGR: â•‘   Fragmentation:     29%
I (389525) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (389544) MEM_MGR: â•‘ DMA-capable RAM:
I (389549) MEM_MGR: â•‘   Free:              71239 bytes ( 69 KB)
I (389555) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (389562) MEM_MGR: â•‘   Fragmentation:      9%
I (389567) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (389586) MEM_MGR: â•‘ PSRAM:
I (389590) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (389597) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (389604) MEM_MGR: â•‘   Fragmentation:      2%
I (389609) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (389627) MEM_MGR: â•‘ Total Heap:
I (389631) MEM_MGR: â•‘   Free:             3738196 bytes (3650 KB)
I (389638) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (389645) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (389664) MEM_MGR: â•‘ Memory Delta from Baseline:
I (389669) MEM_MGR: â•‘   Internal RAM:     -133524 bytes (-130 KB)
I (389676) MEM_MGR: â•‘   DMA-capable:      -133524 bytes (-130 KB)
I (389683) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (389690) MEM_MGR: â•‘   Total Heap:       -626552 bytes (-611 KB)
I (389697) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (389716) STATE_MGR: Stopping voice mode components...
I (389722) STT: Stopping STT pipeline...
W (389726) STT: STT pipeline already stopped
I (389774) TTS: TTS decoder session reset for next audio stream
I (389774) TTS: Received audio chunk #57: 0 bytes (buffer: 0/327680 used, 327679 free)
I (389778) TTS: New audio session detected - resetting chunk counter
I (389785) WEBSOCKET: ğŸµ Audio session complete: 216582 bytes in 56 messages
I (389796) WEBSOCKET: Received text message: {"status": "complete"}
I (389800) WEBSOCKET: Server status: complete
I (389805) WEBSOCKET: Pipeline stage changed: tts -> complete
I (389811) WEBSOCKET: Exiting TTS stage (transition to complete)
I (389818) TTS: âœ… TTS playback finished event dispatched to state manager
I (389826) TTS:   âœ“ DMA buffer freed from PSRAM
I (389831) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (389839) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (389918) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (389931) STATE_MGR: Voice pipeline reported COMPLETE
I (389931) STATE_MGR: TTS playback already drained - no pending audio
I (389933) STATE_MGR: Flushing and resetting TTS decoder for next session
I (389941) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (389949) TTS: No pending audio to flush
I (389996) TTS: TTS decoder session reset for next audio stream
I (389996) TTS: âœ… TTS decoder flushed and reset for next session
I (390199) TTS: â¹ï¸ Stopping TTS decoder...
W (390199) TTS: TTS decoder already stopped.
I (390344) STATE_MGR: Acquiring I2S mutex...
I (390344) STATE_MGR: Deinitializing audio drivers...
I (390344) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (390362) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (390370) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (390388) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (390395) AUDIO: âœ… RX channel disabled (took 0 ms)
I (390400) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (390407) AUDIO: âœ… TX channel disabled (took 0 ms)
I (390413) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (390469) AUDIO: [STEP 4/5] Deleting RX channel...
I (390470) AUDIO: âœ… RX channel deleted (took 0 ms)
I (390470) AUDIO: [STEP 5/5] Deleting TX channel...
I (390475) AUDIO: âœ… TX channel deleted (took 0 ms)
I (390481) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (390538) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (390545) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (390552) AUDIO: â•‘ Camera Can Now Initialize
I (390557) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (390625) STATE_MGR: Allowing memory stabilization (100ms)...
I (390725) STATE_MGR: Camera will be initialized on-demand during capture
I (390725) STATE_MGR: I2S mutex released
I (390726) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (390745) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (390752) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (390770) MEM_MGR: â•‘ Internal RAM:
I (390775) MEM_MGR: â•‘   Free:              91655 bytes ( 89 KB)
I (390781) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (390788) MEM_MGR: â•‘   Fragmentation:     29%
I (390793) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (390812) MEM_MGR: â•‘ DMA-capable RAM:
I (390816) MEM_MGR: â•‘   Free:              71239 bytes ( 69 KB)
I (390823) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (390830) MEM_MGR: â•‘   Fragmentation:      9%
I (390835) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (390854) MEM_MGR: â•‘ PSRAM:
I (390857) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (390864) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (390871) MEM_MGR: â•‘   Fragmentation:      2%
I (390877) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (390895) MEM_MGR: â•‘ Total Heap:
I (390899) MEM_MGR: â•‘   Free:             3738196 bytes (3650 KB)
I (390906) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (390913) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (390932) MEM_MGR: â•‘ Memory Delta from Baseline:
I (390937) MEM_MGR: â•‘   Internal RAM:     -133524 bytes (-130 KB)
I (390944) MEM_MGR: â•‘   DMA-capable:      -133524 bytes (-130 KB)
I (390951) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (390958) MEM_MGR: â•‘   Total Heap:       -626552 bytes (-611 KB)
I (390965) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (390984) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (390993) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (391011) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (391018) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (391036) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (391054) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (391062) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (391080) AUDIO: [DIAG] Pre-init state:
I (391084) AUDIO:   Free heap: 3772716 bytes
I (391089) AUDIO:   Free internal RAM: 126175 bytes
I (391095) AUDIO:   Free DMA-capable: 105759 bytes
I (391100) AUDIO:   Free PSRAM: 3667124 bytes
I (391105) AUDIO:   Timestamp: 389551 ms
I (391110) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (391117) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (391125) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (391133) AUDIO:   DMA frame num (per desc): 1020
I (391139) AUDIO:   DMA total samples (effective): 4080
I (391145) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (391152) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (391158) AUDIO: âœ… I2S channels created (took 0 ms)
I (391164) AUDIO:   TX handle: 0x3ffcab38 | RX handle: 0x3ffcb5f0
I (391171) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (391177) AUDIO:   Sample rate: 16000 Hz
I (391182) AUDIO:   MCLK: DISABLED
I (391186) AUDIO:   BCLK: GPIO14 (shared)
I (391191) AUDIO:   WS:   GPIO15 (shared)
I (391195) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (391202) AUDIO: âœ… TX channel configured (took 1 ms)
I (391207) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (391214) AUDIO:   Sample rate: 16000 Hz
I (391219) AUDIO:   MCLK: DISABLED
I (391223) AUDIO:   BCLK: GPIO14 (shared)
I (391227) AUDIO:   WS:   GPIO15 (shared)
I (391232) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (391238) AUDIO: âœ… RX channel configured (took 0 ms)
I (391244) AUDIO: [STEP 4/6] Enabling TX channel...
I (391249) AUDIO: âœ… TX channel enabled (took 0 ms)
I (391255) AUDIO: [STEP 5/6] Enabling RX channel...
I (391260) AUDIO: âœ… RX channel enabled (took 0 ms)
I (391266) AUDIO: [STEP 6/6] Hardware stabilization...
I (391272) AUDIO:   Phase 1: Initial settle (50ms)
I (391327) AUDIO:   Phase 2: DMA verification
I (391327) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (391328) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (391485) AUDIO: [DIAG] Post-init state:
I (391486) AUDIO:   Free heap: 3745188 bytes
I (391486) AUDIO:   Free internal RAM: 98647 bytes
I (391490) AUDIO:   Free DMA-capable: 78231 bytes
I (391495) AUDIO:   Free PSRAM: 3667124 bytes
I (391500) AUDIO:   Timestamp: 389946 ms
I (391505) AUDIO:   Total init time: 201 ms
I (391509) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (391528) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (391534) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (391539) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (391548) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (391555) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (391573) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (391591) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (391597) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (391604) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (391611) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (391617) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (391918) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (391925) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (391933) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (391951) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (391958) AUDIO: âœ… RX channel disabled (took 0 ms)
I (391964) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (391970) AUDIO: âœ… TX channel disabled (took 0 ms)
I (391976) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (392033) AUDIO: [STEP 4/5] Deleting RX channel...
I (392034) AUDIO: âœ… RX channel deleted (took 0 ms)
I (392034) AUDIO: [STEP 5/5] Deleting TX channel...
I (392039) AUDIO: âœ… TX channel deleted (took 0 ms)
I (392045) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (392102) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (392109) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (392116) AUDIO: â•‘ Camera Can Now Initialize
I (392121) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (392139) LED_CTRL: LED pattern -> 3
I (392143) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (392161) STATE_MGR: Pipeline stage event: complete
I (403552) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (403552) STATE_MGR: Double-click detected - triggering capture sequence
I (403556) STATE_MGR: Starting camera capture sequence
I (403561) LED_CTRL: LED pattern -> 6
I (403566) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (403584) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (403591) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (403609) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (403627) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (403634) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (403652) AUDIO: [DIAG] Pre-init state:
I (403657) AUDIO:   Free heap: 3772716 bytes
I (403662) AUDIO:   Free internal RAM: 126175 bytes
I (403668) AUDIO:   Free DMA-capable: 105759 bytes
I (403673) AUDIO:   Free PSRAM: 3667124 bytes
I (403678) AUDIO:   Timestamp: 402124 ms
I (403683) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (403690) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (403698) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (403706) AUDIO:   DMA frame num (per desc): 1020
I (403711) AUDIO:   DMA total samples (effective): 4080
I (403717) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (403724) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (403731) AUDIO: âœ… I2S channels created (took 0 ms)
I (403737) AUDIO:   TX handle: 0x3ffcab38 | RX handle: 0x3ffcb5f0
I (403743) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (403750) AUDIO:   Sample rate: 16000 Hz
I (403755) AUDIO:   MCLK: DISABLED
I (403759) AUDIO:   BCLK: GPIO14 (shared)
I (403763) AUDIO:   WS:   GPIO15 (shared)
I (403768) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (403775) AUDIO: âœ… TX channel configured (took 1 ms)
I (403780) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (403787) AUDIO:   Sample rate: 16000 Hz
I (403791) AUDIO:   MCLK: DISABLED
I (403795) AUDIO:   BCLK: GPIO14 (shared)
I (403800) AUDIO:   WS:   GPIO15 (shared)
I (403805) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (403811) AUDIO: âœ… RX channel configured (took 0 ms)
I (403816) AUDIO: [STEP 4/6] Enabling TX channel...
I (403822) AUDIO: âœ… TX channel enabled (took 0 ms)
I (403827) AUDIO: [STEP 5/6] Enabling RX channel...
I (403833) AUDIO: âœ… RX channel enabled (took 0 ms)
I (403839) AUDIO: [STEP 6/6] Hardware stabilization...
I (403844) AUDIO:   Phase 1: Initial settle (50ms)
I (403900) AUDIO:   Phase 2: DMA verification
I (403900) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (403901) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (404058) AUDIO: [DIAG] Post-init state:
I (404058) AUDIO:   Free heap: 3746748 bytes
I (404058) AUDIO:   Free internal RAM: 100207 bytes
I (404062) AUDIO:   Free DMA-capable: 79791 bytes
I (404068) AUDIO:   Free PSRAM: 3667124 bytes
I (404073) AUDIO:   Timestamp: 402518 ms
I (404077) AUDIO:   Total init time: 201 ms
I (404082) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (404100) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (404106) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (404112) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (404121) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (404128) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (404146) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (404164) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (404170) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (404177) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (404184) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (404190) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (404540) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (404547) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (404555) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (404573) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (404580) AUDIO: âœ… RX channel disabled (took 0 ms)
I (404586) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (404592) AUDIO: âœ… TX channel disabled (took 0 ms)
I (404598) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (404655) AUDIO: [STEP 4/5] Deleting RX channel...
I (404656) AUDIO: âœ… RX channel deleted (took 0 ms)
I (404656) AUDIO: [STEP 5/5] Deleting TX channel...
I (404661) AUDIO: âœ… TX channel deleted (took 0 ms)
I (404667) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (404724) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (404731) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (404738) AUDIO: â•‘ Camera Can Now Initialize
I (404743) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (404761) STATE_MGR: Capturing frame from camera
I (404766) CAMERA: Initializing camera...
I (404771) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (404781) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (404789) cam_hal: cam init ok
W (404793) ledc: GPIO 0 is not usable, maybe conflict with others
I (404799) sccb-ng: pin_sda 26 pin_scl 27
I (404804) sccb-ng: sccb_i2c_port=1
I (404809) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
E (404851) camera: Detected camera not supported.
E (404851) camera: Camera probe failed with error 0x106(ESP_ERR_NOT_SUPPORTED)
E (404854) CAMERA: Camera init failed: ESP_ERR_NOT_SUPPORTED
E (404860) STATE_MGR: Failed to initialize camera for capture: ESP_ERR_NOT_SUPPORTED
I (404868) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (404886) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (404893) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (404911) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (404929) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (404937) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (404955) AUDIO: [DIAG] Pre-init state:
I (404959) AUDIO:   Free heap: 3772716 bytes
I (404964) AUDIO:   Free internal RAM: 126175 bytes
I (404970) AUDIO:   Free DMA-capable: 105759 bytes
I (404975) AUDIO:   Free PSRAM: 3667124 bytes
I (404980) AUDIO:   Timestamp: 403426 ms
I (404985) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (404992) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (405000) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (405008) AUDIO:   DMA frame num (per desc): 1020
I (405014) AUDIO:   DMA total samples (effective): 4080
I (405020) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (405027) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (405033) AUDIO: âœ… I2S channels created (took 0 ms)
I (405039) AUDIO:   TX handle: 0x3ffcab38 | RX handle: 0x3ffcb5f0
I (405046) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (405052) AUDIO:   Sample rate: 16000 Hz
I (405057) AUDIO:   MCLK: DISABLED
I (405061) AUDIO:   BCLK: GPIO14 (shared)
I (405066) AUDIO:   WS:   GPIO15 (shared)
I (405070) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (405077) AUDIO: âœ… TX channel configured (took 1 ms)
I (405082) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (405089) AUDIO:   Sample rate: 16000 Hz
I (405094) AUDIO:   MCLK: DISABLED
I (405098) AUDIO:   BCLK: GPIO14 (shared)
I (405102) AUDIO:   WS:   GPIO15 (shared)
I (405107) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (405113) AUDIO: âœ… RX channel configured (took 0 ms)
I (405119) AUDIO: [STEP 4/6] Enabling TX channel...
I (405124) AUDIO: âœ… TX channel enabled (took 0 ms)
I (405130) AUDIO: [STEP 5/6] Enabling RX channel...
I (405135) AUDIO: âœ… RX channel enabled (took 0 ms)
I (405141) AUDIO: [STEP 6/6] Hardware stabilization...
I (405147) AUDIO:   Phase 1: Initial settle (50ms)
I (405202) AUDIO:   Phase 2: DMA verification
I (405202) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (405203) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (405360) AUDIO: [DIAG] Post-init state:
I (405360) AUDIO:   Free heap: 3746748 bytes
I (405360) AUDIO:   Free internal RAM: 100207 bytes
I (405364) AUDIO:   Free DMA-capable: 79791 bytes
I (405370) AUDIO:   Free PSRAM: 3667124 bytes
I (405375) AUDIO:   Timestamp: 403820 ms
I (405379) AUDIO:   Total init time: 201 ms
I (405384) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (405402) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (405408) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (405414) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (405423) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (405430) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (405448) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (405466) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (405472) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (405479) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (405486) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (405492) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (406878) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (406885) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (406893) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (406911) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (406918) AUDIO: âœ… RX channel disabled (took 0 ms)
I (406924) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (406930) AUDIO: âœ… TX channel disabled (took 0 ms)
I (406936) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (406993) AUDIO: [STEP 4/5] Deleting RX channel...
I (406994) AUDIO: âœ… RX channel deleted (took 0 ms)
I (406994) AUDIO: [STEP 5/5] Deleting TX channel...
I (406999) AUDIO: âœ… TX channel deleted (took 0 ms)
I (407005) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (407062) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (407069) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (407076) AUDIO: â•‘ Camera Can Now Initialize
I (407081) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (407099) LED_CTRL: LED pattern -> 3
E (407103) STATE_MGR: Camera capture sequence failed (ESP_ERR_NOT_SUPPORTED)
I (407111) LED_CTRL: LED pattern -> 5
I (409115) LED_CTRL: LED pattern -> 3
I (484501) BUTTON: Single click confirmed
I (484501) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (484502) STATE_MGR: Single click - mode toggle requested
I (484508) STATE_MGR: Switching: Camera â†’ Voice (count: 23)
I (484565) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (484565) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (484578) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (484585) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (484604) MEM_MGR: â•‘ Internal RAM:
I (484608) MEM_MGR: â•‘   Free:             126175 bytes (123 KB)
I (484615) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (484622) MEM_MGR: â•‘   Fragmentation:     26%
I (484627) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (484646) MEM_MGR: â•‘ DMA-capable RAM:
I (484650) MEM_MGR: â•‘   Free:             105759 bytes (103 KB)
I (484657) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (484664) MEM_MGR: â•‘   Fragmentation:     11%
I (484669) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (484688) MEM_MGR: â•‘ PSRAM:
I (484691) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (484698) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (484705) MEM_MGR: â•‘   Fragmentation:      2%
I (484710) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (484729) MEM_MGR: â•‘ Total Heap:
I (484733) MEM_MGR: â•‘   Free:             3772716 bytes (3684 KB)
I (484740) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (484747) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (484765) MEM_MGR: â•‘ Memory Delta from Baseline:
I (484771) MEM_MGR: â•‘   Internal RAM:      -99004 bytes ( -96 KB)
I (484778) MEM_MGR: â•‘   DMA-capable:       -99004 bytes ( -96 KB)
I (484785) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (484792) MEM_MGR: â•‘   Total Heap:       -592032 bytes (-578 KB)
I (484799) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (484817) STATE_MGR: Stopping camera...
I (484822) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (484838) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (484845) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (484861) STATE_MGR:   Timeout: 5000 ms
I (484866) STATE_MGR:   Timestamp: 483312 ms
I (484871) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (484877) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (484893) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (484900) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (484916) STATE_MGR:   Free heap before: 3772716 bytes
I (484922) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (484928) CAMERA: Deinitializing camera...
I (484933) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (484939) STATE_MGR:   Free heap after: 3772716 bytes
I (484945) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (484951) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (484967) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (484974) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (484990) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (485098) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (485198) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (485248) STATE_MGR:   âœ“ Total stabilization: 250ms
I (485248) STATE_MGR:   Timestamp: 483694 ms
I (485248) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (485264) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (485271) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (485287) STATE_MGR:   Free heap before: 3772716 bytes
I (485293) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (485311) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (485318) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (485336) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (485355) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (485362) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (485380) AUDIO: [DIAG] Pre-init state:
I (485385) AUDIO:   Free heap: 3772716 bytes
I (485390) AUDIO:   Free internal RAM: 126175 bytes
I (485395) AUDIO:   Free DMA-capable: 105759 bytes
I (485401) AUDIO:   Free PSRAM: 3667124 bytes
I (485406) AUDIO:   Timestamp: 483851 ms
I (485410) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (485417) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (485425) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (485433) AUDIO:   DMA frame num (per desc): 1020
I (485439) AUDIO:   DMA total samples (effective): 4080
I (485445) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (485452) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (485459) AUDIO: âœ… I2S channels created (took 0 ms)
I (485464) AUDIO:   TX handle: 0x3ffcab38 | RX handle: 0x3ffcb5f0
I (485471) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (485477) AUDIO:   Sample rate: 16000 Hz
I (485482) AUDIO:   MCLK: DISABLED
I (485486) AUDIO:   BCLK: GPIO14 (shared)
I (485491) AUDIO:   WS:   GPIO15 (shared)
I (485496) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (485502) AUDIO: âœ… TX channel configured (took 1 ms)
I (485507) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (485514) AUDIO:   Sample rate: 16000 Hz
I (485519) AUDIO:   MCLK: DISABLED
I (485523) AUDIO:   BCLK: GPIO14 (shared)
I (485528) AUDIO:   WS:   GPIO15 (shared)
I (485532) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (485538) AUDIO: âœ… RX channel configured (took 0 ms)
I (485544) AUDIO: [STEP 4/6] Enabling TX channel...
I (485549) AUDIO: âœ… TX channel enabled (took 0 ms)
I (485555) AUDIO: [STEP 5/6] Enabling RX channel...
I (485561) AUDIO: âœ… RX channel enabled (took 0 ms)
I (485566) AUDIO: [STEP 6/6] Hardware stabilization...
I (485572) AUDIO:   Phase 1: Initial settle (50ms)
I (485627) AUDIO:   Phase 2: DMA verification
I (485627) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (485628) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (485785) AUDIO: [DIAG] Post-init state:
I (485785) AUDIO:   Free heap: 3746748 bytes
I (485785) AUDIO:   Free internal RAM: 100207 bytes
I (485789) AUDIO:   Free DMA-capable: 79791 bytes
I (485795) AUDIO:   Free PSRAM: 3667124 bytes
I (485800) AUDIO:   Timestamp: 484245 ms
I (485804) AUDIO:   Total init time: 201 ms
I (485809) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (485827) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (485833) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (485839) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (485848) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (485855) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (485873) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (485891) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (485897) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (485904) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (485911) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (485917) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (485935) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (485941) STATE_MGR:   Free heap after: 3746748 bytes
I (485947) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (485963) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (485969) STATE_MGR: â•‘ Total transition time: 895 ms
I (485975) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (485991) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (486008) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (486018) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (486034) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (486042) TTS: No pending audio to flush
I (486091) TTS: TTS decoder session reset for next audio stream
I (486091) TTS: âœ… TTS decoder flushed and reset for next session
I (486093) STT: Starting STT pipeline...
I (486098) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (486107) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (486114) STT:   Current time: 484560 ms
I (486117) STT: âœ… STT pipeline started
I (486119) STT:   Free heap: 3738196 bytes
I (486123) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (486119) STT: Audio streaming session activated
I (486142) STT: Connection stabilization delay (2000ms)...
I (486328) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (486328) STT:   âœ“ Audio driver initialized
I (486329) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (486436) STT:   Total stabilization: 300ms
I (486436) STT:   Timestamp: 484881 ms
I (486436) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (486441) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe37f4 (with safety padding)
I (486449) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (486462) LED_CTRL: LED pattern -> 1
I (486465) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (486470) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (486475) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (486493) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (486500) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (486507) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (486541) MEM_MGR: â•‘ Internal RAM:
I (486546) MEM_MGR: â•‘   Free:             126175 bytes (123 KB)
I (486553) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (486559) MEM_MGR: â•‘   Fragmentation:     26%
I (486565) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (486583) MEM_MGR: â•‘ DMA-capable RAM:
I (486588) MEM_MGR: â•‘   Free:             105759 bytes (103 KB)
I (486594) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (486601) MEM_MGR: â•‘   Fragmentation:     11%
I (486607) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (486625) MEM_MGR: â•‘ PSRAM:
I (486629) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (486636) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (486643) MEM_MGR: â•‘   Fragmentation:      2%
I (486648) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (486666) MEM_MGR: â•‘ Total Heap:
I (486671) MEM_MGR: â•‘   Free:             3772716 bytes (3684 KB)
I (486678) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (486685) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (486703) MEM_MGR: â•‘ Memory Delta from Baseline:
I (486709) MEM_MGR: â•‘   Internal RAM:      -99004 bytes ( -96 KB)
I (486716) MEM_MGR: â•‘   DMA-capable:       -99004 bytes ( -96 KB)
I (486722) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (486729) MEM_MGR: â•‘   Total Heap:       -592032 bytes (-578 KB)
I (486736) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (486755) STATE_MGR: âœ… Voice mode transition complete
I (486761) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (486776) STATE_MGR: STT pipeline reported start
I (488148) STT: Starting audio streaming to server...
I (488205) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (488206) WEBSOCKET: Server status: receiving
I (488210) WEBSOCKET: Server ACK: 2 chunks processed
I (488259) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (488260) WEBSOCKET: Server status: receiving
I (488265) WEBSOCKET: Server ACK: 4 chunks processed
I (488319) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (488320) WEBSOCKET: Server status: receiving
I (488324) WEBSOCKET: Server ACK: 6 chunks processed
I (488382) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (488383) WEBSOCKET: Server status: receiving
I (488388) WEBSOCKET: Server ACK: 8 chunks processed
I (488453) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (488454) WEBSOCKET: Server status: receiving
I (488458) WEBSOCKET: Server ACK: 10 chunks processed
I (488511) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (488511) WEBSOCKET: Server status: receiving
I (488516) WEBSOCKET: Server ACK: 12 chunks processed
I (488572) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (488573) WEBSOCKET: Server status: receiving
I (488577) WEBSOCKET: Server ACK: 14 chunks processed
I (488638) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (488639) WEBSOCKET: Server status: receiving
I (488644) WEBSOCKET: Server ACK: 16 chunks processed
I (488803) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (488803) WEBSOCKET: Server status: receiving
I (488808) WEBSOCKET: Server ACK: 18 chunks processed
I (489055) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (489056) WEBSOCKET: Server status: receiving
I (489061) WEBSOCKET: Server ACK: 20 chunks processed
I (489269) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (489270) WEBSOCKET: Server status: receiving
I (489275) WEBSOCKET: Server ACK: 22 chunks processed
I (489529) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (489530) WEBSOCKET: Server status: receiving
I (489535) WEBSOCKET: Server ACK: 24 chunks processed
I (489794) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (489795) WEBSOCKET: Server status: receiving
I (489800) WEBSOCKET: Server ACK: 26 chunks processed
I (489900) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (489900) BUTTON: Single click confirmed
I (489900) STATE_MGR: Single click - mode toggle requested
I (489907) STATE_MGR: User requested to end voice session (count: 24). Stopping STT and awaiting server response.
I (489918) STT: Stopping STT pipeline...
I (489922) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (489941) STT: Ring buffer drained and cleared successfully
I (489961) STT: Audio capture task stopped (captured 114688 bytes total)
I (489964) STT: Streaming task received stop signal
I (489964) STT: Sending EOS signal...
I (489967) WEBSOCKET: Sending EOS signal
I (489975) STT: Audio streaming session complete (streamed 113664 bytes in 28 chunks)
I (489988) STT: STT pipeline stopped
I (489989) LED_CTRL: LED pattern -> 4
I (489989) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (490000) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 113664}
I (490008) STATE_MGR: STT pipeline reported stop
I (490014) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (490023) LED_CTRL: LED pattern -> 1
I (490010) WEBSOCKET: Server status: receiving
I (490033) WEBSOCKET: Server ACK: 28 chunks processed
I (490130) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (490130) WEBSOCKET: Server status: processing
I (490133) WEBSOCKET: Server stage: transcription
I (490139) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (490146) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (490665) LED_CTRL: LED pattern -> 4
I (490666) STATE_MGR: Pipeline stage event: transcription
I (490666) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (490676) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "the andromeda galaxy", "has_image": false}
I (490687) WEBSOCKET: Server status: processing
I (490692) WEBSOCKET: Server stage: llm
I (490697) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (490703) WEBSOCKET: Entering LLM stage - continuing processing indication
I (490711) STATE_MGR: Pipeline stage event: llm
I (491073) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "The Andromeda galaxy, also known as M31, is a spiral galaxy approximately 2.5 million light-years away from Earth and the largest member of the Local Group of galaxies."}
I (491087) WEBSOCKET: Server status: processing
I (491092) WEBSOCKET: Server stage: tts
I (491096) WEBSOCKET: Pipeline stage changed: llm -> tts
I (491102) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (491110) LED_CTRL: LED pattern -> 3
I (491114) TTS: ğŸµ Starting TTS decoder...
I (491119) TTS: Initializing TTS decoder...
W (491124) TTS: TTS decoder already initialized
I (491172) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (491172) TTS: âœ… TTS decoder started successfully
I (491177) TTS: ğŸµ TTS playback task started on Core 1
I (491182) STATE_MGR: TTS playback start event received
I (491188) LED_CTRL: LED pattern -> 1
I (491193) TTS: âœ… TTS playback task registered with watchdog
I (491199) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (491202) STATE_MGR: Pipeline stage event: tts
I (491239) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 489685 ms, bytes: 4096)
I (491240) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (491246) TTS: Chunk #2 first 12 bytes: 52 49 46 46 DC F4 05 00 57 41 56 45
I (491254) TTS: New audio session detected - resetting chunk counter
I (491262) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (491269) STATE_MGR: TTS playback start event received
I (491280) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (491284) TTS: Chunk #2 first 12 bytes: 0A 00 07 00 15 00 17 00 0E 00 0D 00
I (491300) TTS: Received audio chunk #3: 1436 bytes (buffer: 8192/327680 used, 319487 free)
I (491301) TTS: Chunk #3 first 12 bytes: 85 F6 FA F6 BD F8 C5 FA EE FB 3C FE
I (491310) TTS: Received audio chunk #4: 2660 bytes (buffer: 9628/327680 used, 318051 free)
I (491318) TTS: Chunk #4 first 12 bytes: DB 1A DE 16 B1 18 20 17 9E 0E 55 05
I (491330) TTS: Received audio chunk #5: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (491334) TTS: Chunk #5 first 12 bytes: 71 02 EC FF A5 FE F3 03 1D 16 6A 28
I (491347) TTS: Received audio chunk #6: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (491357) TTS: Received audio chunk #7: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (491366) TTS: Received audio chunk #8: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (491376) TTS: âœ… WAV header parsed successfully
I (491379) TTS: Received audio chunk #9: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (491390) TTS: Received audio chunk #10: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (491401) TTS: Received audio chunk #11: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (491408) TTS: Received audio chunk #12: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (491418) TTS: Received audio chunk #13: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (491427) TTS: Received audio chunk #14: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (491431) TTS: === WAV File Info ===
I (491439) TTS: Received audio chunk #15: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (491445) TTS: Sample Rate: 16000 Hz
I (491448) TTS: Channels: 1
I (491454) TTS: Received audio chunk #16: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (491462) TTS: Bits per Sample: 16
I (491469) TTS: Received audio chunk #17: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (491475) TTS: Audio Format: 1 (PCM)
I (491478) TTS: Declared Data Size: 390328 bytes
I (491485) TTS: Received audio chunk #18: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (491500) TTS: Received audio chunk #19: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (491504) TTS: Block Align: 2
I (491506) TTS: Byte Rate: 32000
I (491513) TTS: Received audio chunk #20: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (491520) TTS: ====================
I (491527) TTS: Received audio chunk #21: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (491534) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=81920)
I (491544) TTS: Received audio chunk #22: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (491551) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (491559) TTS: Received audio chunk #23: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (491574) TTS: Received audio chunk #24: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (491590) TTS: Received audio chunk #25: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (491607) TTS: Received audio chunk #26: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (491621) TTS: Received audio chunk #27: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (491635) TTS: Received audio chunk #28: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (491647) TTS: Received audio chunk #29: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (491662) TTS: Received audio chunk #30: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (491715) TTS: Received audio chunk #31: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (491721) TTS: Received audio chunk #32: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (491729) TTS: Received audio chunk #33: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (491738) TTS: Received audio chunk #34: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (491747) TTS: Received audio chunk #35: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (491762) TTS: Received audio chunk #36: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (491776) TTS: Received audio chunk #37: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (491792) TTS: Received audio chunk #38: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (491817) TTS: Received audio chunk #39: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (491828) TTS: Received audio chunk #40: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (491843) TTS: Received audio chunk #41: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (491859) TTS: Received audio chunk #42: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (491875) TTS: Received audio chunk #43: 4096 bytes (buffer: 151552/327680 used, 176127 free)
I (491891) TTS: Received audio chunk #44: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (491898) TTS: Received audio chunk #45: 2876 bytes (buffer: 159744/327680 used, 167935 free)
I (491900) TTS: Received audio chunk #46: 1220 bytes (buffer: 162620/327680 used, 165059 free)
I (491914) TTS: Received audio chunk #47: 4096 bytes (buffer: 163840/327680 used, 163839 free)
I (491929) TTS: Received audio chunk #48: 4096 bytes (buffer: 167936/327680 used, 159743 free)
I (491944) TTS: Received audio chunk #49: 4096 bytes (buffer: 167936/327680 used, 159743 free)
I (491958) TTS: Received audio chunk #50: 4096 bytes (buffer: 172032/327680 used, 155647 free)
I (491974) TTS: Received audio chunk #51: 4096 bytes (buffer: 176128/327680 used, 151551 free)
I (491990) TTS: Received audio chunk #52: 4096 bytes (buffer: 180224/327680 used, 147455 free)
I (492005) TTS: Received audio chunk #53: 4096 bytes (buffer: 184320/327680 used, 143359 free)
I (492022) TTS: Received audio chunk #54: 4096 bytes (buffer: 188416/327680 used, 139263 free)
I (492036) TTS: Received audio chunk #55: 4096 bytes (buffer: 192512/327680 used, 135167 free)
I (492052) TTS: Received audio chunk #56: 4096 bytes (buffer: 196608/327680 used, 131071 free)
I (492068) TTS: Received audio chunk #57: 4096 bytes (buffer: 196608/327680 used, 131071 free)
I (492083) TTS: Received audio chunk #58: 4096 bytes (buffer: 200704/327680 used, 126975 free)
I (492129) TTS: Received audio chunk #59: 4096 bytes (buffer: 204800/327680 used, 122879 free)
I (492133) TTS: Received audio chunk #60: 1650 bytes (buffer: 208896/327680 used, 118783 free)
I (492194) TTS: Received audio chunk #61: 2446 bytes (buffer: 206450/327680 used, 121229 free)
I (492199) TTS: Received audio chunk #62: 4096 bytes (buffer: 208896/327680 used, 118783 free)
I (492207) TTS: Received audio chunk #63: 4096 bytes (buffer: 212992/327680 used, 114687 free)
I (492217) TTS: Received audio chunk #64: 4096 bytes (buffer: 217088/327680 used, 110591 free)
I (492225) TTS: Received audio chunk #65: 1090 bytes (buffer: 221184/327680 used, 106495 free)
I (492231) TTS: Received audio chunk #66: 3006 bytes (buffer: 222274/327680 used, 105405 free)
I (492244) TTS: Received audio chunk #67: 4096 bytes (buffer: 225280/327680 used, 102399 free)
I (492253) TTS: Received audio chunk #68: 4096 bytes (buffer: 229376/327680 used, 98303 free)
I (492263) TTS: Received audio chunk #69: 4096 bytes (buffer: 233472/327680 used, 94207 free)
I (492273) TTS: Received audio chunk #70: 4096 bytes (buffer: 237568/327680 used, 90111 free)
I (492282) TTS: Received audio chunk #71: 4096 bytes (buffer: 241664/327680 used, 86015 free)
I (492291) TTS: Received audio chunk #72: 4096 bytes (buffer: 245760/327680 used, 81919 free)
I (492300) TTS: Received audio chunk #73: 4096 bytes (buffer: 249856/327680 used, 77823 free)
I (492310) TTS: Received audio chunk #74: 4096 bytes (buffer: 253952/327680 used, 73727 free)
I (492317) TTS: Received audio chunk #75: 1630 bytes (buffer: 258048/327680 used, 69631 free)
I (492326) TTS: Received audio chunk #76: 2466 bytes (buffer: 259678/327680 used, 68001 free)
I (492336) TTS: Received audio chunk #77: 3290 bytes (buffer: 262144/327680 used, 65535 free)
I (492341) TTS: Received audio chunk #78: 806 bytes (buffer: 265434/327680 used, 62245 free)
I (492353) TTS: Received audio chunk #79: 4096 bytes (buffer: 266240/327680 used, 61439 free)
I (492363) TTS: Received audio chunk #80: 4096 bytes (buffer: 270336/327680 used, 57343 free)
I (492374) TTS: Received audio chunk #81: 4096 bytes (buffer: 274432/327680 used, 53247 free)
I (492383) TTS: Received audio chunk #82: 4096 bytes (buffer: 278528/327680 used, 49151 free)
I (492392) TTS: Received audio chunk #83: 4096 bytes (buffer: 282624/327680 used, 45055 free)
I (492402) TTS: Received audio chunk #84: 4096 bytes (buffer: 286720/327680 used, 40959 free)
I (492410) TTS: Received audio chunk #85: 4096 bytes (buffer: 290816/327680 used, 36863 free)
I (492421) TTS: Received audio chunk #86: 4096 bytes (buffer: 294912/327680 used, 32767 free)
I (492437) TTS: Received audio chunk #87: 4096 bytes (buffer: 294912/327680 used, 32767 free)
I (492452) TTS: Received audio chunk #88: 4096 bytes (buffer: 294912/327680 used, 32767 free)
I (492467) TTS: Received audio chunk #89: 4096 bytes (buffer: 299008/327680 used, 28671 free)
I (492483) TTS: Received audio chunk #90: 4096 bytes (buffer: 303104/327680 used, 24575 free)
I (492533) TTS: Received audio chunk #91: 4096 bytes (buffer: 307200/327680 used, 20479 free)
I (492539) TTS: Received audio chunk #92: 1656 bytes (buffer: 311296/327680 used, 16383 free)
I (492544) TTS: Received audio chunk #93: 2440 bytes (buffer: 312952/327680 used, 14727 free)
I (492557) TTS: Received audio chunk #94: 4096 bytes (buffer: 315392/327680 used, 12287 free)
I (492563) TTS: Received audio chunk #95: 436 bytes (buffer: 319488/327680 used, 8191 free)
I (492571) TTS: Received audio chunk #96: 3660 bytes (buffer: 319924/327680 used, 7755 free)
I (492583) TTS: Received audio chunk #97: 4096 bytes (buffer: 323584/327680 used, 4095 free)
W (492588) TTS: âš ï¸ BUFFER PRESSURE: Incoming 4096 bytes, only 4095 bytes free
W (492595) TTS:    Buffer: 323584/327680 bytes used (98.8% full)
W (492602) TTS:    This may cause delays or data loss if playback is slow
I (492616) TTS: Received audio chunk #98: 4096 bytes (buffer: 323584/327680 used, 4095 free)
W (492618) TTS: âš ï¸ BUFFER PRESSURE: Incoming 4096 bytes, only 4095 bytes free
W (492626) TTS:    Buffer: 323584/327680 bytes used (98.8% full)
W (492633) TTS:    This may cause delays or data loss if playback is slow
I (492693) TTS: Received audio chunk #99: 4096 bytes (buffer: 323584/327680 used, 4095 free)
W (492694) TTS: âš ï¸ BUFFER PRESSURE: Incoming 4096 bytes, only 4095 bytes free
W (492700) TTS:    Buffer: 323584/327680 bytes used (98.8% full)
W (492707) TTS:    This may cause delays or data loss if playback is slow
I (492821) TTS: Received audio chunk #100: 4096 bytes (buffer: 323584/327680 used, 4095 free)
W (492822) TTS: âš ï¸ BUFFER PRESSURE: Incoming 4096 bytes, only 4095 bytes free
W (492828) TTS:    Buffer: 323584/327680 bytes used (98.8% full)
W (492835) TTS:    This may cause delays or data loss if playback is slow
I (492949) TTS: Received audio chunk #101: 4096 bytes (buffer: 323584/327680 used, 4095 free)
W (492949) TTS: âš ï¸ BUFFER PRESSURE: Incoming 4096 bytes, only 4095 bytes free
W (492956) TTS:    Buffer: 323584/327680 bytes used (98.8% full)
W (492962) TTS:    This may cause delays or data loss if playback is slow
I (493077) TTS: Received audio chunk #102: 4096 bytes (buffer: 323584/327680 used, 4095 free)
W (493077) TTS: âš ï¸ BUFFER PRESSURE: Incoming 4096 bytes, only 4095 bytes free
W (493083) TTS:    Buffer: 323584/327680 bytes used (98.8% full)
W (493090) TTS:    This may cause delays or data loss if playback is slow
I (493204) TTS: Received audio chunk #103: 4096 bytes (buffer: 323584/327680 used, 4095 free)
W (493204) TTS: âš ï¸ BUFFER PRESSURE: Incoming 4096 bytes, only 4095 bytes free
W (493210) TTS:    Buffer: 323584/327680 bytes used (98.8% full)
W (493217) TTS:    This may cause delays or data loss if playback is slow
I (493329) TTS: Received audio chunk #104: 1252 bytes (buffer: 323584/327680 used, 4095 free)
I (493331) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (493335) TTS: TTS end-of-stream signaled (bytes_received=390372, header_parsed=1)
I (493344) TTS: ğŸµ Playback task will drain 324836 bytes of buffered audio
I (493351) TTS: Waiting for playback completion: 324836 bytes buffered, calculated timeout: 12151 ms
I (493361) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (493453) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (493580) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (493708) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (493835) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (493963) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (494090) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (494218) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (494345) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (494473) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (494600) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (494728) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (494855) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (494983) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (495110) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (495238) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (495365) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (495493) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (495620) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (495748) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (495875) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (496003) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (496130) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (496258) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (496385) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (496513) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (496640) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (496768) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (496895) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (497023) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (497150) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (497278) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (497405) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (497533) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (497660) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (497788) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (497915) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (498043) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (498170) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (498298) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (498425) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (498553) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (498680) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (498808) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (498935) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (499063) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (499190) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (499318) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (499445) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (499573) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (499700) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (499828) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (499955) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (500083) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (500210) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (500338) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (500465) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (500593) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (500720) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (500848) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (500975) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (501103) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (501231) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (501358) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (501485) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (501613) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (501740) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (501868) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (501995) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (502123) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (502250) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (502378) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (502505) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (502633) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (502760) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (502888) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (503015) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (503143) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (503270) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (503398) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (503525) TTS: âœ… All audio data received (390372 bytes, expected 390328 + 44 header)
I (503689) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (503689) TTS: ğŸµ TTS playback task exiting (played 390328 bytes, result: ESP_OK)
I (503734) TTS: TTS decoder session reset for next audio stream
I (503734) TTS: Received audio chunk #105: 0 bytes (buffer: 0/327680 used, 327679 free)
I (503742) TTS: New audio session detected - resetting chunk counter
I (503749) WEBSOCKET: ğŸµ Audio session complete: 390372 bytes in 104 messages
I (503762) WEBSOCKET: Received text message: {"status": "complete"}
I (503764) WEBSOCKET: Server status: complete
I (503769) WEBSOCKET: Pipeline stage changed: tts -> complete
I (503775) WEBSOCKET: Exiting TTS stage (transition to complete)
I (503782) STATE_MGR: TTS playback finished successfully
I (503788) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (503797) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (503803) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (503822) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (503829) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (503847) MEM_MGR: â•‘ Internal RAM:
I (503852) MEM_MGR: â•‘   Free:              90851 bytes ( 88 KB)
I (503858) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (503865) MEM_MGR: â•‘   Fragmentation:     28%
I (503870) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (503889) MEM_MGR: â•‘ DMA-capable RAM:
I (503894) MEM_MGR: â•‘   Free:              70435 bytes ( 68 KB)
I (503900) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (503907) MEM_MGR: â•‘   Fragmentation:      7%
I (503912) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (503931) MEM_MGR: â•‘ PSRAM:
I (503935) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (503942) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (503948) MEM_MGR: â•‘   Fragmentation:      2%
I (503954) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (503972) MEM_MGR: â•‘ Total Heap:
I (503976) MEM_MGR: â•‘   Free:             3725232 bytes (3637 KB)
I (503983) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (503990) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (504009) MEM_MGR: â•‘ Memory Delta from Baseline:
I (504014) MEM_MGR: â•‘   Internal RAM:     -134328 bytes (-131 KB)
I (504021) MEM_MGR: â•‘   DMA-capable:      -134328 bytes (-131 KB)
I (504028) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (504035) MEM_MGR: â•‘   Total Heap:       -639516 bytes (-624 KB)
I (504042) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (504061) STATE_MGR: Stopping voice mode components...
I (504067) STT: Stopping STT pipeline...
W (504071) STT: STT pipeline already stopped
I (504076) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (504087) TTS: âœ… TTS playback finished event dispatched to state manager
I (504092) TTS:   âœ“ DMA buffer freed from PSRAM
I (504097) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (504105) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (504126) STATE_MGR: Voice pipeline reported COMPLETE
I (504126) STATE_MGR: TTS playback already drained - no pending audio
I (504128) STATE_MGR: Flushing and resetting TTS decoder for next session
I (504136) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (504144) TTS: No pending audio to flush
I (504191) TTS: TTS decoder session reset for next audio stream
I (504191) TTS: âœ… TTS decoder flushed and reset for next session
I (504393) TTS: â¹ï¸ Stopping TTS decoder...
W (504393) TTS: TTS decoder already stopped.
I (504538) STATE_MGR: Acquiring I2S mutex...
I (504538) STATE_MGR: Deinitializing audio drivers...
I (504538) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (504556) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (504564) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (504582) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (504589) AUDIO: âœ… RX channel disabled (took 0 ms)
I (504594) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (504601) AUDIO: âœ… TX channel disabled (took 0 ms)
I (504607) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (504663) AUDIO: [STEP 4/5] Deleting RX channel...
I (504664) AUDIO: âœ… RX channel deleted (took 0 ms)
I (504664) AUDIO: [STEP 5/5] Deleting TX channel...
I (504669) AUDIO: âœ… TX channel deleted (took 0 ms)
I (504675) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (504732) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (504739) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (504746) AUDIO: â•‘ Camera Can Now Initialize
I (504751) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (504819) STATE_MGR: Allowing memory stabilization (100ms)...
I (504919) STATE_MGR: Camera will be initialized on-demand during capture
I (504919) STATE_MGR: I2S mutex released
I (504920) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (504939) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (504946) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (504964) MEM_MGR: â•‘ Internal RAM:
I (504969) MEM_MGR: â•‘   Free:              90851 bytes ( 88 KB)
I (504975) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (504982) MEM_MGR: â•‘   Fragmentation:     28%
I (504987) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (505006) MEM_MGR: â•‘ DMA-capable RAM:
I (505010) MEM_MGR: â•‘   Free:              70435 bytes ( 68 KB)
I (505017) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (505024) MEM_MGR: â•‘   Fragmentation:      7%
I (505029) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (505048) MEM_MGR: â•‘ PSRAM:
I (505051) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (505058) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (505065) MEM_MGR: â•‘   Fragmentation:      2%
I (505071) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (505089) MEM_MGR: â•‘ Total Heap:
I (505093) MEM_MGR: â•‘   Free:             3725232 bytes (3637 KB)
I (505100) MEM_MGR: â•‘   Minimum Ever:     3632340 bytes (3547 KB)
I (505107) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (505126) MEM_MGR: â•‘ Memory Delta from Baseline:
I (505131) MEM_MGR: â•‘   Internal RAM:     -134328 bytes (-131 KB)
I (505138) MEM_MGR: â•‘   DMA-capable:      -134328 bytes (-131 KB)
I (505145) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (505152) MEM_MGR: â•‘   Total Heap:       -639516 bytes (-624 KB)
I (505159) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (505178) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (505187) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (505205) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (505212) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (505230) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (505248) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (505256) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (505274) AUDIO: [DIAG] Pre-init state:
I (505278) AUDIO:   Free heap: 3772432 bytes
I (505283) AUDIO:   Free internal RAM: 125891 bytes
I (505289) AUDIO:   Free DMA-capable: 105475 bytes
I (505294) AUDIO:   Free PSRAM: 3667124 bytes
I (505299) AUDIO:   Timestamp: 503745 ms
I (505304) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (505311) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (505319) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (505327) AUDIO:   DMA frame num (per desc): 1020
I (505333) AUDIO:   DMA total samples (effective): 4080
I (505339) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (505346) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (505352) AUDIO: âœ… I2S channels created (took 0 ms)
I (505358) AUDIO:   TX handle: 0x3ffcab38 | RX handle: 0x3ffcb188
I (505365) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (505371) AUDIO:   Sample rate: 16000 Hz
I (505376) AUDIO:   MCLK: DISABLED
I (505380) AUDIO:   BCLK: GPIO14 (shared)
I (505385) AUDIO:   WS:   GPIO15 (shared)
I (505389) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (505396) AUDIO: âœ… TX channel configured (took 1 ms)
I (505401) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (505408) AUDIO:   Sample rate: 16000 Hz
I (505413) AUDIO:   MCLK: DISABLED
I (505417) AUDIO:   BCLK: GPIO14 (shared)
I (505421) AUDIO:   WS:   GPIO15 (shared)
I (505426) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (505432) AUDIO: âœ… RX channel configured (took 0 ms)
I (505438) AUDIO: [STEP 4/6] Enabling TX channel...
I (505443) AUDIO: âœ… TX channel enabled (took 0 ms)
I (505449) AUDIO: [STEP 5/6] Enabling RX channel...
I (505454) AUDIO: âœ… RX channel enabled (took 0 ms)
I (505460) AUDIO: [STEP 6/6] Hardware stabilization...
I (505466) AUDIO:   Phase 1: Initial settle (50ms)
I (505521) AUDIO:   Phase 2: DMA verification
I (505522) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (505522) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (505679) AUDIO: [DIAG] Post-init state:
I (505679) AUDIO:   Free heap: 3746464 bytes
I (505679) AUDIO:   Free internal RAM: 99923 bytes
I (505683) AUDIO:   Free DMA-capable: 79507 bytes
I (505689) AUDIO:   Free PSRAM: 3667124 bytes
I (505694) AUDIO:   Timestamp: 504139 ms
I (505698) AUDIO:   Total init time: 201 ms
I (505703) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (505721) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (505727) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (505733) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (505742) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (505749) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (505767) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (505785) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (505791) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (505798) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (505805) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (505811) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (506112) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (506119) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (506127) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (506145) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (506152) AUDIO: âœ… RX channel disabled (took 0 ms)
I (506158) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (506164) AUDIO: âœ… TX channel disabled (took 0 ms)
I (506170) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (506227) AUDIO: [STEP 4/5] Deleting RX channel...
I (506228) AUDIO: âœ… RX channel deleted (took 0 ms)
I (506228) AUDIO: [STEP 5/5] Deleting TX channel...
I (506233) AUDIO: âœ… TX channel deleted (took 0 ms)
I (506239) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (506296) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (506303) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (506310) AUDIO: â•‘ Camera Can Now Initialize
I (506315) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (506333) LED_CTRL: LED pattern -> 3
I (506337) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (506355) STATE_MGR: Pipeline stage event: complete
I (515495) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (515496) STATE_MGR: Double-click detected - triggering capture sequence
I (515499) STATE_MGR: Starting camera capture sequence
I (515505) LED_CTRL: LED pattern -> 6
I (515510) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (515527) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (515535) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (515553) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (515571) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (515578) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (515596) AUDIO: [DIAG] Pre-init state:
I (515601) AUDIO:   Free heap: 3772432 bytes
I (515606) AUDIO:   Free internal RAM: 125891 bytes
I (515611) AUDIO:   Free DMA-capable: 105475 bytes
I (515617) AUDIO:   Free PSRAM: 3667124 bytes
I (515622) AUDIO:   Timestamp: 514068 ms
I (515626) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (515633) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (515641) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (515650) AUDIO:   DMA frame num (per desc): 1020
I (515655) AUDIO:   DMA total samples (effective): 4080
I (515661) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (515668) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (515675) AUDIO: âœ… I2S channels created (took 0 ms)
I (515680) AUDIO:   TX handle: 0x3ffcab38 | RX handle: 0x3ffcb188
I (515687) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (515694) AUDIO:   Sample rate: 16000 Hz
I (515698) AUDIO:   MCLK: DISABLED
I (515702) AUDIO:   BCLK: GPIO14 (shared)
I (515707) AUDIO:   WS:   GPIO15 (shared)
I (515712) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (515719) AUDIO: âœ… TX channel configured (took 1 ms)
I (515723) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (515730) AUDIO:   Sample rate: 16000 Hz
I (515735) AUDIO:   MCLK: DISABLED
I (515739) AUDIO:   BCLK: GPIO14 (shared)
I (515744) AUDIO:   WS:   GPIO15 (shared)
I (515748) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (515754) AUDIO: âœ… RX channel configured (took 0 ms)
I (515760) AUDIO: [STEP 4/6] Enabling TX channel...
I (515766) AUDIO: âœ… TX channel enabled (took 0 ms)
I (515771) AUDIO: [STEP 5/6] Enabling RX channel...
I (515777) AUDIO: âœ… RX channel enabled (took 0 ms)
I (515782) AUDIO: [STEP 6/6] Hardware stabilization...
I (515788) AUDIO:   Phase 1: Initial settle (50ms)
I (515844) AUDIO:   Phase 2: DMA verification
I (515844) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (515845) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (516002) AUDIO: [DIAG] Post-init state:
I (516002) AUDIO:   Free heap: 3746464 bytes
I (516002) AUDIO:   Free internal RAM: 99923 bytes
I (516006) AUDIO:   Free DMA-capable: 79507 bytes
I (516012) AUDIO:   Free PSRAM: 3667124 bytes
I (516017) AUDIO:   Timestamp: 514462 ms
I (516021) AUDIO:   Total init time: 201 ms
I (516026) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (516044) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (516050) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (516056) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (516065) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (516072) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (516090) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (516108) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (516114) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (516121) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (516128) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (516134) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (516484) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (516491) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (516499) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (516517) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (516524) AUDIO: âœ… RX channel disabled (took 0 ms)
I (516530) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (516536) AUDIO: âœ… TX channel disabled (took 0 ms)
I (516542) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (516599) AUDIO: [STEP 4/5] Deleting RX channel...
I (516600) AUDIO: âœ… RX channel deleted (took 0 ms)
I (516600) AUDIO: [STEP 5/5] Deleting TX channel...
I (516605) AUDIO: âœ… TX channel deleted (took 0 ms)
I (516611) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (516668) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (516675) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (516682) AUDIO: â•‘ Camera Can Now Initialize
I (516687) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (516705) STATE_MGR: Capturing frame from camera
I (516710) CAMERA: Initializing camera...
I (516715) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (516725) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (516733) cam_hal: cam init ok
W (516737) ledc: GPIO 0 is not usable, maybe conflict with others
I (516743) sccb-ng: pin_sda 26 pin_scl 27
I (516748) sccb-ng: sccb_i2c_port=1
I (516753) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
E (516795) camera: Detected camera not supported.
E (516795) camera: Camera probe failed with error 0x106(ESP_ERR_NOT_SUPPORTED)
E (516798) CAMERA: Camera init failed: ESP_ERR_NOT_SUPPORTED
E (516804) STATE_MGR: Failed to initialize camera for capture: ESP_ERR_NOT_SUPPORTED
I (516812) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (516830) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (516837) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (516856) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (516874) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (516881) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (516899) AUDIO: [DIAG] Pre-init state:
I (516904) AUDIO:   Free heap: 3772432 bytes
I (516909) AUDIO:   Free internal RAM: 125891 bytes
I (516914) AUDIO:   Free DMA-capable: 105475 bytes
I (516920) AUDIO:   Free PSRAM: 3667124 bytes
I (516925) AUDIO:   Timestamp: 515370 ms
I (516929) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (516936) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (516944) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (516952) AUDIO:   DMA frame num (per desc): 1020
I (516958) AUDIO:   DMA total samples (effective): 4080
I (516964) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (516971) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (516978) AUDIO: âœ… I2S channels created (took 0 ms)
I (516983) AUDIO:   TX handle: 0x3ffcab38 | RX handle: 0x3ffcb188
I (516990) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (516997) AUDIO:   Sample rate: 16000 Hz
I (517001) AUDIO:   MCLK: DISABLED
I (517005) AUDIO:   BCLK: GPIO14 (shared)
I (517010) AUDIO:   WS:   GPIO15 (shared)
I (517015) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (517021) AUDIO: âœ… TX channel configured (took 0 ms)
I (517026) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (517033) AUDIO:   Sample rate: 16000 Hz
I (517038) AUDIO:   MCLK: DISABLED
I (517042) AUDIO:   BCLK: GPIO14 (shared)
I (517047) AUDIO:   WS:   GPIO15 (shared)
I (517051) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (517057) AUDIO: âœ… RX channel configured (took 0 ms)
I (517063) AUDIO: [STEP 4/6] Enabling TX channel...
I (517068) AUDIO: âœ… TX channel enabled (took 0 ms)
I (517074) AUDIO: [STEP 5/6] Enabling RX channel...
I (517080) AUDIO: âœ… RX channel enabled (took 0 ms)
I (517085) AUDIO: [STEP 6/6] Hardware stabilization...
I (517091) AUDIO:   Phase 1: Initial settle (50ms)
I (517146) AUDIO:   Phase 2: DMA verification
I (517146) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (517147) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (517304) AUDIO: [DIAG] Post-init state:
I (517304) AUDIO:   Free heap: 3746464 bytes
I (517305) AUDIO:   Free internal RAM: 99923 bytes
I (517308) AUDIO:   Free DMA-capable: 79507 bytes
I (517314) AUDIO:   Free PSRAM: 3667124 bytes
I (517319) AUDIO:   Timestamp: 515764 ms
I (517323) AUDIO:   Total init time: 200 ms
I (517328) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (517346) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (517352) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (517358) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (517367) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (517374) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (517392) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (517410) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (517416) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (517423) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (517430) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (517436) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (518823) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (518830) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (518838) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (518856) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (518863) AUDIO: âœ… RX channel disabled (took 0 ms)
I (518869) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (518875) AUDIO: âœ… TX channel disabled (took 0 ms)
I (518881) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (518938) AUDIO: [STEP 4/5] Deleting RX channel...
I (518939) AUDIO: âœ… RX channel deleted (took 0 ms)
I (518939) AUDIO: [STEP 5/5] Deleting TX channel...
I (518944) AUDIO: âœ… TX channel deleted (took 0 ms)
I (518950) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (519007) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (519014) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (519021) AUDIO: â•‘ Camera Can Now Initialize
I (519026) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (519044) LED_CTRL: LED pattern -> 3
E (519048) STATE_MGR: Camera capture sequence failed (ESP_ERR_NOT_SUPPORTED)
I (519056) LED_CTRL: LED pattern -> 5
I (521060) LED_CTRL: LED pattern -> 3
I (523765) STATE_MGR: Button event received: 3 in state CAMERA_STANDBY
I (523765) BUTTON: Long press detected (3000 ms)
W (523765) STATE_MGR: Long press - shutdown requested
W (523772) STATE_MGR: Shutdown state reached
W (523777) STATE_MGR: === SYSTEM SHUTDOWN ===
I (523782) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (523800) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (523807) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (523825) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (523843) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (523851) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (523869) AUDIO: [DIAG] Pre-init state:
I (523874) AUDIO:   Free heap: 3772432 bytes
I (523878) AUDIO:   Free internal RAM: 125891 bytes
I (523884) AUDIO:   Free DMA-capable: 105475 bytes
I (523890) AUDIO:   Free PSRAM: 3667124 bytes
I (523895) AUDIO:   Timestamp: 522340 ms
I (523899) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (523906) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (523914) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (523922) AUDIO:   DMA frame num (per desc): 1020
I (523928) AUDIO:   DMA total samples (effective): 4080
I (523934) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (523941) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (523948) AUDIO: âœ… I2S channels created (took 0 ms)
I (523953) AUDIO:   TX handle: 0x3ffcab38 | RX handle: 0x3ffcb188
I (523960) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (523966) AUDIO:   Sample rate: 16000 Hz
I (523971) AUDIO:   MCLK: DISABLED
I (523975) AUDIO:   BCLK: GPIO14 (shared)
I (523980) AUDIO:   WS:   GPIO15 (shared)
I (523985) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (523991) AUDIO: âœ… TX channel configured (took 1 ms)
I (523996) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (524003) AUDIO:   Sample rate: 16000 Hz
I (524008) AUDIO:   MCLK: DISABLED
I (524012) AUDIO:   BCLK: GPIO14 (shared)
I (524016) AUDIO:   WS:   GPIO15 (shared)
I (524021) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (524027) AUDIO: âœ… RX channel configured (took 0 ms)
I (524033) AUDIO: [STEP 4/6] Enabling TX channel...
I (524038) AUDIO: âœ… TX channel enabled (took 0 ms)
I (524044) AUDIO: [STEP 5/6] Enabling RX channel...
I (524050) AUDIO: âœ… RX channel enabled (took 0 ms)
I (524055) AUDIO: [STEP 6/6] Hardware stabilization...
I (524061) AUDIO:   Phase 1: Initial settle (50ms)
I (524116) AUDIO:   Phase 2: DMA verification
I (524116) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (524117) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (524274) AUDIO: [DIAG] Post-init state:
I (524274) AUDIO:   Free heap: 3746464 bytes
I (524274) AUDIO:   Free internal RAM: 99923 bytes
I (524278) AUDIO:   Free DMA-capable: 79507 bytes
I (524284) AUDIO:   Free PSRAM: 3667124 bytes
I (524289) AUDIO:   Timestamp: 522734 ms
I (524293) AUDIO:   Total init time: 201 ms
I (524298) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (524316) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (524322) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (524328) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (524337) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (524344) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (524362) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (524380) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (524386) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (524393) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (524400) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (524406) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (524597) HOTPIN_MAIN: System shutdown detected, terminating WebSocket connection task
I (524597) HOTPIN_MAIN: Unregistering WebSocket connection task from watchdog
I (524602) HOTPIN_MAIN: WebSocket connection task terminated
I (525665) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (525672) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (525680) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (525698) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (525705) AUDIO: âœ… RX channel disabled (took 0 ms)
I (525711) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (525717) AUDIO: âœ… TX channel disabled (took 0 ms)
I (525723) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (525780) AUDIO: [STEP 4/5] Deleting RX channel...
I (525781) AUDIO: âœ… RX channel deleted (took 0 ms)
I (525781) AUDIO: [STEP 5/5] Deleting TX channel...
I (525786) AUDIO: âœ… TX channel deleted (took 0 ms)
I (525792) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (525849) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (525856) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (525863) AUDIO: â•‘ Camera Can Now Initialize
I (525868) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (525886) LED_CTRL: LED pattern -> 1
I (526490) LED_CTRL: LED pattern -> 3
I (527690) LED_CTRL: LED pattern -> 0
I (527690) STATE_MGR: Stopping all subsystems...
I (527691) STATE_MGR: Shutting down camera...
I (527694) CAMERA: Deinitializing camera...
I (527699) STT: Stopping STT pipeline...
W (527703) STT: STT pipeline already stopped
I (527708) TTS: â¹ï¸ Stopping TTS decoder...
W (527713) TTS: TTS decoder already stopped.
I (527762) STATE_MGR: Stopping WebSocket client
I (527763) WEBSOCKET: Disconnecting from WebSocket server...
W (527849) websocket_client: Client was not started
W (527850) WEBSOCKET: WebSocket client stop reported ESP_FAIL, continuing cleanup
I (527852) WEBSOCKET: WebSocket disconnected
I (527857) WEBSOCKET: Force stopping WebSocket client
W (527863) websocket_client: Client was not started
W (527869) WEBSOCKET: Graceful close returned ESP_FAIL
I (527874) STATE_MGR: âœ… Shutdown complete
PS F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware> idf.py monitor
Executing action: monitor
Serial port COM7
Connecting......
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP32
Running idf_monitor in directory F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware
Executing "C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe C:\Espressif\frameworks\esp-idf-v5.4.2\tools/idf_monitor.py -p COM7 -b 115200 --toolchain-prefix xtensa-esp32-elf- --target esp32 --revision 0 F:\Documents\HOTPIN\HOTPIN\hotpin_esp32_firmware\build\hotpin_esp32_firmware.elf --force-color -m 'C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe' 'C:\Espressif\frameworks\esp-idf-v5.4.2\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM7 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM7 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:2
load:0x3fff0030,len:6276
load:0x40078000,len:15736
load:0x40080400,len:4
--- 0x40080400: _init at ??:?
load:0x40080404,len:3860
entry 0x4008063c
I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Nov 14 2025 14:32:44
I (30) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=3b480h (242816) map
I (188) esp_image: segment 1: paddr=0004b4a8 vaddr=3ff80000 size=0001ch (    28) load
I (189) esp_image: segment 2: paddr=0004b4cc vaddr=3ffb0000 size=04b4ch ( 19276) load
I (199) esp_image: segment 3: paddr=00050020 vaddr=400d0020 size=be438h (779320) map
I (466) esp_image: segment 4: paddr=0010e460 vaddr=3ffb4b4c size=0d178h ( 53624) load
I (486) esp_image: segment 5: paddr=0011b5e0 vaddr=40080000 size=1ad60h (109920) load
I (545) boot: Loaded app from partition at offset 0x10000
I (545) boot: Disabling RNG early entropy source...
I (555) quad_psram: This chip is ESP32-D0WD
I (556) esp_psram: Found 4MB PSRAM device
I (556) esp_psram: Speed: 40MHz
I (559) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (567) cpu_start: Multicore app
I (1460) esp_psram: SPI SRAM memory test OK
I (1469) cpu_start: Pro cpu start user code
I (1469) cpu_start: cpu freq: 240000000 Hz
I (1469) app_init: Application information:
I (1472) app_init: Project name:     hotpin_esp32_firmware
I (1478) app_init: App version:      7556804-dirty
I (1483) app_init: Compile time:     Nov 14 2025 14:32:33
I (1490) app_init: ELF file SHA256:  49b92f22f...
I (1495) app_init: ESP-IDF:          v5.4.2-dirty
I (1500) efuse_init: Min chip rev:     v0.0
I (1505) efuse_init: Max chip rev:     v3.99
I (1510) efuse_init: Chip rev:         v3.1
I (1515) heap_init: Initializing. RAM available for dynamic allocation:
I (1522) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1529) heap_init: At 3FFC9480 len 00016B80 (90 KiB): DRAM
I (1535) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1541) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1548) heap_init: At 4009AD60 len 000052A0 (20 KiB): IRAM
I (1554) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1562) spi_flash: detected chip: generic
I (1566) spi_flash: flash io: dio
W (1570) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1585) main_task: Started on CPU0
I (1588) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1597) main_task: Calling app_main()
I (1601) HOTPIN_MAIN: ====================================
I (1607) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1613) HOTPIN_MAIN: ====================================
W (1619) HOTPIN_MAIN: Brownout detector disabled
I (1624) HOTPIN_MAIN: Validating PSRAM...
I (1629) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1636) HOTPIN_MAIN: PSRAM validation passed
I (1641) HOTPIN_MAIN: ====================================
I (1647) HOTPIN_MAIN: System Information:
I (1651) HOTPIN_MAIN: Chip: esp32
I (1655) HOTPIN_MAIN: Cores: 2
I (1659) HOTPIN_MAIN: Silicon revision: 301
I (1664) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1669) HOTPIN_MAIN: Flash: 2 MB external
I (1674) HOTPIN_MAIN: Free heap: 4364844 bytes
I (1679) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1684) HOTPIN_MAIN: ====================================
I (1690) HOTPIN_MAIN: Initializing memory manager...
I (1695) MEM_MGR: Initializing memory manager...
I (1701) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1719) MEM_MGR: â•‘ Memory Manager Initialized
I (1724) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1743) MEM_MGR: â•‘ Baseline Memory State:
I (1748) MEM_MGR: â•‘   Internal RAM:     225179 bytes (219 KB)
I (1754) MEM_MGR: â•‘   DMA-capable:      204763 bytes (199 KB)
I (1761) MEM_MGR: â•‘   PSRAM:            4192016 bytes (4093 KB)
I (1768) MEM_MGR: â•‘   Total Heap:       4364748 bytes (4262 KB)
I (1774) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1793) MEM_MGR: â•‘ Configured Thresholds:
I (1798) MEM_MGR: â•‘   Internal RAM:     WARN=50KB, CRIT=20KB
I (1804) MEM_MGR: â•‘   DMA-capable:      WARN=35KB, CRIT=20KB
I (1811) MEM_MGR: â•‘   PSRAM:            WARN=500KB, CRIT=200KB
I (1817) MEM_MGR: â•‘   Fragmentation:    WARN=30%, CRIT=50%
I (1824) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1842) MEM_MGR: Starting memory monitoring (interval: 15000 ms)
I (1849) MEM_MGR: âœ… Memory monitoring started
I (1849) MEM_MGR: Memory monitor task started (interval: 15000 ms)
I (1854) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
W (1861) MEM_MGR: âš ï¸ WARNING: Memory fragmentation increasing! DMA:46% PSRAM:2%
I (1879) MEM_MGR: â•‘ Memory Statistics - System Boot
I (1893) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1911) MEM_MGR: â•‘ Internal RAM:
I (1916) MEM_MGR: â•‘   Free:             225179 bytes (219 KB)
I (1922) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1929) MEM_MGR: â•‘   Fragmentation:     51%
I (1934) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1952) MEM_MGR: â•‘ DMA-capable RAM:
I (1957) MEM_MGR: â•‘   Free:             204763 bytes (199 KB)
I (1963) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (1970) MEM_MGR: â•‘   Fragmentation:     46%
I (1975) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (1993) MEM_MGR: â•‘ PSRAM:
I (1997) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (2004) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (2010) MEM_MGR: â•‘   Fragmentation:      2%
I (2016) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2034) MEM_MGR: â•‘ Total Heap:
I (2038) MEM_MGR: â•‘   Free:             4364748 bytes (4262 KB)
I (2045) MEM_MGR: â•‘   Minimum Ever:     4364748 bytes (4262 KB)
I (2051) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2070) MEM_MGR: â•‘ Memory Delta from Baseline:
I (2075) MEM_MGR: â•‘   Internal RAM:          +0 bytes (  +0 KB)
I (2082) MEM_MGR: â•‘   DMA-capable:           +0 bytes (  +0 KB)
I (2089) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (2095) MEM_MGR: â•‘   Total Heap:            +0 bytes (  +0 KB)
I (2102) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (2120) HOTPIN_MAIN: Initializing NVS...
I (2150) HOTPIN_MAIN: NVS initialized successfully
I (2150) event_dispatcher: System event queue ready (16 entries)
I (2151) HOTPIN_MAIN: Synchronization primitives created
I (2157) HOTPIN_MAIN: Initializing WiFi...
I (2166) wifi:wifi driver task: 3ffdaa40, prio:23, stack:6656, core=0
I (2179) wifi:wifi firmware version: bea31f3
I (2179) wifi:wifi certification version: v7.0
I (2179) wifi:config NVS flash: enabled
I (2182) wifi:config nano formatting: disabled
I (2186) wifi:Init data frame dynamic rx buffer num: 32
I (2191) wifi:Init static rx mgmt buffer num: 5
I (2195) wifi:Init management short buffer num: 32
I (2200) wifi:Init dynamic tx buffer num: 32
I (2204) wifi:Init static rx buffer size: 1600
I (2208) wifi:Init static rx buffer num: 10
I (2212) wifi:Init dynamic rx buffer num: 32
I (2217) wifi_init: rx ba win: 6
I (2220) wifi_init: accept mbox: 6
I (2224) wifi_init: tcpip mbox: 32
I (2228) wifi_init: udp mbox: 6
I (2232) wifi_init: tcp mbox: 6
I (2236) wifi_init: tcp tx win: 5760
I (2240) wifi_init: tcp rx win: 5760
I (2244) wifi_init: tcp mss: 1440
I (2248) wifi_init: WiFi IRAM OP enabled
I (2253) wifi_init: WiFi RX IRAM OP enabled
I (2259) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (2338) phy_init: Saving new calibration data due to checksum failure or outdated calibration data, mode(0)
I (2355) wifi:mode : sta (80:f3:da:ac:63:70)
I (2356) wifi:enable tsf
I (2358) HOTPIN_MAIN: Disabling WiFi power save mode for stable streaming...
I (2360) wifi:Set ps type: 0, coexist: 0

I (2363) HOTPIN_MAIN: WiFi station started, connecting...
I (2371) HOTPIN_MAIN: âœ… WiFi power save disabled - maximum throughput and stability
I (2380) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (2385) wifi:state: init -> auth (0xb0)
I (2925) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (2926) HOTPIN_MAIN: Waiting for WiFi connection...
I (3253) wifi:state: auth -> assoc (0x0)
I (3263) wifi:state: assoc -> run (0x10)
I (3286) wifi:connected with wifi, aid = 2, channel 11, BW20, bssid = ee:d4:b9:ed:90:50
I (3287) wifi:security: WPA3-SAE, phy: bgn, rssi: -58
I (3291) wifi:pm start, type: 0

I (3291) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (3302) wifi:<ba-add>idx:0 (ifx:0, ee:d4:b9:ed:90:50), tid:0, ssn:0, winSize:64
I (3309) HOTPIN_MAIN: WiFi connected to AP
I (3347) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (3347) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (4337) esp_netif_handlers: sta ip: 10.242.175.204, mask: 255.255.255.0, gw: 10.242.175.123
I (4338) HOTPIN_MAIN: âœ… Got IP address: 10.242.175.204
I (4342) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (7928) HOTPIN_MAIN: Initializing button handler...
I (7928) BUTTON: Initializing button handler on GPIO 12
I (7929) gpio: GPIO[12]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (7938) BUTTON: Button FSM task started
I (7943) BUTTON: GPIO ISR service installed successfully
I (7948) BUTTON: Button handler initialized successfully (initial level=1, primed=1)
I (7957) HOTPIN_MAIN: Initializing LED controller...
I (7962) LED_CTRL: Initializing LED controller on GPIO 33
I (7970) LED_CTRL: LED controller ready
I (7973) LED_CTRL: LED pattern -> 2
I (7977) HOTPIN_MAIN: Initializing WebSocket client...
I (7983) WEBSOCKET: Initializing WebSocket client...
I (7989) WEBSOCKET: Server URI: ws://10.242.175.58:8000/ws
I (7995) WEBSOCKET: Authorization header configured
I (8001) WEBSOCKET: âœ… WebSocket client initialized
I (8006) WEBSOCKET: Status callback registered
I (8011) HOTPIN_MAIN: WebSocket status callback registered
I (8017) HOTPIN_MAIN: Initializing HTTP client...
I (8023) HTTP_CLIENT: Initializing HTTP client
I (8028) HTTP_CLIENT: Authorization token configured
I (8033) HTTP_CLIENT: HTTP client initialized (server: http://10.242.175.58:8000)
I (8041) HOTPIN_MAIN: Initializing STT pipeline...
I (8047) STT: Initializing STT pipeline...
I (8052) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8070) STT: â•‘ STT Ring Buffer Allocation (PSRAM)
I (8076) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8094) STT: [MEMORY] Pre-allocation state:
I (8099) STT:   Free internal RAM: 166431 bytes
I (8104) STT:   Free DMA-capable: 146015 bytes
I (8109) STT:   Free PSRAM: 4060484 bytes
I (8114) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (8122) STT:   âœ“ Ring buffer allocated at 0x3f820ac0 (PSRAM address)
I (8129) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (8137) STT: [MEMORY] Post-allocation state:
I (8143) STT:   Free internal RAM: 166431 bytes
I (8148) STT:   Free DMA-capable: 146015 bytes
I (8153) STT:   Free PSRAM: 3994944 bytes
I (8166) STT: [CORE AFFINITY] Creating persistent audio streaming task on Core 0
I (8167) STT: Persistent audio streaming task started on Core 0
I (8172) STT:   âœ“ Stream buffer allocated at 0x3ffd1b34 (with safety padding)
I (8180) STT: âœ… STT pipeline initialized
I (8185) HOTPIN_MAIN: Initializing TTS decoder...
I (8190) TTS: Initializing TTS decoder...
I (8195) TTS: Allocating 327680 byte PSRAM buffer for TTS stream
I (8202) TTS:   PSRAM available: 3994944 bytes (3901 KB)
I (8208) TTS:   âœ“ TTS stream buffer allocated at 0x3f830ac4
I (8258) WEBSOCKET: Audio callback registered
I (8259) TTS: âœ… TTS decoder initialized
I (8259) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (8265) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (8271) HOTPIN_MAIN: State manager task created on Core 1
I (8271) STATE_MGR: State manager task started on Core 1
I (8277) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (8283) STATE_MGR: Priority: 10
I (8290) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 1)...
I (8293) STATE_MGR: Starting in camera mode...
I (8301) WEBSOCKET: Connecting to WebSocket server...
I (8306) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (8317) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8319) websocket_client: Started
I (8336) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (8340) WEBSOCKET: WebSocket client started (health check disabled - managed by main connection task)
I (8347) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8277) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (8375) MEM_MGR: â•‘ Internal RAM:
I (8382) HOTPIN_MAIN: Configuring task watchdog for critical tasks...
I (8386) MEM_MGR: â•‘   Free:             222771 bytes (217 KB)
I (8393) HOTPIN_MAIN: âœ… State manager task added to watchdog
I (8400) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (8406) HOTPIN_MAIN: âœ… WebSocket connection task added to watchdog
I (8413) MEM_MGR: â•‘   Fragmentation:     51%
I (8420) HOTPIN_MAIN: Task watchdog configuration complete
I (8425) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8431) HOTPIN_MAIN: ====================================
I (8449) MEM_MGR: â•‘ DMA-capable RAM:
I (8456) HOTPIN_MAIN: System initialization complete!
I (8460) MEM_MGR: â•‘   Free:             202355 bytes (197 KB)
I (8466) HOTPIN_MAIN: Entering camera standby mode...
I (8472) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (8485) MEM_MGR: â•‘   Fragmentation:     46%
I (8478) HOTPIN_MAIN: ====================================
I (8490) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8507) WEBSOCKET: âœ… WebSocket connected to server
I (8514) MEM_MGR: â•‘ PSRAM:
I (8520) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (8524) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (8535) WEBSOCKET: Handshake sent successfully
I (8543) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (8538) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (8496) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8556) MEM_MGR: â•‘   Fragmentation:      2%
I (8574) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (8579) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8586) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8605) MEM_MGR: â•‘ Total Heap:
I (8623) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (8627) MEM_MGR: â•‘   Free:             4362340 bytes (4260 KB)
I (8634) AUDIO:   âœ“ I2S access mutex created successfully
I (8640) MEM_MGR: â•‘   Minimum Ever:     4362340 bytes (4260 KB)
I (8647) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8653) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8671) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (8690) MEM_MGR: â•‘ Memory Delta from Baseline:
I (8697) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8702) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (8720) AUDIO: [DIAG] Pre-init state:
I (8727) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (8731) AUDIO:   Free heap: 3768844 bytes
I (8738) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (8743) AUDIO:   Free internal RAM: 122103 bytes
I (8750) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (8755) AUDIO:   Free DMA-capable: 101687 bytes
I (8762) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8767) AUDIO:   Free PSRAM: 3667260 bytes
I (8785) STATE_MGR: Acquiring I2S mutex...
I (8790) AUDIO:   Timestamp: 7236 ms
I (8597) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (8799) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (8810) WEBSOCKET: Server status: connected
I (8817) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (8829) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (8837) AUDIO:   DMA frame num (per desc): 1020
I (8842) AUDIO:   DMA total samples (effective): 4080
I (8848) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (8855) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (8861) AUDIO: âœ… I2S channels created (took 0 ms)
I (8867) AUDIO:   TX handle: 0x3ffe1850 | RX handle: 0x3ffe1c1c
I (8873) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (8880) AUDIO:   Sample rate: 16000 Hz
I (8884) AUDIO:   MCLK: DISABLED
I (8888) AUDIO:   BCLK: GPIO14 (shared)
I (8893) AUDIO:   WS:   GPIO15 (shared)
I (8897) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (8904) AUDIO: âœ… TX channel configured (took 1 ms)
I (8908) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (8915) AUDIO:   Sample rate: 16000 Hz
I (8920) AUDIO:   MCLK: DISABLED
I (8923) AUDIO:   BCLK: GPIO14 (shared)
I (8928) AUDIO:   WS:   GPIO15 (shared)
I (8932) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (8938) AUDIO: âœ… RX channel configured (took 0 ms)
I (8944) AUDIO: [STEP 4/6] Enabling TX channel...
I (8949) AUDIO: âœ… TX channel enabled (took 0 ms)
I (8955) AUDIO: [STEP 5/6] Enabling RX channel...
I (8960) AUDIO: âœ… RX channel enabled (took 0 ms)
I (8965) AUDIO: [STEP 6/6] Hardware stabilization...
I (8971) AUDIO:   Phase 1: Initial settle (50ms)
I (8574) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (9026) AUDIO:   Phase 2: DMA verification
I (9026) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (9026) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (9183) AUDIO: [DIAG] Post-init state:
I (9183) AUDIO:   Free heap: 3742924 bytes
I (9183) AUDIO:   Free internal RAM: 96223 bytes
I (9186) AUDIO:   Free DMA-capable: 75807 bytes
I (9191) AUDIO:   Free PSRAM: 3667124 bytes
I (9196) AUDIO:   Timestamp: 7642 ms
I (9201) AUDIO:   Total init time: 201 ms
I (9205) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9223) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (9229) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (9235) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (9243) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (9250) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9268) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9286) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (9292) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (9298) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (9305) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (9311) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10596) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10603) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (10610) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10628) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (10635) AUDIO: âœ… RX channel disabled (took 0 ms)
I (10641) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (10647) AUDIO: âœ… TX channel disabled (took 0 ms)
I (10653) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (10710) AUDIO: [STEP 4/5] Deleting RX channel...
I (10710) AUDIO: âœ… RX channel deleted (took 0 ms)
I (10710) AUDIO: [STEP 5/5] Deleting TX channel...
I (10715) AUDIO: âœ… TX channel deleted (took 0 ms)
I (10721) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (10778) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10784) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (10791) AUDIO: â•‘ Camera Can Now Initialize
I (10796) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10814) STATE_MGR: Audio drivers already inactive; skipping deinit
I (10814) LED_CTRL: LED pattern -> 3
I (10821) STATE_MGR: Allowing memory stabilization (100ms)...
I (10825) HOTPIN_MAIN: Main task exiting - system running
I (10838) main_task: Returned from app_main()
I (10932) STATE_MGR: Camera will be initialized on-demand during capture
I (10932) STATE_MGR: I2S mutex released
I (10933) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10951) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (10958) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (10977) MEM_MGR: â•‘ Internal RAM:
I (10981) MEM_MGR: â•‘   Free:             222771 bytes (217 KB)
I (10988) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (10994) MEM_MGR: â•‘   Fragmentation:     51%
I (11000) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11018) MEM_MGR: â•‘ DMA-capable RAM:
I (11022) MEM_MGR: â•‘   Free:             202355 bytes (197 KB)
I (11029) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (11036) MEM_MGR: â•‘   Fragmentation:     46%
I (11041) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11059) MEM_MGR: â•‘ PSRAM:
I (11063) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (11070) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (11077) MEM_MGR: â•‘   Fragmentation:      2%
I (11082) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11100) MEM_MGR: â•‘ Total Heap:
I (11105) MEM_MGR: â•‘   Free:             4362340 bytes (4260 KB)
I (11111) MEM_MGR: â•‘   Minimum Ever:     4362340 bytes (4260 KB)
I (11118) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11137) MEM_MGR: â•‘ Memory Delta from Baseline:
I (11142) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (11149) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (11156) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (11163) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (11170) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11188) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (11197) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (11213) STATE_MGR: âœ… WebSocket connected
I (13766) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (13766) BUTTON: Single click confirmed
I (13766) STATE_MGR: Single click - mode toggle requested
I (13772) STATE_MGR: Switching: Camera â†’ Voice (count: 1)
I (13829) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (13829) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13842) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (13849) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13868) MEM_MGR: â•‘ Internal RAM:
I (13872) MEM_MGR: â•‘   Free:             222771 bytes (217 KB)
I (13879) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (13885) MEM_MGR: â•‘   Fragmentation:     51%
I (13890) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13909) MEM_MGR: â•‘ DMA-capable RAM:
I (13913) MEM_MGR: â•‘   Free:             202355 bytes (197 KB)
I (13920) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (13927) MEM_MGR: â•‘   Fragmentation:     46%
I (13932) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13950) MEM_MGR: â•‘ PSRAM:
I (13954) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (13961) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (13968) MEM_MGR: â•‘   Fragmentation:      2%
I (13973) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13991) MEM_MGR: â•‘ Total Heap:
I (13995) MEM_MGR: â•‘   Free:             4362340 bytes (4260 KB)
I (14002) MEM_MGR: â•‘   Minimum Ever:     4362340 bytes (4260 KB)
I (14009) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14027) MEM_MGR: â•‘ Memory Delta from Baseline:
I (14033) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (14040) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (14047) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (14054) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (14060) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14079) STATE_MGR: Stopping camera...
I (14083) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14100) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (14106) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14123) STATE_MGR:   Timeout: 5000 ms
I (14127) STATE_MGR:   Timestamp: 12573 ms
I (14132) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (14138) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14154) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (14160) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14177) STATE_MGR:   Free heap before: 3773424 bytes
I (14183) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (14188) CAMERA: Deinitializing camera...
I (14193) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (14199) STATE_MGR:   Free heap after: 3773424 bytes
I (14205) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (14211) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14227) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (14233) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14250) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (14358) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (14458) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (14508) STATE_MGR:   âœ“ Total stabilization: 250ms
I (14508) STATE_MGR:   Timestamp: 12954 ms
I (14509) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14524) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (14531) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14547) STATE_MGR:   Free heap before: 3773424 bytes
I (14553) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14571) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (14578) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14596) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14614) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (14621) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14639) AUDIO: [DIAG] Pre-init state:
I (14643) AUDIO:   Free heap: 3773424 bytes
I (14648) AUDIO:   Free internal RAM: 126771 bytes
I (14654) AUDIO:   Free DMA-capable: 106355 bytes
I (14659) AUDIO:   Free PSRAM: 3667124 bytes
I (14664) AUDIO:   Timestamp: 13110 ms
I (14668) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (14675) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (14683) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (14691) AUDIO:   DMA frame num (per desc): 1020
I (14697) AUDIO:   DMA total samples (effective): 4080
I (14703) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (14710) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (14716) AUDIO: âœ… I2S channels created (took 0 ms)
I (14722) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7f0
I (14728) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (14735) AUDIO:   Sample rate: 16000 Hz
I (14739) AUDIO:   MCLK: DISABLED
I (14743) AUDIO:   BCLK: GPIO14 (shared)
I (14748) AUDIO:   WS:   GPIO15 (shared)
I (14753) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (14760) AUDIO: âœ… TX channel configured (took 1 ms)
I (14764) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (14771) AUDIO:   Sample rate: 16000 Hz
I (14775) AUDIO:   MCLK: DISABLED
I (14779) AUDIO:   BCLK: GPIO14 (shared)
I (14784) AUDIO:   WS:   GPIO15 (shared)
I (14789) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (14795) AUDIO: âœ… RX channel configured (took 0 ms)
I (14800) AUDIO: [STEP 4/6] Enabling TX channel...
I (14806) AUDIO: âœ… TX channel enabled (took 0 ms)
I (14811) AUDIO: [STEP 5/6] Enabling RX channel...
I (14817) AUDIO: âœ… RX channel enabled (took 0 ms)
I (14822) AUDIO: [STEP 6/6] Hardware stabilization...
I (14828) AUDIO:   Phase 1: Initial settle (50ms)
I (14883) AUDIO:   Phase 2: DMA verification
I (14883) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (14884) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (15041) AUDIO: [DIAG] Post-init state:
I (15041) AUDIO:   Free heap: 3747420 bytes
I (15042) AUDIO:   Free internal RAM: 100767 bytes
I (15045) AUDIO:   Free DMA-capable: 80351 bytes
I (15050) AUDIO:   Free PSRAM: 3667124 bytes
I (15055) AUDIO:   Timestamp: 13501 ms
I (15060) AUDIO:   Total init time: 201 ms
I (15065) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15083) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (15089) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (15094) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (15103) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (15110) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15128) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15145) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (15152) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (15158) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (15165) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (15171) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15189) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (15196) STATE_MGR:   Free heap after: 3747420 bytes
I (15201) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15218) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (15223) STATE_MGR: â•‘ Total transition time: 890 ms
I (15229) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15245) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15261) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (15271) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15287) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (15295) TTS: No pending audio to flush
I (15344) TTS: TTS decoder session reset for next audio stream
I (15344) TTS: âœ… TTS decoder flushed and reset for next session
I (15346) STT: Starting STT pipeline...
I (15351) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (15360) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (15367) STT:   Current time: 13813 ms
I (15370) STT: âœ… STT pipeline started
I (15371) STT:   Free heap: 3738868 bytes
I (15376) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (15372) STT: Audio streaming session activated
I (15395) STT: Connection stabilization delay (2000ms)...
I (15581) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (15581) STT:   âœ“ Audio driver initialized
I (15582) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (15689) STT:   Total stabilization: 300ms
I (15689) STT:   Timestamp: 14134 ms
I (15689) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (15693) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe3778 (with safety padding)
I (15702) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15715) LED_CTRL: LED pattern -> 1
I (15718) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (15722) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15727) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (15746) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (15752) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15759) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15793) MEM_MGR: â•‘ Internal RAM:
I (15798) MEM_MGR: â•‘   Free:             222771 bytes (217 KB)
I (15804) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (15811) MEM_MGR: â•‘   Fragmentation:     51%
I (15816) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15835) MEM_MGR: â•‘ DMA-capable RAM:
I (15839) MEM_MGR: â•‘   Free:             202355 bytes (197 KB)
I (15846) MEM_MGR: â•‘   Largest Block:    110592 bytes (108 KB)
I (15852) MEM_MGR: â•‘   Fragmentation:     46%
I (15858) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15876) MEM_MGR: â•‘ PSRAM:
I (15880) MEM_MGR: â•‘   Free:             4192016 bytes (4093 KB)
I (15887) MEM_MGR: â•‘   Largest Block:    4128768 bytes (4032 KB)
I (15893) MEM_MGR: â•‘   Fragmentation:      2%
I (15899) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15917) MEM_MGR: â•‘ Total Heap:
I (15921) MEM_MGR: â•‘   Free:             4362340 bytes (4260 KB)
I (15928) MEM_MGR: â•‘   Minimum Ever:     4362340 bytes (4260 KB)
I (15935) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (15953) MEM_MGR: â•‘ Memory Delta from Baseline:
I (15959) MEM_MGR: â•‘   Internal RAM:       -2408 bytes (  -2 KB)
I (15966) MEM_MGR: â•‘   DMA-capable:        -2408 bytes (  -2 KB)
I (15972) MEM_MGR: â•‘   PSRAM:                 +0 bytes (  +0 KB)
I (15979) MEM_MGR: â•‘   Total Heap:         -2408 bytes (  -2 KB)
I (15986) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (16005) STATE_MGR: âœ… Voice mode transition complete
I (16010) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (16026) STATE_MGR: STT pipeline reported start
I (17401) STT: Starting audio streaming to server...
W (17461) STT: Waiting for server ACK (sent: 2, acked: 0, unack: 2)
I (17507) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (17508) WEBSOCKET: Server status: receiving
I (17512) STT: Flow control: ACK received, resuming (sent=2, acked=2)
I (17519) WEBSOCKET: Server ACK: 2 chunks processed
I (17526) STT: ACK received, resuming (unack now: 0)
I (17578) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (17579) WEBSOCKET: Server status: receiving
I (17583) WEBSOCKET: Server ACK: 4 chunks processed
I (17640) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (17641) WEBSOCKET: Server status: receiving
I (17645) WEBSOCKET: Server ACK: 6 chunks processed
I (17712) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (17713) WEBSOCKET: Server status: receiving
I (17717) WEBSOCKET: Server ACK: 8 chunks processed
W (17781) STT: Waiting for server ACK (sent: 10, acked: 8, unack: 2)
I (17796) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (17796) WEBSOCKET: Server status: receiving
I (17801) STT: Flow control: ACK received, resuming (sent=10, acked=10)
I (17808) WEBSOCKET: Server ACK: 10 chunks processed
I (17815) STT: ACK received, resuming (unack now: 0)
I (17872) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (17873) WEBSOCKET: Server status: receiving
I (17877) WEBSOCKET: Server ACK: 12 chunks processed
I (17936) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (17937) WEBSOCKET: Server status: receiving
I (17942) WEBSOCKET: Server ACK: 14 chunks processed
W (18007) STT: Waiting for server ACK (sent: 16, acked: 14, unack: 2)
I (18048) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (18049) WEBSOCKET: Server status: receiving
I (18053) STT: Flow control: ACK received, resuming (sent=16, acked=16)
I (18060) WEBSOCKET: Server ACK: 16 chunks processed
I (18067) STT: ACK received, resuming (unack now: 0)
I (18123) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (18124) WEBSOCKET: Server status: receiving
I (18129) WEBSOCKET: Server ACK: 18 chunks processed
I (18285) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (18286) WEBSOCKET: Server status: receiving
I (18290) WEBSOCKET: Server ACK: 20 chunks processed
I (18547) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (18548) WEBSOCKET: Server status: receiving
I (18553) WEBSOCKET: Server ACK: 22 chunks processed
I (18766) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (18767) WEBSOCKET: Server status: receiving
I (18772) WEBSOCKET: Server ACK: 24 chunks processed
I (19027) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (19028) WEBSOCKET: Server status: receiving
I (19032) WEBSOCKET: Server ACK: 26 chunks processed
I (19242) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (19243) WEBSOCKET: Server status: receiving
I (19248) WEBSOCKET: Server ACK: 28 chunks processed
I (19514) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (19515) WEBSOCKET: Server status: receiving
I (19519) WEBSOCKET: Server ACK: 30 chunks processed
I (19842) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (19844) WEBSOCKET: Server status: receiving
I (19848) WEBSOCKET: Server ACK: 32 chunks processed
I (20052) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 34, "bytes_received": 139264}
I (20053) WEBSOCKET: Server status: receiving
I (20058) WEBSOCKET: Server ACK: 34 chunks processed
I (20167) BUTTON: Single click confirmed
I (20167) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (20168) STATE_MGR: Single click - mode toggle requested
I (20174) STATE_MGR: User requested to end voice session (count: 2). Stopping STT and awaiting server response.
I (20184) STT: Stopping STT pipeline...
I (20189) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (20204) STT: Ring buffer drained and cleared successfully
I (20231) STT: Capture stopped and ring buffer drained; ending streaming loop
I (20231) STT: Sending EOS signal...
I (20232) WEBSOCKET: Sending EOS signal
I (20237) STT: Audio capture task stopped (captured 147456 bytes total)
I (20248) STT: Audio streaming session complete (streamed 146432 bytes in 36 chunks)
I (20253) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 36, "bytes_received": 146432}
I (20264) WEBSOCKET: Server status: receiving
I (20269) WEBSOCKET: Server ACK: 36 chunks processed
I (20274) STT: STT pipeline stopped
I (20278) LED_CTRL: LED pattern -> 4
I (20280) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (20283) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (20292) WEBSOCKET: Server status: processing
I (20306) WEBSOCKET: Server stage: transcription
I (20310) STATE_MGR: STT pipeline reported stop
I (20311) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (20323) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (20316) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (20340) LED_CTRL: LED pattern -> 1
I (20814) LED_CTRL: LED pattern -> 4
I (20815) STATE_MGR: Pipeline stage event: transcription
I (20815) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (20867) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hello what's your name", "has_image": false}
I (20870) WEBSOCKET: Server status: processing
I (20875) WEBSOCKET: Server stage: llm
I (20879) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (20886) WEBSOCKET: Entering LLM stage - continuing processing indication
I (20894) STATE_MGR: Pipeline stage event: llm
I (21482) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I'm Hotpin, your compact, helpful, and privacy-first voice assistant with vision capabilities."}
I (21490) WEBSOCKET: Server status: processing
I (21495) WEBSOCKET: Server stage: tts
I (21499) WEBSOCKET: Pipeline stage changed: llm -> tts
I (21505) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (21512) LED_CTRL: LED pattern -> 3
I (21516) TTS: ğŸµ Starting TTS decoder...
I (21521) TTS: Initializing TTS decoder...
W (21526) TTS: TTS decoder already initialized
I (21576) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (21576) TTS: âœ… TTS decoder started successfully
I (21581) TTS: ğŸµ TTS playback task started on Core 1
I (21586) STATE_MGR: TTS playback start event received
I (21592) LED_CTRL: LED pattern -> 1
I (21596) TTS: âœ… TTS playback task registered with watchdog
I (21603) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (21606) STATE_MGR: Pipeline stage event: tts
I (21763) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 1, total: 4096)
I (21764) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 20210 ms, bytes: 4096)
I (21770) TTS: Received audio chunk #1: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (21778) TTS: Chunk #1 first 12 bytes: 52 49 46 46 FE 48 03 00 57 41 56 45
I (21786) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (21794) STATE_MGR: TTS playback start event received
I (21804) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 2, total: 8192)
I (21808) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (21817) TTS: Chunk #2 first 12 bytes: 93 FA D2 FC F4 00 D8 04 10 06 C4 05
I (21831) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 3, total: 12288)
I (21833) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (21842) TTS: Chunk #3 first 12 bytes: FC F9 C8 F9 BB F9 D3 F9 9A F9 04 F9
I (21854) WEBSOCKET: Received binary audio data: 4096 bytes (msg: 4, total: 16384)
I (21858) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (21867) TTS: Chunk #4 first 12 bytes: 55 0D 74 FD 5C F1 74 E7 0A E3 0E E3
I (21878) WEBSOCKET: Received binary audio data: 436 bytes (msg: 5, total: 16820)
I (21882) TTS: Received audio chunk #5: 436 bytes (buffer: 16384/327680 used, 311295 free)
I (21891) TTS: Chunk #5 first 12 bytes: 6D 01 29 00 30 00 E2 00 6D 01 B1 00
I (21901) TTS: Received audio chunk #6: 3660 bytes (buffer: 16820/327680 used, 310859 free)
I (21913) TTS: Received audio chunk #7: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (21923) TTS: Received audio chunk #8: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (21932) TTS: Received audio chunk #9: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (21941) TTS: Received audio chunk #10: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (21950) TTS: Received audio chunk #11: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (21959) TTS: Received audio chunk #12: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (21966) TTS: Received audio chunk #13: 536 bytes (buffer: 45056/327680 used, 282623 free)
I (21973) TTS: Received audio chunk #14: 3560 bytes (buffer: 45592/327680 used, 282087 free)
I (21987) TTS: Received audio chunk #15: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (21996) TTS: Received audio chunk #16: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (22004) TTS: Received audio chunk #17: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (22014) TTS: Received audio chunk #18: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (22023) TTS: Received audio chunk #19: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (22028) TTS: âœ… WAV header parsed successfully
I (22035) TTS: Received audio chunk #20: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (22042) TTS: === WAV File Info ===
I (22045) TTS: Sample Rate: 16000 Hz
I (22050) TTS: Received audio chunk #21: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (22059) TTS: Channels: 1
I (22062) TTS: Bits per Sample: 16
I (22067) TTS: Received audio chunk #22: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (22076) TTS: Audio Format: 1 (PCM)
I (22084) TTS: Received audio chunk #23: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (22089) TTS: Declared Data Size: 215258 bytes
I (22098) TTS: Received audio chunk #24: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (22103) TTS: Block Align: 2
I (22106) TTS: Byte Rate: 32000
I (22114) TTS: Received audio chunk #25: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (22120) TTS: ====================
I (22130) TTS: Received audio chunk #26: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (22145) TTS: Received audio chunk #27: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (22162) TTS: Received audio chunk #28: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (22168) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=106496)
I (22168) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (22177) TTS: Received audio chunk #29: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (22196) TTS: Received audio chunk #30: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (22210) TTS: Received audio chunk #31: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (22234) TTS: Received audio chunk #32: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (22249) TTS: Received audio chunk #33: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (22298) TTS: Received audio chunk #34: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (22304) TTS: Received audio chunk #35: 1656 bytes (buffer: 122880/327680 used, 204799 free)
I (22309) TTS: Received audio chunk #36: 2440 bytes (buffer: 124536/327680 used, 203143 free)
I (22320) TTS: Received audio chunk #37: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (22331) TTS: Received audio chunk #38: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (22337) TTS: Received audio chunk #39: 876 bytes (buffer: 135168/327680 used, 192511 free)
I (22345) TTS: Received audio chunk #40: 3220 bytes (buffer: 136044/327680 used, 191635 free)
I (22357) TTS: Received audio chunk #41: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (22367) TTS: Received audio chunk #42: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (22376) TTS: Received audio chunk #43: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (22390) TTS: Received audio chunk #44: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (22410) TTS: Received audio chunk #45: 4096 bytes (buffer: 151552/327680 used, 176127 free)
I (22426) TTS: Received audio chunk #46: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (22440) TTS: Received audio chunk #47: 4096 bytes (buffer: 159744/327680 used, 167935 free)
I (22456) TTS: Received audio chunk #48: 4096 bytes (buffer: 163840/327680 used, 163839 free)
I (22472) TTS: Received audio chunk #49: 4096 bytes (buffer: 163840/327680 used, 163839 free)
I (22486) TTS: Received audio chunk #50: 4096 bytes (buffer: 167936/327680 used, 159743 free)
I (22503) TTS: Received audio chunk #51: 4096 bytes (buffer: 172032/327680 used, 155647 free)
I (22517) TTS: Received audio chunk #52: 4096 bytes (buffer: 176128/327680 used, 151551 free)
I (22532) TTS: Received audio chunk #53: 4096 bytes (buffer: 180224/327680 used, 147455 free)
I (22548) TTS: Received audio chunk #54: 4096 bytes (buffer: 184320/327680 used, 143359 free)
I (22562) TTS: Received audio chunk #55: 4096 bytes (buffer: 188416/327680 used, 139263 free)
I (22578) TTS: Received audio chunk #56: 4096 bytes (buffer: 192512/327680 used, 135167 free)
I (22594) TTS: Received audio chunk #57: 2310 bytes (buffer: 192512/327680 used, 135167 free)
I (22709) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (22812) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (22813) TTS: TTS end-of-stream signaled (bytes_received=215302, header_parsed=1)
I (22818) TTS: ğŸµ Playback task will drain 190726 bytes of buffered audio
I (22825) TTS: Waiting for playback completion: 190726 bytes buffered, calculated timeout: 7960 ms
I (22837) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (22964) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (23091) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (23219) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (23346) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (23474) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (23601) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (23729) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (23856) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (23984) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (24111) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (24239) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (24366) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (24494) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (24621) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (24749) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (24876) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (25004) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (25131) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (25259) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (25386) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (25514) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (25641) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (25769) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (25896) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (26024) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (26151) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (26279) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (26406) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (26534) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (26661) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (26789) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (26916) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (27044) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (27171) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (27299) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (27426) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (27554) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (27681) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (27809) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (27936) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (28064) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (28191) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (28319) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (28446) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (28574) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (28701) TTS: âœ… All audio data received (215302 bytes, expected 215258 + 44 header)
I (28865) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (28866) TTS: ğŸµ TTS playback task exiting (played 215258 bytes, result: ESP_OK)
I (28871) STATE_MGR: TTS playback finished successfully
I (28877) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (28886) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (28892) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28910) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (28917) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28936) MEM_MGR: â•‘ Internal RAM:
I (28940) MEM_MGR: â•‘   Free:              91059 bytes ( 88 KB)
I (28947) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (28953) MEM_MGR: â•‘   Fragmentation:     29%
I (28959) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (28977) MEM_MGR: â•‘ DMA-capable RAM:
I (28981) MEM_MGR: â•‘   Free:              70643 bytes ( 68 KB)
I (28988) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (28995) MEM_MGR: â•‘   Fragmentation:      8%
I (29000) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29018) MEM_MGR: â•‘ PSRAM:
I (29022) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (29029) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (29036) MEM_MGR: â•‘   Fragmentation:      2%
I (29041) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29059) MEM_MGR: â•‘ Total Heap:
I (29063) MEM_MGR: â•‘   Free:             3737712 bytes (3650 KB)
I (29070) MEM_MGR: â•‘   Minimum Ever:     3736484 bytes (3648 KB)
I (29077) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29096) MEM_MGR: â•‘ Memory Delta from Baseline:
I (29101) MEM_MGR: â•‘   Internal RAM:     -134120 bytes (-130 KB)
I (29108) MEM_MGR: â•‘   DMA-capable:      -134120 bytes (-130 KB)
I (29115) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (29122) MEM_MGR: â•‘   Total Heap:       -627036 bytes (-612 KB)
I (29128) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29147) STATE_MGR: Stopping voice mode components...
I (29153) STT: Stopping STT pipeline...
W (29157) STT: STT pipeline already stopped
I (29205) TTS: TTS decoder session reset for next audio stream
I (29205) TTS: Received audio chunk #58: 0 bytes (buffer: 0/327680 used, 327679 free)
I (29209) TTS: New audio session detected - resetting chunk counter
I (29216) WEBSOCKET: ğŸµ Audio session complete: 215302 bytes in 57 messages
I (29226) WEBSOCKET: Received text message: {"status": "complete"}
I (29231) WEBSOCKET: Server status: complete
I (29235) WEBSOCKET: Pipeline stage changed: tts -> complete
I (29242) WEBSOCKET: Exiting TTS stage (transition to complete)
I (29248) TTS: âœ… TTS playback finished event dispatched to state manager
I (29256) TTS:   âœ“ DMA buffer freed from PSRAM
I (29261) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (29269) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (29348) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (29362) STATE_MGR: Voice pipeline reported COMPLETE
I (29363) STATE_MGR: TTS playback already drained - no pending audio
I (29364) STATE_MGR: Flushing and resetting TTS decoder for next session
I (29372) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (29379) TTS: No pending audio to flush
I (29430) TTS: TTS decoder session reset for next audio stream
I (29430) TTS: âœ… TTS decoder flushed and reset for next session
I (29633) TTS: â¹ï¸ Stopping TTS decoder...
W (29633) TTS: TTS decoder already stopped.
I (29778) STATE_MGR: Acquiring I2S mutex...
I (29778) STATE_MGR: Deinitializing audio drivers...
I (29779) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29796) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (29803) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29821) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (29828) AUDIO: âœ… RX channel disabled (took 0 ms)
I (29834) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (29840) AUDIO: âœ… TX channel disabled (took 0 ms)
I (29846) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (29902) AUDIO: [STEP 4/5] Deleting RX channel...
I (29903) AUDIO: âœ… RX channel deleted (took 0 ms)
I (29903) AUDIO: [STEP 5/5] Deleting TX channel...
I (29908) AUDIO: âœ… TX channel deleted (took 0 ms)
I (29913) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (29971) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (29978) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (29985) AUDIO: â•‘ Camera Can Now Initialize
I (29990) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30058) STATE_MGR: Allowing memory stabilization (100ms)...
I (30158) STATE_MGR: Camera will be initialized on-demand during capture
I (30158) STATE_MGR: I2S mutex released
I (30159) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30177) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (30184) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30203) MEM_MGR: â•‘ Internal RAM:
I (30207) MEM_MGR: â•‘   Free:              91059 bytes ( 88 KB)
I (30214) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (30220) MEM_MGR: â•‘   Fragmentation:     29%
I (30226) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30244) MEM_MGR: â•‘ DMA-capable RAM:
I (30248) MEM_MGR: â•‘   Free:              70643 bytes ( 68 KB)
I (30255) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (30262) MEM_MGR: â•‘   Fragmentation:      8%
I (30267) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30285) MEM_MGR: â•‘ PSRAM:
I (30289) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (30296) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (30303) MEM_MGR: â•‘   Fragmentation:      2%
I (30308) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30326) MEM_MGR: â•‘ Total Heap:
I (30331) MEM_MGR: â•‘   Free:             3737712 bytes (3650 KB)
I (30337) MEM_MGR: â•‘   Minimum Ever:     3736484 bytes (3648 KB)
I (30344) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30363) MEM_MGR: â•‘ Memory Delta from Baseline:
I (30368) MEM_MGR: â•‘   Internal RAM:     -134120 bytes (-130 KB)
I (30375) MEM_MGR: â•‘   DMA-capable:      -134120 bytes (-130 KB)
I (30382) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (30389) MEM_MGR: â•‘   Total Heap:       -627036 bytes (-612 KB)
I (30396) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30414) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (30424) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30441) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (30448) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30466) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30484) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (30492) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30510) AUDIO: [DIAG] Pre-init state:
I (30514) AUDIO:   Free heap: 3773264 bytes
I (30519) AUDIO:   Free internal RAM: 126611 bytes
I (30524) AUDIO:   Free DMA-capable: 106195 bytes
I (30530) AUDIO:   Free PSRAM: 3667124 bytes
I (30535) AUDIO:   Timestamp: 28980 ms
I (30539) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (30546) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (30554) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (30562) AUDIO:   DMA frame num (per desc): 1020
I (30568) AUDIO:   DMA total samples (effective): 4080
I (30573) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (30580) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (30587) AUDIO: âœ… I2S channels created (took 0 ms)
I (30592) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7f0
I (30599) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (30606) AUDIO:   Sample rate: 16000 Hz
I (30610) AUDIO:   MCLK: DISABLED
I (30614) AUDIO:   BCLK: GPIO14 (shared)
I (30619) AUDIO:   WS:   GPIO15 (shared)
I (30623) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (30630) AUDIO: âœ… TX channel configured (took 1 ms)
I (30635) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (30642) AUDIO:   Sample rate: 16000 Hz
I (30646) AUDIO:   MCLK: DISABLED
I (30650) AUDIO:   BCLK: GPIO14 (shared)
I (30655) AUDIO:   WS:   GPIO15 (shared)
I (30659) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (30665) AUDIO: âœ… RX channel configured (took 0 ms)
I (30671) AUDIO: [STEP 4/6] Enabling TX channel...
I (30676) AUDIO: âœ… TX channel enabled (took 0 ms)
I (30682) AUDIO: [STEP 5/6] Enabling RX channel...
I (30687) AUDIO: âœ… RX channel enabled (took 0 ms)
I (30693) AUDIO: [STEP 6/6] Hardware stabilization...
I (30699) AUDIO:   Phase 1: Initial settle (50ms)
I (30754) AUDIO:   Phase 2: DMA verification
I (30754) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (30755) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (30912) AUDIO: [DIAG] Post-init state:
I (30912) AUDIO:   Free heap: 3747276 bytes
I (30913) AUDIO:   Free internal RAM: 100623 bytes
I (30916) AUDIO:   Free DMA-capable: 80207 bytes
I (30921) AUDIO:   Free PSRAM: 3667124 bytes
I (30926) AUDIO:   Timestamp: 29372 ms
I (30931) AUDIO:   Total init time: 201 ms
I (30936) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30954) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (30960) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (30965) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (30974) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (30981) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (30999) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31016) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (31023) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (31029) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (31036) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (31042) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31343) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31350) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (31358) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31376) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (31383) AUDIO: âœ… RX channel disabled (took 0 ms)
I (31388) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (31395) AUDIO: âœ… TX channel disabled (took 0 ms)
I (31400) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (31457) AUDIO: [STEP 4/5] Deleting RX channel...
I (31458) AUDIO: âœ… RX channel deleted (took 0 ms)
I (31458) AUDIO: [STEP 5/5] Deleting TX channel...
I (31463) AUDIO: âœ… TX channel deleted (took 0 ms)
I (31468) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (31526) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31533) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (31540) AUDIO: â•‘ Camera Can Now Initialize
I (31545) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31563) LED_CTRL: LED pattern -> 3
I (31567) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (31584) STATE_MGR: Pipeline stage event: complete
I (35872) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (35872) STATE_MGR: Double-click detected - triggering capture sequence
I (35875) STATE_MGR: Starting camera capture sequence
I (35881) LED_CTRL: LED pattern -> 6
I (35885) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35903) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (35910) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35928) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35946) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (35953) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (35971) AUDIO: [DIAG] Pre-init state:
I (35976) AUDIO:   Free heap: 3773264 bytes
I (35981) AUDIO:   Free internal RAM: 126611 bytes
I (35986) AUDIO:   Free DMA-capable: 106195 bytes
I (35992) AUDIO:   Free PSRAM: 3667124 bytes
I (35997) AUDIO:   Timestamp: 34442 ms
I (36001) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (36008) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (36016) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (36024) AUDIO:   DMA frame num (per desc): 1020
I (36029) AUDIO:   DMA total samples (effective): 4080
I (36035) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (36042) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (36049) AUDIO: âœ… I2S channels created (took 0 ms)
I (36054) AUDIO:   TX handle: 0x3ffafc50 | RX handle: 0x3ffca7f0
I (36061) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (36067) AUDIO:   Sample rate: 16000 Hz
I (36072) AUDIO:   MCLK: DISABLED
I (36076) AUDIO:   BCLK: GPIO14 (shared)
I (36081) AUDIO:   WS:   GPIO15 (shared)
I (36085) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (36092) AUDIO: âœ… TX channel configured (took 0 ms)
I (36097) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (36103) AUDIO:   Sample rate: 16000 Hz
I (36108) AUDIO:   MCLK: DISABLED
I (36112) AUDIO:   BCLK: GPIO14 (shared)
I (36117) AUDIO:   WS:   GPIO15 (shared)
I (36121) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (36127) AUDIO: âœ… RX channel configured (took 0 ms)
I (36133) AUDIO: [STEP 4/6] Enabling TX channel...
I (36138) AUDIO: âœ… TX channel enabled (took 0 ms)
I (36144) AUDIO: [STEP 5/6] Enabling RX channel...
I (36149) AUDIO: âœ… RX channel enabled (took 0 ms)
I (36155) AUDIO: [STEP 6/6] Hardware stabilization...
I (36160) AUDIO:   Phase 1: Initial settle (50ms)
I (36216) AUDIO:   Phase 2: DMA verification
I (36216) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (36217) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (36374) AUDIO: [DIAG] Post-init state:
I (36374) AUDIO:   Free heap: 3747276 bytes
I (36375) AUDIO:   Free internal RAM: 100623 bytes
I (36378) AUDIO:   Free DMA-capable: 80207 bytes
I (36383) AUDIO:   Free PSRAM: 3667124 bytes
I (36388) AUDIO:   Timestamp: 34834 ms
I (36393) AUDIO:   Total init time: 200 ms
I (36398) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36416) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (36422) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (36427) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (36436) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (36443) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36461) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36478) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (36485) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (36491) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (36498) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (36504) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36854) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36861) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (36869) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (36887) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (36894) AUDIO: âœ… RX channel disabled (took 0 ms)
I (36899) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (36906) AUDIO: âœ… TX channel disabled (took 0 ms)
I (36911) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (36968) AUDIO: [STEP 4/5] Deleting RX channel...
I (36969) AUDIO: âœ… RX channel deleted (took 0 ms)
I (36969) AUDIO: [STEP 5/5] Deleting TX channel...
I (36974) AUDIO: âœ… TX channel deleted (took 0 ms)
I (36979) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (37037) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37044) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (37051) AUDIO: â•‘ Camera Can Now Initialize
I (37056) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (37074) STATE_MGR: Capturing frame from camera
I (37079) CAMERA: Initializing camera...
I (37084) gpio: GPIO[4]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (37093) CAMERA: Flash LED initialized on GPIO 4
I (37298) CAMERA: Camera sensor power cycled via PWDN pin
I (37299) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (37303) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (37311) cam_hal: cam init ok
I (37315) sccb-ng: pin_sda 26 pin_scl 27
I (37319) sccb-ng: sccb_i2c_port=1
I (37324) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (37367) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (37367) camera: Detected OV2640 camera
I (37367) camera: Detected camera at address=0x30
I (37448) cam_hal: PSRAM DMA mode disabled
I (37448) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (37453) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (37459) cam_hal: cam config ok
I (37463) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (37545) CAMERA: Camera initialized successfully
I (38096) STATE_MGR: Frame captured: 13621 bytes
I (38096) STATE_MGR: Uploading image using session esp32-cam-hotpin
I (38097) HTTP_CLIENT: Uploading image: session=esp32-cam-hotpin, size=13621 bytes
I (38107) HTTP_CLIENT: POST body assembled: 13878 bytes
I (38112) HTTP_CLIENT: Sending POST request to http://10.242.175.58:8000/image
I (38341) HTTP_CLIENT: HTTP POST Status = 200, content_length = 245
I (38341) HTTP_CLIENT: Image uploaded successfully
I (38343) HTTP_CLIENT: Server response: {"status":"success","message":"Image received and stored for next voice interaction","session":"esp32-cam-hotpin","filename":"image.jpg","size_bytes":13621,"saved_path":"captured_images/esp32-cam-hotpin_20251114_143456.jpg","context_ready":true}
I (38370) CAMERA: Deinitializing camera...
I (38374) CAMERA: Camera deinitialized
I (38378) STATE_MGR: Camera deinitialized - DMA memory freed
I (38384) STATE_MGR: Image uploaded successfully
I (38389) LED_CTRL: LED pattern -> 3
I (38394) STATE_MGR: Camera capture sequence complete
I (38409) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (43615) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (43615) BUTTON: Single click confirmed
I (43615) STATE_MGR: Single click - mode toggle requested
I (43622) STATE_MGR: Switching: Camera â†’ Voice (count: 3)
I (43678) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (43678) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43691) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (43698) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43717) MEM_MGR: â•‘ Internal RAM:
I (43721) MEM_MGR: â•‘   Free:             126611 bytes (123 KB)
I (43728) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (43734) MEM_MGR: â•‘   Fragmentation:     26%
I (43739) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43758) MEM_MGR: â•‘ DMA-capable RAM:
I (43762) MEM_MGR: â•‘   Free:             106195 bytes (103 KB)
I (43769) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (43776) MEM_MGR: â•‘   Fragmentation:     12%
I (43781) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43799) MEM_MGR: â•‘ PSRAM:
I (43803) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (43810) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (43817) MEM_MGR: â•‘   Fragmentation:      2%
I (43822) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43840) MEM_MGR: â•‘ Total Heap:
I (43844) MEM_MGR: â•‘   Free:             3773264 bytes (3684 KB)
I (43851) MEM_MGR: â•‘   Minimum Ever:     3712576 bytes (3625 KB)
I (43858) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43876) MEM_MGR: â•‘ Memory Delta from Baseline:
I (43882) MEM_MGR: â•‘   Internal RAM:      -98568 bytes ( -96 KB)
I (43889) MEM_MGR: â•‘   DMA-capable:       -98568 bytes ( -96 KB)
I (43896) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (43903) MEM_MGR: â•‘   Total Heap:       -591484 bytes (-577 KB)
I (43909) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43928) STATE_MGR: Stopping camera...
I (43932) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43949) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (43955) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (43972) STATE_MGR:   Timeout: 5000 ms
I (43976) STATE_MGR:   Timestamp: 42422 ms
I (43981) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (43987) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44003) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (44009) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44026) STATE_MGR:   Free heap before: 3772792 bytes
I (44031) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (44037) CAMERA: Deinitializing camera...
I (44042) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (44048) STATE_MGR:   Free heap after: 3772792 bytes
I (44054) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (44060) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44076) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (44082) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44099) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (44207) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (44307) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (44357) STATE_MGR:   âœ“ Total stabilization: 250ms
I (44357) STATE_MGR:   Timestamp: 42803 ms
I (44357) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44373) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (44380) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44396) STATE_MGR:   Free heap before: 3772792 bytes
I (44402) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44420) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (44427) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44445) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44463) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (44470) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44488) AUDIO: [DIAG] Pre-init state:
I (44492) AUDIO:   Free heap: 3772792 bytes
I (44497) AUDIO:   Free internal RAM: 126139 bytes
I (44503) AUDIO:   Free DMA-capable: 105723 bytes
I (44508) AUDIO:   Free PSRAM: 3667124 bytes
I (44513) AUDIO:   Timestamp: 42959 ms
I (44517) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (44524) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (44532) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (44540) AUDIO:   DMA frame num (per desc): 1020
I (44546) AUDIO:   DMA total samples (effective): 4080
I (44552) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (44559) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (44565) AUDIO: âœ… I2S channels created (took 0 ms)
I (44571) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca850
I (44577) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (44584) AUDIO:   Sample rate: 16000 Hz
I (44588) AUDIO:   MCLK: DISABLED
I (44592) AUDIO:   BCLK: GPIO14 (shared)
I (44597) AUDIO:   WS:   GPIO15 (shared)
I (44602) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (44609) AUDIO: âœ… TX channel configured (took 1 ms)
I (44613) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (44620) AUDIO:   Sample rate: 16000 Hz
I (44624) AUDIO:   MCLK: DISABLED
I (44628) AUDIO:   BCLK: GPIO14 (shared)
I (44633) AUDIO:   WS:   GPIO15 (shared)
I (44638) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (44644) AUDIO: âœ… RX channel configured (took 0 ms)
I (44649) AUDIO: [STEP 4/6] Enabling TX channel...
I (44655) AUDIO: âœ… TX channel enabled (took 0 ms)
I (44660) AUDIO: [STEP 5/6] Enabling RX channel...
I (44666) AUDIO: âœ… RX channel enabled (took 0 ms)
I (44671) AUDIO: [STEP 6/6] Hardware stabilization...
I (44677) AUDIO:   Phase 1: Initial settle (50ms)
I (44732) AUDIO:   Phase 2: DMA verification
I (44732) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (44733) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (44890) AUDIO: [DIAG] Post-init state:
I (44890) AUDIO:   Free heap: 3746804 bytes
I (44891) AUDIO:   Free internal RAM: 100151 bytes
I (44894) AUDIO:   Free DMA-capable: 79735 bytes
I (44899) AUDIO:   Free PSRAM: 3667124 bytes
I (44904) AUDIO:   Timestamp: 43350 ms
I (44909) AUDIO:   Total init time: 201 ms
I (44914) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44932) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (44938) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (44943) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (44952) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (44959) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44977) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (44994) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (45001) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (45007) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (45014) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (45020) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45038) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (45045) STATE_MGR:   Free heap after: 3746804 bytes
I (45050) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45067) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (45072) STATE_MGR: â•‘ Total transition time: 890 ms
I (45078) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45094) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45110) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (45120) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45136) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (45144) TTS: No pending audio to flush
I (45191) TTS: TTS decoder session reset for next audio stream
I (45192) TTS: âœ… TTS decoder flushed and reset for next session
I (45194) STT: Starting STT pipeline...
I (45198) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (45207) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (45215) STT:   Current time: 43660 ms
I (45218) STT: âœ… STT pipeline started
I (45223) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (45219) STT: Audio streaming session activated
I (45238) STT: Connection stabilization delay (2000ms)...
I (45219) STT:   Free heap: 3738252 bytes
I (45448) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (45448) STT:   âœ“ Audio driver initialized
I (45449) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (45555) STT:   Total stabilization: 300ms
I (45555) STT:   Timestamp: 44000 ms
I (45555) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (45557) LED_CTRL: LED pattern -> 1
I (45559) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe3778 (with safety padding)
I (45563) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45572) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45590) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (45607) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (45613) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45618) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (45637) MEM_MGR: â•‘ Internal RAM:
I (45643) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45647) MEM_MGR: â•‘   Free:             126611 bytes (123 KB)
I (45670) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (45677) MEM_MGR: â•‘   Fragmentation:     26%
I (45682) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45701) MEM_MGR: â•‘ DMA-capable RAM:
I (45705) MEM_MGR: â•‘   Free:             106195 bytes (103 KB)
I (45712) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (45718) MEM_MGR: â•‘   Fragmentation:     12%
I (45724) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45742) MEM_MGR: â•‘ PSRAM:
I (45746) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (45753) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (45759) MEM_MGR: â•‘   Fragmentation:      2%
I (45765) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45783) MEM_MGR: â•‘ Total Heap:
I (45787) MEM_MGR: â•‘   Free:             3773264 bytes (3684 KB)
I (45794) MEM_MGR: â•‘   Minimum Ever:     3712576 bytes (3625 KB)
I (45801) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45819) MEM_MGR: â•‘ Memory Delta from Baseline:
I (45825) MEM_MGR: â•‘   Internal RAM:      -98568 bytes ( -96 KB)
I (45832) MEM_MGR: â•‘   DMA-capable:       -98568 bytes ( -96 KB)
I (45838) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (45845) MEM_MGR: â•‘   Total Heap:       -591484 bytes (-577 KB)
I (45852) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (45871) STATE_MGR: âœ… Voice mode transition complete
I (45876) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (45892) STATE_MGR: STT pipeline reported start
I (47244) STT: Starting audio streaming to server...
I (47304) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (47305) WEBSOCKET: Server status: receiving
W (47308) STT: Waiting for server ACK (sent: 2, acked: 0, unack: 2)
I (47310) STT: Flow control: ACK received, resuming (sent=2, acked=2)
I (47317) STT: ACK received, resuming (unack now: 0)
I (47324) WEBSOCKET: Server ACK: 2 chunks processed
I (47376) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (47377) WEBSOCKET: Server status: receiving
I (47382) WEBSOCKET: Server ACK: 4 chunks processed
I (47441) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (47442) WEBSOCKET: Server status: receiving
I (47447) WEBSOCKET: Server ACK: 6 chunks processed
I (47501) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (47502) WEBSOCKET: Server status: receiving
I (47507) WEBSOCKET: Server ACK: 8 chunks processed
I (47563) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (47563) WEBSOCKET: Server status: receiving
I (47568) WEBSOCKET: Server ACK: 10 chunks processed
I (47619) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (47619) WEBSOCKET: Server status: receiving
I (47624) WEBSOCKET: Server ACK: 12 chunks processed
I (47697) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (47697) WEBSOCKET: Server status: receiving
I (47702) WEBSOCKET: Server ACK: 14 chunks processed
I (47757) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (47758) WEBSOCKET: Server status: receiving
I (47762) WEBSOCKET: Server ACK: 16 chunks processed
I (47817) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (47817) WEBSOCKET: Server status: receiving
I (47822) WEBSOCKET: Server ACK: 18 chunks processed
I (48153) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (48154) WEBSOCKET: Server status: receiving
I (48159) WEBSOCKET: Server ACK: 20 chunks processed
I (48346) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (48347) WEBSOCKET: Server status: receiving
I (48352) WEBSOCKET: Server ACK: 22 chunks processed
I (48664) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (48665) WEBSOCKET: Server status: receiving
I (48670) WEBSOCKET: Server ACK: 24 chunks processed
I (48928) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (48929) WEBSOCKET: Server status: receiving
I (48934) WEBSOCKET: Server ACK: 26 chunks processed
I (49136) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (49136) WEBSOCKET: Server status: receiving
I (49141) WEBSOCKET: Server ACK: 28 chunks processed
I (49388) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (49389) WEBSOCKET: Server status: receiving
I (49394) WEBSOCKET: Server ACK: 30 chunks processed
I (49649) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (49650) WEBSOCKET: Server status: receiving
I (49655) WEBSOCKET: Server ACK: 32 chunks processed
I (49867) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 34, "bytes_received": 139264}
I (49868) WEBSOCKET: Server status: receiving
I (49873) WEBSOCKET: Server ACK: 34 chunks processed
I (50160) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 36, "bytes_received": 147456}
I (50161) WEBSOCKET: Server status: receiving
I (50165) WEBSOCKET: Server ACK: 36 chunks processed
I (50309) BUTTON: Single click confirmed
I (50309) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (50310) STATE_MGR: Single click - mode toggle requested
I (50316) STATE_MGR: User requested to end voice session (count: 4). Stopping STT and awaiting server response.
I (50326) STT: Stopping STT pipeline...
I (50331) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (50346) STT: Ring buffer drained and cleared successfully
I (50347) STT: Audio capture task stopped (captured 155648 bytes total)
I (50374) STT: Streaming task received stop signal
I (50374) STT: Sending EOS signal...
I (50374) WEBSOCKET: Sending EOS signal
I (50383) STT: Audio streaming session complete (streamed 151552 bytes in 37 chunks)
I (50399) STT: STT pipeline stopped
I (50399) LED_CTRL: LED pattern -> 4
I (50400) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (50415) STATE_MGR: STT pipeline reported stop
I (50415) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (50419) LED_CTRL: LED pattern -> 1
I (50449) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (50450) WEBSOCKET: Server status: processing
I (50453) WEBSOCKET: Server stage: transcription
I (50458) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (50465) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (50981) LED_CTRL: LED pattern -> 4
I (50984) STATE_MGR: Pipeline stage event: transcription
I (50984) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (51005) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what do you see in this image", "has_image": true}
I (51008) WEBSOCKET: Server status: processing
I (51013) WEBSOCKET: Server stage: llm
I (51018) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (51024) WEBSOCKET: Entering LLM stage - continuing processing indication
I (51032) STATE_MGR: Pipeline stage event: llm
I (51800) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I see a young boy with dark hair looking directly at the camera in a dimly lit room with a shelf behind him."}
I (51809) WEBSOCKET: Server status: processing
I (51813) WEBSOCKET: Server stage: tts
I (51818) WEBSOCKET: Pipeline stage changed: llm -> tts
I (51824) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (51831) LED_CTRL: LED pattern -> 3
I (51835) TTS: ğŸµ Starting TTS decoder...
I (51840) TTS: Initializing TTS decoder...
W (51845) TTS: TTS decoder already initialized
I (51894) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (51895) STATE_MGR: TTS playback start event received
I (51899) LED_CTRL: LED pattern -> 1
I (51903) TTS: âœ… TTS decoder started successfully
I (51909) TTS: ğŸµ TTS playback task started on Core 1
I (51913) STATE_MGR: Pipeline stage event: tts
I (51920) TTS: âœ… TTS playback task registered with watchdog
I (51926) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (51943) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 50389 ms, bytes: 4096)
I (51944) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (51951) TTS: Chunk #2 first 12 bytes: 52 49 46 46 90 20 03 00 57 41 56 45
I (51959) TTS: New audio session detected - resetting chunk counter
I (51966) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (51974) STATE_MGR: TTS playback start event received
I (51985) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (51989) TTS: Chunk #2 first 12 bytes: 4E 0B DE 0D 62 0B B1 05 13 02 1D 08
I (52001) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (52005) TTS: Chunk #3 first 12 bytes: 49 00 39 FE 8E 01 2A FF 07 FF D0 01
I (52018) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (52022) TTS: Chunk #4 first 12 bytes: 90 D8 D3 D3 54 D0 C6 CF C1 D1 84 D2
I (52034) TTS: Received audio chunk #5: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (52038) TTS: Chunk #5 first 12 bytes: A4 FC D1 FB D9 FB C7 FC CB FC 7E FE
I (52051) TTS: Received audio chunk #6: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (52061) TTS: Received audio chunk #7: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (52070) TTS: Received audio chunk #8: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (52079) TTS: Received audio chunk #9: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (52089) TTS: Received audio chunk #10: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (52096) TTS: Received audio chunk #11: 1436 bytes (buffer: 40960/327680 used, 286719 free)
I (52102) TTS: Received audio chunk #12: 2660 bytes (buffer: 42396/327680 used, 285283 free)
I (52114) TTS: Received audio chunk #13: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (52125) TTS: Received audio chunk #14: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (52130) TTS: âœ… WAV header parsed successfully
I (52133) TTS: === WAV File Info ===
I (52140) TTS: Received audio chunk #15: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (52148) TTS: Sample Rate: 16000 Hz
I (52155) TTS: Received audio chunk #16: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (52161) TTS: Channels: 1
I (52163) TTS: Bits per Sample: 16
I (52167) TTS: Audio Format: 1 (PCM)
I (52172) TTS: Declared Data Size: 204908 bytes
I (52177) TTS: Block Align: 2
I (52180) TTS: Byte Rate: 32000
I (52184) TTS: ====================
I (52189) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=61440)
I (52200) TTS: Received audio chunk #17: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (52210) TTS: Received audio chunk #18: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (52220) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (52222) TTS: Received audio chunk #19: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (52237) TTS: Received audio chunk #20: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (52247) TTS: Received audio chunk #21: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (52260) TTS: Received audio chunk #22: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (52275) TTS: Received audio chunk #23: 1436 bytes (buffer: 77824/327680 used, 249855 free)
I (52279) TTS: Received audio chunk #24: 2660 bytes (buffer: 79260/327680 used, 248419 free)
I (52291) TTS: Received audio chunk #25: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (52307) TTS: Received audio chunk #26: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (52322) TTS: Received audio chunk #27: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (52337) TTS: Received audio chunk #28: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (52353) TTS: Received audio chunk #29: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (52368) TTS: Received audio chunk #30: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (52385) TTS: Received audio chunk #31: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (52400) TTS: Received audio chunk #32: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (52415) TTS: Received audio chunk #33: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (52430) TTS: Received audio chunk #34: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (52446) TTS: Received audio chunk #35: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (52462) TTS: Received audio chunk #36: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (52477) TTS: Received audio chunk #37: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (52492) TTS: Received audio chunk #38: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (52510) TTS: Received audio chunk #39: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (52524) TTS: Received audio chunk #40: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (52540) TTS: Received audio chunk #41: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (52555) TTS: Received audio chunk #42: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (52605) TTS: Received audio chunk #43: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (52611) TTS: Received audio chunk #44: 1656 bytes (buffer: 151552/327680 used, 176127 free)
I (52615) TTS: Received audio chunk #45: 2440 bytes (buffer: 153208/327680 used, 174471 free)
I (52626) TTS: Received audio chunk #46: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (52635) TTS: Received audio chunk #47: 656 bytes (buffer: 159744/327680 used, 167935 free)
I (52642) TTS: Received audio chunk #48: 3440 bytes (buffer: 160400/327680 used, 167279 free)
I (52654) TTS: Received audio chunk #49: 4096 bytes (buffer: 163840/327680 used, 163839 free)
I (52665) TTS: Received audio chunk #50: 4096 bytes (buffer: 167936/327680 used, 159743 free)
I (52674) TTS: Received audio chunk #51: 4096 bytes (buffer: 172032/327680 used, 155647 free)
I (52683) TTS: Received audio chunk #52: 4096 bytes (buffer: 176128/327680 used, 151551 free)
I (52696) TTS: Received audio chunk #53: 4096 bytes (buffer: 176128/327680 used, 151551 free)
I (52713) TTS: Received audio chunk #54: 4096 bytes (buffer: 180224/327680 used, 147455 free)
I (52722) TTS: Received audio chunk #55: 152 bytes (buffer: 184320/327680 used, 143359 free)
I (52750) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (52877) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (52948) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (52948) TTS: TTS end-of-stream signaled (bytes_received=204952, header_parsed=1)
I (52953) TTS: ğŸµ Playback task will drain 176280 bytes of buffered audio
I (52961) TTS: Waiting for playback completion: 176280 bytes buffered, calculated timeout: 7508 ms
I (53004) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (53132) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (53259) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (53387) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (53514) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (53642) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (53769) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (53897) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (54024) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (54152) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (54279) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (54407) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (54534) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (54662) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (54789) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (54917) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (55044) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (55172) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (55299) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (55427) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (55554) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (55682) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (55809) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (55937) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (56064) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (56192) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (56319) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (56447) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (56574) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (56702) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (56829) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (56957) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (57084) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (57212) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (57339) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (57467) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (57594) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (57722) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (57849) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (57977) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (58104) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (58232) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (58359) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (58486) TTS: âœ… All audio data received (204952 bytes, expected 204908 + 44 header)
I (58587) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (58587) TTS: ğŸµ TTS playback task exiting (played 204908 bytes, result: ESP_OK)
I (58633) TTS: TTS decoder session reset for next audio stream
I (58633) TTS: Received audio chunk #56: 0 bytes (buffer: 0/327680 used, 327679 free)
I (58639) TTS: New audio session detected - resetting chunk counter
I (58646) WEBSOCKET: ğŸµ Audio session complete: 204952 bytes in 55 messages
I (58657) WEBSOCKET: Received text message: {"status": "complete"}
I (58661) WEBSOCKET: Server status: complete
I (58666) WEBSOCKET: Pipeline stage changed: tts -> complete
I (58672) WEBSOCKET: Exiting TTS stage (transition to complete)
I (58679) STATE_MGR: TTS playback finished successfully
I (58685) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (58694) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (58700) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58718) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (58725) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58744) MEM_MGR: â•‘ Internal RAM:
I (58748) MEM_MGR: â•‘   Free:              90443 bytes ( 88 KB)
I (58755) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (58761) MEM_MGR: â•‘   Fragmentation:     28%
I (58766) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58785) MEM_MGR: â•‘ DMA-capable RAM:
I (58789) MEM_MGR: â•‘   Free:              70027 bytes ( 68 KB)
I (58796) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (58803) MEM_MGR: â•‘   Fragmentation:      7%
I (58808) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58826) MEM_MGR: â•‘ PSRAM:
I (58830) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (58837) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (58844) MEM_MGR: â•‘   Fragmentation:      2%
I (58849) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58867) MEM_MGR: â•‘ Total Heap:
I (58871) MEM_MGR: â•‘   Free:             3737096 bytes (3649 KB)
I (58878) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (58885) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58904) MEM_MGR: â•‘ Memory Delta from Baseline:
I (58909) MEM_MGR: â•‘   Internal RAM:     -134736 bytes (-131 KB)
I (58916) MEM_MGR: â•‘   DMA-capable:      -134736 bytes (-131 KB)
I (58923) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (58930) MEM_MGR: â•‘   Total Heap:       -627652 bytes (-612 KB)
I (58936) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (58955) STATE_MGR: Stopping voice mode components...
I (58961) STT: Stopping STT pipeline...
W (58965) STT: STT pipeline already stopped
I (58970) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (58979) TTS: âœ… TTS playback finished event dispatched to state manager
I (58986) TTS:   âœ“ DMA buffer freed from PSRAM
I (58991) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (58999) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (59020) STATE_MGR: Voice pipeline reported COMPLETE
I (59020) STATE_MGR: TTS playback already drained - no pending audio
I (59022) STATE_MGR: Flushing and resetting TTS decoder for next session
I (59029) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (59037) TTS: No pending audio to flush
I (59087) TTS: TTS decoder session reset for next audio stream
I (59087) TTS: âœ… TTS decoder flushed and reset for next session
I (59290) TTS: â¹ï¸ Stopping TTS decoder...
W (59290) TTS: TTS decoder already stopped.
I (59434) STATE_MGR: Acquiring I2S mutex...
I (59434) STATE_MGR: Deinitializing audio drivers...
I (59434) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (59452) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (59459) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (59477) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (59484) AUDIO: âœ… RX channel disabled (took 0 ms)
I (59490) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (59496) AUDIO: âœ… TX channel disabled (took 0 ms)
I (59502) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (59558) AUDIO: [STEP 4/5] Deleting RX channel...
I (59559) AUDIO: âœ… RX channel deleted (took 0 ms)
I (59559) AUDIO: [STEP 5/5] Deleting TX channel...
I (59564) AUDIO: âœ… TX channel deleted (took 0 ms)
I (59569) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (59627) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (59634) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (59641) AUDIO: â•‘ Camera Can Now Initialize
I (59646) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (59714) STATE_MGR: Allowing memory stabilization (100ms)...
I (59814) STATE_MGR: Camera will be initialized on-demand during capture
I (59814) STATE_MGR: I2S mutex released
I (59815) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (59833) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (59840) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (59859) MEM_MGR: â•‘ Internal RAM:
I (59863) MEM_MGR: â•‘   Free:              90443 bytes ( 88 KB)
I (59870) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (59876) MEM_MGR: â•‘   Fragmentation:     28%
I (59882) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (59900) MEM_MGR: â•‘ DMA-capable RAM:
I (59904) MEM_MGR: â•‘   Free:              70027 bytes ( 68 KB)
I (59911) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (59918) MEM_MGR: â•‘   Fragmentation:      7%
I (59923) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (59941) MEM_MGR: â•‘ PSRAM:
I (59945) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (59952) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (59959) MEM_MGR: â•‘   Fragmentation:      2%
I (59964) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (59982) MEM_MGR: â•‘ Total Heap:
I (59987) MEM_MGR: â•‘   Free:             3737096 bytes (3649 KB)
I (59993) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (60000) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60019) MEM_MGR: â•‘ Memory Delta from Baseline:
I (60024) MEM_MGR: â•‘   Internal RAM:     -134736 bytes (-131 KB)
I (60031) MEM_MGR: â•‘   DMA-capable:      -134736 bytes (-131 KB)
I (60038) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (60045) MEM_MGR: â•‘   Total Heap:       -627652 bytes (-612 KB)
I (60052) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60070) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (60080) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60097) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (60104) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60122) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60140) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (60148) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60166) AUDIO: [DIAG] Pre-init state:
I (60170) AUDIO:   Free heap: 3772792 bytes
I (60175) AUDIO:   Free internal RAM: 126139 bytes
I (60180) AUDIO:   Free DMA-capable: 105723 bytes
I (60186) AUDIO:   Free PSRAM: 3667124 bytes
I (60191) AUDIO:   Timestamp: 58636 ms
I (60195) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (60202) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (60210) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (60218) AUDIO:   DMA frame num (per desc): 1020
I (60224) AUDIO:   DMA total samples (effective): 4080
I (60229) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (60236) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (60243) AUDIO: âœ… I2S channels created (took 0 ms)
I (60248) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca850
I (60255) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (60262) AUDIO:   Sample rate: 16000 Hz
I (60266) AUDIO:   MCLK: DISABLED
I (60270) AUDIO:   BCLK: GPIO14 (shared)
I (60275) AUDIO:   WS:   GPIO15 (shared)
I (60279) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (60286) AUDIO: âœ… TX channel configured (took 1 ms)
I (60291) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (60298) AUDIO:   Sample rate: 16000 Hz
I (60302) AUDIO:   MCLK: DISABLED
I (60306) AUDIO:   BCLK: GPIO14 (shared)
I (60311) AUDIO:   WS:   GPIO15 (shared)
I (60315) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (60321) AUDIO: âœ… RX channel configured (took 0 ms)
I (60327) AUDIO: [STEP 4/6] Enabling TX channel...
I (60332) AUDIO: âœ… TX channel enabled (took 0 ms)
I (60338) AUDIO: [STEP 5/6] Enabling RX channel...
I (60343) AUDIO: âœ… RX channel enabled (took 0 ms)
I (60349) AUDIO: [STEP 6/6] Hardware stabilization...
I (60355) AUDIO:   Phase 1: Initial settle (50ms)
I (60410) AUDIO:   Phase 2: DMA verification
I (60410) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (60411) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (60568) AUDIO: [DIAG] Post-init state:
I (60568) AUDIO:   Free heap: 3746808 bytes
I (60569) AUDIO:   Free internal RAM: 100155 bytes
I (60572) AUDIO:   Free DMA-capable: 79739 bytes
I (60577) AUDIO:   Free PSRAM: 3667124 bytes
I (60582) AUDIO:   Timestamp: 59028 ms
I (60587) AUDIO:   Total init time: 201 ms
I (60592) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60610) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (60616) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (60621) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (60630) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (60637) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60655) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60672) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (60679) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (60685) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (60692) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (60698) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (60999) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61006) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (61014) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61032) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (61039) AUDIO: âœ… RX channel disabled (took 0 ms)
I (61044) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (61051) AUDIO: âœ… TX channel disabled (took 0 ms)
I (61056) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (61113) AUDIO: [STEP 4/5] Deleting RX channel...
I (61114) AUDIO: âœ… RX channel deleted (took 0 ms)
I (61114) AUDIO: [STEP 5/5] Deleting TX channel...
I (61119) AUDIO: âœ… TX channel deleted (took 0 ms)
I (61124) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (61182) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61189) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (61196) AUDIO: â•‘ Camera Can Now Initialize
I (61201) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (61219) LED_CTRL: LED pattern -> 3
I (61223) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (61240) STATE_MGR: Pipeline stage event: complete
I (68220) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (68220) BUTTON: Single click confirmed
I (68220) STATE_MGR: Single click - mode toggle requested
I (68227) STATE_MGR: Switching: Camera â†’ Voice (count: 5)
I (68283) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (68283) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68296) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (68303) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68322) MEM_MGR: â•‘ Internal RAM:
I (68326) MEM_MGR: â•‘   Free:             126139 bytes (123 KB)
I (68333) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (68339) MEM_MGR: â•‘   Fragmentation:     26%
I (68344) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68363) MEM_MGR: â•‘ DMA-capable RAM:
I (68367) MEM_MGR: â•‘   Free:             105723 bytes (103 KB)
I (68374) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (68381) MEM_MGR: â•‘   Fragmentation:     11%
I (68386) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68404) MEM_MGR: â•‘ PSRAM:
I (68408) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (68415) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (68422) MEM_MGR: â•‘   Fragmentation:      2%
I (68427) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68445) MEM_MGR: â•‘ Total Heap:
I (68449) MEM_MGR: â•‘   Free:             3772792 bytes (3684 KB)
I (68456) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (68463) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68481) MEM_MGR: â•‘ Memory Delta from Baseline:
I (68487) MEM_MGR: â•‘   Internal RAM:      -99040 bytes ( -96 KB)
I (68494) MEM_MGR: â•‘   DMA-capable:       -99040 bytes ( -96 KB)
I (68501) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (68508) MEM_MGR: â•‘   Total Heap:       -591956 bytes (-578 KB)
I (68514) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68533) STATE_MGR: Stopping camera...
I (68537) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68554) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (68560) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68577) STATE_MGR:   Timeout: 5000 ms
I (68581) STATE_MGR:   Timestamp: 67027 ms
I (68586) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (68592) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68608) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (68614) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68631) STATE_MGR:   Free heap before: 3772788 bytes
I (68637) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (68642) CAMERA: Deinitializing camera...
I (68647) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (68653) STATE_MGR:   Free heap after: 3772788 bytes
I (68659) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (68665) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68681) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (68687) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68704) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (68812) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (68912) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (68962) STATE_MGR:   âœ“ Total stabilization: 250ms
I (68962) STATE_MGR:   Timestamp: 67408 ms
I (68962) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (68978) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (68985) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69001) STATE_MGR:   Free heap before: 3772788 bytes
I (69007) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69025) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (69032) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69050) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69068) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (69075) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69093) AUDIO: [DIAG] Pre-init state:
I (69097) AUDIO:   Free heap: 3772788 bytes
I (69102) AUDIO:   Free internal RAM: 126135 bytes
I (69108) AUDIO:   Free DMA-capable: 105719 bytes
I (69113) AUDIO:   Free PSRAM: 3667124 bytes
I (69118) AUDIO:   Timestamp: 67564 ms
I (69122) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (69129) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (69137) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (69145) AUDIO:   DMA frame num (per desc): 1020
I (69151) AUDIO:   DMA total samples (effective): 4080
I (69157) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (69164) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (69170) AUDIO: âœ… I2S channels created (took 0 ms)
I (69176) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca850
I (69182) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (69189) AUDIO:   Sample rate: 16000 Hz
I (69193) AUDIO:   MCLK: DISABLED
I (69197) AUDIO:   BCLK: GPIO14 (shared)
I (69202) AUDIO:   WS:   GPIO15 (shared)
I (69207) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (69213) AUDIO: âœ… TX channel configured (took 1 ms)
I (69218) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (69225) AUDIO:   Sample rate: 16000 Hz
I (69229) AUDIO:   MCLK: DISABLED
I (69233) AUDIO:   BCLK: GPIO14 (shared)
I (69238) AUDIO:   WS:   GPIO15 (shared)
I (69243) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (69249) AUDIO: âœ… RX channel configured (took 0 ms)
I (69254) AUDIO: [STEP 4/6] Enabling TX channel...
I (69260) AUDIO: âœ… TX channel enabled (took 0 ms)
I (69265) AUDIO: [STEP 5/6] Enabling RX channel...
I (69271) AUDIO: âœ… RX channel enabled (took 0 ms)
I (69276) AUDIO: [STEP 6/6] Hardware stabilization...
I (69282) AUDIO:   Phase 1: Initial settle (50ms)
I (69337) AUDIO:   Phase 2: DMA verification
I (69337) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (69338) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (69495) AUDIO: [DIAG] Post-init state:
I (69495) AUDIO:   Free heap: 3746808 bytes
I (69496) AUDIO:   Free internal RAM: 100155 bytes
I (69499) AUDIO:   Free DMA-capable: 79739 bytes
I (69504) AUDIO:   Free PSRAM: 3667124 bytes
I (69509) AUDIO:   Timestamp: 67955 ms
I (69514) AUDIO:   Total init time: 201 ms
I (69519) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69537) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (69543) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (69548) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (69557) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (69564) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69582) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69599) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (69606) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (69613) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (69619) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (69625) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69643) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (69650) STATE_MGR:   Free heap after: 3746548 bytes
I (69655) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69672) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (69677) STATE_MGR: â•‘ Total transition time: 890 ms
I (69683) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69699) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69715) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (69725) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (69741) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (69749) TTS: No pending audio to flush
I (69796) TTS: TTS decoder session reset for next audio stream
I (69796) TTS: âœ… TTS decoder flushed and reset for next session
I (69798) STT: Starting STT pipeline...
I (69803) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (69812) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (69819) STT:   Current time: 68265 ms
I (69821) STT: âœ… STT pipeline started
I (69824) STT:   Free heap: 3738016 bytes
I (69828) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (69824) STT: Audio streaming session activated
I (69847) STT: Connection stabilization delay (2000ms)...
I (70033) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (70033) STT:   âœ“ Audio driver initialized
I (70034) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (70141) STT:   Total stabilization: 300ms
I (70141) STT:   Timestamp: 68587 ms
I (70141) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (70145) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe3778 (with safety padding)
I (70154) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70169) LED_CTRL: LED pattern -> 1
I (70170) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (70174) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70179) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (70198) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (70204) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70211) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70246) MEM_MGR: â•‘ Internal RAM:
I (70250) MEM_MGR: â•‘   Free:             126139 bytes (123 KB)
I (70256) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (70263) MEM_MGR: â•‘   Fragmentation:     26%
I (70268) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70287) MEM_MGR: â•‘ DMA-capable RAM:
I (70291) MEM_MGR: â•‘   Free:             105723 bytes (103 KB)
I (70298) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (70305) MEM_MGR: â•‘   Fragmentation:     11%
I (70310) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70328) MEM_MGR: â•‘ PSRAM:
I (70332) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (70339) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (70346) MEM_MGR: â•‘   Fragmentation:      2%
I (70351) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70369) MEM_MGR: â•‘ Total Heap:
I (70373) MEM_MGR: â•‘   Free:             3772792 bytes (3684 KB)
I (70380) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (70387) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70405) MEM_MGR: â•‘ Memory Delta from Baseline:
I (70411) MEM_MGR: â•‘   Internal RAM:      -99040 bytes ( -96 KB)
I (70418) MEM_MGR: â•‘   DMA-capable:       -99040 bytes ( -96 KB)
I (70425) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (70431) MEM_MGR: â•‘   Total Heap:       -591956 bytes (-578 KB)
I (70438) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (70457) STATE_MGR: âœ… Voice mode transition complete
I (70463) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (70478) STATE_MGR: STT pipeline reported start
I (71853) STT: Starting audio streaming to server...
I (71913) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (71914) WEBSOCKET: Server status: receiving
I (71919) WEBSOCKET: Server ACK: 2 chunks processed
W (71985) STT: Waiting for server ACK (sent: 4, acked: 2, unack: 2)
I (72033) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (72034) WEBSOCKET: Server status: receiving
I (72039) STT: Flow control: ACK received, resuming (sent=4, acked=4)
I (72046) STT: ACK received, resuming (unack now: 0)
I (72046) WEBSOCKET: Server ACK: 4 chunks processed
W (72111) STT: Waiting for server ACK (sent: 6, acked: 4, unack: 2)
I (72158) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (72159) WEBSOCKET: Server status: receiving
I (72164) STT: Flow control: ACK received, resuming (sent=6, acked=6)
I (72171) WEBSOCKET: Server ACK: 6 chunks processed
I (72172) STT: ACK received, resuming (unack now: 0)
I (72274) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (72275) WEBSOCKET: Server status: receiving
I (72279) WEBSOCKET: Server ACK: 8 chunks processed
I (72342) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (72343) WEBSOCKET: Server status: receiving
W (72343) STT: Waiting for server ACK (sent: 10, acked: 8, unack: 2)
I (72347) STT: Flow control: ACK received, resuming (sent=10, acked=10)
I (72354) STT: ACK received, resuming (unack now: 0)
I (72362) WEBSOCKET: Server ACK: 10 chunks processed
I (72426) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (72427) WEBSOCKET: Server status: receiving
I (72431) WEBSOCKET: Server ACK: 12 chunks processed
I (72481) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (72482) WEBSOCKET: Server status: receiving
I (72486) WEBSOCKET: Server ACK: 14 chunks processed
I (72542) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (72543) WEBSOCKET: Server status: receiving
I (72547) WEBSOCKET: Server ACK: 16 chunks processed
I (72606) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (72607) WEBSOCKET: Server status: receiving
I (72612) WEBSOCKET: Server ACK: 18 chunks processed
I (72717) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (72718) WEBSOCKET: Server status: receiving
I (72722) WEBSOCKET: Server ACK: 20 chunks processed
I (72994) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (72995) WEBSOCKET: Server status: receiving
I (72999) WEBSOCKET: Server ACK: 22 chunks processed
I (73237) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (73237) WEBSOCKET: Server status: receiving
I (73242) WEBSOCKET: Server ACK: 24 chunks processed
I (73505) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (73506) WEBSOCKET: Server status: receiving
I (73510) WEBSOCKET: Server ACK: 26 chunks processed
I (73716) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (73716) WEBSOCKET: Server status: receiving
I (73721) WEBSOCKET: Server ACK: 28 chunks processed
I (74036) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (74036) WEBSOCKET: Server status: receiving
I (74041) WEBSOCKET: Server ACK: 30 chunks processed
I (74316) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (74316) WEBSOCKET: Server status: receiving
I (74321) WEBSOCKET: Server ACK: 32 chunks processed
I (74565) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 34, "bytes_received": 139264}
I (74565) WEBSOCKET: Server status: receiving
I (74570) WEBSOCKET: Server ACK: 34 chunks processed
I (74809) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 36, "bytes_received": 147456}
I (74810) WEBSOCKET: Server status: receiving
I (74814) WEBSOCKET: Server ACK: 36 chunks processed
I (75036) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 38, "bytes_received": 155648}
I (75037) WEBSOCKET: Server status: receiving
I (75042) WEBSOCKET: Server ACK: 38 chunks processed
I (75330) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 40, "bytes_received": 163840}
I (75330) WEBSOCKET: Server status: receiving
I (75335) WEBSOCKET: Server ACK: 40 chunks processed
I (75544) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 42, "bytes_received": 172032}
I (75545) WEBSOCKET: Server status: receiving
I (75550) WEBSOCKET: Server ACK: 42 chunks processed
I (75749) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 44, "bytes_received": 180224}
I (75750) WEBSOCKET: Server status: receiving
I (75755) WEBSOCKET: Server ACK: 44 chunks processed
I (76065) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 46, "bytes_received": 188416}
I (76066) WEBSOCKET: Server status: receiving
I (76071) WEBSOCKET: Server ACK: 46 chunks processed
I (76357) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 48, "bytes_received": 196608}
I (76358) WEBSOCKET: Server status: receiving
I (76362) WEBSOCKET: Server ACK: 48 chunks processed
I (76364) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (76364) BUTTON: Single click confirmed
I (76375) STATE_MGR: Single click - mode toggle requested
I (76386) STATE_MGR: User requested to end voice session (count: 6). Stopping STT and awaiting server response.
I (76396) STT: Stopping STT pipeline...
I (76401) STT: Draining ring buffer (1024 bytes pending) before shutdown...
I (76416) STT: Ring buffer drained and cleared successfully
I (76416) STT: Capture stopped and ring buffer drained; ending streaming loop
I (76423) STT: Sending EOS signal...
I (76427) WEBSOCKET: Sending EOS signal
I (76419) STT: Audio capture task stopped (captured 202752 bytes total)
I (76438) STT: Audio streaming session complete (streamed 200704 bytes in 49 chunks)
I (76469) STT: STT pipeline stopped
I (76469) LED_CTRL: LED pattern -> 4
I (76469) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (76477) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (76484) WEBSOCKET: Server status: processing
I (76489) WEBSOCKET: Server stage: transcription
I (76495) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (76502) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (76485) STATE_MGR: STT pipeline reported stop
I (76515) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (76524) LED_CTRL: LED pattern -> 1
I (76989) LED_CTRL: LED pattern -> 4
I (76990) STATE_MGR: Pipeline stage event: transcription
I (76990) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (77313) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "can you count", "has_image": false}
I (77315) WEBSOCKET: Server status: processing
I (77320) WEBSOCKET: Server stage: llm
I (77324) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (77331) WEBSOCKET: Entering LLM stage - continuing processing indication
I (77339) STATE_MGR: Pipeline stage event: llm
I (77776) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I can count up to ten, but I'm not sure what you'd like me to count right now."}
I (77782) WEBSOCKET: Server status: processing
I (77787) WEBSOCKET: Server stage: tts
I (77791) WEBSOCKET: Pipeline stage changed: llm -> tts
I (77797) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (77804) LED_CTRL: LED pattern -> 3
I (77809) TTS: ğŸµ Starting TTS decoder...
I (77813) TTS: Initializing TTS decoder...
W (77818) TTS: TTS decoder already initialized
I (77867) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (77868) STATE_MGR: TTS playback start event received
I (77872) LED_CTRL: LED pattern -> 1
I (77876) TTS: âœ… TTS decoder started successfully
I (77883) TTS: ğŸµ TTS playback task started on Core 1
I (77886) STATE_MGR: Pipeline stage event: tts
I (77893) TTS: âœ… TTS playback task registered with watchdog
I (77899) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (77907) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 76352 ms, bytes: 4096)
I (77916) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (77924) TTS: Chunk #2 first 12 bytes: 52 49 46 46 2E A1 02 00 57 41 56 45
I (77932) TTS: New audio session detected - resetting chunk counter
I (77939) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (77947) STATE_MGR: TTS playback start event received
I (77957) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (77962) TTS: Chunk #2 first 12 bytes: 0F F7 C6 00 61 08 2B 0A 91 07 34 03
I (77973) TTS: Received audio chunk #3: 1436 bytes (buffer: 8192/327680 used, 319487 free)
I (77978) TTS: Chunk #3 first 12 bytes: 5D 03 31 01 F9 FF 84 01 F4 00 C7 02
I (77988) TTS: âœ… WAV header parsed successfully
I (77991) TTS: === WAV File Info ===
I (77995) TTS: Sample Rate: 16000 Hz
I (78000) TTS: Channels: 1
I (78003) TTS: Received audio chunk #4: 2660 bytes (buffer: 5532/327680 used, 322147 free)
I (78012) TTS: Chunk #4 first 12 bytes: 6B E3 A2 E3 79 E4 4B E9 5A F6 19 01
I (78024) TTS: Received audio chunk #5: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (78029) TTS: Chunk #5 first 12 bytes: 2A 01 1B 01 1A 01 0D 01 CE 00 69 00
I (78041) TTS: Received audio chunk #6: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (78051) TTS: Received audio chunk #7: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (78060) TTS: Received audio chunk #8: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (78069) TTS: Received audio chunk #9: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (78078) TTS: Received audio chunk #10: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (78088) TTS: Received audio chunk #11: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (78096) TTS: Received audio chunk #12: 316 bytes (buffer: 36864/327680 used, 290815 free)
I (78103) TTS: Received audio chunk #13: 3780 bytes (buffer: 37180/327680 used, 290499 free)
I (78114) TTS: Received audio chunk #14: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (78123) TTS: Received audio chunk #15: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (78131) TTS: Received audio chunk #16: 976 bytes (buffer: 49152/327680 used, 278527 free)
I (78138) TTS: Received audio chunk #17: 3120 bytes (buffer: 50128/327680 used, 277551 free)
I (78150) TTS: Received audio chunk #18: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (78160) TTS: Received audio chunk #19: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (78169) TTS: Received audio chunk #20: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (78178) TTS: Received audio chunk #21: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (78187) TTS: Received audio chunk #22: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (78155) TTS: Bits per Sample: 16
I (78195) TTS: Audio Format: 1 (PCM)
I (78204) TTS: Received audio chunk #23: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (78209) TTS: Declared Data Size: 172298 bytes
I (78213) TTS: Block Align: 2
I (78219) TTS: Received audio chunk #24: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (78227) TTS: Byte Rate: 32000
I (78230) TTS: ====================
I (78236) TTS: Received audio chunk #25: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (78248) TTS: Received audio chunk #26: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (78254) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=94208)
I (78259) TTS: Received audio chunk #27: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (78275) TTS: Received audio chunk #28: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (78280) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (78291) TTS: Received audio chunk #29: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (78311) TTS: Received audio chunk #30: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (78326) TTS: Received audio chunk #31: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (78340) TTS: Received audio chunk #32: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (78357) TTS: Received audio chunk #33: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (78370) TTS: Received audio chunk #34: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (78411) TTS: Received audio chunk #35: 2876 bytes (buffer: 118784/327680 used, 208895 free)
I (78413) TTS: Received audio chunk #36: 1220 bytes (buffer: 121660/327680 used, 206019 free)
I (78423) TTS: Received audio chunk #37: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (78433) TTS: Received audio chunk #38: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (78441) TTS: Received audio chunk #39: 1436 bytes (buffer: 131072/327680 used, 196607 free)
I (78448) TTS: Received audio chunk #40: 2660 bytes (buffer: 132508/327680 used, 195171 free)
I (78460) TTS: Received audio chunk #41: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (78470) TTS: Received audio chunk #42: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (78480) TTS: Received audio chunk #43: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (78497) TTS: Received audio chunk #44: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (78512) TTS: Received audio chunk #45: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (78526) TTS: Received audio chunk #46: 4096 bytes (buffer: 151552/327680 used, 176127 free)
I (78543) TTS: Received audio chunk #47: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (78555) TTS: Received audio chunk #48: 310 bytes (buffer: 159744/327680 used, 167935 free)
I (78566) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (78693) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (78819) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (78819) TTS: TTS end-of-stream signaled (bytes_received=172342, header_parsed=1)
I (78824) TTS: ğŸµ Playback task will drain 151862 bytes of buffered audio
I (78832) TTS: Waiting for playback completion: 151862 bytes buffered, calculated timeout: 6745 ms
I (78842) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (78948) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (79075) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (79203) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (79331) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (79458) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (79585) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (79713) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (79840) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (79968) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (80095) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (80223) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (80350) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (80478) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (80605) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (80733) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (80860) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (80988) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (81115) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (81243) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (81371) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (81498) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (81625) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (81753) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (81880) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (82008) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (82135) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (82263) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (82390) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (82518) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (82645) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (82773) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (82900) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (83028) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (83155) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (83283) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (83410) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (83538) TTS: âœ… All audio data received (172342 bytes, expected 172298 + 44 header)
I (83638) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (83638) TTS: ğŸµ TTS playback task exiting (played 172298 bytes, result: ESP_OK)
I (83684) TTS: TTS decoder session reset for next audio stream
I (83684) TTS: Received audio chunk #49: 0 bytes (buffer: 0/327680 used, 327679 free)
I (83690) TTS: New audio session detected - resetting chunk counter
I (83697) WEBSOCKET: ğŸµ Audio session complete: 172342 bytes in 48 messages
I (83708) WEBSOCKET: Received text message: {"status": "complete"}
I (83712) WEBSOCKET: Server status: complete
I (83717) WEBSOCKET: Pipeline stage changed: tts -> complete
I (83723) WEBSOCKET: Exiting TTS stage (transition to complete)
I (83730) STATE_MGR: TTS playback finished successfully
I (83736) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (83745) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (83751) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (83769) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (83776) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (83795) MEM_MGR: â•‘ Internal RAM:
I (83799) MEM_MGR: â•‘   Free:              99899 bytes ( 97 KB)
I (83806) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (83812) MEM_MGR: â•‘   Fragmentation:     27%
I (83818) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (83836) MEM_MGR: â•‘ DMA-capable RAM:
I (83840) MEM_MGR: â•‘   Free:              79483 bytes ( 77 KB)
I (83847) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (83854) MEM_MGR: â•‘   Fragmentation:      8%
I (83859) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (83877) MEM_MGR: â•‘ PSRAM:
I (83881) MEM_MGR: â•‘   Free:             3667260 bytes (3581 KB)
I (83888) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (83895) MEM_MGR: â•‘   Fragmentation:      2%
I (83900) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (83918) MEM_MGR: â•‘ Total Heap:
I (83922) MEM_MGR: â•‘   Free:             3746688 bytes (3658 KB)
I (83929) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (83936) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (83955) MEM_MGR: â•‘ Memory Delta from Baseline:
I (83960) MEM_MGR: â•‘   Internal RAM:     -125280 bytes (-122 KB)
I (83967) MEM_MGR: â•‘   DMA-capable:      -125280 bytes (-122 KB)
I (83974) MEM_MGR: â•‘   PSRAM:            -524756 bytes (-512 KB)
I (83981) MEM_MGR: â•‘   Total Heap:       -618060 bytes (-603 KB)
I (83987) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (84006) STATE_MGR: Stopping voice mode components...
I (84012) STT: Stopping STT pipeline...
W (84016) STT: STT pipeline already stopped
I (84021) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (84030) TTS: âœ… TTS playback finished event dispatched to state manager
I (84037) TTS:   âœ“ DMA buffer freed from PSRAM
I (84042) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (84050) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (84071) STATE_MGR: Voice pipeline reported COMPLETE
I (84071) STATE_MGR: TTS playback already drained - no pending audio
I (84073) STATE_MGR: Flushing and resetting TTS decoder for next session
I (84080) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (84088) TTS: No pending audio to flush
I (84137) TTS: TTS decoder session reset for next audio stream
I (84137) TTS: âœ… TTS decoder flushed and reset for next session
I (84339) TTS: â¹ï¸ Stopping TTS decoder...
W (84339) TTS: TTS decoder already stopped.
I (84484) STATE_MGR: Acquiring I2S mutex...
I (84484) STATE_MGR: Deinitializing audio drivers...
I (84484) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (84502) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (84509) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (84527) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (84534) AUDIO: âœ… RX channel disabled (took 0 ms)
I (84540) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (84546) AUDIO: âœ… TX channel disabled (took 0 ms)
I (84552) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (84608) AUDIO: [STEP 4/5] Deleting RX channel...
I (84609) AUDIO: âœ… RX channel deleted (took 0 ms)
I (84609) AUDIO: [STEP 5/5] Deleting TX channel...
I (84614) AUDIO: âœ… TX channel deleted (took 0 ms)
I (84619) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (84677) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (84684) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (84691) AUDIO: â•‘ Camera Can Now Initialize
I (84696) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (84764) STATE_MGR: Allowing memory stabilization (100ms)...
I (84864) STATE_MGR: Camera will be initialized on-demand during capture
I (84864) STATE_MGR: I2S mutex released
I (84865) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (84883) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (84890) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (84909) MEM_MGR: â•‘ Internal RAM:
I (84913) MEM_MGR: â•‘   Free:              99899 bytes ( 97 KB)
I (84920) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (84926) MEM_MGR: â•‘   Fragmentation:     27%
I (84932) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (84950) MEM_MGR: â•‘ DMA-capable RAM:
I (84954) MEM_MGR: â•‘   Free:              79483 bytes ( 77 KB)
I (84961) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (84968) MEM_MGR: â•‘   Fragmentation:      8%
I (84973) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (84991) MEM_MGR: â•‘ PSRAM:
I (84995) MEM_MGR: â•‘   Free:             3667260 bytes (3581 KB)
I (85002) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (85009) MEM_MGR: â•‘   Fragmentation:      2%
I (85014) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85032) MEM_MGR: â•‘ Total Heap:
I (85037) MEM_MGR: â•‘   Free:             3746688 bytes (3658 KB)
I (85043) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (85050) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85069) MEM_MGR: â•‘ Memory Delta from Baseline:
I (85074) MEM_MGR: â•‘   Internal RAM:     -125280 bytes (-122 KB)
I (85081) MEM_MGR: â•‘   DMA-capable:      -125280 bytes (-122 KB)
I (85088) MEM_MGR: â•‘   PSRAM:            -524756 bytes (-512 KB)
I (85095) MEM_MGR: â•‘   Total Heap:       -618060 bytes (-603 KB)
I (85102) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85120) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (85130) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85147) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (85154) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85172) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85190) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (85198) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85216) AUDIO: [DIAG] Pre-init state:
I (85220) AUDIO:   Free heap: 3772788 bytes
I (85225) AUDIO:   Free internal RAM: 126135 bytes
I (85230) AUDIO:   Free DMA-capable: 105719 bytes
I (85236) AUDIO:   Free PSRAM: 3667124 bytes
I (85241) AUDIO:   Timestamp: 83686 ms
I (85245) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (85252) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (85260) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (85268) AUDIO:   DMA frame num (per desc): 1020
I (85274) AUDIO:   DMA total samples (effective): 4080
I (85279) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (85286) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (85293) AUDIO: âœ… I2S channels created (took 0 ms)
I (85298) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca850
I (85305) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (85312) AUDIO:   Sample rate: 16000 Hz
I (85316) AUDIO:   MCLK: DISABLED
I (85320) AUDIO:   BCLK: GPIO14 (shared)
I (85325) AUDIO:   WS:   GPIO15 (shared)
I (85329) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (85336) AUDIO: âœ… TX channel configured (took 1 ms)
I (85341) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (85348) AUDIO:   Sample rate: 16000 Hz
I (85352) AUDIO:   MCLK: DISABLED
I (85356) AUDIO:   BCLK: GPIO14 (shared)
I (85361) AUDIO:   WS:   GPIO15 (shared)
I (85365) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (85371) AUDIO: âœ… RX channel configured (took 0 ms)
I (85377) AUDIO: [STEP 4/6] Enabling TX channel...
I (85382) AUDIO: âœ… TX channel enabled (took 0 ms)
I (85388) AUDIO: [STEP 5/6] Enabling RX channel...
I (85393) AUDIO: âœ… RX channel enabled (took 0 ms)
I (85399) AUDIO: [STEP 6/6] Hardware stabilization...
I (85405) AUDIO:   Phase 1: Initial settle (50ms)
I (85460) AUDIO:   Phase 2: DMA verification
I (85460) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (85461) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (85618) AUDIO: [DIAG] Post-init state:
I (85618) AUDIO:   Free heap: 3746808 bytes
I (85619) AUDIO:   Free internal RAM: 100155 bytes
I (85622) AUDIO:   Free DMA-capable: 79739 bytes
I (85627) AUDIO:   Free PSRAM: 3667124 bytes
I (85632) AUDIO:   Timestamp: 84078 ms
I (85637) AUDIO:   Total init time: 201 ms
I (85642) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85660) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (85666) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (85671) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (85680) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (85687) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85705) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (85722) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (85729) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (85735) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (85742) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (85748) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86049) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86056) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (86064) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86082) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (86089) AUDIO: âœ… RX channel disabled (took 0 ms)
I (86094) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (86101) AUDIO: âœ… TX channel disabled (took 0 ms)
I (86106) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (86163) AUDIO: [STEP 4/5] Deleting RX channel...
I (86164) AUDIO: âœ… RX channel deleted (took 0 ms)
I (86164) AUDIO: [STEP 5/5] Deleting TX channel...
I (86169) AUDIO: âœ… TX channel deleted (took 0 ms)
I (86174) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (86232) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86239) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (86246) AUDIO: â•‘ Camera Can Now Initialize
I (86251) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (86269) LED_CTRL: LED pattern -> 3
I (86273) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (86290) STATE_MGR: Pipeline stage event: complete
I (88292) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (88292) STATE_MGR: Double-click detected - triggering capture sequence
I (88295) STATE_MGR: Starting camera capture sequence
I (88301) LED_CTRL: LED pattern -> 6
I (88305) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (88323) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (88330) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (88348) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (88366) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (88373) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (88391) AUDIO: [DIAG] Pre-init state:
I (88396) AUDIO:   Free heap: 3772788 bytes
I (88401) AUDIO:   Free internal RAM: 126135 bytes
I (88406) AUDIO:   Free DMA-capable: 105719 bytes
I (88412) AUDIO:   Free PSRAM: 3667124 bytes
I (88417) AUDIO:   Timestamp: 86862 ms
I (88421) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (88428) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (88436) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (88444) AUDIO:   DMA frame num (per desc): 1020
I (88449) AUDIO:   DMA total samples (effective): 4080
I (88455) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (88462) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (88469) AUDIO: âœ… I2S channels created (took 0 ms)
I (88474) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca850
I (88481) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (88487) AUDIO:   Sample rate: 16000 Hz
I (88492) AUDIO:   MCLK: DISABLED
I (88496) AUDIO:   BCLK: GPIO14 (shared)
I (88501) AUDIO:   WS:   GPIO15 (shared)
I (88505) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (88512) AUDIO: âœ… TX channel configured (took 0 ms)
I (88517) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (88523) AUDIO:   Sample rate: 16000 Hz
I (88528) AUDIO:   MCLK: DISABLED
I (88532) AUDIO:   BCLK: GPIO14 (shared)
I (88537) AUDIO:   WS:   GPIO15 (shared)
I (88541) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (88547) AUDIO: âœ… RX channel configured (took 0 ms)
I (88553) AUDIO: [STEP 4/6] Enabling TX channel...
I (88558) AUDIO: âœ… TX channel enabled (took 0 ms)
I (88564) AUDIO: [STEP 5/6] Enabling RX channel...
I (88569) AUDIO: âœ… RX channel enabled (took 0 ms)
I (88575) AUDIO: [STEP 6/6] Hardware stabilization...
I (88580) AUDIO:   Phase 1: Initial settle (50ms)
I (88636) AUDIO:   Phase 2: DMA verification
I (88636) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (88637) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (88794) AUDIO: [DIAG] Post-init state:
I (88794) AUDIO:   Free heap: 3746808 bytes
I (88795) AUDIO:   Free internal RAM: 100155 bytes
I (88798) AUDIO:   Free DMA-capable: 79739 bytes
I (88803) AUDIO:   Free PSRAM: 3667124 bytes
I (88808) AUDIO:   Timestamp: 87254 ms
I (88813) AUDIO:   Total init time: 200 ms
I (88818) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (88836) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (88842) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (88847) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (88856) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (88863) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (88881) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (88898) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (88905) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (88911) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (88918) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (88924) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (89274) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (89281) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (89289) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (89307) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (89314) AUDIO: âœ… RX channel disabled (took 0 ms)
I (89319) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (89326) AUDIO: âœ… TX channel disabled (took 0 ms)
I (89331) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (89388) AUDIO: [STEP 4/5] Deleting RX channel...
I (89389) AUDIO: âœ… RX channel deleted (took 0 ms)
I (89389) AUDIO: [STEP 5/5] Deleting TX channel...
I (89394) AUDIO: âœ… TX channel deleted (took 0 ms)
I (89399) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (89457) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (89464) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (89471) AUDIO: â•‘ Camera Can Now Initialize
I (89476) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (89494) STATE_MGR: Capturing frame from camera
I (89499) CAMERA: Initializing camera...
I (89704) CAMERA: Camera sensor power cycled via PWDN pin
I (89705) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (89709) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (89717) cam_hal: cam init ok
W (89721) ledc: GPIO 0 is not usable, maybe conflict with others
I (89728) sccb-ng: pin_sda 26 pin_scl 27
I (89732) sccb-ng: sccb_i2c_port=1
I (89737) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (89780) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (89780) camera: Detected OV2640 camera
I (89780) camera: Detected camera at address=0x30
I (89861) cam_hal: PSRAM DMA mode disabled
I (89861) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (89865) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (89872) cam_hal: cam config ok
I (89876) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (89960) CAMERA: Camera initialized successfully
I (90511) STATE_MGR: Frame captured: 13801 bytes
I (90511) STATE_MGR: Uploading image using session esp32-cam-hotpin
I (90512) HTTP_CLIENT: Uploading image: session=esp32-cam-hotpin, size=13801 bytes
I (90522) HTTP_CLIENT: POST body assembled: 14058 bytes
I (90527) HTTP_CLIENT: Sending POST request to http://10.242.175.58:8000/image
I (90613) HTTP_CLIENT: HTTP POST Status = 200, content_length = 245
I (90613) HTTP_CLIENT: Image uploaded successfully
I (90615) HTTP_CLIENT: Server response: {"status":"success","message":"Image received and stored for next voice interaction","session":"esp32-cam-hotpin","filename":"image.jpg","size_bytes":13801,"saved_path":"captured_images/esp32-cam-hotpin_20251114_143548.jpg","context_ready":true}
I (90642) CAMERA: Deinitializing camera...
I (90647) CAMERA: Camera deinitialized
I (90650) STATE_MGR: Camera deinitialized - DMA memory freed
I (90656) STATE_MGR: Image uploaded successfully
I (90661) LED_CTRL: LED pattern -> 3
I (90666) STATE_MGR: Camera capture sequence complete
I (90681) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (95927) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (95927) BUTTON: Single click confirmed
I (95927) STATE_MGR: Single click - mode toggle requested
I (95933) STATE_MGR: Switching: Camera â†’ Voice (count: 7)
I (95990) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (95990) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96003) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (96010) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96029) MEM_MGR: â•‘ Internal RAM:
I (96033) MEM_MGR: â•‘   Free:             125923 bytes (122 KB)
I (96040) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (96046) MEM_MGR: â•‘   Fragmentation:     26%
I (96051) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96070) MEM_MGR: â•‘ DMA-capable RAM:
I (96074) MEM_MGR: â•‘   Free:             105507 bytes (103 KB)
I (96081) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (96088) MEM_MGR: â•‘   Fragmentation:     11%
I (96093) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96111) MEM_MGR: â•‘ PSRAM:
I (96115) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (96122) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (96129) MEM_MGR: â•‘   Fragmentation:      2%
I (96134) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96152) MEM_MGR: â•‘ Total Heap:
I (96156) MEM_MGR: â•‘   Free:             3772576 bytes (3684 KB)
I (96163) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (96170) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96188) MEM_MGR: â•‘ Memory Delta from Baseline:
I (96194) MEM_MGR: â•‘   Internal RAM:      -99256 bytes ( -96 KB)
I (96201) MEM_MGR: â•‘   DMA-capable:       -99256 bytes ( -96 KB)
I (96208) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (96215) MEM_MGR: â•‘   Total Heap:       -592172 bytes (-578 KB)
I (96221) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96240) STATE_MGR: Stopping camera...
I (96244) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96261) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (96267) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96284) STATE_MGR:   Timeout: 5000 ms
I (96288) STATE_MGR:   Timestamp: 94734 ms
I (96293) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (96299) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96315) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (96321) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96338) STATE_MGR:   Free heap before: 3772576 bytes
I (96344) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (96349) CAMERA: Deinitializing camera...
I (96354) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (96360) STATE_MGR:   Free heap after: 3772576 bytes
I (96366) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (96372) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96388) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (96394) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96411) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (96519) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (96619) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (96669) STATE_MGR:   âœ“ Total stabilization: 250ms
I (96669) STATE_MGR:   Timestamp: 95115 ms
I (96669) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96685) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (96692) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96708) STATE_MGR:   Free heap before: 3772576 bytes
I (96714) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96732) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (96739) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96757) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96775) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (96782) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (96800) AUDIO: [DIAG] Pre-init state:
I (96804) AUDIO:   Free heap: 3772576 bytes
I (96809) AUDIO:   Free internal RAM: 125923 bytes
I (96815) AUDIO:   Free DMA-capable: 105507 bytes
I (96820) AUDIO:   Free PSRAM: 3667124 bytes
I (96825) AUDIO:   Timestamp: 95271 ms
I (96829) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (96836) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (96844) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (96852) AUDIO:   DMA frame num (per desc): 1020
I (96858) AUDIO:   DMA total samples (effective): 4080
I (96864) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (96871) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (96877) AUDIO: âœ… I2S channels created (took 0 ms)
I (96883) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca7f0
I (96889) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (96896) AUDIO:   Sample rate: 16000 Hz
I (96900) AUDIO:   MCLK: DISABLED
I (96904) AUDIO:   BCLK: GPIO14 (shared)
I (96909) AUDIO:   WS:   GPIO15 (shared)
I (96914) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (96921) AUDIO: âœ… TX channel configured (took 1 ms)
I (96925) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (96932) AUDIO:   Sample rate: 16000 Hz
I (96936) AUDIO:   MCLK: DISABLED
I (96940) AUDIO:   BCLK: GPIO14 (shared)
I (96945) AUDIO:   WS:   GPIO15 (shared)
I (96950) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (96956) AUDIO: âœ… RX channel configured (took 0 ms)
I (96961) AUDIO: [STEP 4/6] Enabling TX channel...
I (96967) AUDIO: âœ… TX channel enabled (took 0 ms)
I (96972) AUDIO: [STEP 5/6] Enabling RX channel...
I (96978) AUDIO: âœ… RX channel enabled (took 0 ms)
I (96983) AUDIO: [STEP 6/6] Hardware stabilization...
I (96989) AUDIO:   Phase 1: Initial settle (50ms)
I (97044) AUDIO:   Phase 2: DMA verification
I (97044) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (97045) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (97202) AUDIO: [DIAG] Post-init state:
I (97202) AUDIO:   Free heap: 3746612 bytes
I (97203) AUDIO:   Free internal RAM: 99959 bytes
I (97206) AUDIO:   Free DMA-capable: 79543 bytes
I (97211) AUDIO:   Free PSRAM: 3667124 bytes
I (97216) AUDIO:   Timestamp: 95662 ms
I (97221) AUDIO:   Total init time: 201 ms
I (97225) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97243) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (97250) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (97255) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (97264) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (97270) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97288) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97306) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (97313) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (97319) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (97326) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (97332) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97350) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (97356) STATE_MGR:   Free heap after: 3746612 bytes
I (97362) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97378) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (97384) STATE_MGR: â•‘ Total transition time: 890 ms
I (97390) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97406) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97422) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (97432) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97448) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (97456) TTS: No pending audio to flush
I (97503) TTS: TTS decoder session reset for next audio stream
I (97503) TTS: âœ… TTS decoder flushed and reset for next session
I (97505) STT: Starting STT pipeline...
I (97510) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (97519) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (97526) STT:   Current time: 95972 ms
I (97529) STT: âœ… STT pipeline started
I (97531) STT:   Free heap: 3738060 bytes
I (97535) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (97531) STT: Audio streaming session activated
I (97554) STT: Connection stabilization delay (2000ms)...
I (97740) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (97740) STT:   âœ“ Audio driver initialized
I (97741) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (97848) STT:   Total stabilization: 300ms
I (97848) STT:   Timestamp: 96293 ms
I (97848) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (97852) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe3778 (with safety padding)
I (97861) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97874) LED_CTRL: LED pattern -> 1
I (97877) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (97881) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97886) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (97905) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (97911) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97918) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97952) MEM_MGR: â•‘ Internal RAM:
I (97957) MEM_MGR: â•‘   Free:             125923 bytes (122 KB)
I (97963) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (97970) MEM_MGR: â•‘   Fragmentation:     26%
I (97975) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (97994) MEM_MGR: â•‘ DMA-capable RAM:
I (97998) STT: [CAPTURE] âœ… Alive... 500 reads completed (Free Heap: 3736904 bytes)
I (97998) MEM_MGR: â•‘   Free:             105507 bytes (103 KB)
I (98013) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (98020) MEM_MGR: â•‘   Fragmentation:     11%
I (98025) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98043) MEM_MGR: â•‘ PSRAM:
I (98047) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (98054) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (98061) MEM_MGR: â•‘   Fragmentation:      2%
I (98066) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98084) MEM_MGR: â•‘ Total Heap:
I (98088) MEM_MGR: â•‘   Free:             3772576 bytes (3684 KB)
I (98095) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (98102) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98121) MEM_MGR: â•‘ Memory Delta from Baseline:
I (98126) MEM_MGR: â•‘   Internal RAM:      -99256 bytes ( -96 KB)
I (98133) MEM_MGR: â•‘   DMA-capable:       -99256 bytes ( -96 KB)
I (98140) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (98147) MEM_MGR: â•‘   Total Heap:       -592172 bytes (-578 KB)
I (98154) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (98172) STATE_MGR: âœ… Voice mode transition complete
I (98178) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (98193) STATE_MGR: STT pipeline reported start
I (99560) STT: Starting audio streaming to server...
I (99665) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (99666) WEBSOCKET: Server status: receiving
I (99670) WEBSOCKET: Server ACK: 2 chunks processed
I (99732) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (99732) WEBSOCKET: Server status: receiving
I (99737) WEBSOCKET: Server ACK: 4 chunks processed
I (99790) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (99790) WEBSOCKET: Server status: receiving
I (99795) WEBSOCKET: Server ACK: 6 chunks processed
I (99860) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (99861) WEBSOCKET: Server status: receiving
I (99865) WEBSOCKET: Server ACK: 8 chunks processed
I (99915) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (99916) WEBSOCKET: Server status: receiving
I (99921) WEBSOCKET: Server ACK: 10 chunks processed
I (99972) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (99973) WEBSOCKET: Server status: receiving
I (99977) WEBSOCKET: Server ACK: 12 chunks processed
I (100032) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (100032) WEBSOCKET: Server status: receiving
I (100037) WEBSOCKET: Server ACK: 14 chunks processed
W (100102) STT: Waiting for server ACK (sent: 16, acked: 14, unack: 2)
I (100125) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (100126) WEBSOCKET: Server status: receiving
I (100131) STT: Flow control: ACK received, resuming (sent=16, acked=16)
I (100133) STT: ACK received, resuming (unack now: 0)
I (100138) WEBSOCKET: Server ACK: 16 chunks processed
I (100191) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (100192) WEBSOCKET: Server status: receiving
I (100196) WEBSOCKET: Server ACK: 18 chunks processed
I (100461) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (100461) WEBSOCKET: Server status: receiving
I (100466) WEBSOCKET: Server ACK: 20 chunks processed
I (100717) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (100718) WEBSOCKET: Server status: receiving
I (100723) WEBSOCKET: Server ACK: 22 chunks processed
I (100954) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (100955) WEBSOCKET: Server status: receiving
I (100960) WEBSOCKET: Server ACK: 24 chunks processed
I (101202) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (101203) WEBSOCKET: Server status: receiving
I (101208) WEBSOCKET: Server ACK: 26 chunks processed
I (101413) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (101414) WEBSOCKET: Server status: receiving
I (101419) WEBSOCKET: Server ACK: 28 chunks processed
I (101679) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (101679) WEBSOCKET: Server status: receiving
I (101684) WEBSOCKET: Server ACK: 30 chunks processed
I (101945) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (101945) WEBSOCKET: Server status: receiving
I (101950) WEBSOCKET: Server ACK: 32 chunks processed
I (102236) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 34, "bytes_received": 139264}
I (102237) WEBSOCKET: Server status: receiving
I (102242) WEBSOCKET: Server ACK: 34 chunks processed
I (102484) BUTTON: Single click confirmed
I (102484) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (102485) STATE_MGR: Single click - mode toggle requested
I (102491) STATE_MGR: User requested to end voice session (count: 8). Stopping STT and awaiting server response.
I (102502) STT: Stopping STT pipeline...
I (102506) STT: Draining ring buffer (3072 bytes pending) before shutdown...
W (102509) STT: Waiting for server ACK (sent: 36, acked: 34, unack: 2)
I (102521) STT: Ring buffer drained and cleared successfully
I (102525) STT: Audio capture task stopped (captured 151552 bytes total)
I (102530) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 36, "bytes_received": 147456}
I (102547) WEBSOCKET: Server status: receiving
I (102551) STT: Flow control: ACK received, resuming (sent=36, acked=36)
I (102555) STT: ACK received, resuming (unack now: 0)
I (102559) WEBSOCKET: Server ACK: 36 chunks processed
I (102597) STT: Streaming task received stop signal
I (102597) STT: Sending EOS signal...
I (102597) WEBSOCKET: Sending EOS signal
I (102603) STT: Audio streaming session complete (streamed 150528 bytes in 37 chunks)
I (102622) STT: STT pipeline stopped
I (102623) LED_CTRL: LED pattern -> 4
I (102623) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (102639) STATE_MGR: STT pipeline reported stop
I (102640) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (102643) LED_CTRL: LED pattern -> 1
I (102650) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (102657) WEBSOCKET: Server status: processing
I (102662) WEBSOCKET: Server stage: transcription
I (102667) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (102675) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (103166) LED_CTRL: LED pattern -> 4
I (103167) STATE_MGR: Pipeline stage event: transcription
I (103167) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (103226) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "can you count the number of fingers in the image", "has_image": true}
I (103232) WEBSOCKET: Server status: processing
I (103237) WEBSOCKET: Server stage: llm
I (103241) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (103248) WEBSOCKET: Entering LLM stage - continuing processing indication
I (103256) STATE_MGR: Pipeline stage event: llm
I (103908) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I see a hand with five fingers in the image."}
I (103911) WEBSOCKET: Server status: processing
I (103916) WEBSOCKET: Server stage: tts
I (103920) WEBSOCKET: Pipeline stage changed: llm -> tts
I (103926) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (103934) LED_CTRL: LED pattern -> 3
I (103938) TTS: ğŸµ Starting TTS decoder...
I (103943) TTS: Initializing TTS decoder...
W (103948) TTS: TTS decoder already initialized
I (103995) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (103996) STATE_MGR: TTS playback start event received
I (104000) LED_CTRL: LED pattern -> 1
I (104004) TTS: âœ… TTS decoder started successfully
I (104011) TTS: ğŸµ TTS playback task started on Core 1
I (104014) STATE_MGR: Pipeline stage event: tts
I (104021) TTS: âœ… TTS playback task registered with watchdog
I (104028) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (104043) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 102489 ms, bytes: 4096)
I (104045) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (104053) TTS: Chunk #2 first 12 bytes: 52 49 46 46 38 8C 01 00 57 41 56 45
I (104061) TTS: New audio session detected - resetting chunk counter
I (104069) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (104076) STATE_MGR: TTS playback start event received
I (104086) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (104091) TTS: Chunk #2 first 12 bytes: E5 03 BF FE EC F9 F5 F9 40 FE 64 02
I (104104) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (104108) TTS: Chunk #3 first 12 bytes: E1 FF DF 00 C3 FE 78 FF CB 01 1B FF
I (104120) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (104125) TTS: Chunk #4 first 12 bytes: F2 CF 85 D8 4C DF 3D E3 DD E7 57 EE
I (104137) TTS: Received audio chunk #5: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (104141) TTS: Chunk #5 first 12 bytes: 87 02 AE 04 5A 06 E9 06 87 07 F4 07
I (104154) TTS: Received audio chunk #6: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (104164) TTS: Received audio chunk #7: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (104173) TTS: Received audio chunk #8: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (104180) TTS: Received audio chunk #9: 1316 bytes (buffer: 32768/327680 used, 294911 free)
I (104188) TTS: âœ… WAV header parsed successfully
I (104191) TTS: === WAV File Info ===
I (104195) TTS: Sample Rate: 16000 Hz
I (104200) TTS: Channels: 1
I (104203) TTS: Bits per Sample: 16
I (104207) TTS: Audio Format: 1 (PCM)
I (104212) TTS: Declared Data Size: 101396 bytes
I (104216) TTS: Received audio chunk #10: 2780 bytes (buffer: 29988/327680 used, 297691 free)
I (104231) TTS: Received audio chunk #11: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (104239) TTS: Received audio chunk #12: 316 bytes (buffer: 36864/327680 used, 290815 free)
I (104248) TTS: Received audio chunk #13: 3780 bytes (buffer: 37180/327680 used, 290499 free)
I (104259) TTS: Received audio chunk #14: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (104269) TTS: Received audio chunk #15: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (104278) TTS: Received audio chunk #16: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (104287) TTS: Received audio chunk #17: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (104296) TTS: Received audio chunk #18: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (104306) TTS: Received audio chunk #19: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (104316) TTS: Received audio chunk #20: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (104324) TTS: Received audio chunk #21: 1436 bytes (buffer: 69632/327680 used, 258047 free)
I (104329) TTS: Received audio chunk #22: 2660 bytes (buffer: 71068/327680 used, 256611 free)
I (104341) TTS: Received audio chunk #23: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (104245) TTS: Block Align: 2
I (104350) TTS: Byte Rate: 32000
I (104354) TTS: Received audio chunk #24: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (104364) TTS: ====================
I (104371) TTS: Received audio chunk #25: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (104377) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=90112)
I (104386) TTS: Received audio chunk #26: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (104394) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (104402) TTS: Received audio chunk #27: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (104419) TTS: Received audio chunk #28: 3136 bytes (buffer: 94208/327680 used, 233471 free)
I (104424) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (104551) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (104637) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (104637) TTS: TTS end-of-stream signaled (bytes_received=101440, header_parsed=1)
I (104642) TTS: ğŸµ Playback task will drain 89152 bytes of buffered audio
I (104650) TTS: Waiting for playback completion: 89152 bytes buffered, calculated timeout: 4786 ms
I (104679) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (104806) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (104934) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (105061) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (105189) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (105316) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (105444) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (105571) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (105699) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (105826) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (105954) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (106081) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (106209) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (106336) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (106464) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (106591) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (106719) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (106846) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (106974) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (107101) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (107229) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (107356) TTS: âœ… All audio data received (101440 bytes, expected 101396 + 44 header)
I (107520) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (107520) TTS: ğŸµ TTS playback task exiting (played 101396 bytes, result: ESP_OK)
I (107526) STATE_MGR: TTS playback finished successfully
I (107532) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (107541) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (107547) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (107566) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (107573) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (107591) MEM_MGR: â•‘ Internal RAM:
I (107596) MEM_MGR: â•‘   Free:              91027 bytes ( 88 KB)
I (107602) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (107609) MEM_MGR: â•‘   Fragmentation:     29%
I (107614) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (107633) MEM_MGR: â•‘ DMA-capable RAM:
I (107638) MEM_MGR: â•‘   Free:              70611 bytes ( 68 KB)
I (107644) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (107651) MEM_MGR: â•‘   Fragmentation:      8%
I (107656) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (107675) MEM_MGR: â•‘ PSRAM:
I (107679) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (107686) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (107693) MEM_MGR: â•‘   Fragmentation:      2%
I (107698) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (107716) MEM_MGR: â•‘ Total Heap:
I (107720) MEM_MGR: â•‘   Free:             3725520 bytes (3638 KB)
I (107727) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (107734) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (107753) MEM_MGR: â•‘ Memory Delta from Baseline:
I (107758) MEM_MGR: â•‘   Internal RAM:     -134152 bytes (-131 KB)
I (107765) MEM_MGR: â•‘   DMA-capable:      -134152 bytes (-131 KB)
I (107772) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (107779) MEM_MGR: â•‘   Total Heap:       -639228 bytes (-624 KB)
I (107786) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (107805) STATE_MGR: Stopping voice mode components...
I (107811) STT: Stopping STT pipeline...
W (107815) STT: STT pipeline already stopped
I (107863) TTS: TTS decoder session reset for next audio stream
I (107863) TTS: Received audio chunk #29: 0 bytes (buffer: 0/327680 used, 327679 free)
I (107867) TTS: New audio session detected - resetting chunk counter
I (107874) WEBSOCKET: ğŸµ Audio session complete: 101440 bytes in 28 messages
I (107885) WEBSOCKET: Received text message: {"status": "complete"}
I (107889) WEBSOCKET: Server status: complete
I (107894) WEBSOCKET: Pipeline stage changed: tts -> complete
I (107901) WEBSOCKET: Exiting TTS stage (transition to complete)
I (107907) TTS: âœ… TTS playback finished event dispatched to state manager
I (107915) TTS:   âœ“ DMA buffer freed from PSRAM
I (107920) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (107928) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (108007) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (108020) STATE_MGR: Voice pipeline reported COMPLETE
I (108020) STATE_MGR: TTS playback already drained - no pending audio
I (108022) STATE_MGR: Flushing and resetting TTS decoder for next session
I (108030) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (108038) TTS: No pending audio to flush
I (108085) TTS: TTS decoder session reset for next audio stream
I (108086) TTS: âœ… TTS decoder flushed and reset for next session
I (108288) TTS: â¹ï¸ Stopping TTS decoder...
W (108288) TTS: TTS decoder already stopped.
I (108433) STATE_MGR: Acquiring I2S mutex...
I (108433) STATE_MGR: Deinitializing audio drivers...
I (108433) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (108451) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (108459) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (108477) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (108484) AUDIO: âœ… RX channel disabled (took 0 ms)
I (108489) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (108496) AUDIO: âœ… TX channel disabled (took 0 ms)
I (108502) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (108558) AUDIO: [STEP 4/5] Deleting RX channel...
I (108559) AUDIO: âœ… RX channel deleted (took 0 ms)
I (108559) AUDIO: [STEP 5/5] Deleting TX channel...
I (108564) AUDIO: âœ… TX channel deleted (took 0 ms)
I (108570) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (108627) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (108634) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (108641) AUDIO: â•‘ Camera Can Now Initialize
I (108646) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (108714) STATE_MGR: Allowing memory stabilization (100ms)...
I (108814) STATE_MGR: Camera will be initialized on-demand during capture
I (108814) STATE_MGR: I2S mutex released
I (108815) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (108834) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (108841) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (108859) MEM_MGR: â•‘ Internal RAM:
I (108864) MEM_MGR: â•‘   Free:              91027 bytes ( 88 KB)
I (108870) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (108877) MEM_MGR: â•‘   Fragmentation:     29%
I (108882) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (108901) MEM_MGR: â•‘ DMA-capable RAM:
I (108905) MEM_MGR: â•‘   Free:              70611 bytes ( 68 KB)
I (108912) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (108919) MEM_MGR: â•‘   Fragmentation:      8%
I (108924) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (108943) MEM_MGR: â•‘ PSRAM:
I (108946) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (108953) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (108960) MEM_MGR: â•‘   Fragmentation:      2%
I (108966) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (108984) MEM_MGR: â•‘ Total Heap:
I (108988) MEM_MGR: â•‘   Free:             3725520 bytes (3638 KB)
I (108995) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (109002) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (109021) MEM_MGR: â•‘ Memory Delta from Baseline:
I (109026) MEM_MGR: â•‘   Internal RAM:     -134152 bytes (-131 KB)
I (109033) MEM_MGR: â•‘   DMA-capable:      -134152 bytes (-131 KB)
I (109040) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (109047) MEM_MGR: â•‘   Total Heap:       -639228 bytes (-624 KB)
I (109054) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (109073) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (109082) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (109100) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (109107) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (109125) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (109143) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (109151) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (109169) AUDIO: [DIAG] Pre-init state:
I (109173) AUDIO:   Free heap: 3772576 bytes
I (109178) AUDIO:   Free internal RAM: 125923 bytes
I (109184) AUDIO:   Free DMA-capable: 105507 bytes
I (109189) AUDIO:   Free PSRAM: 3667124 bytes
I (109194) AUDIO:   Timestamp: 107640 ms
I (109199) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (109206) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (109214) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (109222) AUDIO:   DMA frame num (per desc): 1020
I (109228) AUDIO:   DMA total samples (effective): 4080
I (109234) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (109241) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (109247) AUDIO: âœ… I2S channels created (took 0 ms)
I (109253) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca7f0
I (109260) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (109266) AUDIO:   Sample rate: 16000 Hz
I (109271) AUDIO:   MCLK: DISABLED
I (109275) AUDIO:   BCLK: GPIO14 (shared)
I (109280) AUDIO:   WS:   GPIO15 (shared)
I (109284) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (109291) AUDIO: âœ… TX channel configured (took 1 ms)
I (109296) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (109303) AUDIO:   Sample rate: 16000 Hz
I (109308) AUDIO:   MCLK: DISABLED
I (109312) AUDIO:   BCLK: GPIO14 (shared)
I (109316) AUDIO:   WS:   GPIO15 (shared)
I (109321) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (109327) AUDIO: âœ… RX channel configured (took 0 ms)
I (109333) AUDIO: [STEP 4/6] Enabling TX channel...
I (109338) AUDIO: âœ… TX channel enabled (took 0 ms)
I (109344) AUDIO: [STEP 5/6] Enabling RX channel...
I (109349) AUDIO: âœ… RX channel enabled (took 0 ms)
I (109355) AUDIO: [STEP 6/6] Hardware stabilization...
I (109361) AUDIO:   Phase 1: Initial settle (50ms)
I (109416) AUDIO:   Phase 2: DMA verification
I (109416) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (109417) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (109574) AUDIO: [DIAG] Post-init state:
I (109574) AUDIO:   Free heap: 3746612 bytes
I (109575) AUDIO:   Free internal RAM: 99959 bytes
I (109578) AUDIO:   Free DMA-capable: 79543 bytes
I (109584) AUDIO:   Free PSRAM: 3667124 bytes
I (109589) AUDIO:   Timestamp: 108034 ms
I (109593) AUDIO:   Total init time: 201 ms
I (109598) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (109616) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (109622) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (109628) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (109637) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (109644) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (109662) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (109680) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (109686) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (109693) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (109700) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (109706) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (110007) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (110014) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (110022) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (110040) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (110047) AUDIO: âœ… RX channel disabled (took 0 ms)
I (110053) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (110059) AUDIO: âœ… TX channel disabled (took 0 ms)
I (110065) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (110122) AUDIO: [STEP 4/5] Deleting RX channel...
I (110123) AUDIO: âœ… RX channel deleted (took 0 ms)
I (110123) AUDIO: [STEP 5/5] Deleting TX channel...
I (110128) AUDIO: âœ… TX channel deleted (took 0 ms)
I (110134) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (110192) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (110199) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (110206) AUDIO: â•‘ Camera Can Now Initialize
I (110211) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (110229) LED_CTRL: LED pattern -> 3
I (110233) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (110251) STATE_MGR: Pipeline stage event: complete
I (112164) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (112164) BUTTON: Single click confirmed
I (112164) STATE_MGR: Single click - mode toggle requested
I (112171) STATE_MGR: Switching: Camera â†’ Voice (count: 9)
I (112227) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (112227) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112240) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (112247) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112266) MEM_MGR: â•‘ Internal RAM:
I (112270) MEM_MGR: â•‘   Free:              91027 bytes ( 88 KB)
I (112277) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (112284) MEM_MGR: â•‘   Fragmentation:     29%
I (112289) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112308) MEM_MGR: â•‘ DMA-capable RAM:
I (112312) MEM_MGR: â•‘   Free:              70611 bytes ( 68 KB)
I (112319) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (112326) MEM_MGR: â•‘   Fragmentation:      8%
I (112331) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112350) MEM_MGR: â•‘ PSRAM:
I (112353) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (112360) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (112367) MEM_MGR: â•‘   Fragmentation:      2%
I (112372) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112391) MEM_MGR: â•‘ Total Heap:
I (112395) MEM_MGR: â•‘   Free:             3725520 bytes (3638 KB)
I (112402) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (112409) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112427) MEM_MGR: â•‘ Memory Delta from Baseline:
I (112433) MEM_MGR: â•‘   Internal RAM:     -134152 bytes (-131 KB)
I (112440) MEM_MGR: â•‘   DMA-capable:      -134152 bytes (-131 KB)
I (112447) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (112454) MEM_MGR: â•‘   Total Heap:       -639228 bytes (-624 KB)
I (112461) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112479) STATE_MGR: Stopping camera...
I (112484) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112500) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (112507) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112523) STATE_MGR:   Timeout: 5000 ms
I (112528) STATE_MGR:   Timestamp: 110974 ms
I (112533) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (112539) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112555) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (112562) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112578) STATE_MGR:   Free heap before: 3772576 bytes
I (112584) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (112590) CAMERA: Deinitializing camera...
I (112595) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (112601) STATE_MGR:   Free heap after: 3772576 bytes
I (112607) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (112613) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112629) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (112636) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112652) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (112760) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (112860) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (112910) STATE_MGR:   âœ“ Total stabilization: 250ms
I (112910) STATE_MGR:   Timestamp: 111356 ms
I (112910) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112926) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (112933) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112949) STATE_MGR:   Free heap before: 3772576 bytes
I (112955) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112973) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (112980) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (112999) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113017) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (113024) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113042) AUDIO: [DIAG] Pre-init state:
I (113047) AUDIO:   Free heap: 3772576 bytes
I (113052) AUDIO:   Free internal RAM: 125923 bytes
I (113057) AUDIO:   Free DMA-capable: 105507 bytes
I (113063) AUDIO:   Free PSRAM: 3667124 bytes
I (113068) AUDIO:   Timestamp: 111513 ms
I (113072) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (113079) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (113087) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (113095) AUDIO:   DMA frame num (per desc): 1020
I (113101) AUDIO:   DMA total samples (effective): 4080
I (113107) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (113114) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (113121) AUDIO: âœ… I2S channels created (took 0 ms)
I (113126) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca7f0
I (113133) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (113139) AUDIO:   Sample rate: 16000 Hz
I (113144) AUDIO:   MCLK: DISABLED
I (113148) AUDIO:   BCLK: GPIO14 (shared)
I (113153) AUDIO:   WS:   GPIO15 (shared)
I (113158) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (113164) AUDIO: âœ… TX channel configured (took 1 ms)
I (113169) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (113176) AUDIO:   Sample rate: 16000 Hz
I (113181) AUDIO:   MCLK: DISABLED
I (113185) AUDIO:   BCLK: GPIO14 (shared)
I (113190) AUDIO:   WS:   GPIO15 (shared)
I (113194) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (113200) AUDIO: âœ… RX channel configured (took 0 ms)
I (113206) AUDIO: [STEP 4/6] Enabling TX channel...
I (113211) AUDIO: âœ… TX channel enabled (took 0 ms)
I (113217) AUDIO: [STEP 5/6] Enabling RX channel...
I (113223) AUDIO: âœ… RX channel enabled (took 0 ms)
I (113228) AUDIO: [STEP 6/6] Hardware stabilization...
I (113234) AUDIO:   Phase 1: Initial settle (50ms)
I (113289) AUDIO:   Phase 2: DMA verification
I (113289) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (113290) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (113447) AUDIO: [DIAG] Post-init state:
I (113447) AUDIO:   Free heap: 3746612 bytes
I (113448) AUDIO:   Free internal RAM: 99959 bytes
I (113451) AUDIO:   Free DMA-capable: 79543 bytes
I (113457) AUDIO:   Free PSRAM: 3667124 bytes
I (113462) AUDIO:   Timestamp: 111907 ms
I (113466) AUDIO:   Total init time: 201 ms
I (113471) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113489) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (113495) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (113501) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (113510) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (113517) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113535) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113553) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (113559) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (113566) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (113573) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (113579) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113597) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (113603) STATE_MGR:   Free heap after: 3746612 bytes
I (113609) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113625) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (113631) STATE_MGR: â•‘ Total transition time: 895 ms
I (113637) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113653) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113670) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (113680) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (113696) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (113704) TTS: No pending audio to flush
I (113753) TTS: TTS decoder session reset for next audio stream
I (113753) TTS: âœ… TTS decoder flushed and reset for next session
I (113755) STT: Starting STT pipeline...
I (113760) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (113769) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (113776) STT:   Current time: 112222 ms
I (113779) STT: âœ… STT pipeline started
I (113781) STT:   Free heap: 3738060 bytes
I (113785) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (113781) STT: Audio streaming session activated
I (113805) STT: Connection stabilization delay (2000ms)...
I (113990) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (113990) STT:   âœ“ Audio driver initialized
I (113991) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (114098) STT:   Total stabilization: 300ms
I (114098) STT:   Timestamp: 112543 ms
I (114098) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (114103) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe3778 (with safety padding)
I (114111) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114124) LED_CTRL: LED pattern -> 1
I (114127) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (114132) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114137) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (114155) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (114162) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114169) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114203) MEM_MGR: â•‘ Internal RAM:
I (114208) MEM_MGR: â•‘   Free:              91027 bytes ( 88 KB)
I (114215) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (114221) MEM_MGR: â•‘   Fragmentation:     29%
I (114227) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114245) MEM_MGR: â•‘ DMA-capable RAM:
I (114250) MEM_MGR: â•‘   Free:              70611 bytes ( 68 KB)
I (114257) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (114263) MEM_MGR: â•‘   Fragmentation:      8%
I (114269) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114287) MEM_MGR: â•‘ PSRAM:
I (114291) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (114298) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (114305) MEM_MGR: â•‘   Fragmentation:      2%
I (114310) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114328) MEM_MGR: â•‘ Total Heap:
I (114333) MEM_MGR: â•‘   Free:             3725520 bytes (3638 KB)
I (114340) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (114347) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114365) MEM_MGR: â•‘ Memory Delta from Baseline:
I (114371) MEM_MGR: â•‘   Internal RAM:     -134152 bytes (-131 KB)
I (114378) MEM_MGR: â•‘   DMA-capable:      -134152 bytes (-131 KB)
I (114384) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (114391) MEM_MGR: â•‘   Total Heap:       -639228 bytes (-624 KB)
I (114398) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (114417) STATE_MGR: âœ… Voice mode transition complete
I (114423) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (114438) STATE_MGR: STT pipeline reported start
I (115811) STT: Starting audio streaming to server...
I (115915) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (115915) WEBSOCKET: Server status: receiving
W (115918) STT: Waiting for server ACK (sent: 2, acked: 0, unack: 2)
I (115920) STT: Flow control: ACK received, resuming (sent=2, acked=2)
I (115927) STT: ACK received, resuming (unack now: 0)
I (115934) WEBSOCKET: Server ACK: 2 chunks processed
I (115999) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (116000) WEBSOCKET: Server status: receiving
W (116002) STT: Waiting for server ACK (sent: 4, acked: 2, unack: 2)
I (116004) STT: Flow control: ACK received, resuming (sent=4, acked=4)
I (116011) STT: ACK received, resuming (unack now: 0)
I (116019) WEBSOCKET: Server ACK: 4 chunks processed
W (116109) STT: Waiting for server ACK (sent: 6, acked: 4, unack: 2)
I (116156) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (116157) WEBSOCKET: Server status: receiving
I (116162) STT: Flow control: ACK received, resuming (sent=6, acked=6)
I (116169) WEBSOCKET: Server ACK: 6 chunks processed
I (116170) STT: ACK received, resuming (unack now: 0)
I (116237) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (116238) WEBSOCKET: Server status: receiving
I (116243) WEBSOCKET: Server ACK: 8 chunks processed
I (116314) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (116315) WEBSOCKET: Server status: receiving
I (116319) WEBSOCKET: Server ACK: 10 chunks processed
I (116380) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (116381) WEBSOCKET: Server status: receiving
W (116385) STT: Waiting for server ACK (sent: 12, acked: 10, unack: 2)
I (116386) STT: Flow control: ACK received, resuming (sent=12, acked=12)
I (116393) STT: ACK received, resuming (unack now: 0)
I (116400) WEBSOCKET: Server ACK: 12 chunks processed
W (116468) STT: Waiting for server ACK (sent: 14, acked: 12, unack: 2)
I (116503) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (116504) WEBSOCKET: Server status: receiving
I (116508) STT: Flow control: ACK received, resuming (sent=14, acked=14)
I (116509) STT: ACK received, resuming (unack now: 0)
I (116516) WEBSOCKET: Server ACK: 14 chunks processed
I (116576) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (116577) WEBSOCKET: Server status: receiving
I (116582) WEBSOCKET: Server ACK: 16 chunks processed
I (116643) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (116644) WEBSOCKET: Server status: receiving
W (116648) STT: Waiting for server ACK (sent: 18, acked: 16, unack: 2)
I (116649) STT: Flow control: ACK received, resuming (sent=18, acked=18)
I (116656) STT: ACK received, resuming (unack now: 0)
I (116663) WEBSOCKET: Server ACK: 18 chunks processed
I (116726) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (116727) WEBSOCKET: Server status: receiving
I (116732) WEBSOCKET: Server ACK: 20 chunks processed
I (116969) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (116970) WEBSOCKET: Server status: receiving
I (116974) WEBSOCKET: Server ACK: 22 chunks processed
I (117201) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (117202) WEBSOCKET: Server status: receiving
I (117207) WEBSOCKET: Server ACK: 24 chunks processed
I (117463) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (117464) WEBSOCKET: Server status: receiving
I (117469) WEBSOCKET: Server ACK: 26 chunks processed
I (117734) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (117734) WEBSOCKET: Server status: receiving
I (117739) WEBSOCKET: Server ACK: 28 chunks processed
I (117929) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (117929) BUTTON: Single click confirmed
I (117929) STATE_MGR: Single click - mode toggle requested
I (117936) STATE_MGR: User requested to end voice session (count: 10). Stopping STT and awaiting server response.
I (117947) STT: Stopping STT pipeline...
I (117951) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (117966) STT: Ring buffer drained and cleared successfully
I (117986) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (117987) WEBSOCKET: Server status: receiving
I (117988) STT: Capture stopped and ring buffer drained; ending streaming loop
I (117992) WEBSOCKET: Server ACK: 30 chunks processed
I (118000) STT: Sending EOS signal...
I (118010) WEBSOCKET: Sending EOS signal
I (118005) STT: Audio capture task stopped (captured 126976 bytes total)
I (118022) STT: Audio streaming session complete (streamed 122880 bytes in 30 chunks)
I (118049) STT: STT pipeline stopped
I (118049) LED_CTRL: LED pattern -> 4
I (118050) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (118065) STATE_MGR: STT pipeline reported stop
I (118065) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (118071) LED_CTRL: LED pattern -> 1
I (118079) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (118084) WEBSOCKET: Server status: processing
I (118089) WEBSOCKET: Server stage: transcription
I (118094) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (118101) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (118582) LED_CTRL: LED pattern -> 4
I (118583) STATE_MGR: Pipeline stage event: transcription
I (118583) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (118593) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "can you come in for me", "has_image": false}
I (118604) WEBSOCKET: Server status: processing
I (118609) WEBSOCKET: Server stage: llm
I (118614) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (118621) WEBSOCKET: Entering LLM stage - continuing processing indication
I (118628) STATE_MGR: Pipeline stage event: llm
I (118960) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I'm not capable of physically coming to you, I'm a virtual voice assistant."}
I (118966) WEBSOCKET: Server status: processing
I (118971) WEBSOCKET: Server stage: tts
I (118975) WEBSOCKET: Pipeline stage changed: llm -> tts
I (118981) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (118989) LED_CTRL: LED pattern -> 3
I (118993) TTS: ğŸµ Starting TTS decoder...
I (118998) TTS: Initializing TTS decoder...
W (119003) TTS: TTS decoder already initialized
I (119050) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (119051) STATE_MGR: TTS playback start event received
I (119055) LED_CTRL: LED pattern -> 1
I (119059) TTS: âœ… TTS decoder started successfully
I (119066) TTS: ğŸµ TTS playback task started on Core 1
I (119069) STATE_MGR: Pipeline stage event: tts
I (119076) TTS: âœ… TTS playback task registered with watchdog
I (119086) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 117532 ms, bytes: 4096)
I (119092) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (119101) TTS: Chunk #2 first 12 bytes: 52 49 46 46 02 78 02 00 57 41 56 45
I (119108) TTS: New audio session detected - resetting chunk counter
I (119116) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (119123) STATE_MGR: TTS playback start event received
I (119134) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (119138) TTS: Chunk #2 first 12 bytes: 0F 09 EB 04 B6 FF 99 FA D6 F9 10 FC
I (119151) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (119155) TTS: Chunk #3 first 12 bytes: 3E FA 02 FA E2 F9 ED F9 F2 F9 5F FA
I (119168) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (119172) TTS: Chunk #4 first 12 bytes: 9D F7 A4 F6 C9 F7 E4 F9 73 FA CC F9
I (119184) TTS: Received audio chunk #5: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (119189) TTS: Chunk #5 first 12 bytes: CE FF D6 FF BC FF C9 FF C2 FF BD FF
I (119201) TTS: Received audio chunk #6: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (119211) TTS: Received audio chunk #7: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (119220) TTS: Received audio chunk #8: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (119229) TTS: Received audio chunk #9: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (119239) TTS: Received audio chunk #10: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (119248) TTS: Received audio chunk #11: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (119252) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (119259) TTS: Received audio chunk #12: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (119275) TTS: Received audio chunk #13: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (119280) TTS: âœ… WAV header parsed successfully
I (119283) TTS: === WAV File Info ===
I (119290) TTS: Received audio chunk #14: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (119298) TTS: Sample Rate: 16000 Hz
I (119301) TTS: Channels: 1
I (119306) TTS: Received audio chunk #15: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (119315) TTS: Bits per Sample: 16
I (119321) TTS: Received audio chunk #16: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (119328) TTS: Audio Format: 1 (PCM)
I (119331) TTS: Declared Data Size: 161758 bytes
I (119337) TTS: Block Align: 2
I (119340) TTS: Byte Rate: 32000
I (119344) TTS: ====================
I (119349) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=65536)
I (119356) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (119374) TTS: Received audio chunk #17: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (119381) TTS: Received audio chunk #18: 1656 bytes (buffer: 65536/327680 used, 262143 free)
I (119386) TTS: Received audio chunk #19: 2440 bytes (buffer: 67192/327680 used, 260487 free)
I (119398) TTS: Received audio chunk #20: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (119407) TTS: Received audio chunk #21: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (119417) TTS: Received audio chunk #22: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (119427) TTS: Received audio chunk #23: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (119435) TTS: Received audio chunk #24: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (119460) TTS: Received audio chunk #25: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (119476) TTS: Received audio chunk #26: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (119489) TTS: Received audio chunk #27: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (119504) TTS: Received audio chunk #28: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (119520) TTS: Received audio chunk #29: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (119537) TTS: Received audio chunk #30: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (119551) TTS: Received audio chunk #31: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (119567) TTS: Received audio chunk #32: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (119582) TTS: Received audio chunk #33: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (119597) TTS: Received audio chunk #34: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (119613) TTS: Received audio chunk #35: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (119628) TTS: Received audio chunk #36: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (119642) TTS: Received audio chunk #37: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (119659) TTS: Received audio chunk #38: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (119676) TTS: Received audio chunk #39: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (119689) TTS: Received audio chunk #40: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (119705) TTS: Received audio chunk #41: 2058 bytes (buffer: 143360/327680 used, 184319 free)
I (119778) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (119904) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (119931) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (119931) TTS: TTS end-of-stream signaled (bytes_received=161802, header_parsed=1)
I (119937) TTS: ğŸµ Playback task will drain 137226 bytes of buffered audio
I (119944) TTS: Waiting for playback completion: 137226 bytes buffered, calculated timeout: 6288 ms
I (120031) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (120159) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (120286) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (120414) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (120541) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (120668) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (120796) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (120924) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (121051) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (121178) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (121306) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (121434) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (121561) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (121688) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (121816) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (121944) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (122071) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (122198) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (122326) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (122454) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (122581) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (122708) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (122836) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (122964) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (123091) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (123218) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (123346) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (123474) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (123601) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (123728) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (123856) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (123984) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (124111) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (124238) TTS: âœ… All audio data received (161802 bytes, expected 161758 + 44 header)
I (124402) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (124402) TTS: ğŸµ TTS playback task exiting (played 161758 bytes, result: ESP_OK)
I (124447) TTS: TTS decoder session reset for next audio stream
I (124447) TTS: Received audio chunk #42: 0 bytes (buffer: 0/327680 used, 327679 free)
I (124455) TTS: New audio session detected - resetting chunk counter
I (124462) WEBSOCKET: ğŸµ Audio session complete: 161802 bytes in 41 messages
I (124472) WEBSOCKET: Received text message: {"status": "complete"}
I (124477) WEBSOCKET: Server status: complete
I (124482) WEBSOCKET: Pipeline stage changed: tts -> complete
I (124488) WEBSOCKET: Exiting TTS stage (transition to complete)
I (124495) STATE_MGR: TTS playback finished successfully
I (124501) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (124510) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (124516) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124535) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (124542) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124560) MEM_MGR: â•‘ Internal RAM:
I (124564) MEM_MGR: â•‘   Free:              91043 bytes ( 88 KB)
I (124571) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (124578) MEM_MGR: â•‘   Fragmentation:     29%
I (124583) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124602) MEM_MGR: â•‘ DMA-capable RAM:
I (124606) MEM_MGR: â•‘   Free:              70627 bytes ( 68 KB)
I (124613) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (124620) MEM_MGR: â•‘   Fragmentation:      8%
I (124625) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124644) MEM_MGR: â•‘ PSRAM:
I (124647) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (124654) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (124661) MEM_MGR: â•‘   Fragmentation:      2%
I (124667) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124685) MEM_MGR: â•‘ Total Heap:
I (124689) MEM_MGR: â•‘   Free:             3725536 bytes (3638 KB)
I (124696) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (124703) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124722) MEM_MGR: â•‘ Memory Delta from Baseline:
I (124727) MEM_MGR: â•‘   Internal RAM:     -134136 bytes (-130 KB)
I (124734) MEM_MGR: â•‘   DMA-capable:      -134136 bytes (-130 KB)
I (124741) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (124748) MEM_MGR: â•‘   Total Heap:       -639212 bytes (-624 KB)
I (124755) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (124773) STATE_MGR: Stopping voice mode components...
I (124779) STT: Stopping STT pipeline...
W (124784) STT: STT pipeline already stopped
I (124789) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (124798) TTS: âœ… TTS playback finished event dispatched to state manager
I (124805) TTS:   âœ“ DMA buffer freed from PSRAM
I (124810) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (124818) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (124839) STATE_MGR: Voice pipeline reported COMPLETE
I (124839) STATE_MGR: TTS playback already drained - no pending audio
I (124841) STATE_MGR: Flushing and resetting TTS decoder for next session
I (124849) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (124856) TTS: No pending audio to flush
I (124906) TTS: TTS decoder session reset for next audio stream
I (124906) TTS: âœ… TTS decoder flushed and reset for next session
I (125109) TTS: â¹ï¸ Stopping TTS decoder...
W (125109) TTS: TTS decoder already stopped.
I (125253) STATE_MGR: Acquiring I2S mutex...
I (125253) STATE_MGR: Deinitializing audio drivers...
I (125253) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125271) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (125279) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125297) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (125304) AUDIO: âœ… RX channel disabled (took 0 ms)
I (125309) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (125316) AUDIO: âœ… TX channel disabled (took 0 ms)
I (125322) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (125378) AUDIO: [STEP 4/5] Deleting RX channel...
I (125379) AUDIO: âœ… RX channel deleted (took 0 ms)
I (125379) AUDIO: [STEP 5/5] Deleting TX channel...
I (125384) AUDIO: âœ… TX channel deleted (took 0 ms)
I (125390) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (125447) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125454) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (125461) AUDIO: â•‘ Camera Can Now Initialize
I (125466) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125534) STATE_MGR: Allowing memory stabilization (100ms)...
I (125634) STATE_MGR: Camera will be initialized on-demand during capture
I (125634) STATE_MGR: I2S mutex released
I (125635) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125654) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (125661) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125679) MEM_MGR: â•‘ Internal RAM:
I (125684) MEM_MGR: â•‘   Free:              91043 bytes ( 88 KB)
I (125690) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (125697) MEM_MGR: â•‘   Fragmentation:     29%
I (125702) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125721) MEM_MGR: â•‘ DMA-capable RAM:
I (125725) MEM_MGR: â•‘   Free:              70627 bytes ( 68 KB)
I (125732) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (125739) MEM_MGR: â•‘   Fragmentation:      8%
I (125744) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125763) MEM_MGR: â•‘ PSRAM:
I (125766) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (125773) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (125780) MEM_MGR: â•‘   Fragmentation:      2%
I (125786) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125804) MEM_MGR: â•‘ Total Heap:
I (125808) MEM_MGR: â•‘   Free:             3725536 bytes (3638 KB)
I (125815) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (125822) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125841) MEM_MGR: â•‘ Memory Delta from Baseline:
I (125846) MEM_MGR: â•‘   Internal RAM:     -134136 bytes (-130 KB)
I (125853) MEM_MGR: â•‘   DMA-capable:      -134136 bytes (-130 KB)
I (125860) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (125867) MEM_MGR: â•‘   Total Heap:       -639212 bytes (-624 KB)
I (125874) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125893) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (125902) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125920) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (125927) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125945) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125963) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (125971) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (125989) AUDIO: [DIAG] Pre-init state:
I (125993) AUDIO:   Free heap: 3772596 bytes
I (125998) AUDIO:   Free internal RAM: 125943 bytes
I (126004) AUDIO:   Free DMA-capable: 105527 bytes
I (126009) AUDIO:   Free PSRAM: 3667124 bytes
I (126014) AUDIO:   Timestamp: 124460 ms
I (126019) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (126026) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (126034) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (126042) AUDIO:   DMA frame num (per desc): 1020
I (126048) AUDIO:   DMA total samples (effective): 4080
I (126054) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (126061) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (126067) AUDIO: âœ… I2S channels created (took 0 ms)
I (126073) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca7f0
I (126080) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (126086) AUDIO:   Sample rate: 16000 Hz
I (126091) AUDIO:   MCLK: DISABLED
I (126095) AUDIO:   BCLK: GPIO14 (shared)
I (126100) AUDIO:   WS:   GPIO15 (shared)
I (126104) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (126111) AUDIO: âœ… TX channel configured (took 1 ms)
I (126116) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (126123) AUDIO:   Sample rate: 16000 Hz
I (126128) AUDIO:   MCLK: DISABLED
I (126132) AUDIO:   BCLK: GPIO14 (shared)
I (126136) AUDIO:   WS:   GPIO15 (shared)
I (126141) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (126147) AUDIO: âœ… RX channel configured (took 0 ms)
I (126153) AUDIO: [STEP 4/6] Enabling TX channel...
I (126158) AUDIO: âœ… TX channel enabled (took 0 ms)
I (126164) AUDIO: [STEP 5/6] Enabling RX channel...
I (126169) AUDIO: âœ… RX channel enabled (took 0 ms)
I (126175) AUDIO: [STEP 6/6] Hardware stabilization...
I (126181) AUDIO:   Phase 1: Initial settle (50ms)
I (126236) AUDIO:   Phase 2: DMA verification
I (126236) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (126237) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (126394) AUDIO: [DIAG] Post-init state:
I (126394) AUDIO:   Free heap: 3746628 bytes
I (126395) AUDIO:   Free internal RAM: 99975 bytes
I (126398) AUDIO:   Free DMA-capable: 79559 bytes
I (126404) AUDIO:   Free PSRAM: 3667124 bytes
I (126409) AUDIO:   Timestamp: 124854 ms
I (126413) AUDIO:   Total init time: 201 ms
I (126418) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (126436) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (126442) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (126448) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (126457) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (126464) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (126482) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (126500) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (126506) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (126513) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (126520) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (126526) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (126827) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (126834) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (126842) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (126860) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (126867) AUDIO: âœ… RX channel disabled (took 0 ms)
I (126873) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (126879) AUDIO: âœ… TX channel disabled (took 0 ms)
I (126885) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (126942) AUDIO: [STEP 4/5] Deleting RX channel...
I (126943) AUDIO: âœ… RX channel deleted (took 0 ms)
I (126943) AUDIO: [STEP 5/5] Deleting TX channel...
I (126948) AUDIO: âœ… TX channel deleted (took 0 ms)
I (126954) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (127011) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (127018) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (127025) AUDIO: â•‘ Camera Can Now Initialize
I (127030) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (127048) LED_CTRL: LED pattern -> 3
I (127052) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (127070) STATE_MGR: Pipeline stage event: complete
I (130091) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (130091) BUTTON: Single click confirmed
I (130091) STATE_MGR: Single click - mode toggle requested
I (130098) STATE_MGR: Switching: Camera â†’ Voice (count: 11)
I (130154) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (130154) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130167) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (130174) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130193) MEM_MGR: â•‘ Internal RAM:
I (130197) MEM_MGR: â•‘   Free:              91043 bytes ( 88 KB)
I (130204) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (130211) MEM_MGR: â•‘   Fragmentation:     29%
I (130216) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130235) MEM_MGR: â•‘ DMA-capable RAM:
I (130239) MEM_MGR: â•‘   Free:              70627 bytes ( 68 KB)
I (130246) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (130253) MEM_MGR: â•‘   Fragmentation:      8%
I (130258) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130277) MEM_MGR: â•‘ PSRAM:
I (130280) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (130287) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (130294) MEM_MGR: â•‘   Fragmentation:      2%
I (130299) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130318) MEM_MGR: â•‘ Total Heap:
I (130322) MEM_MGR: â•‘   Free:             3725536 bytes (3638 KB)
I (130329) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (130336) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130354) MEM_MGR: â•‘ Memory Delta from Baseline:
I (130360) MEM_MGR: â•‘   Internal RAM:     -134136 bytes (-130 KB)
I (130367) MEM_MGR: â•‘   DMA-capable:      -134136 bytes (-130 KB)
I (130374) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (130381) MEM_MGR: â•‘   Total Heap:       -639212 bytes (-624 KB)
I (130388) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130406) STATE_MGR: Stopping camera...
I (130411) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130427) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (130434) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130450) STATE_MGR:   Timeout: 5000 ms
I (130455) STATE_MGR:   Timestamp: 128901 ms
I (130460) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (130466) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130482) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (130489) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130505) STATE_MGR:   Free heap before: 3772336 bytes
I (130511) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (130517) CAMERA: Deinitializing camera...
I (130522) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (130528) STATE_MGR:   Free heap after: 3772336 bytes
I (130534) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (130540) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130556) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (130563) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130579) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (130687) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (130788) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (130838) STATE_MGR:   âœ“ Total stabilization: 250ms
I (130838) STATE_MGR:   Timestamp: 129284 ms
I (130838) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130854) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (130861) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130877) STATE_MGR:   Free heap before: 3772596 bytes
I (130883) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130901) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (130908) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130926) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130945) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (130952) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (130970) AUDIO: [DIAG] Pre-init state:
I (130975) AUDIO:   Free heap: 3772596 bytes
I (130980) AUDIO:   Free internal RAM: 125943 bytes
I (130985) AUDIO:   Free DMA-capable: 105527 bytes
I (130991) AUDIO:   Free PSRAM: 3667124 bytes
I (130996) AUDIO:   Timestamp: 129441 ms
I (131000) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (131007) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (131015) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (131023) AUDIO:   DMA frame num (per desc): 1020
I (131029) AUDIO:   DMA total samples (effective): 4080
I (131035) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (131042) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (131049) AUDIO: âœ… I2S channels created (took 0 ms)
I (131054) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca7f0
I (131061) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (131067) AUDIO:   Sample rate: 16000 Hz
I (131072) AUDIO:   MCLK: DISABLED
I (131076) AUDIO:   BCLK: GPIO14 (shared)
I (131081) AUDIO:   WS:   GPIO15 (shared)
I (131086) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (131092) AUDIO: âœ… TX channel configured (took 1 ms)
I (131097) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (131104) AUDIO:   Sample rate: 16000 Hz
I (131109) AUDIO:   MCLK: DISABLED
I (131113) AUDIO:   BCLK: GPIO14 (shared)
I (131118) AUDIO:   WS:   GPIO15 (shared)
I (131122) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (131128) AUDIO: âœ… RX channel configured (took 0 ms)
I (131134) AUDIO: [STEP 4/6] Enabling TX channel...
I (131139) AUDIO: âœ… TX channel enabled (took 0 ms)
I (131145) AUDIO: [STEP 5/6] Enabling RX channel...
I (131151) AUDIO: âœ… RX channel enabled (took 0 ms)
I (131156) AUDIO: [STEP 6/6] Hardware stabilization...
I (131162) AUDIO:   Phase 1: Initial settle (50ms)
I (131217) AUDIO:   Phase 2: DMA verification
I (131217) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (131218) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (131375) AUDIO: [DIAG] Post-init state:
I (131375) AUDIO:   Free heap: 3746628 bytes
I (131376) AUDIO:   Free internal RAM: 99975 bytes
I (131379) AUDIO:   Free DMA-capable: 79559 bytes
I (131385) AUDIO:   Free PSRAM: 3667124 bytes
I (131390) AUDIO:   Timestamp: 129835 ms
I (131394) AUDIO:   Total init time: 201 ms
I (131399) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (131417) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (131423) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (131429) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (131438) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (131445) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (131463) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (131481) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (131487) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (131494) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (131501) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (131507) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (131525) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (131531) STATE_MGR:   Free heap after: 3746628 bytes
I (131537) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (131553) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (131559) STATE_MGR: â•‘ Total transition time: 895 ms
I (131565) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (131581) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (131598) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (131608) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (131624) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (131632) TTS: No pending audio to flush
I (131681) TTS: TTS decoder session reset for next audio stream
I (131681) TTS: âœ… TTS decoder flushed and reset for next session
I (131683) STT: Starting STT pipeline...
I (131688) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (131697) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (131704) STT:   Current time: 130150 ms
I (131707) STT: âœ… STT pipeline started
I (131709) STT:   Free heap: 3738076 bytes
I (131713) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (131709) STT: Audio streaming session activated
I (131732) STT: Connection stabilization delay (2000ms)...
I (131918) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (131918) STT:   âœ“ Audio driver initialized
I (131919) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (132026) STT:   Total stabilization: 300ms
I (132026) STT:   Timestamp: 130471 ms
I (132026) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (132031) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe3778 (with safety padding)
I (132039) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (132052) LED_CTRL: LED pattern -> 1
I (132055) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (132060) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (132065) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (132083) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (132090) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (132097) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (132131) MEM_MGR: â•‘ Internal RAM:
I (132136) MEM_MGR: â•‘   Free:              91043 bytes ( 88 KB)
I (132143) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (132149) MEM_MGR: â•‘   Fragmentation:     29%
I (132155) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (132173) MEM_MGR: â•‘ DMA-capable RAM:
I (132178) MEM_MGR: â•‘   Free:              70627 bytes ( 68 KB)
I (132184) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (132191) MEM_MGR: â•‘   Fragmentation:      8%
I (132197) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (132215) MEM_MGR: â•‘ PSRAM:
I (132219) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (132226) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (132233) MEM_MGR: â•‘   Fragmentation:      2%
I (132238) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (132256) MEM_MGR: â•‘ Total Heap:
I (132261) MEM_MGR: â•‘   Free:             3725536 bytes (3638 KB)
I (132268) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (132274) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (132293) MEM_MGR: â•‘ Memory Delta from Baseline:
I (132299) MEM_MGR: â•‘   Internal RAM:     -134136 bytes (-130 KB)
I (132305) MEM_MGR: â•‘   DMA-capable:      -134136 bytes (-130 KB)
I (132312) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (132319) MEM_MGR: â•‘   Total Heap:       -639212 bytes (-624 KB)
I (132326) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (132345) STATE_MGR: âœ… Voice mode transition complete
I (132351) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (132366) STATE_MGR: STT pipeline reported start
I (133739) STT: Starting audio streaming to server...
W (133808) STT: Waiting for server ACK (sent: 2, acked: 0, unack: 2)
I (133821) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (133821) WEBSOCKET: Server status: receiving
I (133826) STT: Flow control: ACK received, resuming (sent=2, acked=2)
I (133829) STT: ACK received, resuming (unack now: 0)
I (133833) WEBSOCKET: Server ACK: 2 chunks processed
W (133909) STT: Waiting for server ACK (sent: 4, acked: 2, unack: 2)
I (133920) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (133920) WEBSOCKET: Server status: receiving
I (133925) STT: Flow control: ACK received, resuming (sent=4, acked=4)
I (133930) STT: ACK received, resuming (unack now: 0)
I (133932) WEBSOCKET: Server ACK: 4 chunks processed
W (134005) STT: Waiting for server ACK (sent: 6, acked: 4, unack: 2)
I (134017) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (134017) WEBSOCKET: Server status: receiving
I (134022) STT: Flow control: ACK received, resuming (sent=6, acked=6)
I (134026) STT: ACK received, resuming (unack now: 0)
I (134029) WEBSOCKET: Server ACK: 6 chunks processed
W (134095) STT: Waiting for server ACK (sent: 8, acked: 6, unack: 2)
I (134125) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (134126) WEBSOCKET: Server status: receiving
I (134130) STT: Flow control: ACK received, resuming (sent=8, acked=8)
I (134136) STT: ACK received, resuming (unack now: 0)
I (134138) WEBSOCKET: Server ACK: 8 chunks processed
W (134211) STT: Waiting for server ACK (sent: 10, acked: 8, unack: 2)
I (134224) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (134225) WEBSOCKET: Server status: receiving
I (134230) STT: Flow control: ACK received, resuming (sent=10, acked=10)
I (134232) STT: ACK received, resuming (unack now: 0)
I (134237) WEBSOCKET: Server ACK: 10 chunks processed
I (134302) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (134302) WEBSOCKET: Server status: receiving
W (134306) STT: Waiting for server ACK (sent: 12, acked: 10, unack: 2)
I (134307) STT: Flow control: ACK received, resuming (sent=12, acked=12)
I (134314) STT: ACK received, resuming (unack now: 0)
I (134322) WEBSOCKET: Server ACK: 12 chunks processed
W (134394) STT: Waiting for server ACK (sent: 14, acked: 12, unack: 2)
I (134404) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (134405) WEBSOCKET: Server status: receiving
I (134409) STT: Flow control: ACK received, resuming (sent=14, acked=14)
I (134415) STT: ACK received, resuming (unack now: 0)
I (134417) WEBSOCKET: Server ACK: 14 chunks processed
W (134490) STT: Waiting for server ACK (sent: 16, acked: 14, unack: 2)
I (134593) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (134594) WEBSOCKET: Server status: receiving
I (134599) STT: Flow control: ACK received, resuming (sent=16, acked=16)
I (134601) STT: ACK received, resuming (unack now: 0)
I (134606) WEBSOCKET: Server ACK: 16 chunks processed
W (134680) STT: Waiting for server ACK (sent: 18, acked: 16, unack: 2)
I (134682) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (134689) WEBSOCKET: Server status: receiving
I (134693) STT: Flow control: ACK received, resuming (sent=18, acked=18)
I (134701) STT: ACK received, resuming (unack now: 0)
I (134701) WEBSOCKET: Server ACK: 18 chunks processed
I (134769) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (134770) WEBSOCKET: Server status: receiving
W (134771) STT: Waiting for server ACK (sent: 20, acked: 18, unack: 2)
I (134775) STT: Flow control: ACK received, resuming (sent=20, acked=20)
I (134782) STT: ACK received, resuming (unack now: 0)
I (134790) WEBSOCKET: Server ACK: 20 chunks processed
I (134862) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (134863) WEBSOCKET: Server status: receiving
I (134868) WEBSOCKET: Server ACK: 22 chunks processed
I (135118) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (135119) WEBSOCKET: Server status: receiving
I (135123) WEBSOCKET: Server ACK: 24 chunks processed
I (135401) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (135402) WEBSOCKET: Server status: receiving
I (135406) WEBSOCKET: Server ACK: 26 chunks processed
I (135651) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (135652) WEBSOCKET: Server status: receiving
I (135657) WEBSOCKET: Server ACK: 28 chunks processed
I (135897) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (135898) WEBSOCKET: Server status: receiving
I (135903) WEBSOCKET: Server ACK: 30 chunks processed
I (136167) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (136167) WEBSOCKET: Server status: receiving
I (136172) WEBSOCKET: Server ACK: 32 chunks processed
I (136416) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 34, "bytes_received": 139264}
I (136417) WEBSOCKET: Server status: receiving
I (136422) WEBSOCKET: Server ACK: 34 chunks processed
I (136692) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 36, "bytes_received": 147456}
I (136693) WEBSOCKET: Server status: receiving
I (136698) WEBSOCKET: Server ACK: 36 chunks processed
W (136956) STT: Waiting for server ACK (sent: 38, acked: 36, unack: 2)
I (136991) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 38, "bytes_received": 155648}
I (136992) WEBSOCKET: Server status: receiving
I (136997) STT: Flow control: ACK received, resuming (sent=38, acked=38)
I (137004) WEBSOCKET: Server ACK: 38 chunks processed
I (137007) STT: ACK received, resuming (unack now: 0)
I (137173) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 40, "bytes_received": 163840}
I (137174) WEBSOCKET: Server status: receiving
I (137179) WEBSOCKET: Server ACK: 40 chunks processed
I (137341) BUTTON: Single click confirmed
I (137341) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (137342) STATE_MGR: Single click - mode toggle requested
I (137348) STATE_MGR: User requested to end voice session (count: 12). Stopping STT and awaiting server response.
I (137359) STT: Stopping STT pipeline...
I (137363) STT: Draining ring buffer (1024 bytes pending) before shutdown...
I (137378) STT: Ring buffer drained and cleared successfully
I (137385) STT: Capture stopped and ring buffer drained; ending streaming loop
I (137386) STT: Sending EOS signal...
I (137390) WEBSOCKET: Sending EOS signal
I (137399) STT: Audio streaming session complete (streamed 172032 bytes in 42 chunks)
I (137400) STT: Audio capture task stopped (captured 174080 bytes total)
I (137417) STT: STT pipeline stopped
I (137418) LED_CTRL: LED pattern -> 4
I (137419) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (137437) STATE_MGR: STT pipeline reported stop
I (137437) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (137442) LED_CTRL: LED pattern -> 1
I (137456) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 42, "bytes_received": 172032}
I (137458) WEBSOCKET: Server status: receiving
I (137463) WEBSOCKET: Server ACK: 42 chunks processed
I (137624) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (137625) WEBSOCKET: Server status: processing
I (137628) WEBSOCKET: Server stage: transcription
I (137633) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (137640) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (138167) LED_CTRL: LED pattern -> 4
I (138168) STATE_MGR: Pipeline stage event: transcription
I (138168) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (138178) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "can you count from one to ten", "has_image": false}
I (138190) WEBSOCKET: Server status: processing
I (138195) WEBSOCKET: Server stage: llm
I (138199) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (138206) WEBSOCKET: Entering LLM stage - continuing processing indication
I (138214) STATE_MGR: Pipeline stage event: llm
I (138522) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I count one, two, three, four, five, six, seven, eight, nine, ten."}
I (138527) WEBSOCKET: Server status: processing
I (138532) WEBSOCKET: Server stage: tts
I (138537) WEBSOCKET: Pipeline stage changed: llm -> tts
I (138543) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (138550) LED_CTRL: LED pattern -> 3
I (138554) TTS: ğŸµ Starting TTS decoder...
I (138559) TTS: Initializing TTS decoder...
W (138564) TTS: TTS decoder already initialized
I (138612) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (138612) STATE_MGR: TTS playback start event received
I (138617) LED_CTRL: LED pattern -> 1
I (138621) TTS: âœ… TTS decoder started successfully
I (138627) TTS: ğŸµ TTS playback task started on Core 1
I (138631) STATE_MGR: Pipeline stage event: tts
I (138638) TTS: âœ… TTS playback task registered with watchdog
I (138644) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (138658) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 137103 ms, bytes: 4096)
I (138661) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (138670) TTS: Chunk #2 first 12 bytes: 52 49 46 46 C8 61 03 00 57 41 56 45
I (138678) TTS: New audio session detected - resetting chunk counter
I (138685) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (138693) STATE_MGR: TTS playback start event received
I (138703) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (138708) TTS: Chunk #2 first 12 bytes: 3C 09 1F 09 FE 05 8A FF CA F7 30 F1
I (138721) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (138724) TTS: Chunk #3 first 12 bytes: BE 01 FF 04 AE 04 E3 00 02 01 CF 01
I (138737) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (138741) TTS: Chunk #4 first 12 bytes: 84 FD EA FA AE F8 D3 F7 6F F7 75 FA
I (138753) TTS: Received audio chunk #5: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (138758) TTS: Chunk #5 first 12 bytes: EF 0F 43 12 E3 13 1F 15 48 16 8C 17
I (138771) TTS: Received audio chunk #6: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (138781) TTS: Received audio chunk #7: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (138788) TTS: Received audio chunk #8: 1096 bytes (buffer: 28672/327680 used, 299007 free)
I (138795) TTS: Received audio chunk #9: 3000 bytes (buffer: 29768/327680 used, 297911 free)
I (138807) TTS: Received audio chunk #10: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (138818) TTS: Received audio chunk #11: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (138827) TTS: Received audio chunk #12: 316 bytes (buffer: 40960/327680 used, 286719 free)
I (138832) TTS: Received audio chunk #13: 3780 bytes (buffer: 41276/327680 used, 286403 free)
I (138844) TTS: Received audio chunk #14: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (138855) TTS: Received audio chunk #15: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (138863) TTS: Received audio chunk #16: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (138873) TTS: Received audio chunk #17: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (138881) TTS: Received audio chunk #18: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (138890) TTS: Received audio chunk #19: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (138896) TTS: âœ… WAV header parsed successfully
I (138900) TTS: === WAV File Info ===
I (138905) TTS: Received audio chunk #20: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (138914) TTS: Sample Rate: 16000 Hz
I (138921) TTS: Received audio chunk #21: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (138928) TTS: Channels: 1
I (138930) TTS: Bits per Sample: 16
I (138936) TTS: Received audio chunk #22: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (138945) TTS: Audio Format: 1 (PCM)
I (138950) TTS: Received audio chunk #23: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (138958) TTS: Declared Data Size: 221604 bytes
I (138966) TTS: Received audio chunk #24: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (138973) TTS: Block Align: 2
I (138975) TTS: Byte Rate: 32000
I (138981) TTS: Received audio chunk #25: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (138990) TTS: ====================
I (138993) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=94208)
I (139001) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (139030) TTS: Received audio chunk #26: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (139035) TTS: Received audio chunk #27: 1656 bytes (buffer: 94208/327680 used, 233471 free)
I (139043) TTS: Received audio chunk #28: 2440 bytes (buffer: 95864/327680 used, 231815 free)
I (139052) TTS: Received audio chunk #29: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (139062) TTS: Received audio chunk #30: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (139071) TTS: Received audio chunk #31: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (139080) TTS: Received audio chunk #32: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (139090) TTS: Received audio chunk #33: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (139107) TTS: Received audio chunk #34: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (139122) TTS: Received audio chunk #35: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (139137) TTS: Received audio chunk #36: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (139152) TTS: Received audio chunk #37: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (139168) TTS: Received audio chunk #38: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (139184) TTS: Received audio chunk #39: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (139208) TTS: Received audio chunk #40: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (139224) TTS: Received audio chunk #41: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (139240) TTS: Received audio chunk #42: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (139260) TTS: Received audio chunk #43: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (139275) TTS: Received audio chunk #44: 4096 bytes (buffer: 151552/327680 used, 176127 free)
I (139291) TTS: Received audio chunk #45: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (139324) TTS: Received audio chunk #46: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (139330) TTS: Received audio chunk #47: 1656 bytes (buffer: 159744/327680 used, 167935 free)
I (139334) TTS: Received audio chunk #48: 2440 bytes (buffer: 161400/327680 used, 166279 free)
I (139346) TTS: Received audio chunk #49: 4096 bytes (buffer: 163840/327680 used, 163839 free)
I (139355) TTS: Received audio chunk #50: 4096 bytes (buffer: 167936/327680 used, 159743 free)
I (139368) TTS: Received audio chunk #51: 4096 bytes (buffer: 172032/327680 used, 155647 free)
I (139383) TTS: Received audio chunk #52: 4096 bytes (buffer: 176128/327680 used, 151551 free)
I (139399) TTS: Received audio chunk #53: 4096 bytes (buffer: 180224/327680 used, 147455 free)
I (139444) TTS: Received audio chunk #54: 4096 bytes (buffer: 180224/327680 used, 147455 free)
I (139450) TTS: Received audio chunk #55: 1656 bytes (buffer: 184320/327680 used, 143359 free)
I (139455) TTS: Received audio chunk #56: 2440 bytes (buffer: 185976/327680 used, 141703 free)
I (139466) TTS: Received audio chunk #57: 4096 bytes (buffer: 188416/327680 used, 139263 free)
I (139476) TTS: Received audio chunk #58: 4096 bytes (buffer: 192512/327680 used, 135167 free)
I (139485) TTS: Received audio chunk #59: 4096 bytes (buffer: 196608/327680 used, 131071 free)
I (139493) TTS: Received audio chunk #60: 464 bytes (buffer: 200704/327680 used, 126975 free)
I (139553) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (139680) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (139714) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (139714) TTS: TTS end-of-stream signaled (bytes_received=221648, header_parsed=1)
I (139720) TTS: ğŸµ Playback task will drain 192976 bytes of buffered audio
I (139727) TTS: Waiting for playback completion: 192976 bytes buffered, calculated timeout: 8030 ms
I (139808) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (139935) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (140063) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (140190) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (140318) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (140445) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (140573) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (140700) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (140828) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (140955) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (141083) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (141210) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (141338) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (141465) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (141593) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (141720) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (141848) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (141975) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (142103) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (142230) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (142358) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (142485) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (142613) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (142740) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (142868) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (142995) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (143123) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (143250) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (143378) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (143505) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (143633) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (143760) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (143888) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (144015) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (144143) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (144270) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (144398) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (144525) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (144653) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (144780) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (144908) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (145035) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (145163) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (145290) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (145418) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (145545) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (145673) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (145800) TTS: âœ… All audio data received (221648 bytes, expected 221604 + 44 header)
I (145900) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (145900) TTS: ğŸµ TTS playback task exiting (played 221604 bytes, result: ESP_OK)
I (145906) STATE_MGR: TTS playback finished successfully
I (145912) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (145921) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (145927) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (145946) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (145953) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (145971) MEM_MGR: â•‘ Internal RAM:
I (145976) MEM_MGR: â•‘   Free:              82359 bytes ( 80 KB)
I (145982) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (145989) MEM_MGR: â•‘   Fragmentation:     33%
I (145994) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (146013) MEM_MGR: â•‘ DMA-capable RAM:
I (146018) MEM_MGR: â•‘   Free:              61943 bytes ( 60 KB)
I (146024) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (146031) MEM_MGR: â•‘   Fragmentation:     11%
I (146036) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (146055) MEM_MGR: â•‘ PSRAM:
I (146059) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (146066) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (146073) MEM_MGR: â•‘   Fragmentation:      2%
I (146078) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (146096) MEM_MGR: â•‘ Total Heap:
I (146100) MEM_MGR: â•‘   Free:             3729012 bytes (3641 KB)
I (146107) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (146114) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (146133) MEM_MGR: â•‘ Memory Delta from Baseline:
I (146138) MEM_MGR: â•‘   Internal RAM:     -142820 bytes (-139 KB)
I (146145) MEM_MGR: â•‘   DMA-capable:      -142820 bytes (-139 KB)
I (146152) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (146159) MEM_MGR: â•‘   Total Heap:       -635736 bytes (-620 KB)
I (146166) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (146185) STATE_MGR: Stopping voice mode components...
I (146191) STT: Stopping STT pipeline...
W (146195) STT: STT pipeline already stopped
I (146243) TTS: TTS decoder session reset for next audio stream
I (146243) TTS: Received audio chunk #61: 0 bytes (buffer: 0/327680 used, 327679 free)
I (146247) TTS: New audio session detected - resetting chunk counter
I (146254) WEBSOCKET: ğŸµ Audio session complete: 221648 bytes in 60 messages
I (146265) WEBSOCKET: Received text message: {"status": "complete"}
I (146269) WEBSOCKET: Server status: complete
I (146274) WEBSOCKET: Pipeline stage changed: tts -> complete
I (146280) WEBSOCKET: Exiting TTS stage (transition to complete)
I (146287) TTS: âœ… TTS playback finished event dispatched to state manager
I (146295) TTS:   âœ“ DMA buffer freed from PSRAM
I (146300) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (146308) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (146387) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (146400) STATE_MGR: Voice pipeline reported COMPLETE
I (146400) STATE_MGR: TTS playback already drained - no pending audio
I (146402) STATE_MGR: Flushing and resetting TTS decoder for next session
I (146410) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (146418) TTS: No pending audio to flush
I (146465) TTS: TTS decoder session reset for next audio stream
I (146466) TTS: âœ… TTS decoder flushed and reset for next session
I (146668) TTS: â¹ï¸ Stopping TTS decoder...
W (146668) TTS: TTS decoder already stopped.
I (146813) STATE_MGR: Acquiring I2S mutex...
I (146813) STATE_MGR: Deinitializing audio drivers...
I (146814) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (146831) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (146839) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (146857) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (146864) AUDIO: âœ… RX channel disabled (took 0 ms)
I (146869) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (146876) AUDIO: âœ… TX channel disabled (took 0 ms)
I (146882) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (146938) AUDIO: [STEP 4/5] Deleting RX channel...
I (146939) AUDIO: âœ… RX channel deleted (took 0 ms)
I (146939) AUDIO: [STEP 5/5] Deleting TX channel...
I (146944) AUDIO: âœ… TX channel deleted (took 0 ms)
I (146950) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (147007) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147014) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (147021) AUDIO: â•‘ Camera Can Now Initialize
I (147026) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147094) STATE_MGR: Allowing memory stabilization (100ms)...
I (147194) STATE_MGR: Camera will be initialized on-demand during capture
I (147194) STATE_MGR: I2S mutex released
I (147195) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147214) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (147221) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147239) MEM_MGR: â•‘ Internal RAM:
I (147244) MEM_MGR: â•‘   Free:              82359 bytes ( 80 KB)
I (147250) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (147257) MEM_MGR: â•‘   Fragmentation:     33%
I (147262) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147281) MEM_MGR: â•‘ DMA-capable RAM:
I (147285) MEM_MGR: â•‘   Free:              61943 bytes ( 60 KB)
I (147292) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (147299) MEM_MGR: â•‘   Fragmentation:     11%
I (147304) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147323) MEM_MGR: â•‘ PSRAM:
I (147326) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (147333) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (147340) MEM_MGR: â•‘   Fragmentation:      2%
I (147346) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147364) MEM_MGR: â•‘ Total Heap:
I (147368) MEM_MGR: â•‘   Free:             3729012 bytes (3641 KB)
I (147375) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (147382) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147401) MEM_MGR: â•‘ Memory Delta from Baseline:
I (147406) MEM_MGR: â•‘   Internal RAM:     -142820 bytes (-139 KB)
I (147413) MEM_MGR: â•‘   DMA-capable:      -142820 bytes (-139 KB)
I (147420) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (147427) MEM_MGR: â•‘   Total Heap:       -635736 bytes (-620 KB)
I (147434) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147453) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (147462) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147480) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (147487) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147505) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147523) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (147531) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147549) AUDIO: [DIAG] Pre-init state:
I (147553) AUDIO:   Free heap: 3772596 bytes
I (147558) AUDIO:   Free internal RAM: 125943 bytes
I (147564) AUDIO:   Free DMA-capable: 105527 bytes
I (147569) AUDIO:   Free PSRAM: 3667124 bytes
I (147574) AUDIO:   Timestamp: 146020 ms
I (147579) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (147586) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (147594) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (147602) AUDIO:   DMA frame num (per desc): 1020
I (147608) AUDIO:   DMA total samples (effective): 4080
I (147614) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (147621) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (147627) AUDIO: âœ… I2S channels created (took 0 ms)
I (147633) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca7f0
I (147640) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (147646) AUDIO:   Sample rate: 16000 Hz
I (147651) AUDIO:   MCLK: DISABLED
I (147655) AUDIO:   BCLK: GPIO14 (shared)
I (147660) AUDIO:   WS:   GPIO15 (shared)
I (147664) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (147671) AUDIO: âœ… TX channel configured (took 1 ms)
I (147676) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (147683) AUDIO:   Sample rate: 16000 Hz
I (147688) AUDIO:   MCLK: DISABLED
I (147692) AUDIO:   BCLK: GPIO14 (shared)
I (147696) AUDIO:   WS:   GPIO15 (shared)
I (147701) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (147707) AUDIO: âœ… RX channel configured (took 0 ms)
I (147713) AUDIO: [STEP 4/6] Enabling TX channel...
I (147718) AUDIO: âœ… TX channel enabled (took 0 ms)
I (147724) AUDIO: [STEP 5/6] Enabling RX channel...
I (147729) AUDIO: âœ… RX channel enabled (took 0 ms)
I (147735) AUDIO: [STEP 6/6] Hardware stabilization...
I (147741) AUDIO:   Phase 1: Initial settle (50ms)
I (147796) AUDIO:   Phase 2: DMA verification
I (147796) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (147797) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (147954) AUDIO: [DIAG] Post-init state:
I (147954) AUDIO:   Free heap: 3746628 bytes
I (147955) AUDIO:   Free internal RAM: 99975 bytes
I (147958) AUDIO:   Free DMA-capable: 79559 bytes
I (147964) AUDIO:   Free PSRAM: 3667124 bytes
I (147969) AUDIO:   Timestamp: 146414 ms
I (147973) AUDIO:   Total init time: 201 ms
I (147978) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (147996) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (148002) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (148008) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (148017) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (148024) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (148042) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (148060) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (148066) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (148073) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (148080) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (148086) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (148387) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (148394) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (148402) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (148420) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (148427) AUDIO: âœ… RX channel disabled (took 0 ms)
I (148433) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (148439) AUDIO: âœ… TX channel disabled (took 0 ms)
I (148445) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (148502) AUDIO: [STEP 4/5] Deleting RX channel...
I (148503) AUDIO: âœ… RX channel deleted (took 0 ms)
I (148503) AUDIO: [STEP 5/5] Deleting TX channel...
I (148508) AUDIO: âœ… TX channel deleted (took 0 ms)
I (148514) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (148571) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (148578) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (148585) AUDIO: â•‘ Camera Can Now Initialize
I (148590) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (148608) LED_CTRL: LED pattern -> 3
I (148612) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (148630) STATE_MGR: Pipeline stage event: complete
I (150513) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (150513) BUTTON: Single click confirmed
I (150513) STATE_MGR: Single click - mode toggle requested
I (150520) STATE_MGR: Switching: Camera â†’ Voice (count: 13)
I (150576) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (150576) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (150589) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (150596) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (150615) MEM_MGR: â•‘ Internal RAM:
I (150619) MEM_MGR: â•‘   Free:              82359 bytes ( 80 KB)
I (150626) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (150633) MEM_MGR: â•‘   Fragmentation:     33%
I (150638) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (150657) MEM_MGR: â•‘ DMA-capable RAM:
I (150661) MEM_MGR: â•‘   Free:              61943 bytes ( 60 KB)
I (150668) MEM_MGR: â•‘   Largest Block:     55296 bytes ( 54 KB)
I (150675) MEM_MGR: â•‘   Fragmentation:     11%
I (150680) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (150699) MEM_MGR: â•‘ PSRAM:
I (150702) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (150709) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (150716) MEM_MGR: â•‘   Fragmentation:      2%
I (150721) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (150740) MEM_MGR: â•‘ Total Heap:
I (150744) MEM_MGR: â•‘   Free:             3729012 bytes (3641 KB)
I (150751) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (150758) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (150776) MEM_MGR: â•‘ Memory Delta from Baseline:
I (150782) MEM_MGR: â•‘   Internal RAM:     -142820 bytes (-139 KB)
I (150789) MEM_MGR: â•‘   DMA-capable:      -142820 bytes (-139 KB)
I (150796) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (150803) MEM_MGR: â•‘   Total Heap:       -635736 bytes (-620 KB)
I (150810) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (150828) STATE_MGR: Stopping camera...
I (150833) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (150849) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (150856) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (150872) STATE_MGR:   Timeout: 5000 ms
I (150877) STATE_MGR:   Timestamp: 149323 ms
I (150882) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (150888) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (150904) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (150911) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (150927) STATE_MGR:   Free heap before: 3772336 bytes
I (150933) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (150939) CAMERA: Deinitializing camera...
I (150944) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (150950) STATE_MGR:   Free heap after: 3772336 bytes
I (150956) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (150962) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (150978) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (150985) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (151001) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (151109) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (151210) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (151260) STATE_MGR:   âœ“ Total stabilization: 250ms
I (151260) STATE_MGR:   Timestamp: 149706 ms
I (151260) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (151276) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (151283) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (151299) STATE_MGR:   Free heap before: 3772596 bytes
I (151305) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (151323) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (151330) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (151348) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (151367) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (151374) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (151392) AUDIO: [DIAG] Pre-init state:
I (151397) AUDIO:   Free heap: 3772596 bytes
I (151402) AUDIO:   Free internal RAM: 125943 bytes
I (151407) AUDIO:   Free DMA-capable: 105527 bytes
I (151413) AUDIO:   Free PSRAM: 3667124 bytes
I (151418) AUDIO:   Timestamp: 149863 ms
I (151422) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (151429) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (151437) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (151445) AUDIO:   DMA frame num (per desc): 1020
I (151451) AUDIO:   DMA total samples (effective): 4080
I (151457) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (151464) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (151471) AUDIO: âœ… I2S channels created (took 0 ms)
I (151476) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca7f0
I (151483) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (151489) AUDIO:   Sample rate: 16000 Hz
I (151494) AUDIO:   MCLK: DISABLED
I (151498) AUDIO:   BCLK: GPIO14 (shared)
I (151503) AUDIO:   WS:   GPIO15 (shared)
I (151508) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (151515) AUDIO: âœ… TX channel configured (took 1 ms)
I (151519) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (151526) AUDIO:   Sample rate: 16000 Hz
I (151531) AUDIO:   MCLK: DISABLED
I (151535) AUDIO:   BCLK: GPIO14 (shared)
I (151540) AUDIO:   WS:   GPIO15 (shared)
I (151544) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (151550) AUDIO: âœ… RX channel configured (took 0 ms)
I (151556) AUDIO: [STEP 4/6] Enabling TX channel...
I (151561) AUDIO: âœ… TX channel enabled (took 0 ms)
I (151567) AUDIO: [STEP 5/6] Enabling RX channel...
I (151573) AUDIO: âœ… RX channel enabled (took 0 ms)
I (151578) AUDIO: [STEP 6/6] Hardware stabilization...
I (151584) AUDIO:   Phase 1: Initial settle (50ms)
I (151639) AUDIO:   Phase 2: DMA verification
I (151639) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (151640) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (151797) AUDIO: [DIAG] Post-init state:
I (151797) AUDIO:   Free heap: 3746628 bytes
I (151798) AUDIO:   Free internal RAM: 99975 bytes
I (151801) AUDIO:   Free DMA-capable: 79559 bytes
I (151807) AUDIO:   Free PSRAM: 3667124 bytes
I (151812) AUDIO:   Timestamp: 150257 ms
I (151816) AUDIO:   Total init time: 201 ms
I (151821) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (151839) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (151845) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (151851) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (151860) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (151867) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (151885) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (151903) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (151909) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (151916) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (151923) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (151929) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (151947) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (151953) STATE_MGR:   Free heap after: 3746628 bytes
I (151959) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (151975) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (151981) STATE_MGR: â•‘ Total transition time: 895 ms
I (151987) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (152003) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (152020) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (152030) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (152046) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (152054) TTS: No pending audio to flush
I (152101) TTS: TTS decoder session reset for next audio stream
I (152101) TTS: âœ… TTS decoder flushed and reset for next session
I (152103) STT: Starting STT pipeline...
I (152108) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (152117) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (152124) STT:   Current time: 150570 ms
I (152127) STT: âœ… STT pipeline started
I (152130) STT:   Free heap: 3738076 bytes
I (152133) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (152130) STT: Audio streaming session activated
I (152153) STT: Connection stabilization delay (2000ms)...
I (152338) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (152338) STT:   âœ“ Audio driver initialized
I (152339) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (152446) STT:   Total stabilization: 300ms
I (152446) STT:   Timestamp: 150891 ms
I (152446) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (152451) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe3778 (with safety padding)
I (152459) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (152472) LED_CTRL: LED pattern -> 1
I (152475) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (152480) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (152485) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (152503) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (152510) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (152517) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (152551) MEM_MGR: â•‘ Internal RAM:
I (152556) MEM_MGR: â•‘   Free:              91407 bytes ( 89 KB)
I (152563) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (152569) MEM_MGR: â•‘   Fragmentation:     29%
I (152575) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (152593) MEM_MGR: â•‘ DMA-capable RAM:
I (152598) MEM_MGR: â•‘   Free:              70991 bytes ( 69 KB)
I (152605) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (152611) MEM_MGR: â•‘   Fragmentation:      8%
I (152617) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (152635) MEM_MGR: â•‘ PSRAM:
I (152639) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (152646) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (152653) MEM_MGR: â•‘   Fragmentation:      2%
I (152658) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (152676) MEM_MGR: â•‘ Total Heap:
I (152681) MEM_MGR: â•‘   Free:             3738076 bytes (3650 KB)
I (152688) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (152695) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (152713) MEM_MGR: â•‘ Memory Delta from Baseline:
I (152719) MEM_MGR: â•‘   Internal RAM:     -133772 bytes (-130 KB)
I (152726) MEM_MGR: â•‘   DMA-capable:      -133772 bytes (-130 KB)
I (152732) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (152739) MEM_MGR: â•‘   Total Heap:       -626672 bytes (-611 KB)
I (152746) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (152765) STATE_MGR: âœ… Voice mode transition complete
I (152771) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (152786) STATE_MGR: STT pipeline reported start
I (154159) STT: Starting audio streaming to server...
W (154225) STT: Waiting for server ACK (sent: 2, acked: 0, unack: 2)
I (154226) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (154233) WEBSOCKET: Server status: receiving
I (154238) STT: Flow control: ACK received, resuming (sent=2, acked=2)
I (154245) WEBSOCKET: Server ACK: 2 chunks processed
I (154246) STT: ACK received, resuming (unack now: 0)
I (154321) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (154322) WEBSOCKET: Server status: receiving
W (154322) STT: Waiting for server ACK (sent: 4, acked: 2, unack: 2)
I (154326) STT: Flow control: ACK received, resuming (sent=4, acked=4)
I (154333) STT: ACK received, resuming (unack now: 0)
I (154340) WEBSOCKET: Server ACK: 4 chunks processed
I (154406) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (154407) WEBSOCKET: Server status: receiving
I (154412) WEBSOCKET: Server ACK: 6 chunks processed
I (154442) STT: [CAPTURE] âœ… Alive... 1000 reads completed (Free Heap: 3733800 bytes)
I (154466) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (154467) WEBSOCKET: Server status: receiving
I (154472) WEBSOCKET: Server ACK: 8 chunks processed
I (154530) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (154531) WEBSOCKET: Server status: receiving
I (154536) WEBSOCKET: Server ACK: 10 chunks processed
I (154605) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (154606) WEBSOCKET: Server status: receiving
I (154611) WEBSOCKET: Server ACK: 12 chunks processed
I (154669) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (154670) WEBSOCKET: Server status: receiving
I (154675) WEBSOCKET: Server ACK: 14 chunks processed
I (154735) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (154736) WEBSOCKET: Server status: receiving
I (154740) WEBSOCKET: Server ACK: 16 chunks processed
I (154794) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (154795) WEBSOCKET: Server status: receiving
I (154799) WEBSOCKET: Server ACK: 18 chunks processed
I (155015) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (155016) WEBSOCKET: Server status: receiving
I (155021) WEBSOCKET: Server ACK: 20 chunks processed
I (155312) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (155313) WEBSOCKET: Server status: receiving
I (155318) WEBSOCKET: Server ACK: 22 chunks processed
I (155535) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (155536) WEBSOCKET: Server status: receiving
I (155541) WEBSOCKET: Server ACK: 24 chunks processed
I (155872) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (155873) WEBSOCKET: Server status: receiving
I (155878) WEBSOCKET: Server ACK: 26 chunks processed
I (156046) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (156047) WEBSOCKET: Server status: receiving
I (156052) WEBSOCKET: Server ACK: 28 chunks processed
I (156309) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (156310) WEBSOCKET: Server status: receiving
I (156314) WEBSOCKET: Server ACK: 30 chunks processed
I (156562) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (156563) WEBSOCKET: Server status: receiving
I (156568) WEBSOCKET: Server ACK: 32 chunks processed
I (156837) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 34, "bytes_received": 139264}
I (156838) WEBSOCKET: Server status: receiving
I (156842) WEBSOCKET: Server ACK: 34 chunks processed
I (157105) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 36, "bytes_received": 147456}
I (157106) WEBSOCKET: Server status: receiving
I (157111) WEBSOCKET: Server ACK: 36 chunks processed
I (157287) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (157287) BUTTON: Single click confirmed
I (157287) STATE_MGR: Single click - mode toggle requested
I (157294) STATE_MGR: User requested to end voice session (count: 14). Stopping STT and awaiting server response.
I (157305) STT: Stopping STT pipeline...
I (157309) STT: Draining ring buffer (1024 bytes pending) before shutdown...
I (157311) STT: Audio capture task stopped (captured 157696 bytes total)
I (157324) STT: Ring buffer drained and cleared successfully
I (157333) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 38, "bytes_received": 155648}
I (157342) WEBSOCKET: Server status: receiving
I (157347) WEBSOCKET: Server ACK: 38 chunks processed
I (157355) STT: Streaming task received stop signal
I (157359) STT: Sending EOS signal...
I (157363) WEBSOCKET: Sending EOS signal
I (157373) STT: Audio streaming session complete (streamed 155648 bytes in 38 chunks)
I (157398) STT: STT pipeline stopped
I (157399) LED_CTRL: LED pattern -> 4
I (157399) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (157415) STATE_MGR: STT pipeline reported stop
I (157415) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (157419) LED_CTRL: LED pattern -> 1
I (157463) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (157464) WEBSOCKET: Server status: processing
I (157467) WEBSOCKET: Server stage: transcription
I (157472) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (157480) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (158016) LED_CTRL: LED pattern -> 4
I (158017) STATE_MGR: Pipeline stage event: transcription
I (158017) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (158112) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "the feeling of strawberry", "has_image": false}
I (158115) WEBSOCKET: Server status: processing
I (158120) WEBSOCKET: Server stage: llm
I (158125) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (158131) WEBSOCKET: Entering LLM stage - continuing processing indication
I (158145) STATE_MGR: Pipeline stage event: llm
I (158815) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "The sweet and juicy taste of strawberry often evokes feelings of happiness and refreshment."}
I (158822) WEBSOCKET: Server status: processing
I (158827) WEBSOCKET: Server stage: tts
I (158832) WEBSOCKET: Pipeline stage changed: llm -> tts
I (158838) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (158845) LED_CTRL: LED pattern -> 3
I (158850) TTS: ğŸµ Starting TTS decoder...
I (158855) TTS: Initializing TTS decoder...
W (158859) TTS: TTS decoder already initialized
I (158912) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (158912) STATE_MGR: TTS playback start event received
I (158916) LED_CTRL: LED pattern -> 1
I (158921) TTS: âœ… TTS decoder started successfully
I (158927) TTS: ğŸµ TTS playback task started on Core 1
I (158931) STATE_MGR: Pipeline stage event: tts
I (158937) TTS: âœ… TTS playback task registered with watchdog
I (158944) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (158950) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 157396 ms, bytes: 4096)
I (158961) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (158970) TTS: Chunk #2 first 12 bytes: 52 49 46 46 86 DC 02 00 57 41 56 45
I (158977) TTS: New audio session detected - resetting chunk counter
I (158985) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (158992) STATE_MGR: TTS playback start event received
I (159003) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (159007) TTS: Chunk #2 first 12 bytes: 0A 00 07 00 15 00 17 00 0E 00 0D 00
I (159020) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (159025) TTS: Chunk #3 first 12 bytes: 3E F0 60 F3 40 F6 18 F8 70 FC C3 FC
I (159036) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (159042) TTS: Chunk #4 first 12 bytes: 47 04 19 FC E3 FF 5B 04 21 FF B6 00
I (159053) TTS: Received audio chunk #5: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (159058) TTS: Chunk #5 first 12 bytes: B5 DA 59 D1 74 C8 E4 C1 C1 BD DE BA
I (159070) TTS: Received audio chunk #6: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (159078) TTS: Received audio chunk #7: 876 bytes (buffer: 24576/327680 used, 303103 free)
I (159085) TTS: âœ… WAV header parsed successfully
I (159089) TTS: === WAV File Info ===
I (159093) TTS: Sample Rate: 16000 Hz
I (159098) TTS: Channels: 1
I (159101) TTS: Bits per Sample: 16
I (159106) TTS: Received audio chunk #8: 3220 bytes (buffer: 21356/327680 used, 306323 free)
I (159119) TTS: Received audio chunk #9: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (159129) TTS: Received audio chunk #10: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (159139) TTS: Received audio chunk #11: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (159147) TTS: Audio Format: 1 (PCM)
I (159147) TTS: Declared Data Size: 187490 bytes
I (159150) TTS: Received audio chunk #12: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (159166) TTS: Received audio chunk #13: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (159176) TTS: Received audio chunk #14: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (159185) TTS: Received audio chunk #15: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (159194) TTS: Received audio chunk #16: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (159204) TTS: Received audio chunk #17: 1416 bytes (buffer: 57344/327680 used, 270335 free)
I (159209) TTS: Received audio chunk #18: 2680 bytes (buffer: 58760/327680 used, 268919 free)
I (159221) TTS: Received audio chunk #19: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (159232) TTS: Received audio chunk #20: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (159240) TTS: Received audio chunk #21: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (159249) TTS: Received audio chunk #22: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (159254) TTS: Block Align: 2
I (159260) TTS: Received audio chunk #23: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (159267) TTS: Byte Rate: 32000
I (159270) TTS: ====================
I (159276) TTS: Received audio chunk #24: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (159284) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=90112)
I (159292) TTS: Received audio chunk #25: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (159301) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (159309) TTS: Received audio chunk #26: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (159323) TTS: Received audio chunk #27: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (159338) TTS: Received audio chunk #28: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (159354) TTS: Received audio chunk #29: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (159369) TTS: Received audio chunk #30: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (159384) TTS: Received audio chunk #31: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (159407) TTS: Received audio chunk #32: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (159414) TTS: Received audio chunk #33: 4096 bytes (buffer: 114688/327680 used, 212991 free)
I (159431) TTS: Received audio chunk #34: 4096 bytes (buffer: 118784/327680 used, 208895 free)
I (159447) TTS: Received audio chunk #35: 4096 bytes (buffer: 122880/327680 used, 204799 free)
I (159462) TTS: Received audio chunk #36: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (159515) TTS: Received audio chunk #37: 4096 bytes (buffer: 126976/327680 used, 200703 free)
I (159522) TTS: Received audio chunk #38: 4096 bytes (buffer: 131072/327680 used, 196607 free)
I (159529) TTS: Received audio chunk #39: 4096 bytes (buffer: 135168/327680 used, 192511 free)
I (159539) TTS: Received audio chunk #40: 4096 bytes (buffer: 139264/327680 used, 188415 free)
I (159547) TTS: Received audio chunk #41: 4096 bytes (buffer: 143360/327680 used, 184319 free)
I (159557) TTS: Received audio chunk #42: 4096 bytes (buffer: 147456/327680 used, 180223 free)
I (159572) TTS: Received audio chunk #43: 4096 bytes (buffer: 151552/327680 used, 176127 free)
I (159588) TTS: Received audio chunk #44: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (159605) TTS: Received audio chunk #45: 4096 bytes (buffer: 155648/327680 used, 172031 free)
I (159620) TTS: Received audio chunk #46: 4096 bytes (buffer: 159744/327680 used, 167935 free)
I (159635) TTS: Received audio chunk #47: 4096 bytes (buffer: 163840/327680 used, 163839 free)
I (159652) TTS: Received audio chunk #48: 3214 bytes (buffer: 167936/327680 used, 159743 free)
I (159720) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (159847) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (159869) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (159869) TTS: TTS end-of-stream signaled (bytes_received=187534, header_parsed=1)
I (159875) TTS: ğŸµ Playback task will drain 162958 bytes of buffered audio
I (159882) TTS: Waiting for playback completion: 162958 bytes buffered, calculated timeout: 7092 ms
I (159975) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (160102) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (160230) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (160357) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (160485) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (160612) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (160740) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (160867) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (160995) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (161122) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (161250) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (161377) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (161505) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (161632) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (161760) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (161887) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (162015) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (162142) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (162270) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (162397) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (162525) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (162652) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (162780) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (162907) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (163035) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (163162) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (163290) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (163417) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (163545) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (163672) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (163800) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (163927) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (164055) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (164182) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (164310) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (164437) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (164565) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (164692) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (164820) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (164947) TTS: âœ… All audio data received (187534 bytes, expected 187490 + 44 header)
I (165174) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (165174) TTS: ğŸµ TTS playback task exiting (played 187490 bytes, result: ESP_OK)
I (165180) STATE_MGR: TTS playback finished successfully
I (165186) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (165195) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (165201) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (165220) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (165227) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (165245) MEM_MGR: â•‘ Internal RAM:
I (165250) MEM_MGR: â•‘   Free:              91407 bytes ( 89 KB)
I (165256) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (165263) MEM_MGR: â•‘   Fragmentation:     29%
I (165268) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (165287) MEM_MGR: â•‘ DMA-capable RAM:
I (165292) MEM_MGR: â•‘   Free:              70991 bytes ( 69 KB)
I (165298) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (165305) MEM_MGR: â•‘   Fragmentation:      8%
I (165310) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (165329) MEM_MGR: â•‘ PSRAM:
I (165333) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (165340) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (165347) MEM_MGR: â•‘   Fragmentation:      2%
I (165352) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (165370) MEM_MGR: â•‘ Total Heap:
I (165374) MEM_MGR: â•‘   Free:             3738076 bytes (3650 KB)
I (165381) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (165388) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (165407) MEM_MGR: â•‘ Memory Delta from Baseline:
I (165412) MEM_MGR: â•‘   Internal RAM:     -133772 bytes (-130 KB)
I (165419) MEM_MGR: â•‘   DMA-capable:      -133772 bytes (-130 KB)
I (165426) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (165433) MEM_MGR: â•‘   Total Heap:       -626672 bytes (-611 KB)
I (165440) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (165459) STATE_MGR: Stopping voice mode components...
I (165465) STT: Stopping STT pipeline...
W (165469) STT: STT pipeline already stopped
I (165517) TTS: TTS decoder session reset for next audio stream
I (165517) TTS: Received audio chunk #49: 0 bytes (buffer: 0/327680 used, 327679 free)
I (165521) TTS: New audio session detected - resetting chunk counter
I (165528) WEBSOCKET: ğŸµ Audio session complete: 187534 bytes in 48 messages
I (165539) WEBSOCKET: Received text message: {"status": "complete"}
I (165543) WEBSOCKET: Server status: complete
I (165548) WEBSOCKET: Pipeline stage changed: tts -> complete
I (165554) WEBSOCKET: Exiting TTS stage (transition to complete)
I (165561) TTS: âœ… TTS playback finished event dispatched to state manager
I (165569) TTS:   âœ“ DMA buffer freed from PSRAM
I (165574) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (165582) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (165661) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (165674) STATE_MGR: Voice pipeline reported COMPLETE
I (165674) STATE_MGR: TTS playback already drained - no pending audio
I (165676) STATE_MGR: Flushing and resetting TTS decoder for next session
I (165684) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (165692) TTS: No pending audio to flush
I (165739) TTS: TTS decoder session reset for next audio stream
I (165739) TTS: âœ… TTS decoder flushed and reset for next session
I (165942) TTS: â¹ï¸ Stopping TTS decoder...
W (165942) TTS: TTS decoder already stopped.
I (166088) STATE_MGR: Acquiring I2S mutex...
I (166088) STATE_MGR: Deinitializing audio drivers...
I (166088) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166106) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (166114) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166132) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (166139) AUDIO: âœ… RX channel disabled (took 0 ms)
I (166144) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (166151) AUDIO: âœ… TX channel disabled (took 0 ms)
I (166157) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (166213) AUDIO: [STEP 4/5] Deleting RX channel...
I (166214) AUDIO: âœ… RX channel deleted (took 0 ms)
I (166214) AUDIO: [STEP 5/5] Deleting TX channel...
I (166219) AUDIO: âœ… TX channel deleted (took 0 ms)
I (166225) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (166282) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166289) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (166296) AUDIO: â•‘ Camera Can Now Initialize
I (166301) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166369) STATE_MGR: Allowing memory stabilization (100ms)...
I (166469) STATE_MGR: Camera will be initialized on-demand during capture
I (166469) STATE_MGR: I2S mutex released
I (166470) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166489) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (166496) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166514) MEM_MGR: â•‘ Internal RAM:
I (166519) MEM_MGR: â•‘   Free:              91407 bytes ( 89 KB)
I (166525) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (166532) MEM_MGR: â•‘   Fragmentation:     29%
I (166537) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166556) MEM_MGR: â•‘ DMA-capable RAM:
I (166560) MEM_MGR: â•‘   Free:              70991 bytes ( 69 KB)
I (166567) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (166574) MEM_MGR: â•‘   Fragmentation:      8%
I (166579) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166598) MEM_MGR: â•‘ PSRAM:
I (166601) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (166608) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (166615) MEM_MGR: â•‘   Fragmentation:      2%
I (166621) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166639) MEM_MGR: â•‘ Total Heap:
I (166643) MEM_MGR: â•‘   Free:             3738076 bytes (3650 KB)
I (166650) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (166657) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166676) MEM_MGR: â•‘ Memory Delta from Baseline:
I (166681) MEM_MGR: â•‘   Internal RAM:     -133772 bytes (-130 KB)
I (166688) MEM_MGR: â•‘   DMA-capable:      -133772 bytes (-130 KB)
I (166695) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (166702) MEM_MGR: â•‘   Total Heap:       -626672 bytes (-611 KB)
I (166709) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166728) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (166737) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166755) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (166762) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166780) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166798) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (166806) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (166824) AUDIO: [DIAG] Pre-init state:
I (166828) AUDIO:   Free heap: 3772808 bytes
I (166833) AUDIO:   Free internal RAM: 126155 bytes
I (166839) AUDIO:   Free DMA-capable: 105739 bytes
I (166844) AUDIO:   Free PSRAM: 3667124 bytes
I (166849) AUDIO:   Timestamp: 165295 ms
I (166854) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (166861) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (166869) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (166877) AUDIO:   DMA frame num (per desc): 1020
I (166883) AUDIO:   DMA total samples (effective): 4080
I (166889) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (166896) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (166902) AUDIO: âœ… I2S channels created (took 0 ms)
I (166908) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca850
I (166915) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (166921) AUDIO:   Sample rate: 16000 Hz
I (166926) AUDIO:   MCLK: DISABLED
I (166930) AUDIO:   BCLK: GPIO14 (shared)
I (166935) AUDIO:   WS:   GPIO15 (shared)
I (166939) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (166946) AUDIO: âœ… TX channel configured (took 1 ms)
I (166951) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (166958) AUDIO:   Sample rate: 16000 Hz
I (166963) AUDIO:   MCLK: DISABLED
I (166967) AUDIO:   BCLK: GPIO14 (shared)
I (166971) AUDIO:   WS:   GPIO15 (shared)
I (166976) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (166982) AUDIO: âœ… RX channel configured (took 0 ms)
I (166988) AUDIO: [STEP 4/6] Enabling TX channel...
I (166993) AUDIO: âœ… TX channel enabled (took 0 ms)
I (166999) AUDIO: [STEP 5/6] Enabling RX channel...
I (167004) AUDIO: âœ… RX channel enabled (took 0 ms)
I (167010) AUDIO: [STEP 6/6] Hardware stabilization...
I (167016) AUDIO:   Phase 1: Initial settle (50ms)
I (167071) AUDIO:   Phase 2: DMA verification
I (167071) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (167072) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (167229) AUDIO: [DIAG] Post-init state:
I (167229) AUDIO:   Free heap: 3746828 bytes
I (167230) AUDIO:   Free internal RAM: 100175 bytes
I (167233) AUDIO:   Free DMA-capable: 79759 bytes
I (167239) AUDIO:   Free PSRAM: 3667124 bytes
I (167244) AUDIO:   Timestamp: 165690 ms
I (167248) AUDIO:   Total init time: 201 ms
I (167253) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (167271) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (167278) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (167283) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (167292) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (167299) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (167317) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (167335) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (167341) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (167348) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (167355) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (167361) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (167662) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (167669) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (167677) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (167695) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (167702) AUDIO: âœ… RX channel disabled (took 0 ms)
I (167708) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (167714) AUDIO: âœ… TX channel disabled (took 0 ms)
I (167720) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (167777) AUDIO: [STEP 4/5] Deleting RX channel...
I (167778) AUDIO: âœ… RX channel deleted (took 0 ms)
I (167778) AUDIO: [STEP 5/5] Deleting TX channel...
I (167783) AUDIO: âœ… TX channel deleted (took 0 ms)
I (167789) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (167846) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (167853) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (167860) AUDIO: â•‘ Camera Can Now Initialize
I (167865) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (167883) LED_CTRL: LED pattern -> 3
I (167887) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (167905) STATE_MGR: Pipeline stage event: complete
I (173195) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (173196) STATE_MGR: Double-click detected - triggering capture sequence
I (173199) STATE_MGR: Starting camera capture sequence
I (173205) LED_CTRL: LED pattern -> 6
I (173210) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (173227) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (173235) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (173253) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (173271) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (173278) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (173296) AUDIO: [DIAG] Pre-init state:
I (173301) AUDIO:   Free heap: 3772808 bytes
I (173306) AUDIO:   Free internal RAM: 126155 bytes
I (173311) AUDIO:   Free DMA-capable: 105739 bytes
I (173317) AUDIO:   Free PSRAM: 3667124 bytes
I (173322) AUDIO:   Timestamp: 171767 ms
I (173326) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (173333) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (173341) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (173350) AUDIO:   DMA frame num (per desc): 1020
I (173355) AUDIO:   DMA total samples (effective): 4080
I (173361) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (173368) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (173375) AUDIO: âœ… I2S channels created (took 0 ms)
I (173380) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca850
I (173387) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (173394) AUDIO:   Sample rate: 16000 Hz
I (173398) AUDIO:   MCLK: DISABLED
I (173402) AUDIO:   BCLK: GPIO14 (shared)
I (173407) AUDIO:   WS:   GPIO15 (shared)
I (173412) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (173419) AUDIO: âœ… TX channel configured (took 1 ms)
I (173423) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (173430) AUDIO:   Sample rate: 16000 Hz
I (173435) AUDIO:   MCLK: DISABLED
I (173439) AUDIO:   BCLK: GPIO14 (shared)
I (173444) AUDIO:   WS:   GPIO15 (shared)
I (173448) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (173455) AUDIO: âœ… RX channel configured (took 0 ms)
I (173460) AUDIO: [STEP 4/6] Enabling TX channel...
I (173466) AUDIO: âœ… TX channel enabled (took 0 ms)
I (173471) AUDIO: [STEP 5/6] Enabling RX channel...
I (173477) AUDIO: âœ… RX channel enabled (took 0 ms)
I (173482) AUDIO: [STEP 6/6] Hardware stabilization...
I (173488) AUDIO:   Phase 1: Initial settle (50ms)
I (173544) AUDIO:   Phase 2: DMA verification
I (173544) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (173545) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (173702) AUDIO: [DIAG] Post-init state:
I (173702) AUDIO:   Free heap: 3746828 bytes
I (173703) AUDIO:   Free internal RAM: 100175 bytes
I (173706) AUDIO:   Free DMA-capable: 79759 bytes
I (173712) AUDIO:   Free PSRAM: 3667124 bytes
I (173717) AUDIO:   Timestamp: 172163 ms
I (173721) AUDIO:   Total init time: 201 ms
I (173726) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (173744) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (173750) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (173756) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (173765) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (173772) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (173790) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (173808) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (173814) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (173821) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (173828) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (173834) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (174184) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (174191) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (174199) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (174217) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (174224) AUDIO: âœ… RX channel disabled (took 0 ms)
I (174230) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (174236) AUDIO: âœ… TX channel disabled (took 0 ms)
I (174242) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (174299) AUDIO: [STEP 4/5] Deleting RX channel...
I (174300) AUDIO: âœ… RX channel deleted (took 0 ms)
I (174300) AUDIO: [STEP 5/5] Deleting TX channel...
I (174305) AUDIO: âœ… TX channel deleted (took 0 ms)
I (174311) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (174368) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (174375) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (174382) AUDIO: â•‘ Camera Can Now Initialize
I (174387) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (174405) STATE_MGR: Capturing frame from camera
I (174410) CAMERA: Initializing camera...
I (174615) CAMERA: Camera sensor power cycled via PWDN pin
I (174616) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (174620) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (174629) cam_hal: cam init ok
W (174633) ledc: GPIO 0 is not usable, maybe conflict with others
I (174639) sccb-ng: pin_sda 26 pin_scl 27
I (174643) sccb-ng: sccb_i2c_port=1
I (174649) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (174691) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (174691) camera: Detected OV2640 camera
I (174691) camera: Detected camera at address=0x30
I (174773) cam_hal: PSRAM DMA mode disabled
I (174773) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (174778) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (174785) cam_hal: cam config ok
I (174788) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (174871) CAMERA: Camera initialized successfully
I (175422) STATE_MGR: Frame captured: 14744 bytes
I (175423) STATE_MGR: Uploading image using session esp32-cam-hotpin
I (175424) HTTP_CLIENT: Uploading image: session=esp32-cam-hotpin, size=14744 bytes
I (175434) HTTP_CLIENT: POST body assembled: 15001 bytes
I (175440) HTTP_CLIENT: Sending POST request to http://10.242.175.58:8000/image
I (175657) HTTP_CLIENT: HTTP POST Status = 200, content_length = 245
I (175658) HTTP_CLIENT: Image uploaded successfully
I (175659) HTTP_CLIENT: Server response: {"status":"success","message":"Image received and stored for next voice interaction","session":"esp32-cam-hotpin","filename":"image.jpg","size_bytes":14744,"saved_path":"captured_images/esp32-cam-hotpin_20251114_143714.jpg","context_ready":true}
I (175688) CAMERA: Deinitializing camera...
I (175691) CAMERA: Camera deinitialized
I (175695) STATE_MGR: Camera deinitialized - DMA memory freed
I (175701) STATE_MGR: Image uploaded successfully
I (175707) LED_CTRL: LED pattern -> 3
I (175711) STATE_MGR: Camera capture sequence complete
I (175727) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (179928) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (179928) BUTTON: Single click confirmed
I (179928) STATE_MGR: Single click - mode toggle requested
I (179935) STATE_MGR: Switching: Camera â†’ Voice (count: 15)
I (179991) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (179991) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180004) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (180011) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180030) MEM_MGR: â•‘ Internal RAM:
I (180034) MEM_MGR: â•‘   Free:             100175 bytes ( 97 KB)
I (180041) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (180048) MEM_MGR: â•‘   Fragmentation:     27%
I (180053) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180072) MEM_MGR: â•‘ DMA-capable RAM:
I (180076) MEM_MGR: â•‘   Free:              79759 bytes ( 77 KB)
I (180083) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (180090) MEM_MGR: â•‘   Fragmentation:      8%
I (180095) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180114) MEM_MGR: â•‘ PSRAM:
I (180117) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (180124) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (180131) MEM_MGR: â•‘   Fragmentation:      2%
I (180136) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180155) MEM_MGR: â•‘ Total Heap:
I (180159) MEM_MGR: â•‘   Free:             3746828 bytes (3659 KB)
I (180166) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (180173) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180191) MEM_MGR: â•‘ Memory Delta from Baseline:
I (180197) MEM_MGR: â•‘   Internal RAM:     -125004 bytes (-122 KB)
I (180204) MEM_MGR: â•‘   DMA-capable:      -125004 bytes (-122 KB)
I (180211) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (180218) MEM_MGR: â•‘   Total Heap:       -617920 bytes (-603 KB)
I (180225) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180243) STATE_MGR: Stopping camera...
I (180248) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180264) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (180271) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180287) STATE_MGR:   Timeout: 5000 ms
I (180292) STATE_MGR:   Timestamp: 178738 ms
I (180297) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (180303) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180319) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (180326) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180342) STATE_MGR:   Free heap before: 3772596 bytes
I (180348) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (180354) CAMERA: Deinitializing camera...
I (180359) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (180365) STATE_MGR:   Free heap after: 3772596 bytes
I (180371) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (180377) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180393) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (180400) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180416) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (180524) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (180624) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (180674) STATE_MGR:   âœ“ Total stabilization: 250ms
I (180674) STATE_MGR:   Timestamp: 179120 ms
I (180674) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180690) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (180697) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180713) STATE_MGR:   Free heap before: 3772596 bytes
I (180719) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180737) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (180744) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180763) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180781) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (180788) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (180806) AUDIO: [DIAG] Pre-init state:
I (180811) AUDIO:   Free heap: 3772596 bytes
I (180816) AUDIO:   Free internal RAM: 125943 bytes
I (180821) AUDIO:   Free DMA-capable: 105527 bytes
I (180827) AUDIO:   Free PSRAM: 3667124 bytes
I (180832) AUDIO:   Timestamp: 179277 ms
I (180836) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (180843) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (180851) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (180859) AUDIO:   DMA frame num (per desc): 1020
I (180865) AUDIO:   DMA total samples (effective): 4080
I (180871) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (180878) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (180885) AUDIO: âœ… I2S channels created (took 0 ms)
I (180890) AUDIO:   TX handle: 0x3ffd4ecc | RX handle: 0x3ffca850
I (180897) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (180903) AUDIO:   Sample rate: 16000 Hz
I (180908) AUDIO:   MCLK: DISABLED
I (180912) AUDIO:   BCLK: GPIO14 (shared)
I (180917) AUDIO:   WS:   GPIO15 (shared)
I (180922) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (180929) AUDIO: âœ… TX channel configured (took 1 ms)
I (180933) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (180940) AUDIO:   Sample rate: 16000 Hz
I (180945) AUDIO:   MCLK: DISABLED
I (180949) AUDIO:   BCLK: GPIO14 (shared)
I (180954) AUDIO:   WS:   GPIO15 (shared)
I (180958) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (180964) AUDIO: âœ… RX channel configured (took 0 ms)
I (180970) AUDIO: [STEP 4/6] Enabling TX channel...
I (180975) AUDIO: âœ… TX channel enabled (took 0 ms)
I (180981) AUDIO: [STEP 5/6] Enabling RX channel...
I (180987) AUDIO: âœ… RX channel enabled (took 0 ms)
I (180992) AUDIO: [STEP 6/6] Hardware stabilization...
I (180998) AUDIO:   Phase 1: Initial settle (50ms)
I (181053) AUDIO:   Phase 2: DMA verification
I (181053) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (181054) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (181211) AUDIO: [DIAG] Post-init state:
I (181211) AUDIO:   Free heap: 3746616 bytes
I (181212) AUDIO:   Free internal RAM: 99963 bytes
I (181215) AUDIO:   Free DMA-capable: 79547 bytes
I (181221) AUDIO:   Free PSRAM: 3667124 bytes
I (181226) AUDIO:   Timestamp: 179671 ms
I (181230) AUDIO:   Total init time: 201 ms
I (181235) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (181253) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (181259) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (181265) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (181274) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (181281) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (181299) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (181317) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (181323) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (181330) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (181337) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (181343) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (181361) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (181367) STATE_MGR:   Free heap after: 3746616 bytes
I (181373) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (181389) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (181395) STATE_MGR: â•‘ Total transition time: 895 ms
I (181401) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (181417) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (181434) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (181444) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (181460) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (181468) TTS: No pending audio to flush
I (181515) TTS: TTS decoder session reset for next audio stream
I (181515) TTS: âœ… TTS decoder flushed and reset for next session
I (181517) STT: Starting STT pipeline...
I (181522) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (181531) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (181538) STT:   Current time: 179984 ms
I (181543) STT:   Free heap: 3736640 bytes
I (181540) STT: âœ… STT pipeline started
I (181548) STT: Audio streaming session activated
I (181552) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (181558) STT: Connection stabilization delay (2000ms)...
I (181748) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (181748) STT:   âœ“ Audio driver initialized
I (181749) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (181856) STT:   Total stabilization: 300ms
I (181856) STT:   Timestamp: 180301 ms
I (181856) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (181861) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe3778 (with safety padding)
I (181869) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (181885) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (181891) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (181892) LED_CTRL: LED pattern -> 1
I (181897) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (181901) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (181936) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (181943) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (181961) MEM_MGR: â•‘ Internal RAM:
I (181966) MEM_MGR: â•‘   Free:             100175 bytes ( 97 KB)
I (181973) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (181979) MEM_MGR: â•‘   Fragmentation:     27%
I (181985) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (182003) MEM_MGR: â•‘ DMA-capable RAM:
I (182008) MEM_MGR: â•‘   Free:              79759 bytes ( 77 KB)
I (182014) MEM_MGR: â•‘   Largest Block:     73728 bytes ( 72 KB)
I (182021) MEM_MGR: â•‘   Fragmentation:      8%
I (182027) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (182045) MEM_MGR: â•‘ PSRAM:
I (182049) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (182056) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (182063) MEM_MGR: â•‘   Fragmentation:      2%
I (182068) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (182086) MEM_MGR: â•‘ Total Heap:
I (182091) MEM_MGR: â•‘   Free:             3746828 bytes (3659 KB)
I (182098) MEM_MGR: â•‘   Minimum Ever:     3632876 bytes (3547 KB)
I (182104) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (182123) MEM_MGR: â•‘ Memory Delta from Baseline:
I (182129) MEM_MGR: â•‘   Internal RAM:     -125004 bytes (-122 KB)
I (182135) MEM_MGR: â•‘   DMA-capable:      -125004 bytes (-122 KB)
I (182142) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (182149) MEM_MGR: â•‘   Total Heap:       -617920 bytes (-603 KB)
I (182156) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (182175) STATE_MGR: âœ… Voice mode transition complete
I (182181) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (182196) STATE_MGR: STT pipeline reported start
I (183573) STT: Starting audio streaming to server...
W (183707) STT: Waiting for server ACK (sent: 2, acked: 0, unack: 2)
I (183726) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (183727) WEBSOCKET: Server status: receiving
I (183731) STT: Flow control: ACK received, resuming (sent=2, acked=2)
I (183738) STT: ACK received, resuming (unack now: 0)
I (183739) WEBSOCKET: Server ACK: 2 chunks processed
I (183815) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (183815) WEBSOCKET: Server status: receiving
W (183816) STT: Waiting for server ACK (sent: 4, acked: 2, unack: 2)
I (183820) STT: Flow control: ACK received, resuming (sent=4, acked=4)
I (183827) STT: ACK received, resuming (unack now: 0)
I (183834) WEBSOCKET: Server ACK: 4 chunks processed
W (183908) STT: Waiting for server ACK (sent: 6, acked: 4, unack: 2)
I (183914) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (183916) WEBSOCKET: Server status: receiving
I (183921) STT: Flow control: ACK received, resuming (sent=6, acked=6)
I (183928) WEBSOCKET: Server ACK: 6 chunks processed
I (183929) STT: ACK received, resuming (unack now: 0)
W (184010) STT: Waiting for server ACK (sent: 8, acked: 6, unack: 2)
I (184017) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (184018) WEBSOCKET: Server status: receiving
I (184023) STT: Flow control: ACK received, resuming (sent=8, acked=8)
I (184030) WEBSOCKET: Server ACK: 8 chunks processed
I (184031) STT: ACK received, resuming (unack now: 0)
I (184120) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (184121) WEBSOCKET: Server status: receiving
W (184124) STT: Waiting for server ACK (sent: 10, acked: 8, unack: 2)
I (184126) STT: Flow control: ACK received, resuming (sent=10, acked=10)
I (184133) STT: ACK received, resuming (unack now: 0)
I (184140) WEBSOCKET: Server ACK: 10 chunks processed
I (184196) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (184197) WEBSOCKET: Server status: receiving
I (184202) WEBSOCKET: Server ACK: 12 chunks processed
I (184268) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (184269) WEBSOCKET: Server status: receiving
W (184272) STT: Waiting for server ACK (sent: 14, acked: 12, unack: 2)
I (184274) STT: Flow control: ACK received, resuming (sent=14, acked=14)
I (184288) WEBSOCKET: Server ACK: 14 chunks processed
I (184281) STT: ACK received, resuming (unack now: 0)
I (184356) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (184356) WEBSOCKET: Server status: receiving
I (184361) WEBSOCKET: Server ACK: 16 chunks processed
I (184421) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (184421) WEBSOCKET: Server status: receiving
I (184426) WEBSOCKET: Server ACK: 18 chunks processed
W (184513) STT: Waiting for server ACK (sent: 20, acked: 18, unack: 2)
I (184559) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (184559) WEBSOCKET: Server status: receiving
I (184564) STT: Flow control: ACK received, resuming (sent=20, acked=20)
I (184572) WEBSOCKET: Server ACK: 20 chunks processed
I (184574) STT: ACK received, resuming (unack now: 0)
I (184639) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (184640) WEBSOCKET: Server status: receiving
I (184645) WEBSOCKET: Server ACK: 22 chunks processed
I (184912) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (184913) WEBSOCKET: Server status: receiving
I (184918) WEBSOCKET: Server ACK: 24 chunks processed
I (185161) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (185162) WEBSOCKET: Server status: receiving
I (185166) WEBSOCKET: Server ACK: 26 chunks processed
I (185428) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (185428) WEBSOCKET: Server status: receiving
I (185433) WEBSOCKET: Server ACK: 28 chunks processed
I (185674) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (185675) WEBSOCKET: Server status: receiving
I (185680) WEBSOCKET: Server ACK: 30 chunks processed
I (185951) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (185952) WEBSOCKET: Server status: receiving
I (185957) WEBSOCKET: Server ACK: 32 chunks processed
I (186199) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 34, "bytes_received": 139264}
I (186200) WEBSOCKET: Server status: receiving
I (186205) WEBSOCKET: Server ACK: 34 chunks processed
I (186346) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (186347) STATE_MGR: Single click - mode toggle requested
I (186349) STATE_MGR: User requested to end voice session (count: 16). Stopping STT and awaiting server response.
I (186354) BUTTON: Single click confirmed
I (186360) STT: Stopping STT pipeline...
I (186369) STT: Draining ring buffer (1024 bytes pending) before shutdown...
W (186375) STT: Waiting for server ACK (sent: 36, acked: 34, unack: 2)
I (186384) STT: Ring buffer drained and cleared successfully
I (186407) STT: Audio capture task stopped (captured 149504 bytes total)
I (186419) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 36, "bytes_received": 147456}
I (186420) WEBSOCKET: Server status: receiving
I (186425) STT: Flow control: ACK received, resuming (sent=36, acked=36)
I (186432) WEBSOCKET: Server ACK: 36 chunks processed
I (186434) STT: ACK received, resuming (unack now: 0)
I (186470) STT: Streaming task received stop signal
I (186470) STT: Sending EOS signal...
I (186470) WEBSOCKET: Sending EOS signal
I (186475) STT: Audio streaming session complete (streamed 148480 bytes in 37 chunks)
I (186494) STT: STT pipeline stopped
I (186495) LED_CTRL: LED pattern -> 4
I (186495) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (186511) STATE_MGR: STT pipeline reported stop
I (186512) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (186516) LED_CTRL: LED pattern -> 1
I (186546) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (186547) WEBSOCKET: Server status: processing
I (186550) WEBSOCKET: Server stage: transcription
I (186555) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (186563) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (187047) LED_CTRL: LED pattern -> 4
I (187048) STATE_MGR: Pipeline stage event: transcription
I (187048) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (187188) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what do you see in this image", "has_image": true}
I (187192) WEBSOCKET: Server status: processing
I (187197) WEBSOCKET: Server stage: llm
I (187201) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (187208) WEBSOCKET: Entering LLM stage - continuing processing indication
I (187216) STATE_MGR: Pipeline stage event: llm
I (188013) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "I see a bag of crunchy snack chips on a shelf."}
I (188017) WEBSOCKET: Server status: processing
I (188022) WEBSOCKET: Server stage: tts
I (188026) WEBSOCKET: Pipeline stage changed: llm -> tts
I (188032) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (188039) LED_CTRL: LED pattern -> 3
I (188044) TTS: ğŸµ Starting TTS decoder...
I (188049) TTS: Initializing TTS decoder...
W (188054) TTS: TTS decoder already initialized
I (188103) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (188103) TTS: âœ… TTS decoder started successfully
I (188108) TTS: ğŸµ TTS playback task started on Core 1
I (188113) STATE_MGR: TTS playback start event received
I (188119) LED_CTRL: LED pattern -> 1
I (188124) TTS: âœ… TTS playback task registered with watchdog
I (188130) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (188134) STATE_MGR: Pipeline stage event: tts
I (188147) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 186593 ms, bytes: 4096)
I (188152) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (188161) TTS: Chunk #2 first 12 bytes: 52 49 46 46 90 B7 01 00 57 41 56 45
I (188169) TTS: New audio session detected - resetting chunk counter
I (188176) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (188184) STATE_MGR: TTS playback start event received
I (188195) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (188199) TTS: Chunk #2 first 12 bytes: E5 03 BF FE EC F9 F5 F9 40 FE 64 02
I (188212) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (188215) TTS: Chunk #3 first 12 bytes: E1 FF DF 00 C3 FE 78 FF CB 01 1B FF
I (188228) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (188232) TTS: Chunk #4 first 12 bytes: 1C 17 4C 18 33 1B 33 1F D5 21 C5 22
I (188245) TTS: Received audio chunk #5: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (188250) TTS: Chunk #5 first 12 bytes: C6 FE B3 FE 9D FE 92 FE 80 FE 74 FE
I (188262) TTS: Received audio chunk #6: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (188272) TTS: Received audio chunk #7: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (188281) TTS: Received audio chunk #8: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (188290) TTS: Received audio chunk #9: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (188299) TTS: Received audio chunk #10: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (188309) TTS: Received audio chunk #11: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (188318) TTS: Received audio chunk #12: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (188327) TTS: Received audio chunk #13: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (188333) TTS: âœ… WAV header parsed successfully
I (188336) TTS: === WAV File Info ===
I (188341) TTS: Received audio chunk #14: 4096 bytes (buffer: 49152/327680 used, 278527 free)
I (188350) TTS: Sample Rate: 16000 Hz
I (188357) TTS: Received audio chunk #15: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (188364) TTS: Channels: 1
I (188366) TTS: Bits per Sample: 16
I (188371) TTS: Received audio chunk #16: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (188381) TTS: Audio Format: 1 (PCM)
I (188384) TTS: Declared Data Size: 112492 bytes
I (188390) TTS: Received audio chunk #17: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (188404) TTS: Block Align: 2
I (188404) TTS: Byte Rate: 32000
I (188406) TTS: Received audio chunk #18: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (188421) TTS: Received audio chunk #19: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (188425) TTS: ====================
I (188429) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=77824)
I (188435) TTS: Received audio chunk #20: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (188452) TTS: Received audio chunk #21: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (188456) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (188467) TTS: Received audio chunk #22: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (188483) TTS: Received audio chunk #23: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (188510) TTS: Received audio chunk #24: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (188525) TTS: Received audio chunk #25: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (188542) TTS: Received audio chunk #26: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (188593) TTS: Received audio chunk #27: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (188599) TTS: Received audio chunk #28: 1944 bytes (buffer: 98304/327680 used, 229375 free)
I (188688) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (188787) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (188787) TTS: TTS end-of-stream signaled (bytes_received=112536, header_parsed=1)
I (188793) TTS: ğŸµ Playback task will drain 96152 bytes of buffered audio
I (188800) TTS: Waiting for playback completion: 96152 bytes buffered, calculated timeout: 5004 ms
I (188815) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (188943) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
W (188989) HOTPIN_MAIN: âš ï¸ Connection health check timeout - forcing reconnect to prevent stale connection
W (188989) HOTPIN_MAIN: âš ï¸ WebSocket link not healthy, initiating reconnection sequence
I (188998) WEBSOCKET: Force stopping WebSocket client
I (189070) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (189198) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (189325) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (189453) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (189580) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (189707) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (189835) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (189963) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (190090) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (190217) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (190345) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (190473) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (190600) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (190727) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (190855) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (190983) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (191110) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (191237) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (191365) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (191493) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (191620) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (191747) TTS: âœ… All audio data received (112536 bytes, expected 112492 + 44 header)
I (191911) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (191911) TTS: ğŸµ TTS playback task exiting (played 112492 bytes, result: ESP_OK)
I (191917) STATE_MGR: TTS playback finished successfully
I (191923) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (191932) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (191938) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (191957) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (191964) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (191982) MEM_MGR: â•‘ Internal RAM:
I (191987) MEM_MGR: â•‘   Free:              90255 bytes ( 88 KB)
I (191993) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (192000) MEM_MGR: â•‘   Fragmentation:     28%
I (192005) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (192024) MEM_MGR: â•‘ DMA-capable RAM:
I (192029) MEM_MGR: â•‘   Free:              69839 bytes ( 68 KB)
I (192035) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (192042) MEM_MGR: â•‘   Fragmentation:      7%
I (192047) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (192066) MEM_MGR: â•‘ PSRAM:
I (192070) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (192077) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (192084) MEM_MGR: â•‘   Fragmentation:      2%
I (192089) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (192107) MEM_MGR: â•‘ Total Heap:
I (192111) MEM_MGR: â•‘   Free:             3736908 bytes (3649 KB)
I (192118) MEM_MGR: â•‘   Minimum Ever:     3631852 bytes (3546 KB)
I (192125) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (192144) MEM_MGR: â•‘ Memory Delta from Baseline:
I (192149) MEM_MGR: â•‘   Internal RAM:     -134924 bytes (-131 KB)
I (192156) MEM_MGR: â•‘   DMA-capable:      -134924 bytes (-131 KB)
I (192163) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (192170) MEM_MGR: â•‘   Total Heap:       -627840 bytes (-613 KB)
I (192177) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (192196) STATE_MGR: Stopping voice mode components...
I (192202) STT: Stopping STT pipeline...
W (192206) STT: STT pipeline already stopped
I (192254) TTS: TTS decoder session reset for next audio stream
I (192254) TTS: Received audio chunk #29: 0 bytes (buffer: 0/327680 used, 327679 free)
I (192258) TTS: New audio session detected - resetting chunk counter
I (192265) WEBSOCKET: ğŸµ Audio session complete: 112536 bytes in 28 messages
I (192275) TTS: âœ… TTS playback finished event dispatched to state manager
W (192278) websocket_client: Client was not started
I (192281) TTS:   âœ“ DMA buffer freed from PSRAM
W (192286) WEBSOCKET: Force stop returned ESP_FAIL
I (192291) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (192305) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (192311) STATE_MGR: Voice pipeline became idle at stage idle
I (192318) STATE_MGR: TTS playback already drained - no pending audio
I (192326) STATE_MGR: Flushing and resetting TTS decoder for next session
I (192333) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (192341) TTS: No pending audio to flush
I (192390) TTS: TTS decoder session reset for next audio stream
I (192390) TTS: âœ… TTS decoder flushed and reset for next session
I (192593) TTS: â¹ï¸ Stopping TTS decoder...
W (192593) TTS: TTS decoder already stopped.
I (192737) STATE_MGR: Acquiring I2S mutex...
I (192737) STATE_MGR: Deinitializing audio drivers...
I (192738) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (192755) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (192763) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (192781) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (192788) AUDIO: âœ… RX channel disabled (took 0 ms)
I (192793) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (192800) AUDIO: âœ… TX channel disabled (took 0 ms)
I (192806) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (192862) AUDIO: [STEP 4/5] Deleting RX channel...
I (192863) AUDIO: âœ… RX channel deleted (took 0 ms)
I (192863) AUDIO: [STEP 5/5] Deleting TX channel...
I (192868) AUDIO: âœ… TX channel deleted (took 0 ms)
I (192874) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (192931) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (192938) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (192945) AUDIO: â•‘ Camera Can Now Initialize
I (192950) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (193018) STATE_MGR: Allowing memory stabilization (100ms)...
I (193118) STATE_MGR: Camera will be initialized on-demand during capture
I (193118) STATE_MGR: I2S mutex released
I (193119) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (193138) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (193145) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (193163) MEM_MGR: â•‘ Internal RAM:
I (193168) MEM_MGR: â•‘   Free:              90255 bytes ( 88 KB)
I (193174) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (193181) MEM_MGR: â•‘   Fragmentation:     28%
I (193186) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (193205) MEM_MGR: â•‘ DMA-capable RAM:
I (193209) MEM_MGR: â•‘   Free:              69839 bytes ( 68 KB)
I (193216) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (193223) MEM_MGR: â•‘   Fragmentation:      7%
I (193228) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (193247) MEM_MGR: â•‘ PSRAM:
I (193251) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (193257) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (193264) MEM_MGR: â•‘   Fragmentation:      2%
I (193270) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (193288) MEM_MGR: â•‘ Total Heap:
I (193292) MEM_MGR: â•‘   Free:             3736908 bytes (3649 KB)
I (193297) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 2)...
I (193299) MEM_MGR: â•‘   Minimum Ever:     3631852 bytes (3546 KB)
I (193307) WEBSOCKET: Connecting to WebSocket server...
I (193314) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (193327) websocket_client: Started
I (193338) MEM_MGR: â•‘ Memory Delta from Baseline:
I (193342) WEBSOCKET: âœ… WebSocket connected to server
I (193348) MEM_MGR: â•‘   Internal RAM:     -134924 bytes (-131 KB)
I (193354) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (193361) MEM_MGR: â•‘   DMA-capable:      -134924 bytes (-131 KB)
I (193373) WEBSOCKET: Handshake sent successfully
I (193375) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (193381) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (193388) MEM_MGR: â•‘   Total Heap:       -627840 bytes (-613 KB)
I (193401) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (193343) WEBSOCKET: WebSocket client started (health check disabled - managed by main connection task)
I (193420) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (193439) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (193440) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (193450) WEBSOCKET: Server status: connected
I (193468) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (193431) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (193480) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (193506) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (193524) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (193531) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (193549) AUDIO: [DIAG] Pre-init state:
I (193554) AUDIO:   Free heap: 3772200 bytes
I (193559) AUDIO:   Free internal RAM: 125767 bytes
I (193564) AUDIO:   Free DMA-capable: 105351 bytes
I (193570) AUDIO:   Free PSRAM: 3667124 bytes
I (193575) AUDIO:   Timestamp: 192020 ms
I (193579) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (193586) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (193594) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (193603) AUDIO:   DMA frame num (per desc): 1020
I (193608) AUDIO:   DMA total samples (effective): 4080
I (193614) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (193621) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (193628) AUDIO: âœ… I2S channels created (took 0 ms)
I (193633) AUDIO:   TX handle: 0x3ffcb268 | RX handle: 0x3ffcb724
I (193640) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (193647) AUDIO:   Sample rate: 16000 Hz
I (193651) AUDIO:   MCLK: DISABLED
I (193655) AUDIO:   BCLK: GPIO14 (shared)
I (193660) AUDIO:   WS:   GPIO15 (shared)
I (193665) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (193672) AUDIO: âœ… TX channel configured (took 1 ms)
I (193676) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (193683) AUDIO:   Sample rate: 16000 Hz
I (193688) AUDIO:   MCLK: DISABLED
I (193692) AUDIO:   BCLK: GPIO14 (shared)
I (193697) AUDIO:   WS:   GPIO15 (shared)
I (193701) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (193707) AUDIO: âœ… RX channel configured (took 0 ms)
I (193713) AUDIO: [STEP 4/6] Enabling TX channel...
I (193718) AUDIO: âœ… TX channel enabled (took 0 ms)
I (193724) AUDIO: [STEP 5/6] Enabling RX channel...
I (193730) AUDIO: âœ… RX channel enabled (took 0 ms)
I (193735) AUDIO: [STEP 6/6] Hardware stabilization...
I (193741) AUDIO:   Phase 1: Initial settle (50ms)
I (193797) AUDIO:   Phase 2: DMA verification
I (193797) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (193798) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (193955) AUDIO: [DIAG] Post-init state:
I (193955) AUDIO:   Free heap: 3746244 bytes
I (193956) AUDIO:   Free internal RAM: 99811 bytes
I (193959) AUDIO:   Free DMA-capable: 79395 bytes
I (193965) AUDIO:   Free PSRAM: 3667124 bytes
I (193970) AUDIO:   Timestamp: 192415 ms
I (193974) AUDIO:   Total init time: 201 ms
I (193979) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (193997) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (194003) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (194009) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (194018) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (194025) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (194043) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (194061) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (194067) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (194074) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (194081) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (194087) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (194388) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (194395) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (194403) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (194421) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (194428) AUDIO: âœ… RX channel disabled (took 0 ms)
I (194434) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (194440) AUDIO: âœ… TX channel disabled (took 0 ms)
I (194446) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (194503) AUDIO: [STEP 4/5] Deleting RX channel...
I (194504) AUDIO: âœ… RX channel deleted (took 0 ms)
I (194504) AUDIO: [STEP 5/5] Deleting TX channel...
I (194509) AUDIO: âœ… TX channel deleted (took 0 ms)
I (194515) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (194572) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (194579) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (194586) AUDIO: â•‘ Camera Can Now Initialize
I (194591) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (194609) LED_CTRL: LED pattern -> 3
I (194613) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (194631) STATE_MGR: âœ… WebSocket connected
I (207621) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (207622) STATE_MGR: Double-click detected - triggering capture sequence
I (207625) STATE_MGR: Starting camera capture sequence
I (207631) LED_CTRL: LED pattern -> 6
I (207636) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (207653) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (207661) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (207679) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (207697) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (207704) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (207722) AUDIO: [DIAG] Pre-init state:
I (207727) AUDIO:   Free heap: 3772200 bytes
I (207732) AUDIO:   Free internal RAM: 125751 bytes
I (207737) AUDIO:   Free DMA-capable: 105351 bytes
I (207743) AUDIO:   Free PSRAM: 3667124 bytes
I (207748) AUDIO:   Timestamp: 206193 ms
I (207752) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (207759) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (207767) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (207776) AUDIO:   DMA frame num (per desc): 1020
I (207781) AUDIO:   DMA total samples (effective): 4080
I (207787) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (207794) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (207801) AUDIO: âœ… I2S channels created (took 0 ms)
I (207806) AUDIO:   TX handle: 0x3ffcb268 | RX handle: 0x3ffcb724
I (207813) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (207820) AUDIO:   Sample rate: 16000 Hz
I (207824) AUDIO:   MCLK: DISABLED
I (207828) AUDIO:   BCLK: GPIO14 (shared)
I (207833) AUDIO:   WS:   GPIO15 (shared)
I (207838) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (207844) AUDIO: âœ… TX channel configured (took 0 ms)
I (207849) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (207856) AUDIO:   Sample rate: 16000 Hz
I (207861) AUDIO:   MCLK: DISABLED
I (207865) AUDIO:   BCLK: GPIO14 (shared)
I (207870) AUDIO:   WS:   GPIO15 (shared)
I (207874) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (207880) AUDIO: âœ… RX channel configured (took 0 ms)
I (207886) AUDIO: [STEP 4/6] Enabling TX channel...
I (207892) AUDIO: âœ… TX channel enabled (took 0 ms)
I (207897) AUDIO: [STEP 5/6] Enabling RX channel...
I (207903) AUDIO: âœ… RX channel enabled (took 0 ms)
I (207908) AUDIO: [STEP 6/6] Hardware stabilization...
I (207914) AUDIO:   Phase 1: Initial settle (50ms)
I (207970) AUDIO:   Phase 2: DMA verification
I (207970) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (207971) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (208128) AUDIO: [DIAG] Post-init state:
I (208128) AUDIO:   Free heap: 3746244 bytes
I (208129) AUDIO:   Free internal RAM: 99811 bytes
I (208132) AUDIO:   Free DMA-capable: 79395 bytes
I (208138) AUDIO:   Free PSRAM: 3667124 bytes
I (208143) AUDIO:   Timestamp: 206588 ms
I (208147) AUDIO:   Total init time: 200 ms
I (208152) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (208170) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (208176) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (208182) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (208191) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (208198) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (208216) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (208234) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (208240) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (208247) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (208254) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (208260) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (208610) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (208617) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (208625) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (208643) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (208650) AUDIO: âœ… RX channel disabled (took 0 ms)
I (208656) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (208662) AUDIO: âœ… TX channel disabled (took 0 ms)
I (208668) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (208725) AUDIO: [STEP 4/5] Deleting RX channel...
I (208726) AUDIO: âœ… RX channel deleted (took 0 ms)
I (208726) AUDIO: [STEP 5/5] Deleting TX channel...
I (208731) AUDIO: âœ… TX channel deleted (took 0 ms)
I (208737) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (208794) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (208801) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (208808) AUDIO: â•‘ Camera Can Now Initialize
I (208813) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (208831) STATE_MGR: Capturing frame from camera
I (208836) CAMERA: Initializing camera...
I (209041) CAMERA: Camera sensor power cycled via PWDN pin
I (209042) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (209046) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (209055) cam_hal: cam init ok
W (209059) ledc: GPIO 0 is not usable, maybe conflict with others
I (209065) sccb-ng: pin_sda 26 pin_scl 27
I (209069) sccb-ng: sccb_i2c_port=1
I (209075) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (209117) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (209117) camera: Detected OV2640 camera
I (209117) camera: Detected camera at address=0x30
I (209199) cam_hal: PSRAM DMA mode disabled
I (209199) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (209204) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (209211) cam_hal: cam config ok
I (209214) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (209297) CAMERA: Camera initialized successfully
I (209848) STATE_MGR: Frame captured: 15396 bytes
I (209848) STATE_MGR: Uploading image using session esp32-cam-hotpin
I (209849) HTTP_CLIENT: Uploading image: session=esp32-cam-hotpin, size=15396 bytes
I (209860) HTTP_CLIENT: POST body assembled: 15653 bytes
I (209865) HTTP_CLIENT: Sending POST request to http://10.242.175.58:8000/image
I (210164) HTTP_CLIENT: HTTP POST Status = 200, content_length = 245
I (210164) HTTP_CLIENT: Image uploaded successfully
I (210166) HTTP_CLIENT: Server response: {"status":"success","message":"Image received and stored for next voice interaction","session":"esp32-cam-hotpin","filename":"image.jpg","size_bytes":15396,"saved_path":"captured_images/esp32-cam-hotpin_20251114_143748.jpg","context_ready":true}
I (210193) CAMERA: Deinitializing camera...
I (210197) CAMERA: Camera deinitialized
I (210201) STATE_MGR: Camera deinitialized - DMA memory freed
I (210208) STATE_MGR: Image uploaded successfully
I (210213) LED_CTRL: LED pattern -> 3
I (210217) STATE_MGR: Camera capture sequence complete
I (210233) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (246746) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (246746) BUTTON: Single click confirmed
I (246746) STATE_MGR: Single click - mode toggle requested
I (246753) STATE_MGR: Switching: Camera â†’ Voice (count: 17)
I (246809) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (246809) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (246822) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (246829) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (246848) MEM_MGR: â•‘ Internal RAM:
I (246852) MEM_MGR: â•‘   Free:             125767 bytes (122 KB)
I (246859) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (246866) MEM_MGR: â•‘   Fragmentation:     26%
I (246871) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (246890) MEM_MGR: â•‘ DMA-capable RAM:
I (246894) MEM_MGR: â•‘   Free:             105351 bytes (102 KB)
I (246901) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (246908) MEM_MGR: â•‘   Fragmentation:     11%
I (246913) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (246932) MEM_MGR: â•‘ PSRAM:
I (246935) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (246942) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (246949) MEM_MGR: â•‘   Fragmentation:      2%
I (246954) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (246973) MEM_MGR: â•‘ Total Heap:
I (246977) MEM_MGR: â•‘   Free:             3772200 bytes (3683 KB)
I (246984) MEM_MGR: â•‘   Minimum Ever:     3631084 bytes (3545 KB)
I (246991) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247009) MEM_MGR: â•‘ Memory Delta from Baseline:
I (247015) MEM_MGR: â•‘   Internal RAM:      -99412 bytes ( -97 KB)
I (247022) MEM_MGR: â•‘   DMA-capable:       -99412 bytes ( -97 KB)
I (247029) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (247036) MEM_MGR: â•‘   Total Heap:       -592548 bytes (-578 KB)
I (247043) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247061) STATE_MGR: Stopping camera...
I (247066) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247082) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (247089) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247105) STATE_MGR:   Timeout: 5000 ms
I (247110) STATE_MGR:   Timestamp: 245556 ms
I (247115) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (247121) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247137) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (247144) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247160) STATE_MGR:   Free heap before: 3772200 bytes
I (247166) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (247172) CAMERA: Deinitializing camera...
I (247177) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (247183) STATE_MGR:   Free heap after: 3772200 bytes
I (247189) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (247195) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247211) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (247218) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247234) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (247342) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (247442) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (247492) STATE_MGR:   âœ“ Total stabilization: 250ms
I (247492) STATE_MGR:   Timestamp: 245938 ms
I (247492) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247508) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (247515) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247531) STATE_MGR:   Free heap before: 3772200 bytes
I (247537) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247555) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (247562) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247581) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247599) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (247606) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (247624) AUDIO: [DIAG] Pre-init state:
I (247629) AUDIO:   Free heap: 3772200 bytes
I (247634) AUDIO:   Free internal RAM: 125767 bytes
I (247639) AUDIO:   Free DMA-capable: 105351 bytes
I (247645) AUDIO:   Free PSRAM: 3667124 bytes
I (247650) AUDIO:   Timestamp: 246095 ms
I (247654) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (247661) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (247669) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (247677) AUDIO:   DMA frame num (per desc): 1020
I (247683) AUDIO:   DMA total samples (effective): 4080
I (247689) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (247696) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (247703) AUDIO: âœ… I2S channels created (took 0 ms)
I (247708) AUDIO:   TX handle: 0x3ffcb268 | RX handle: 0x3ffcb724
I (247715) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (247721) AUDIO:   Sample rate: 16000 Hz
I (247726) AUDIO:   MCLK: DISABLED
I (247730) AUDIO:   BCLK: GPIO14 (shared)
I (247735) AUDIO:   WS:   GPIO15 (shared)
I (247740) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (247747) AUDIO: âœ… TX channel configured (took 1 ms)
I (247751) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (247758) AUDIO:   Sample rate: 16000 Hz
I (247763) AUDIO:   MCLK: DISABLED
I (247767) AUDIO:   BCLK: GPIO14 (shared)
I (247772) AUDIO:   WS:   GPIO15 (shared)
I (247776) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (247782) AUDIO: âœ… RX channel configured (took 0 ms)
I (247788) AUDIO: [STEP 4/6] Enabling TX channel...
I (247793) AUDIO: âœ… TX channel enabled (took 0 ms)
I (247799) AUDIO: [STEP 5/6] Enabling RX channel...
I (247805) AUDIO: âœ… RX channel enabled (took 0 ms)
I (247810) AUDIO: [STEP 6/6] Hardware stabilization...
I (247816) AUDIO:   Phase 1: Initial settle (50ms)
I (247871) AUDIO:   Phase 2: DMA verification
I (247871) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (247872) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (248029) AUDIO: [DIAG] Post-init state:
I (248029) AUDIO:   Free heap: 3746244 bytes
I (248030) AUDIO:   Free internal RAM: 99811 bytes
I (248033) AUDIO:   Free DMA-capable: 79395 bytes
I (248039) AUDIO:   Free PSRAM: 3667124 bytes
I (248044) AUDIO:   Timestamp: 246489 ms
I (248048) AUDIO:   Total init time: 201 ms
I (248053) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248071) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (248077) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (248083) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (248092) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (248099) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248117) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248135) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (248141) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (248148) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (248155) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (248161) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248179) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (248185) STATE_MGR:   Free heap after: 3746244 bytes
I (248191) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248207) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (248213) STATE_MGR: â•‘ Total transition time: 895 ms
I (248219) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248235) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248252) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (248262) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248278) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (248286) TTS: No pending audio to flush
I (248333) TTS: TTS decoder session reset for next audio stream
I (248333) TTS: âœ… TTS decoder flushed and reset for next session
I (248335) STT: Starting STT pipeline...
I (248340) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (248349) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (248356) STT:   Current time: 246802 ms
I (248359) STT: âœ… STT pipeline started
I (248361) STT:   Free heap: 3737692 bytes
I (248365) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (248361) STT: Audio streaming session activated
I (248385) STT: Connection stabilization delay (2000ms)...
I (248570) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (248570) STT:   âœ“ Audio driver initialized
I (248571) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (248678) STT:   Total stabilization: 300ms
I (248678) STT:   Timestamp: 247123 ms
I (248678) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (248683) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe3778 (with safety padding)
I (248691) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248704) LED_CTRL: LED pattern -> 1
I (248707) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (248712) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248717) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (248735) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (248742) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248749) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248783) MEM_MGR: â•‘ Internal RAM:
I (248788) MEM_MGR: â•‘   Free:             125767 bytes (122 KB)
I (248795) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (248801) MEM_MGR: â•‘   Fragmentation:     26%
I (248807) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248825) MEM_MGR: â•‘ DMA-capable RAM:
I (248830) MEM_MGR: â•‘   Free:             105351 bytes (102 KB)
I (248837) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (248843) MEM_MGR: â•‘   Fragmentation:     11%
I (248849) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248867) MEM_MGR: â•‘ PSRAM:
I (248871) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (248878) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (248885) MEM_MGR: â•‘   Fragmentation:      2%
I (248890) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248908) MEM_MGR: â•‘ Total Heap:
I (248913) MEM_MGR: â•‘   Free:             3772200 bytes (3683 KB)
I (248920) MEM_MGR: â•‘   Minimum Ever:     3631084 bytes (3545 KB)
I (248927) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248945) MEM_MGR: â•‘ Memory Delta from Baseline:
I (248951) MEM_MGR: â•‘   Internal RAM:      -99412 bytes ( -97 KB)
I (248958) MEM_MGR: â•‘   DMA-capable:       -99412 bytes ( -97 KB)
I (248964) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (248971) MEM_MGR: â•‘   Total Heap:       -592548 bytes (-578 KB)
I (248978) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (248997) STATE_MGR: âœ… Voice mode transition complete
I (249003) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (249019) STATE_MGR: STT pipeline reported start
I (250392) STT: Starting audio streaming to server...
I (250475) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (250476) WEBSOCKET: Server status: receiving
I (250480) WEBSOCKET: Server ACK: 2 chunks processed
I (250547) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (250548) WEBSOCKET: Server status: receiving
I (250552) WEBSOCKET: Server ACK: 4 chunks processed
I (250606) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (250607) WEBSOCKET: Server status: receiving
I (250612) WEBSOCKET: Server ACK: 6 chunks processed
I (250683) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (250684) WEBSOCKET: Server status: receiving
I (250688) WEBSOCKET: Server ACK: 8 chunks processed
I (250745) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (250747) WEBSOCKET: Server status: receiving
I (250751) WEBSOCKET: Server ACK: 10 chunks processed
W (250826) STT: Waiting for server ACK (sent: 12, acked: 10, unack: 2)
I (250846) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (250847) WEBSOCKET: Server status: receiving
I (250851) STT: Flow control: ACK received, resuming (sent=12, acked=12)
I (250859) STT: ACK received, resuming (unack now: 0)
I (250859) WEBSOCKET: Server ACK: 12 chunks processed
I (250918) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (250919) WEBSOCKET: Server status: receiving
I (250924) WEBSOCKET: Server ACK: 14 chunks processed
W (250988) STT: Waiting for server ACK (sent: 16, acked: 14, unack: 2)
I (251032) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (251033) WEBSOCKET: Server status: receiving
I (251037) STT: Flow control: ACK received, resuming (sent=16, acked=16)
I (251045) WEBSOCKET: Server ACK: 16 chunks processed
I (251051) STT: ACK received, resuming (unack now: 0)
I (251118) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (251119) WEBSOCKET: Server status: receiving
I (251124) WEBSOCKET: Server ACK: 18 chunks processed
I (251281) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (251281) WEBSOCKET: Server status: receiving
I (251286) WEBSOCKET: Server ACK: 20 chunks processed
I (251533) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (251534) WEBSOCKET: Server status: receiving
I (251539) WEBSOCKET: Server ACK: 22 chunks processed
I (251749) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (251750) WEBSOCKET: Server status: receiving
I (251755) WEBSOCKET: Server ACK: 24 chunks processed
I (252096) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (252097) WEBSOCKET: Server status: receiving
I (252102) WEBSOCKET: Server ACK: 26 chunks processed
I (252300) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (252302) WEBSOCKET: Server status: receiving
I (252306) WEBSOCKET: Server ACK: 28 chunks processed
I (252514) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (252515) WEBSOCKET: Server status: receiving
I (252519) WEBSOCKET: Server ACK: 30 chunks processed
I (252800) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 32, "bytes_received": 131072}
I (252801) WEBSOCKET: Server status: receiving
I (252806) WEBSOCKET: Server ACK: 32 chunks processed
I (253003) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 34, "bytes_received": 139264}
I (253004) WEBSOCKET: Server status: receiving
I (253009) WEBSOCKET: Server ACK: 34 chunks processed
I (253309) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 36, "bytes_received": 147456}
I (253311) WEBSOCKET: Server status: receiving
I (253315) WEBSOCKET: Server ACK: 36 chunks processed
I (253525) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 38, "bytes_received": 155648}
I (253526) WEBSOCKET: Server status: receiving
I (253531) WEBSOCKET: Server ACK: 38 chunks processed
I (253829) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 40, "bytes_received": 163840}
I (253830) WEBSOCKET: Server status: receiving
I (253835) WEBSOCKET: Server ACK: 40 chunks processed
I (254132) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 42, "bytes_received": 172032}
I (254133) WEBSOCKET: Server status: receiving
I (254138) WEBSOCKET: Server ACK: 42 chunks processed
I (254354) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 44, "bytes_received": 180224}
I (254355) WEBSOCKET: Server status: receiving
I (254359) WEBSOCKET: Server ACK: 44 chunks processed
I (254526) BUTTON: Single click confirmed
I (254530) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (254531) STATE_MGR: Single click - mode toggle requested
I (254533) STATE_MGR: User requested to end voice session (count: 18). Stopping STT and awaiting server response.
I (254544) STT: Stopping STT pipeline...
I (254549) STT: Draining ring buffer (1024 bytes pending) before shutdown...
I (254563) STT: Ring buffer drained and cleared successfully
I (254565) STT: Audio capture task stopped (captured 190464 bytes total)
I (254581) STT: Streaming task received stop signal
I (254581) STT: Sending EOS signal...
I (254581) WEBSOCKET: Sending EOS signal
I (254588) STT: Audio streaming session complete (streamed 188416 bytes in 46 chunks)
I (254595) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 46, "bytes_received": 188416}
I (254605) WEBSOCKET: Server status: receiving
I (254609) WEBSOCKET: Server ACK: 46 chunks processed
I (254619) STT: STT pipeline stopped
I (254619) LED_CTRL: LED pattern -> 4
I (254622) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (254624) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (254634) WEBSOCKET: Server status: processing
I (254647) WEBSOCKET: Server stage: transcription
I (254652) STATE_MGR: STT pipeline reported stop
I (254652) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (254664) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (254658) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (254682) LED_CTRL: LED pattern -> 1
I (255204) LED_CTRL: LED pattern -> 4
I (255205) STATE_MGR: Pipeline stage event: transcription
I (255205) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (255354) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what's the name of drug company on the chips back", "has_image": true}
I (255360) WEBSOCKET: Server status: processing
I (255365) WEBSOCKET: Server stage: llm
I (255369) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (255376) WEBSOCKET: Entering LLM stage - continuing processing indication
I (255384) STATE_MGR: Pipeline stage event: llm
I (255901) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "the name of the drug company on the chips back is balaj."}
I (255905) WEBSOCKET: Server status: processing
I (255910) WEBSOCKET: Server stage: tts
I (255915) WEBSOCKET: Pipeline stage changed: llm -> tts
I (255921) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (255928) LED_CTRL: LED pattern -> 3
I (255932) TTS: ğŸµ Starting TTS decoder...
I (255937) TTS: Initializing TTS decoder...
W (255942) TTS: TTS decoder already initialized
I (255991) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (255992) STATE_MGR: TTS playback start event received
I (255996) LED_CTRL: LED pattern -> 1
I (256000) TTS: âœ… TTS decoder started successfully
I (256007) TTS: ğŸµ TTS playback task started on Core 1
I (256010) STATE_MGR: Pipeline stage event: tts
I (256017) TTS: âœ… TTS playback task registered with watchdog
I (256024) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (256043) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 254489 ms, bytes: 4096)
I (256043) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (256052) TTS: Chunk #2 first 12 bytes: 52 49 46 46 AC DD 01 00 57 41 56 45
I (256059) TTS: New audio session detected - resetting chunk counter
I (256067) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (256074) STATE_MGR: TTS playback start event received
I (256085) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (256090) TTS: Chunk #2 first 12 bytes: 0A 00 07 00 15 00 17 00 0E 00 0D 00
I (256102) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (256106) TTS: Chunk #3 first 12 bytes: 17 F3 F1 F4 6B F6 6D F7 27 FC 8D FD
I (256119) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (256123) TTS: Chunk #4 first 12 bytes: 93 EE F4 EE FF F1 E0 F8 7D 00 98 06
I (256135) TTS: Received audio chunk #5: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (256140) TTS: Chunk #5 first 12 bytes: CA FD B5 FE 67 FD A2 FC C0 FC 90 FD
I (256151) TTS: Received audio chunk #6: 656 bytes (buffer: 20480/327680 used, 307199 free)
I (256158) TTS: âœ… WAV header parsed successfully
I (256162) TTS: === WAV File Info ===
I (256166) TTS: Sample Rate: 16000 Hz
I (256171) TTS: Channels: 1
I (256174) TTS: Bits per Sample: 16
I (256179) TTS: Received audio chunk #7: 3440 bytes (buffer: 17040/327680 used, 310639 free)
I (256192) TTS: Received audio chunk #8: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (256202) TTS: Received audio chunk #9: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (256211) TTS: Received audio chunk #10: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (256221) TTS: Received audio chunk #11: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (256228) TTS: Received audio chunk #12: 316 bytes (buffer: 36864/327680 used, 290815 free)
I (256235) TTS: Received audio chunk #13: 3780 bytes (buffer: 37180/327680 used, 290499 free)
I (256247) TTS: Received audio chunk #14: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (256257) TTS: Received audio chunk #15: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (256264) TTS: Received audio chunk #16: 976 bytes (buffer: 49152/327680 used, 278527 free)
I (256272) TTS: Received audio chunk #17: 3120 bytes (buffer: 50128/327680 used, 277551 free)
I (256284) TTS: Received audio chunk #18: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (256293) TTS: Received audio chunk #19: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (256302) TTS: Received audio chunk #20: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (256313) TTS: Received audio chunk #21: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (256322) TTS: Received audio chunk #22: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (256330) TTS: Received audio chunk #23: 1436 bytes (buffer: 73728/327680 used, 253951 free)
I (256336) TTS: Received audio chunk #24: 2660 bytes (buffer: 75164/327680 used, 252515 free)
I (256348) TTS: Received audio chunk #25: 4096 bytes (buffer: 77824/327680 used, 249855 free)
I (256358) TTS: Received audio chunk #26: 4096 bytes (buffer: 81920/327680 used, 245759 free)
I (256363) TTS: Audio Format: 1 (PCM)
I (256366) TTS: Declared Data Size: 122248 bytes
I (256374) TTS: Received audio chunk #27: 4096 bytes (buffer: 86016/327680 used, 241663 free)
I (256382) TTS: Block Align: 2
I (256389) TTS: Received audio chunk #28: 4096 bytes (buffer: 90112/327680 used, 237567 free)
I (256395) TTS: Byte Rate: 32000
I (256398) TTS: ====================
I (256405) TTS: Received audio chunk #29: 4096 bytes (buffer: 94208/327680 used, 233471 free)
I (256412) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=102400)
I (256420) TTS: Received audio chunk #30: 4096 bytes (buffer: 98304/327680 used, 229375 free)
I (256429) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (256435) TTS: Received audio chunk #31: 4096 bytes (buffer: 102400/327680 used, 225279 free)
I (256452) TTS: Received audio chunk #32: 4096 bytes (buffer: 106496/327680 used, 221183 free)
I (256468) TTS: Received audio chunk #33: 4096 bytes (buffer: 110592/327680 used, 217087 free)
I (256484) TTS: Received audio chunk #34: 3508 bytes (buffer: 110592/327680 used, 217087 free)
I (256590) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (256705) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (256705) TTS: TTS end-of-stream signaled (bytes_received=122292, header_parsed=1)
I (256711) TTS: ğŸµ Playback task will drain 110004 bytes of buffered audio
I (256718) TTS: Waiting for playback completion: 110004 bytes buffered, calculated timeout: 5437 ms
I (256729) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (256844) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (256972) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (257099) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (257227) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (257354) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (257482) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (257609) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (257737) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (257864) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (257992) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (258119) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (258247) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (258374) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (258502) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (258629) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (258757) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (258884) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (259012) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (259139) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (259267) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (259394) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (259522) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (259649) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (259777) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (259904) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (260032) TTS: âœ… All audio data received (122292 bytes, expected 122248 + 44 header)
I (260259) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (260259) TTS: ğŸµ TTS playback task exiting (played 122248 bytes, result: ESP_OK)
I (260265) TTS: âœ… TTS playback finished event dispatched to state manager
I (260311) STATE_MGR: TTS playback finished successfully
I (260311) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (260320) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (260326) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260344) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (260351) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260370) MEM_MGR: â•‘ Internal RAM:
I (260374) MEM_MGR: â•‘   Free:              90899 bytes ( 88 KB)
I (260381) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (260388) MEM_MGR: â•‘   Fragmentation:     28%
I (260393) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260412) MEM_MGR: â•‘ DMA-capable RAM:
I (260416) MEM_MGR: â•‘   Free:              70483 bytes ( 68 KB)
I (260423) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (260430) MEM_MGR: â•‘   Fragmentation:      8%
I (260435) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260453) MEM_MGR: â•‘ PSRAM:
I (260457) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (260464) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (260471) MEM_MGR: â•‘   Fragmentation:      2%
I (260476) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260495) MEM_MGR: â•‘ Total Heap:
I (260499) MEM_MGR: â•‘   Free:             3725172 bytes (3637 KB)
I (260506) MEM_MGR: â•‘   Minimum Ever:     3631084 bytes (3545 KB)
I (260513) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260531) MEM_MGR: â•‘ Memory Delta from Baseline:
I (260537) MEM_MGR: â•‘   Internal RAM:     -134280 bytes (-131 KB)
I (260544) MEM_MGR: â•‘   DMA-capable:      -134280 bytes (-131 KB)
I (260551) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (260558) MEM_MGR: â•‘   Total Heap:       -639576 bytes (-624 KB)
I (260565) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (260583) STATE_MGR: Stopping voice mode components...
I (260589) STT: Stopping STT pipeline...
W (260594) STT: STT pipeline already stopped
I (260599) TTS: TTS decoder session reset for next audio stream
I (260605) TTS: Received audio chunk #35: 0 bytes (buffer: 0/327680 used, 327679 free)
I (260614) TTS: New audio session detected - resetting chunk counter
I (260621) WEBSOCKET: ğŸµ Audio session complete: 122292 bytes in 34 messages
I (260632) WEBSOCKET: Received text message: {"status": "complete"}
I (260636) WEBSOCKET: Server status: complete
I (260641) WEBSOCKET: Pipeline stage changed: tts -> complete
I (260647) WEBSOCKET: Exiting TTS stage (transition to complete)
I (260654) TTS:   âœ“ DMA buffer freed from PSRAM
I (260659) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (260667) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (260754) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (260799) STATE_MGR: Voice pipeline reported COMPLETE
I (260799) STATE_MGR: TTS playback already drained - no pending audio
I (260801) STATE_MGR: Flushing and resetting TTS decoder for next session
I (260809) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (260817) TTS: No pending audio to flush
I (260864) TTS: TTS decoder session reset for next audio stream
I (260864) TTS: âœ… TTS decoder flushed and reset for next session
I (261067) TTS: â¹ï¸ Stopping TTS decoder...
W (261067) TTS: TTS decoder already stopped.
I (261212) STATE_MGR: Acquiring I2S mutex...
I (261212) STATE_MGR: Deinitializing audio drivers...
I (261212) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261230) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (261238) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261256) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (261263) AUDIO: âœ… RX channel disabled (took 0 ms)
I (261268) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (261275) AUDIO: âœ… TX channel disabled (took 0 ms)
I (261281) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (261337) AUDIO: [STEP 4/5] Deleting RX channel...
I (261338) AUDIO: âœ… RX channel deleted (took 0 ms)
I (261338) AUDIO: [STEP 5/5] Deleting TX channel...
I (261343) AUDIO: âœ… TX channel deleted (took 0 ms)
I (261349) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (261406) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261413) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (261420) AUDIO: â•‘ Camera Can Now Initialize
I (261425) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261493) STATE_MGR: Allowing memory stabilization (100ms)...
I (261593) STATE_MGR: Camera will be initialized on-demand during capture
I (261593) STATE_MGR: I2S mutex released
I (261594) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261613) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (261620) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261638) MEM_MGR: â•‘ Internal RAM:
I (261643) MEM_MGR: â•‘   Free:              90899 bytes ( 88 KB)
I (261649) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (261656) MEM_MGR: â•‘   Fragmentation:     28%
I (261661) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261680) MEM_MGR: â•‘ DMA-capable RAM:
I (261684) MEM_MGR: â•‘   Free:              70483 bytes ( 68 KB)
I (261691) MEM_MGR: â•‘   Largest Block:     65536 bytes ( 64 KB)
I (261698) MEM_MGR: â•‘   Fragmentation:      8%
I (261703) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261722) MEM_MGR: â•‘ PSRAM:
I (261725) MEM_MGR: â•‘   Free:             3654964 bytes (3569 KB)
I (261732) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (261739) MEM_MGR: â•‘   Fragmentation:      2%
I (261745) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261763) MEM_MGR: â•‘ Total Heap:
I (261767) MEM_MGR: â•‘   Free:             3725172 bytes (3637 KB)
I (261774) MEM_MGR: â•‘   Minimum Ever:     3631084 bytes (3545 KB)
I (261781) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261800) MEM_MGR: â•‘ Memory Delta from Baseline:
I (261805) MEM_MGR: â•‘   Internal RAM:     -134280 bytes (-131 KB)
I (261812) MEM_MGR: â•‘   DMA-capable:      -134280 bytes (-131 KB)
I (261819) MEM_MGR: â•‘   PSRAM:            -537052 bytes (-524 KB)
I (261826) MEM_MGR: â•‘   Total Heap:       -639576 bytes (-624 KB)
I (261833) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261852) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (261861) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261879) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (261886) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261904) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261922) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (261930) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (261948) AUDIO: [DIAG] Pre-init state:
I (261952) AUDIO:   Free heap: 3772200 bytes
I (261957) AUDIO:   Free internal RAM: 125767 bytes
I (261963) AUDIO:   Free DMA-capable: 105351 bytes
I (261968) AUDIO:   Free PSRAM: 3667124 bytes
I (261973) AUDIO:   Timestamp: 260419 ms
I (261978) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (261985) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (261993) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (262001) AUDIO:   DMA frame num (per desc): 1020
I (262007) AUDIO:   DMA total samples (effective): 4080
I (262013) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (262020) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (262026) AUDIO: âœ… I2S channels created (took 0 ms)
I (262032) AUDIO:   TX handle: 0x3ffcb268 | RX handle: 0x3ffcb724
I (262039) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (262045) AUDIO:   Sample rate: 16000 Hz
I (262050) AUDIO:   MCLK: DISABLED
I (262054) AUDIO:   BCLK: GPIO14 (shared)
I (262059) AUDIO:   WS:   GPIO15 (shared)
I (262063) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (262070) AUDIO: âœ… TX channel configured (took 1 ms)
I (262075) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (262082) AUDIO:   Sample rate: 16000 Hz
I (262087) AUDIO:   MCLK: DISABLED
I (262091) AUDIO:   BCLK: GPIO14 (shared)
I (262095) AUDIO:   WS:   GPIO15 (shared)
I (262100) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (262106) AUDIO: âœ… RX channel configured (took 0 ms)
I (262112) AUDIO: [STEP 4/6] Enabling TX channel...
I (262117) AUDIO: âœ… TX channel enabled (took 0 ms)
I (262123) AUDIO: [STEP 5/6] Enabling RX channel...
I (262128) AUDIO: âœ… RX channel enabled (took 0 ms)
I (262134) AUDIO: [STEP 6/6] Hardware stabilization...
I (262140) AUDIO:   Phase 1: Initial settle (50ms)
I (262195) AUDIO:   Phase 2: DMA verification
I (262195) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (262196) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (262353) AUDIO: [DIAG] Post-init state:
I (262353) AUDIO:   Free heap: 3746244 bytes
I (262354) AUDIO:   Free internal RAM: 99811 bytes
I (262357) AUDIO:   Free DMA-capable: 79395 bytes
I (262363) AUDIO:   Free PSRAM: 3667124 bytes
I (262368) AUDIO:   Timestamp: 260813 ms
I (262372) AUDIO:   Total init time: 201 ms
I (262377) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (262395) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (262401) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (262407) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (262416) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (262423) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (262441) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (262459) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (262465) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (262472) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (262479) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (262485) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (262786) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (262793) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (262801) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (262819) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (262826) AUDIO: âœ… RX channel disabled (took 0 ms)
I (262832) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (262838) AUDIO: âœ… TX channel disabled (took 0 ms)
I (262844) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (262901) AUDIO: [STEP 4/5] Deleting RX channel...
I (262902) AUDIO: âœ… RX channel deleted (took 0 ms)
I (262902) AUDIO: [STEP 5/5] Deleting TX channel...
I (262907) AUDIO: âœ… TX channel deleted (took 0 ms)
I (262913) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (262970) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (262977) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (262984) AUDIO: â•‘ Camera Can Now Initialize
I (262989) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (263007) LED_CTRL: LED pattern -> 3
I (263011) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (263029) STATE_MGR: Pipeline stage event: complete
I (274648) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (274648) STATE_MGR: Double-click detected - triggering capture sequence
I (274652) STATE_MGR: Starting camera capture sequence
I (274657) LED_CTRL: LED pattern -> 6
I (274662) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274680) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (274687) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274705) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274723) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (274730) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (274749) AUDIO: [DIAG] Pre-init state:
I (274753) AUDIO:   Free heap: 3772200 bytes
I (274758) AUDIO:   Free internal RAM: 125767 bytes
I (274764) AUDIO:   Free DMA-capable: 105351 bytes
I (274769) AUDIO:   Free PSRAM: 3667124 bytes
I (274774) AUDIO:   Timestamp: 273220 ms
I (274779) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (274786) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (274794) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (274802) AUDIO:   DMA frame num (per desc): 1020
I (274807) AUDIO:   DMA total samples (effective): 4080
I (274813) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (274820) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (274827) AUDIO: âœ… I2S channels created (took 0 ms)
I (274833) AUDIO:   TX handle: 0x3ffcb268 | RX handle: 0x3ffcb724
I (274839) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (274846) AUDIO:   Sample rate: 16000 Hz
I (274851) AUDIO:   MCLK: DISABLED
I (274855) AUDIO:   BCLK: GPIO14 (shared)
I (274859) AUDIO:   WS:   GPIO15 (shared)
I (274864) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (274871) AUDIO: âœ… TX channel configured (took 1 ms)
I (274876) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (274883) AUDIO:   Sample rate: 16000 Hz
I (274887) AUDIO:   MCLK: DISABLED
I (274891) AUDIO:   BCLK: GPIO14 (shared)
I (274896) AUDIO:   WS:   GPIO15 (shared)
I (274901) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (274907) AUDIO: âœ… RX channel configured (took 0 ms)
I (274912) AUDIO: [STEP 4/6] Enabling TX channel...
I (274918) AUDIO: âœ… TX channel enabled (took 0 ms)
I (274923) AUDIO: [STEP 5/6] Enabling RX channel...
I (274929) AUDIO: âœ… RX channel enabled (took 0 ms)
I (274935) AUDIO: [STEP 6/6] Hardware stabilization...
I (274941) AUDIO:   Phase 1: Initial settle (50ms)
I (274996) AUDIO:   Phase 2: DMA verification
I (274996) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (274997) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (275154) AUDIO: [DIAG] Post-init state:
I (275154) AUDIO:   Free heap: 3746244 bytes
I (275155) AUDIO:   Free internal RAM: 99811 bytes
I (275158) AUDIO:   Free DMA-capable: 79395 bytes
I (275164) AUDIO:   Free PSRAM: 3667124 bytes
I (275169) AUDIO:   Timestamp: 273614 ms
I (275173) AUDIO:   Total init time: 201 ms
I (275178) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (275196) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (275202) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (275208) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (275217) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (275224) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (275242) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (275260) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (275266) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (275273) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (275280) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (275286) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (275636) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (275643) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (275651) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (275669) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (275676) AUDIO: âœ… RX channel disabled (took 0 ms)
I (275682) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (275688) AUDIO: âœ… TX channel disabled (took 0 ms)
I (275694) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (275751) AUDIO: [STEP 4/5] Deleting RX channel...
I (275752) AUDIO: âœ… RX channel deleted (took 0 ms)
I (275752) AUDIO: [STEP 5/5] Deleting TX channel...
I (275757) AUDIO: âœ… TX channel deleted (took 0 ms)
I (275763) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (275820) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (275827) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (275834) AUDIO: â•‘ Camera Can Now Initialize
I (275839) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (275857) STATE_MGR: Capturing frame from camera
I (275862) CAMERA: Initializing camera...
I (276067) CAMERA: Camera sensor power cycled via PWDN pin
I (276068) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (276072) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (276081) cam_hal: cam init ok
W (276085) ledc: GPIO 0 is not usable, maybe conflict with others
I (276091) sccb-ng: pin_sda 26 pin_scl 27
I (276095) sccb-ng: sccb_i2c_port=1
I (276101) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (276143) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (276143) camera: Detected OV2640 camera
I (276143) camera: Detected camera at address=0x30
I (276224) cam_hal: PSRAM DMA mode disabled
I (276225) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (276229) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (276236) cam_hal: cam config ok
I (276240) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (276322) CAMERA: Camera initialized successfully
I (276873) STATE_MGR: Frame captured: 14706 bytes
I (276873) STATE_MGR: Uploading image using session esp32-cam-hotpin
I (276874) HTTP_CLIENT: Uploading image: session=esp32-cam-hotpin, size=14706 bytes
I (276884) HTTP_CLIENT: POST body assembled: 14963 bytes
I (276890) HTTP_CLIENT: Sending POST request to http://10.242.175.58:8000/image
I (277174) HTTP_CLIENT: HTTP POST Status = 200, content_length = 245
I (277175) HTTP_CLIENT: Image uploaded successfully
I (277176) HTTP_CLIENT: Server response: {"status":"success","message":"Image received and stored for next voice interaction","session":"esp32-cam-hotpin","filename":"image.jpg","size_bytes":14706,"saved_path":"captured_images/esp32-cam-hotpin_20251114_143855.jpg","context_ready":true}
I (277204) CAMERA: Deinitializing camera...
I (277208) CAMERA: Camera deinitialized
I (277211) STATE_MGR: Camera deinitialized - DMA memory freed
I (277218) STATE_MGR: Image uploaded successfully
I (277223) LED_CTRL: LED pattern -> 3
I (277228) STATE_MGR: Camera capture sequence complete
I (277243) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (281548) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (281548) BUTTON: Single click confirmed
I (281548) STATE_MGR: Single click - mode toggle requested
I (281555) STATE_MGR: Switching: Camera â†’ Voice (count: 19)
I (281611) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (281611) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (281625) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (281631) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (281650) MEM_MGR: â•‘ Internal RAM:
I (281654) MEM_MGR: â•‘   Free:             125767 bytes (122 KB)
I (281661) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (281668) MEM_MGR: â•‘   Fragmentation:     26%
I (281673) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (281692) MEM_MGR: â•‘ DMA-capable RAM:
I (281696) MEM_MGR: â•‘   Free:             105351 bytes (102 KB)
I (281703) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (281710) MEM_MGR: â•‘   Fragmentation:     11%
I (281715) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (281734) MEM_MGR: â•‘ PSRAM:
I (281737) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (281744) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (281751) MEM_MGR: â•‘   Fragmentation:      2%
I (281756) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (281775) MEM_MGR: â•‘ Total Heap:
I (281779) MEM_MGR: â•‘   Free:             3772200 bytes (3683 KB)
I (281786) MEM_MGR: â•‘   Minimum Ever:     3631084 bytes (3545 KB)
I (281793) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (281811) MEM_MGR: â•‘ Memory Delta from Baseline:
I (281817) MEM_MGR: â•‘   Internal RAM:      -99412 bytes ( -97 KB)
I (281824) MEM_MGR: â•‘   DMA-capable:       -99412 bytes ( -97 KB)
I (281831) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (281838) MEM_MGR: â•‘   Total Heap:       -592548 bytes (-578 KB)
I (281845) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (281863) STATE_MGR: Stopping camera...
I (281868) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (281884) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (281891) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (281907) STATE_MGR:   Timeout: 5000 ms
I (281912) STATE_MGR:   Timestamp: 280358 ms
I (281917) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (281923) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (281939) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (281946) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (281962) STATE_MGR:   Free heap before: 3771988 bytes
I (281968) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (281974) CAMERA: Deinitializing camera...
I (281979) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (281985) STATE_MGR:   Free heap after: 3771988 bytes
I (281991) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (281997) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (282013) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (282020) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (282036) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (282144) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (282244) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (282294) STATE_MGR:   âœ“ Total stabilization: 250ms
I (282294) STATE_MGR:   Timestamp: 280740 ms
I (282294) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (282310) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (282317) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (282333) STATE_MGR:   Free heap before: 3771988 bytes
I (282339) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (282357) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (282364) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (282383) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (282401) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (282408) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (282426) AUDIO: [DIAG] Pre-init state:
I (282431) AUDIO:   Free heap: 3771988 bytes
I (282436) AUDIO:   Free internal RAM: 125555 bytes
I (282441) AUDIO:   Free DMA-capable: 105139 bytes
I (282447) AUDIO:   Free PSRAM: 3667124 bytes
I (282452) AUDIO:   Timestamp: 280897 ms
I (282456) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (282463) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (282471) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (282479) AUDIO:   DMA frame num (per desc): 1020
I (282485) AUDIO:   DMA total samples (effective): 4080
I (282491) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (282498) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (282505) AUDIO: âœ… I2S channels created (took 0 ms)
I (282510) AUDIO:   TX handle: 0x3ffcb268 | RX handle: 0x3ffcb724
I (282517) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (282523) AUDIO:   Sample rate: 16000 Hz
I (282528) AUDIO:   MCLK: DISABLED
I (282532) AUDIO:   BCLK: GPIO14 (shared)
I (282537) AUDIO:   WS:   GPIO15 (shared)
I (282542) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (282549) AUDIO: âœ… TX channel configured (took 1 ms)
I (282553) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (282560) AUDIO:   Sample rate: 16000 Hz
I (282565) AUDIO:   MCLK: DISABLED
I (282569) AUDIO:   BCLK: GPIO14 (shared)
I (282574) AUDIO:   WS:   GPIO15 (shared)
I (282578) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (282584) AUDIO: âœ… RX channel configured (took 0 ms)
I (282590) AUDIO: [STEP 4/6] Enabling TX channel...
I (282595) AUDIO: âœ… TX channel enabled (took 0 ms)
I (282601) AUDIO: [STEP 5/6] Enabling RX channel...
I (282607) AUDIO: âœ… RX channel enabled (took 0 ms)
I (282612) AUDIO: [STEP 6/6] Hardware stabilization...
I (282618) AUDIO:   Phase 1: Initial settle (50ms)
I (282673) AUDIO:   Phase 2: DMA verification
I (282673) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (282674) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (282831) AUDIO: [DIAG] Post-init state:
I (282831) AUDIO:   Free heap: 3746032 bytes
I (282832) AUDIO:   Free internal RAM: 99599 bytes
I (282835) AUDIO:   Free DMA-capable: 79183 bytes
I (282841) AUDIO:   Free PSRAM: 3667124 bytes
I (282846) AUDIO:   Timestamp: 281291 ms
I (282850) AUDIO:   Total init time: 201 ms
I (282855) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (282873) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (282879) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (282885) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (282894) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (282901) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (282919) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (282937) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (282943) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (282950) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (282957) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (282963) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (282981) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (282987) STATE_MGR:   Free heap after: 3746032 bytes
I (282993) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (283009) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (283015) STATE_MGR: â•‘ Total transition time: 895 ms
I (283021) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (283037) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (283054) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (283064) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (283080) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (283088) TTS: No pending audio to flush
I (283137) TTS: TTS decoder session reset for next audio stream
I (283137) TTS: âœ… TTS decoder flushed and reset for next session
I (283139) STT: Starting STT pipeline...
I (283144) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (283153) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (283160) STT:   Current time: 281606 ms
I (283163) STT: âœ… STT pipeline started
I (283165) STT:   Free heap: 3737480 bytes
I (283169) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (283165) STT: Audio streaming session activated
I (283188) STT: Connection stabilization delay (2000ms)...
I (283374) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (283374) STT:   âœ“ Audio driver initialized
I (283375) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (283482) STT:   Total stabilization: 300ms
I (283482) STT:   Timestamp: 281927 ms
I (283482) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (283487) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe3778 (with safety padding)
I (283495) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (283508) LED_CTRL: LED pattern -> 1
I (283511) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (283516) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (283521) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (283539) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (283546) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (283553) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (283587) MEM_MGR: â•‘ Internal RAM:
I (283592) MEM_MGR: â•‘   Free:             125767 bytes (122 KB)
I (283599) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (283605) MEM_MGR: â•‘   Fragmentation:     26%
I (283611) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (283629) MEM_MGR: â•‘ DMA-capable RAM:
I (283634) MEM_MGR: â•‘   Free:             105351 bytes (102 KB)
I (283641) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (283647) MEM_MGR: â•‘   Fragmentation:     11%
I (283653) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (283671) MEM_MGR: â•‘ PSRAM:
I (283675) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (283682) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (283689) MEM_MGR: â•‘   Fragmentation:      2%
I (283694) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (283712) MEM_MGR: â•‘ Total Heap:
I (283717) MEM_MGR: â•‘   Free:             3772200 bytes (3683 KB)
I (283724) MEM_MGR: â•‘   Minimum Ever:     3631084 bytes (3545 KB)
I (283731) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (283749) MEM_MGR: â•‘ Memory Delta from Baseline:
I (283755) MEM_MGR: â•‘   Internal RAM:      -99412 bytes ( -97 KB)
I (283762) MEM_MGR: â•‘   DMA-capable:       -99412 bytes ( -97 KB)
I (283768) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (283775) MEM_MGR: â•‘   Total Heap:       -592548 bytes (-578 KB)
I (283782) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (283801) STATE_MGR: âœ… Voice mode transition complete
I (283807) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (283823) STATE_MGR: STT pipeline reported start
I (285195) STT: Starting audio streaming to server...
I (285264) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 2, "bytes_received": 8192}
I (285265) WEBSOCKET: Server status: receiving
I (285269) WEBSOCKET: Server ACK: 2 chunks processed
I (285324) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 4, "bytes_received": 16384}
I (285325) WEBSOCKET: Server status: receiving
I (285330) WEBSOCKET: Server ACK: 4 chunks processed
I (285386) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 6, "bytes_received": 24576}
I (285387) WEBSOCKET: Server status: receiving
I (285392) WEBSOCKET: Server ACK: 6 chunks processed
I (285444) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 8, "bytes_received": 32768}
I (285445) WEBSOCKET: Server status: receiving
I (285450) WEBSOCKET: Server ACK: 8 chunks processed
I (285508) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 10, "bytes_received": 40960}
I (285508) WEBSOCKET: Server status: receiving
I (285513) WEBSOCKET: Server ACK: 10 chunks processed
I (285577) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 12, "bytes_received": 49152}
I (285578) WEBSOCKET: Server status: receiving
I (285583) WEBSOCKET: Server ACK: 12 chunks processed
I (285679) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 14, "bytes_received": 57344}
I (285680) WEBSOCKET: Server status: receiving
W (285683) STT: Waiting for server ACK (sent: 14, acked: 12, unack: 2)
I (285685) STT: Flow control: ACK received, resuming (sent=14, acked=14)
I (285692) STT: ACK received, resuming (unack now: 0)
I (285700) WEBSOCKET: Server ACK: 14 chunks processed
W (285762) STT: Waiting for server ACK (sent: 16, acked: 14, unack: 2)
I (285802) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 16, "bytes_received": 65536}
I (285803) WEBSOCKET: Server status: receiving
I (285808) STT: Flow control: ACK received, resuming (sent=16, acked=16)
I (285813) STT: ACK received, resuming (unack now: 0)
I (285815) WEBSOCKET: Server ACK: 16 chunks processed
I (285877) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 18, "bytes_received": 73728}
I (285878) WEBSOCKET: Server status: receiving
I (285883) WEBSOCKET: Server ACK: 18 chunks processed
I (285922) STT: [CAPTURE] âœ… Alive... 1500 reads completed (Free Heap: 3733204 bytes)
I (286082) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 20, "bytes_received": 81920}
I (286083) WEBSOCKET: Server status: receiving
I (286088) WEBSOCKET: Server ACK: 20 chunks processed
I (286339) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 22, "bytes_received": 90112}
I (286340) WEBSOCKET: Server status: receiving
I (286345) WEBSOCKET: Server ACK: 22 chunks processed
I (286607) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 24, "bytes_received": 98304}
I (286607) WEBSOCKET: Server status: receiving
I (286612) WEBSOCKET: Server ACK: 24 chunks processed
I (286844) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 26, "bytes_received": 106496}
I (286845) WEBSOCKET: Server status: receiving
I (286849) WEBSOCKET: Server ACK: 26 chunks processed
I (287079) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 28, "bytes_received": 114688}
I (287079) WEBSOCKET: Server status: receiving
I (287084) WEBSOCKET: Server ACK: 28 chunks processed
I (287376) WEBSOCKET: Received text message: {"status": "receiving", "chunks_received": 30, "bytes_received": 122880}
I (287377) WEBSOCKET: Server status: receiving
I (287382) WEBSOCKET: Server ACK: 30 chunks processed
I (287434) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (287434) BUTTON: Single click confirmed
I (287434) STATE_MGR: Single click - mode toggle requested
I (287441) STATE_MGR: User requested to end voice session (count: 20). Stopping STT and awaiting server response.
I (287452) STT: Stopping STT pipeline...
I (287456) STT: Draining ring buffer (3072 bytes pending) before shutdown...
I (287471) STT: Ring buffer drained and cleared successfully
I (287479) STT: Capture stopped and ring buffer drained; ending streaming loop
I (287480) STT: Sending EOS signal...
I (287483) WEBSOCKET: Sending EOS signal
I (287491) STT: Audio streaming session complete (streamed 126976 bytes in 31 chunks)
I (287516) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (287516) WEBSOCKET: Server status: processing
I (287517) STT: Audio capture task stopped (captured 131072 bytes total)
I (287519) WEBSOCKET: Server stage: transcription
I (287534) WEBSOCKET: Pipeline stage changed: complete -> transcription
I (287539) WEBSOCKET: Entering TRANSCRIPTION stage - playing processing feedback
I (287534) STT: STT pipeline stopped
I (287552) LED_CTRL: LED pattern -> 4
I (287556) STATE_MGR: Remaining in VOICE_ACTIVE state until server response completes.
I (287575) STATE_MGR: STT pipeline reported stop
I (287575) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (287579) LED_CTRL: LED pattern -> 1
I (288030) LED_CTRL: LED pattern -> 4
I (288033) STATE_MGR: Pipeline stage event: transcription
I (288033) STATE_MGR: âœ… Server transcription started (vulnerability window closed)
I (288039) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "what's that in my hand", "has_image": true}
I (288052) WEBSOCKET: Server status: processing
I (288057) WEBSOCKET: Server stage: llm
I (288062) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (288068) WEBSOCKET: Entering LLM stage - continuing processing indication
I (288076) STATE_MGR: Pipeline stage event: llm
I (288537) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "you're holding a mcdonalds cup."}
I (288539) WEBSOCKET: Server status: processing
I (288544) WEBSOCKET: Server stage: tts
I (288548) WEBSOCKET: Pipeline stage changed: llm -> tts
I (288554) WEBSOCKET: Entering TTS stage - preparing for audio streaming
I (288562) LED_CTRL: LED pattern -> 3
I (288566) TTS: ğŸµ Starting TTS decoder...
I (288571) TTS: Initializing TTS decoder...
W (288576) TTS: TTS decoder already initialized
I (288624) TTS: [CORE AFFINITY] Creating TTS playback task on Core 1 (APP_CPU) with safety measures
I (288624) STATE_MGR: TTS playback start event received
I (288628) LED_CTRL: LED pattern -> 1
I (288633) TTS: âœ… TTS decoder started successfully
I (288639) TTS: ğŸµ TTS playback task started on Core 1
I (288643) STATE_MGR: Pipeline stage event: tts
I (288649) TTS: âœ… TTS playback task registered with watchdog
I (288656) TTS:   âœ“ DMA buffer allocated in PSRAM at 0x3f880b50 (4096 bytes)
I (288663) WEBSOCKET: ğŸ™ï¸ New audio session started (timestamp: 287108 ms, bytes: 4096)
I (288673) TTS: Received audio chunk #2: 4096 bytes (buffer: 0/327680 used, 327679 free)
I (288682) TTS: Chunk #2 first 12 bytes: 52 49 46 46 B6 4B 01 00 57 41 56 45
I (288689) TTS: New audio session detected - resetting chunk counter
I (288697) TTS: ğŸ™ï¸ First real audio data received for session (4096 bytes)
I (288704) STATE_MGR: TTS playback start event received
I (288715) TTS: Received audio chunk #2: 4096 bytes (buffer: 4096/327680 used, 323583 free)
I (288719) TTS: Chunk #2 first 12 bytes: B6 FF BF FF B1 FF B7 FF C9 FF 2C 00
I (288732) TTS: Received audio chunk #3: 4096 bytes (buffer: 8192/327680 used, 319487 free)
I (288736) TTS: Chunk #3 first 12 bytes: 1E 29 45 34 91 42 00 4D BD 55 05 5C
I (288748) TTS: Received audio chunk #4: 4096 bytes (buffer: 12288/327680 used, 315391 free)
I (288753) TTS: Chunk #4 first 12 bytes: 3F 00 98 FE 15 FD 15 FB C5 F9 15 F9
I (288765) TTS: Received audio chunk #5: 4096 bytes (buffer: 16384/327680 used, 311295 free)
I (288770) TTS: Chunk #5 first 12 bytes: 81 2F D1 3A 59 45 CE 4A D0 4B DD 47
I (288783) TTS: Received audio chunk #6: 4096 bytes (buffer: 20480/327680 used, 307199 free)
I (288792) TTS: Received audio chunk #7: 4096 bytes (buffer: 24576/327680 used, 303103 free)
I (288801) TTS: Received audio chunk #8: 4096 bytes (buffer: 28672/327680 used, 299007 free)
I (288810) TTS: Received audio chunk #9: 4096 bytes (buffer: 32768/327680 used, 294911 free)
I (288820) TTS: Received audio chunk #10: 4096 bytes (buffer: 36864/327680 used, 290815 free)
I (288829) TTS: Received audio chunk #11: 4096 bytes (buffer: 40960/327680 used, 286719 free)
I (288841) TTS: Received audio chunk #12: 4096 bytes (buffer: 45056/327680 used, 282623 free)
I (288847) TTS: Received audio chunk #13: 1436 bytes (buffer: 49152/327680 used, 278527 free)
I (288853) TTS: Received audio chunk #14: 2660 bytes (buffer: 50588/327680 used, 277091 free)
I (288865) TTS: Received audio chunk #15: 4096 bytes (buffer: 53248/327680 used, 274431 free)
I (288874) TTS: Received audio chunk #16: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (288880) TTS: âœ… WAV header parsed successfully
I (288887) TTS: Received audio chunk #17: 4096 bytes (buffer: 57344/327680 used, 270335 free)
I (288894) TTS: === WAV File Info ===
I (288897) TTS: Sample Rate: 16000 Hz
I (288903) TTS: Received audio chunk #18: 4096 bytes (buffer: 61440/327680 used, 266239 free)
I (288912) TTS: Channels: 1
I (288914) TTS: Bits per Sample: 16
I (288918) TTS: Audio Format: 1 (PCM)
I (288923) TTS: Declared Data Size: 84882 bytes
I (288928) TTS: Block Align: 2
I (288932) TTS: Byte Rate: 32000
I (288936) TTS: ====================
I (288940) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=69632)
I (288948) TTS: Received audio chunk #19: 4096 bytes (buffer: 65536/327680 used, 262143 free)
I (288962) TTS: Received audio chunk #20: 4096 bytes (buffer: 69632/327680 used, 258047 free)
I (288972) TTS: Received audio chunk #21: 4096 bytes (buffer: 73728/327680 used, 253951 free)
I (288979) TTS: Received audio chunk #22: 656 bytes (buffer: 77824/327680 used, 249855 free)
I (288987) TTS: Received audio chunk #23: 2350 bytes (buffer: 78480/327680 used, 249199 free)
I (288995) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block) in PSRAM
I (289005) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (289096) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (289186) WEBSOCKET: âœ… Received end-of-audio signal (zero-length binary frame)
I (289187) TTS: TTS end-of-stream signaled (bytes_received=84926, header_parsed=1)
I (289192) TTS: ğŸµ Playback task will drain 72638 bytes of buffered audio
I (289199) TTS: Waiting for playback completion: 72638 bytes buffered, calculated timeout: 4269 ms
I (289224) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (289351) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (289479) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (289606) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (289734) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (289861) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (289989) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (290116) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (290244) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (290371) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (290499) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (290626) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (290754) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (290881) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (291009) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (291136) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (291264) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (291391) TTS: âœ… All audio data received (84926 bytes, expected 84882 + 44 header)
I (291555) TTS: EOS requested and stream buffer is empty. Exiting playback task.
I (291555) TTS: ğŸµ TTS playback task exiting (played 84882 bytes, result: ESP_OK)
I (291602) TTS: TTS decoder session reset for next audio stream
I (291603) TTS: Received audio chunk #24: 0 bytes (buffer: 0/327680 used, 327679 free)
I (291608) TTS: New audio session detected - resetting chunk counter
I (291615) WEBSOCKET: ğŸµ Audio session complete: 84926 bytes in 23 messages
I (291626) WEBSOCKET: Received text message: {"status": "complete"}
I (291630) WEBSOCKET: Server status: complete
I (291635) WEBSOCKET: Pipeline stage changed: tts -> complete
I (291641) WEBSOCKET: Exiting TTS stage (transition to complete)
I (291648) STATE_MGR: TTS playback finished successfully
I (291654) STATE_MGR: Playback finished and user requested stop. Transitioning to Camera Mode now.
I (291663) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (291669) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291688) MEM_MGR: â•‘ Memory Statistics - Before Camera Transition
I (291695) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291713) MEM_MGR: â•‘ Internal RAM:
I (291718) MEM_MGR: â•‘   Free:              86771 bytes ( 84 KB)
I (291724) MEM_MGR: â•‘   Largest Block:     59392 bytes ( 58 KB)
I (291731) MEM_MGR: â•‘   Fragmentation:     32%
I (291737) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291755) MEM_MGR: â•‘ DMA-capable RAM:
I (291760) MEM_MGR: â•‘   Free:              66355 bytes ( 64 KB)
I (291766) MEM_MGR: â•‘   Largest Block:     59392 bytes ( 58 KB)
I (291773) MEM_MGR: â•‘   Fragmentation:     11%
I (291778) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291797) MEM_MGR: â•‘ PSRAM:
I (291801) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (291808) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (291815) MEM_MGR: â•‘   Fragmentation:      2%
I (291820) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291838) MEM_MGR: â•‘ Total Heap:
I (291843) MEM_MGR: â•‘   Free:             3733204 bytes (3645 KB)
I (291849) MEM_MGR: â•‘   Minimum Ever:     3631084 bytes (3545 KB)
I (291856) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291875) MEM_MGR: â•‘ Memory Delta from Baseline:
I (291880) MEM_MGR: â•‘   Internal RAM:     -138408 bytes (-135 KB)
I (291887) MEM_MGR: â•‘   DMA-capable:      -138408 bytes (-135 KB)
I (291894) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (291901) MEM_MGR: â•‘   Total Heap:       -631544 bytes (-616 KB)
I (291908) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (291927) STATE_MGR: Stopping voice mode components...
I (291933) STT: Stopping STT pipeline...
W (291937) STT: STT pipeline already stopped
I (291942) WEBSOCKET: Pipeline complete - checking system state for LED restore
I (291951) TTS: âœ… TTS playback finished event dispatched to state manager
I (291958) TTS:   âœ“ DMA buffer freed from PSRAM
I (291963) TTS:   âœ“ Freeing stereo scratch buffer (8192 bytes) on task exit
I (291971) TTS:   âœ“ Watchdog unregistered, handle cleared, flags set
I (291992) STATE_MGR: Voice pipeline reported COMPLETE
I (291992) STATE_MGR: TTS playback already drained - no pending audio
I (291994) STATE_MGR: Flushing and resetting TTS decoder for next session
I (292002) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (292009) TTS: No pending audio to flush
I (292057) TTS: TTS decoder session reset for next audio stream
I (292057) TTS: âœ… TTS decoder flushed and reset for next session
I (292260) TTS: â¹ï¸ Stopping TTS decoder...
W (292260) TTS: TTS decoder already stopped.
I (292404) STATE_MGR: Acquiring I2S mutex...
I (292404) STATE_MGR: Deinitializing audio drivers...
I (292404) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292422) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (292430) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292448) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (292455) AUDIO: âœ… RX channel disabled (took 0 ms)
I (292460) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (292467) AUDIO: âœ… TX channel disabled (took 0 ms)
I (292473) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (292529) AUDIO: [STEP 4/5] Deleting RX channel...
I (292530) AUDIO: âœ… RX channel deleted (took 0 ms)
I (292530) AUDIO: [STEP 5/5] Deleting TX channel...
I (292535) AUDIO: âœ… TX channel deleted (took 0 ms)
I (292541) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (292598) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292605) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (292612) AUDIO: â•‘ Camera Can Now Initialize
I (292617) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292685) STATE_MGR: Allowing memory stabilization (100ms)...
I (292785) STATE_MGR: Camera will be initialized on-demand during capture
I (292785) STATE_MGR: I2S mutex released
I (292786) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292805) MEM_MGR: â•‘ Memory Statistics - After Camera Transition
I (292812) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292830) MEM_MGR: â•‘ Internal RAM:
I (292835) MEM_MGR: â•‘   Free:              86771 bytes ( 84 KB)
I (292841) MEM_MGR: â•‘   Largest Block:     59392 bytes ( 58 KB)
I (292848) MEM_MGR: â•‘   Fragmentation:     32%
I (292853) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292872) MEM_MGR: â•‘ DMA-capable RAM:
I (292876) MEM_MGR: â•‘   Free:              66355 bytes ( 64 KB)
I (292883) MEM_MGR: â•‘   Largest Block:     59392 bytes ( 58 KB)
I (292890) MEM_MGR: â•‘   Fragmentation:     11%
I (292895) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292914) MEM_MGR: â•‘ PSRAM:
I (292917) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (292924) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (292931) MEM_MGR: â•‘   Fragmentation:      2%
I (292937) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292955) MEM_MGR: â•‘ Total Heap:
I (292959) MEM_MGR: â•‘   Free:             3733204 bytes (3645 KB)
I (292966) MEM_MGR: â•‘   Minimum Ever:     3631084 bytes (3545 KB)
I (292973) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (292992) MEM_MGR: â•‘ Memory Delta from Baseline:
I (292997) MEM_MGR: â•‘   Internal RAM:     -138408 bytes (-135 KB)
I (293004) MEM_MGR: â•‘   DMA-capable:      -138408 bytes (-135 KB)
I (293011) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (293018) MEM_MGR: â•‘   Total Heap:       -631544 bytes (-616 KB)
I (293025) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293044) STATE_MGR: âœ… Camera mode transition complete (camera deinitialized to conserve DMA)
I (293053) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293071) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (293078) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293096) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293114) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (293122) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293140) AUDIO: [DIAG] Pre-init state:
I (293144) AUDIO:   Free heap: 3771988 bytes
I (293149) AUDIO:   Free internal RAM: 125555 bytes
I (293155) AUDIO:   Free DMA-capable: 105139 bytes
I (293160) AUDIO:   Free PSRAM: 3667124 bytes
I (293165) AUDIO:   Timestamp: 291611 ms
I (293170) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (293177) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (293185) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (293193) AUDIO:   DMA frame num (per desc): 1020
I (293199) AUDIO:   DMA total samples (effective): 4080
I (293205) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (293212) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (293218) AUDIO: âœ… I2S channels created (took 0 ms)
I (293224) AUDIO:   TX handle: 0x3ffcb268 | RX handle: 0x3ffcb724
I (293231) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (293237) AUDIO:   Sample rate: 16000 Hz
I (293242) AUDIO:   MCLK: DISABLED
I (293246) AUDIO:   BCLK: GPIO14 (shared)
I (293251) AUDIO:   WS:   GPIO15 (shared)
I (293255) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (293262) AUDIO: âœ… TX channel configured (took 1 ms)
I (293267) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (293274) AUDIO:   Sample rate: 16000 Hz
I (293279) AUDIO:   MCLK: DISABLED
I (293283) AUDIO:   BCLK: GPIO14 (shared)
I (293287) AUDIO:   WS:   GPIO15 (shared)
I (293292) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (293298) AUDIO: âœ… RX channel configured (took 0 ms)
I (293304) AUDIO: [STEP 4/6] Enabling TX channel...
I (293309) AUDIO: âœ… TX channel enabled (took 0 ms)
I (293315) AUDIO: [STEP 5/6] Enabling RX channel...
I (293320) AUDIO: âœ… RX channel enabled (took 0 ms)
I (293326) AUDIO: [STEP 6/6] Hardware stabilization...
I (293332) AUDIO:   Phase 1: Initial settle (50ms)
I (293387) AUDIO:   Phase 2: DMA verification
I (293387) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (293388) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (293545) AUDIO: [DIAG] Post-init state:
I (293545) AUDIO:   Free heap: 3746032 bytes
I (293546) AUDIO:   Free internal RAM: 99599 bytes
I (293549) AUDIO:   Free DMA-capable: 79183 bytes
I (293555) AUDIO:   Free PSRAM: 3667124 bytes
I (293560) AUDIO:   Timestamp: 292005 ms
I (293564) AUDIO:   Total init time: 201 ms
I (293569) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293587) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (293593) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (293599) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (293608) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (293615) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293633) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293651) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (293657) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (293664) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (293671) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (293677) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293978) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (293986) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (293993) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (294011) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (294018) AUDIO: âœ… RX channel disabled (took 0 ms)
I (294024) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (294031) AUDIO: âœ… TX channel disabled (took 0 ms)
I (294036) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (294093) AUDIO: [STEP 4/5] Deleting RX channel...
I (294094) AUDIO: âœ… RX channel deleted (took 0 ms)
I (294094) AUDIO: [STEP 5/5] Deleting TX channel...
I (294099) AUDIO: âœ… TX channel deleted (took 0 ms)
I (294105) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (294162) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (294169) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (294176) AUDIO: â•‘ Camera Can Now Initialize
I (294181) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (294199) LED_CTRL: LED pattern -> 3
I (294203) STATE_MGR: âœ… Entered CAMERA_STANDBY state after conversation.
I (294221) STATE_MGR: Pipeline stage event: complete
I (321791) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (321791) STATE_MGR: Double-click detected - triggering capture sequence
I (321795) STATE_MGR: Starting camera capture sequence
I (321800) LED_CTRL: LED pattern -> 6
I (321805) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (321823) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (321830) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (321848) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (321866) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (321873) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (321892) AUDIO: [DIAG] Pre-init state:
I (321896) AUDIO:   Free heap: 3772200 bytes
I (321901) AUDIO:   Free internal RAM: 125767 bytes
I (321907) AUDIO:   Free DMA-capable: 105351 bytes
I (321912) AUDIO:   Free PSRAM: 3667124 bytes
I (321917) AUDIO:   Timestamp: 320363 ms
I (321922) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (321929) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (321937) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (321945) AUDIO:   DMA frame num (per desc): 1020
I (321950) AUDIO:   DMA total samples (effective): 4080
I (321956) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (321963) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (321970) AUDIO: âœ… I2S channels created (took 0 ms)
I (321976) AUDIO:   TX handle: 0x3ffcb4bc | RX handle: 0x3ffcb664
I (321982) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (321989) AUDIO:   Sample rate: 16000 Hz
I (321994) AUDIO:   MCLK: DISABLED
I (321998) AUDIO:   BCLK: GPIO14 (shared)
I (322002) AUDIO:   WS:   GPIO15 (shared)
I (322007) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (322014) AUDIO: âœ… TX channel configured (took 1 ms)
I (322019) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (322026) AUDIO:   Sample rate: 16000 Hz
I (322030) AUDIO:   MCLK: DISABLED
I (322034) AUDIO:   BCLK: GPIO14 (shared)
I (322039) AUDIO:   WS:   GPIO15 (shared)
I (322044) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (322050) AUDIO: âœ… RX channel configured (took 0 ms)
I (322055) AUDIO: [STEP 4/6] Enabling TX channel...
I (322061) AUDIO: âœ… TX channel enabled (took 0 ms)
I (322067) AUDIO: [STEP 5/6] Enabling RX channel...
I (322072) AUDIO: âœ… RX channel enabled (took 0 ms)
I (322078) AUDIO: [STEP 6/6] Hardware stabilization...
I (322084) AUDIO:   Phase 1: Initial settle (50ms)
I (322139) AUDIO:   Phase 2: DMA verification
I (322139) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (322140) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (322297) AUDIO: [DIAG] Post-init state:
I (322297) AUDIO:   Free heap: 3746240 bytes
I (322298) AUDIO:   Free internal RAM: 99807 bytes
I (322301) AUDIO:   Free DMA-capable: 79391 bytes
I (322307) AUDIO:   Free PSRAM: 3667124 bytes
I (322312) AUDIO:   Timestamp: 320757 ms
I (322316) AUDIO:   Total init time: 201 ms
I (322321) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (322339) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (322345) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (322351) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (322360) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (322367) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (322385) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (322403) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (322409) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (322416) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (322423) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (322429) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (322779) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (322786) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (322794) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (322812) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (322819) AUDIO: âœ… RX channel disabled (took 0 ms)
I (322825) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (322831) AUDIO: âœ… TX channel disabled (took 0 ms)
I (322837) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (322894) AUDIO: [STEP 4/5] Deleting RX channel...
I (322895) AUDIO: âœ… RX channel deleted (took 0 ms)
I (322895) AUDIO: [STEP 5/5] Deleting TX channel...
I (322900) AUDIO: âœ… TX channel deleted (took 0 ms)
I (322906) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (322963) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (322970) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (322977) AUDIO: â•‘ Camera Can Now Initialize
I (322982) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (323000) STATE_MGR: Capturing frame from camera
I (323005) CAMERA: Initializing camera...
I (323210) CAMERA: Camera sensor power cycled via PWDN pin
I (323211) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (323215) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (323224) cam_hal: cam init ok
W (323228) ledc: GPIO 0 is not usable, maybe conflict with others
I (323234) sccb-ng: pin_sda 26 pin_scl 27
I (323239) sccb-ng: sccb_i2c_port=1
I (323244) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (323286) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (323286) camera: Detected OV2640 camera
I (323286) camera: Detected camera at address=0x30
I (323368) cam_hal: PSRAM DMA mode disabled
I (323368) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (323373) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (323380) cam_hal: cam config ok
I (323383) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (323466) CAMERA: Camera initialized successfully
I (324016) STATE_MGR: Frame captured: 14303 bytes
I (324016) STATE_MGR: Uploading image using session esp32-cam-hotpin
I (324018) HTTP_CLIENT: Uploading image: session=esp32-cam-hotpin, size=14303 bytes
I (324028) HTTP_CLIENT: POST body assembled: 14560 bytes
I (324034) HTTP_CLIENT: Sending POST request to http://10.242.175.58:8000/image
I (324435) HTTP_CLIENT: HTTP POST Status = 200, content_length = 245
I (324436) HTTP_CLIENT: Image uploaded successfully
I (324437) HTTP_CLIENT: Server response: {"status":"success","message":"Image received and stored for next voice interaction","session":"esp32-cam-hotpin","filename":"image.jpg","size_bytes":14303,"saved_path":"captured_images/esp32-cam-hotpin_20251114_143942.jpg","context_ready":true}
I (324465) CAMERA: Deinitializing camera...
I (324469) CAMERA: Camera deinitialized
I (324472) STATE_MGR: Camera deinitialized - DMA memory freed
I (324479) STATE_MGR: Image uploaded successfully
I (324484) LED_CTRL: LED pattern -> 3
I (324489) STATE_MGR: Camera capture sequence complete
I (324504) STATE_MGR: Capture complete event: success=1 (ESP_OK)
I (344505) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (344505) BUTTON: Single click confirmed
I (344505) STATE_MGR: Single click - mode toggle requested
I (344512) STATE_MGR: Switching: Camera â†’ Voice (count: 21)
I (344568) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (344568) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (344581) MEM_MGR: â•‘ Memory Statistics - Before Voice Transition
I (344588) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (344607) MEM_MGR: â•‘ Internal RAM:
I (344611) MEM_MGR: â•‘   Free:             125767 bytes (122 KB)
I (344618) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (344625) MEM_MGR: â•‘   Fragmentation:     26%
I (344630) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (344649) MEM_MGR: â•‘ DMA-capable RAM:
I (344653) MEM_MGR: â•‘   Free:             105351 bytes (102 KB)
I (344660) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (344667) MEM_MGR: â•‘   Fragmentation:     11%
I (344672) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (344691) MEM_MGR: â•‘ PSRAM:
I (344694) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (344701) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (344708) MEM_MGR: â•‘   Fragmentation:      2%
I (344713) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (344732) MEM_MGR: â•‘ Total Heap:
I (344736) MEM_MGR: â•‘   Free:             3772200 bytes (3683 KB)
I (344743) MEM_MGR: â•‘   Minimum Ever:     3631084 bytes (3545 KB)
I (344750) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (344768) MEM_MGR: â•‘ Memory Delta from Baseline:
I (344774) MEM_MGR: â•‘   Internal RAM:      -99412 bytes ( -97 KB)
I (344781) MEM_MGR: â•‘   DMA-capable:       -99412 bytes ( -97 KB)
I (344788) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (344795) MEM_MGR: â•‘   Total Heap:       -592548 bytes (-578 KB)
I (344802) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (344820) STATE_MGR: Stopping camera...
I (344825) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (344841) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (344848) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (344864) STATE_MGR:   Timeout: 5000 ms
I (344869) STATE_MGR:   Timestamp: 343315 ms
I (344874) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (344880) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (344896) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (344903) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (344919) STATE_MGR:   Free heap before: 3772200 bytes
I (344925) STATE_MGR:   Free PSRAM before: 3667124 bytes
I (344931) CAMERA: Deinitializing camera...
I (344936) STATE_MGR:   âœ“ Camera deinitialized (took 4 ms)
I (344942) STATE_MGR:   Free heap after: 3772200 bytes
I (344948) STATE_MGR:   Free PSRAM after: 3667124 bytes
I (344954) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (344970) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (344977) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (344993) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (345101) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (345201) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (345251) STATE_MGR:   âœ“ Total stabilization: 250ms
I (345251) STATE_MGR:   Timestamp: 343697 ms
I (345251) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (345267) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (345274) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (345290) STATE_MGR:   Free heap before: 3772200 bytes
I (345296) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (345314) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (345321) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (345340) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (345358) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (345365) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (345383) AUDIO: [DIAG] Pre-init state:
I (345388) AUDIO:   Free heap: 3772200 bytes
I (345393) AUDIO:   Free internal RAM: 125767 bytes
I (345398) AUDIO:   Free DMA-capable: 105351 bytes
I (345404) AUDIO:   Free PSRAM: 3667124 bytes
I (345409) AUDIO:   Timestamp: 343854 ms
I (345413) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (345420) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (345428) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (345436) AUDIO:   DMA frame num (per desc): 1020
I (345442) AUDIO:   DMA total samples (effective): 4080
I (345448) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (345455) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (345462) AUDIO: âœ… I2S channels created (took 0 ms)
I (345467) AUDIO:   TX handle: 0x3ffcb4bc | RX handle: 0x3ffcb664
I (345474) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (345480) AUDIO:   Sample rate: 16000 Hz
I (345485) AUDIO:   MCLK: DISABLED
I (345489) AUDIO:   BCLK: GPIO14 (shared)
I (345494) AUDIO:   WS:   GPIO15 (shared)
I (345499) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (345506) AUDIO: âœ… TX channel configured (took 1 ms)
I (345510) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (345517) AUDIO:   Sample rate: 16000 Hz
I (345522) AUDIO:   MCLK: DISABLED
I (345526) AUDIO:   BCLK: GPIO14 (shared)
I (345531) AUDIO:   WS:   GPIO15 (shared)
I (345535) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (345541) AUDIO: âœ… RX channel configured (took 0 ms)
I (345547) AUDIO: [STEP 4/6] Enabling TX channel...
I (345552) AUDIO: âœ… TX channel enabled (took 0 ms)
I (345558) AUDIO: [STEP 5/6] Enabling RX channel...
I (345564) AUDIO: âœ… RX channel enabled (took 0 ms)
I (345569) AUDIO: [STEP 6/6] Hardware stabilization...
I (345575) AUDIO:   Phase 1: Initial settle (50ms)
I (345630) AUDIO:   Phase 2: DMA verification
I (345630) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (345631) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (345788) AUDIO: [DIAG] Post-init state:
I (345788) AUDIO:   Free heap: 3746240 bytes
I (345789) AUDIO:   Free internal RAM: 99807 bytes
I (345792) AUDIO:   Free DMA-capable: 79391 bytes
I (345798) AUDIO:   Free PSRAM: 3667124 bytes
I (345803) AUDIO:   Timestamp: 344248 ms
I (345807) AUDIO:   Total init time: 201 ms
I (345812) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (345830) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (345836) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (345842) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (345851) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (345858) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (345876) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (345894) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (345900) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (345907) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (345914) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (345920) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (345938) STATE_MGR:   âœ“ Audio initialized (took 641 ms)
I (345944) STATE_MGR:   Free heap after: 3746240 bytes
I (345950) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (345966) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (345972) STATE_MGR: â•‘ Total transition time: 895 ms
I (345978) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (345994) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (346011) STATE_MGR: â•‘ STEP 6: Starting STT pipeline (TTS will start when server begins responding)
I (346021) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (346037) TTS: ğŸ”„ Flushing and resetting TTS decoder for session transition
I (346045) TTS: No pending audio to flush
I (346094) TTS: TTS decoder session reset for next audio stream
I (346094) TTS: âœ… TTS decoder flushed and reset for next session
I (346096) STT: Starting STT pipeline...
I (346101) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (346110) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (346117) STT:   Current time: 344563 ms
I (346120) STT: âœ… STT pipeline started
I (346122) STT:   Free heap: 3737688 bytes
I (346126) STATE_MGR: TTS decoder will start automatically when server begins TTS streaming
I (346122) STT: Audio streaming session activated
I (346145) STT: Connection stabilization delay (2000ms)...
I (346331) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (346331) STT:   âœ“ Audio driver initialized
I (346332) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (346439) STT:   Total stabilization: 300ms
I (346439) STT:   Timestamp: 344884 ms
I (346439) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (346444) STT:   âœ“ DMA-capable buffer allocated at 0x3ffe3778 (with safety padding)
I (346452) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (346465) LED_CTRL: LED pattern -> 1
I (346468) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (346473) MEM_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (346478) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (346496) MEM_MGR: â•‘ Memory Statistics - After Voice Transition
I (346503) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (346510) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (346544) MEM_MGR: â•‘ Internal RAM:
I (346549) MEM_MGR: â•‘   Free:             125767 bytes (122 KB)
I (346556) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (346562) MEM_MGR: â•‘   Fragmentation:     26%
I (346568) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (346586) MEM_MGR: â•‘ DMA-capable RAM:
I (346591) MEM_MGR: â•‘   Free:             105351 bytes (102 KB)
I (346597) MEM_MGR: â•‘   Largest Block:     94208 bytes ( 92 KB)
I (346604) MEM_MGR: â•‘   Fragmentation:     11%
I (346610) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (346628) MEM_MGR: â•‘ PSRAM:
I (346632) MEM_MGR: â•‘   Free:             3667124 bytes (3581 KB)
I (346639) MEM_MGR: â•‘   Largest Block:    3604480 bytes (3520 KB)
I (346646) MEM_MGR: â•‘   Fragmentation:      2%
I (346651) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (346669) MEM_MGR: â•‘ Total Heap:
I (346674) MEM_MGR: â•‘   Free:             3772200 bytes (3683 KB)
I (346681) MEM_MGR: â•‘   Minimum Ever:     3631084 bytes (3545 KB)
I (346688) MEM_MGR: â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (346706) MEM_MGR: â•‘ Memory Delta from Baseline:
I (346712) MEM_MGR: â•‘   Internal RAM:      -99412 bytes ( -97 KB)
I (346719) MEM_MGR: â•‘   DMA-capable:       -99412 bytes ( -97 KB)
I (346725) MEM_MGR: â•‘   PSRAM:            -524892 bytes (-512 KB)
I (346732) MEM_MGR: â•‘   Total Heap:       -592548 bytes (-578 KB)
I (346739) MEM_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (346758) STATE_MGR: âœ… Voice mode transition complete
I (346764) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (346779) STATE_MGR: STT pipeline reported start
I (348152) STT: Starting audio streaming to server...
E (348436) transport_ws: Error transport_poll_write
E (348437) websocket_client: esp_transport_write() returned 0, transport_error=ESP_OK, tls_error_code=0, tls_flags=0, errno=0
E (348443) WEBSOCKET: âŒ WebSocket error occurred
W (348448) TTS: Rejecting audio chunks - TTS decoder not running (chunks rejected: 1, last: 0 bytes)
E (348458) HOTPIN_MAIN: âŒ WebSocket status callback: ERROR
E (348458) STATE_MGR: âŒ WebSocket error - visual feedback only, staying in current state
W (348467) WEBSOCKET: âš ï¸ WebSocket disconnected
I (348473) LED_CTRL: LED pattern -> 4
W (348479) HOTPIN_MAIN: âš ï¸ WebSocket status callback: DISCONNECTED
I (348483) STATE_MGR: ğŸ“± Staying in VOICE_ACTIVE - audio drivers remain initialized
I (348499) STATE_MGR: ğŸ’¡ Press button to exit voice mode, or wait for automatic reconnection
W (348490) WEBSOCKET: WebSocket send buffer full (0 bytes sent), yielding and retrying (attempt 1/4)
W (348518) STATE_MGR: âš ï¸ WebSocket disconnected - visual feedback only, staying in current state
W (348490) HOTPIN_MAIN: âš ï¸ WebSocket link not healthy, initiating reconnection sequence
I (348528) STATE_MGR: ğŸ“± Staying in VOICE_ACTIVE - audio drivers remain initialized
I (348545) STATE_MGR: ğŸ’¡ Press button to exit voice mode, or wait for automatic reconnection
I (348537) WEBSOCKET: Force stopping WebSocket client
E (348474) websocket_client: esp_transport_poll_read() returned -1, transport_error=ESP_OK, tls_error_code=0, tls_flags=0, errno=9
W (348560) websocket_client: Client was not started
E (348573) WEBSOCKET: âŒ WebSocket error occurred
W (348578) WEBSOCKET: Graceful close returned ESP_FAIL
E (348584) STATE_MGR: âŒ WebSocket error - visual feedback only, staying in current state
I (348598) STATE_MGR: ğŸ“± Staying in VOICE_ACTIVE - audio drivers remain initialized
I (348607) STATE_MGR: ğŸ’¡ Press button to exit voice mode, or wait for automatic reconnection
E (348584) HOTPIN_MAIN: âŒ WebSocket status callback: ERROR
E (348618) WEBSOCKET: WebSocket connection lost before send attempt 2
E (348623) websocket_client: esp_websocket_client_abort_connection(239): Websocket already stop
E (348630) STT: WebSocket disconnected during audio send - aborting stream
I (348647) STT: Streaming task received stop signal
W (348652) STT: Audio streaming aborted due to transport errors
W (348659) STT: Skipping EOS - WebSocket disconnected
I (348664) STT: Audio streaming session complete (streamed 4096 bytes in 1 chunks)
I (348673) STATE_MGR: STT pipeline reported stop
I (348678) STATE_MGR: â³ Awaiting server transcription response (blocking mode transitions)
I (348687) LED_CTRL: LED pattern -> 1
I (348689) STT: Audio capture task stopped (captured 73728 bytes total)
I (349589) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 3)...
I (349589) WEBSOCKET: Connecting to WebSocket server...
I (349596) websocket_client: Started
I (349597) WEBSOCKET: WebSocket client started (health check disabled - managed by main connection task)
I (349790) WEBSOCKET: âœ… WebSocket connected to server
I (349790) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (349796) WEBSOCKET: Handshake sent successfully
I (349798) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (349801) STATE_MGR: âœ… WebSocket connected
I (349806) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (349854) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (349855) WEBSOCKET: Server status: connected
I (351490) WEBSOCKET: Connecting to WebSocket server...
I (353467) WEBSOCKET: Connecting to WebSocket server...
I (414350) BUTTON: Single click confirmed
I (414350) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
W (414351) STATE_MGR: â³ Awaiting server transcription (EOS sent) - please wait for response
W (414360) STATE_MGR: Guardrail blocked request: Server receiving audio - please wait
I (504943) BUTTON: Single click confirmed
I (504943) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
W (504944) STATE_MGR: â³ Awaiting server transcription (EOS sent) - please wait for response
W (504953) STATE_MGR: Guardrail blocked request: Server receiving audio - please wait
W (529820) HOTPIN_MAIN: âš ï¸ Connection health check timeout - forcing reconnect to prevent stale connection
W (529820) HOTPIN_MAIN: âš ï¸ WebSocket link not healthy, initiating reconnection sequence
I (529829) WEBSOCKET: Force stopping WebSocket client
W (529916) websocket_client: Client was not started
W (529916) WEBSOCKET: Force stop returned ESP_FAIL
I (530916) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 4)...
I (530916) WEBSOCKET: Connecting to WebSocket server...
I (530923) websocket_client: Started
I (530924) WEBSOCKET: WebSocket client started (health check disabled - managed by main connection task)
I (531018) WEBSOCKET: âœ… WebSocket connected to server
I (531019) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (531024) WEBSOCKET: Handshake sent successfully
I (531026) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (531033) STATE_MGR: âœ… WebSocket connected
I (531078) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (531079) WEBSOCKET: Server status: connected
I (531133) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - monitoring link
I (653075) BUTTON: Single click confirmed
I (653075) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
W (653076) STATE_MGR: â³ Awaiting server transcription (EOS sent) - please wait for response
W (653085) STATE_MGR: Guardrail blocked request: Server receiving audio - please wait
