I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Oct 11 2025 00:30:17
I (29) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=34e74h (216692) map
I (179) esp_image: segment 1: paddr=00044e9c vaddr=3ff80000 size=0001ch (    28) load
I (180) esp_image: segment 2: paddr=00044ec0 vaddr=3ffb0000 size=068bch ( 26812) load
I (193) esp_image: segment 3: paddr=0004b784 vaddr=40080000 size=04894h ( 18580) load
I (201) esp_image: segment 4: paddr=00050020 vaddr=400d0020 size=b92a4h (758436) map
I (460) esp_image: segment 5: paddr=001092cc vaddr=40084894 size=167f0h ( 92144) load
I (509) boot: Loaded app from partition at offset 0x10000
I (509) boot: Disabling RNG early entropy source...
[0;32mI (520) quad_psram: This chip is ESP32-D0WD[0m
[0;32mI (520) esp_psram: Found 8MB PSRAM device[0m
[0;32mI (520) esp_psram: Speed: 40MHz[0m
[0;32mI (523) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.[0m
[0;33mW (531) esp_psram: Virtual address not enough for PSRAM, map as much as we can. 4MB is mapped[0m
[0;32mI (540) cpu_start: Multicore app[0m
[0;32mI (1425) esp_psram: SPI SRAM memory test OK[0m
[0;32mI (1433) cpu_start: Pro cpu start user code[0m
[0;32mI (1433) cpu_start: cpu freq: 240000000 Hz[0m
[0;32mI (1433) app_init: Application information:[0m
[0;32mI (1436) app_init: Project name:     hotpin_esp32_firmware[0m
[0;32mI (1442) app_init: App version:      baa77c1-dirty[0m
[0;32mI (1448) app_init: Compile time:     Oct 11 2025 00:30:04[0m
[0;32mI (1454) app_init: ELF file SHA256:  95f23381d...[0m
[0;32mI (1459) app_init: ESP-IDF:          v5.4.2-dirty[0m
[0;32mI (1464) efuse_init: Min chip rev:     v0.0[0m
[0;32mI (1469) efuse_init: Max chip rev:     v3.99 [0m
[0;32mI (1474) efuse_init: Chip rev:         v3.1[0m
[0;32mI (1480) heap_init: Initializing. RAM available for dynamic allocation:[0m
[0;32mI (1487) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM[0m
[0;32mI (1493) heap_init: At 3FFBBF08 len 000240F8 (144 KiB): DRAM[0m
[0;32mI (1499) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM[0m
[0;32mI (1505) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM[0m
[0;32mI (1512) heap_init: At 4009B084 len 00004F7C (19 KiB): IRAM[0m
[0;32mI (1519) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator[0m
[0;32mI (1526) spi_flash: detected chip: generic[0m
[0;32mI (1530) spi_flash: flash io: dio[0m
[0;33mW (1534) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.[0m
[0;32mI (1549) main_task: Started on CPU0[0m
[0;32mI (1552) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations[0m
[0;32mI (1561) main_task: Calling app_main()[0m
[0;32mI (1565) HOTPIN_MAIN: ====================================[0m
[0;32mI (1571) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting[0m
[0;32mI (1577) HOTPIN_MAIN: ====================================[0m
[0;33mW (1583) HOTPIN_MAIN: Brownout detector disabled[0m
[0;32mI (1588) HOTPIN_MAIN: Validating PSRAM...[0m
[0;32mI (1593) HOTPIN_MAIN: PSRAM detected: 8388608 bytes (8.00 MB)[0m
[0;32mI (1600) HOTPIN_MAIN: PSRAM validation passed[0m
[0;32mI (1605) HOTPIN_MAIN: ====================================[0m
[0;32mI (1611) HOTPIN_MAIN: System Information:[0m
[0;32mI (1615) HOTPIN_MAIN: Chip: esp32[0m
[0;32mI (1619) HOTPIN_MAIN: Cores: 2[0m
[0;32mI (1623) HOTPIN_MAIN: Silicon revision: 301[0m
[0;32mI (1628) HOTPIN_MAIN: CPU Frequency: 240 MHz[0m
[0;32mI (1633) HOTPIN_MAIN: Flash: 2 MB external[0m
[0;32mI (1638) HOTPIN_MAIN: Free heap: 4419424 bytes[0m
[0;32mI (1643) HOTPIN_MAIN: PSRAM: 8388608 bytes[0m
[0;32mI (1648) HOTPIN_MAIN: ====================================[0m
[0;32mI (1654) HOTPIN_MAIN: Initializing NVS...[0m
[0;32mI (1683) HOTPIN_MAIN: NVS initialized successfully[0m
[0;32mI (1684) HOTPIN_MAIN: Synchronization primitives created[0m
[0;32mI (1684) HOTPIN_MAIN: Initializing WiFi...[0m
I (1693) wifi:wifi driver task: 3ffccc84, prio:23, stack:6656, core=0
I (1705) wifi:wifi firmware version: bea31f3
I (1706) wifi:wifi certification version: v7.0
I (1706) wifi:config NVS flash: enabled
I (1706) wifi:config nano formatting: disabled
I (1711) wifi:Init data frame dynamic rx buffer num: 32
I (1716) wifi:Init static rx mgmt buffer num: 5
I (1720) wifi:Init management short buffer num: 32
I (1724) wifi:Init dynamic tx buffer num: 32
I (1729) wifi:Init static rx buffer size: 1600
I (1733) wifi:Init static rx buffer num: 16
I (1736) wifi:Init dynamic rx buffer num: 32
[0;32mI (1742) wifi_init: rx ba win: 6[0m
[0;32mI (1744) wifi_init: accept mbox: 6[0m
[0;32mI (1748) wifi_init: tcpip mbox: 32[0m
[0;32mI (1752) wifi_init: udp mbox: 6[0m
[0;32mI (1756) wifi_init: tcp mbox: 6[0m
[0;32mI (1760) wifi_init: tcp tx win: 5760[0m
[0;32mI (1764) wifi_init: tcp rx win: 5760[0m
[0;32mI (1769) wifi_init: tcp mss: 1440[0m
[0;32mI (1773) wifi_init: WiFi IRAM OP enabled[0m
[0;32mI (1777) wifi_init: WiFi RX IRAM OP enabled[0m
[0;32mI (1784) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07[0m
[0;32mI (1858) phy_init: Saving new calibration data due to checksum failure or outdated calibration data, mode(0)[0m
I (1928) wifi:mode : sta (2c:bc:bb:84:62:e0)
I (1929) wifi:enable tsf
[0;32mI (1932) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...[0m
[0;32mI (1932) HOTPIN_MAIN: Waiting for WiFi connection...[0m
[0;32mI (1933) HOTPIN_MAIN: WiFi station started, connecting...[0m
I (1954) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (1956) wifi:state: init -> auth (0xb0)
I (2838) wifi:state: auth -> assoc (0x0)
I (2847) wifi:state: assoc -> run (0x10)
I (2893) wifi:connected with wifi, aid = 2, channel 11, BW20, bssid = ee:d4:b9:ed:90:50
I (2894) wifi:security: WPA3-SAE, phy: bgn, rssi: -57
I (2898) wifi:pm start, type: 1
I (2898) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (2908) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (2914) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (2921) wifi:<ba-add>idx:0 (ifx:0, ee:d4:b9:ed:90:50), tid:0, ssn:0, winSize:64
[0;32mI (2929) HOTPIN_MAIN: WiFi connected to AP[0m
[0;32mI (3972) esp_netif_handlers: sta ip: 10.87.102.105, mask: 255.255.255.0, gw: 10.87.102.121[0m
[0;32mI (3973) HOTPIN_MAIN: âœ… Got IP address: 10.87.102.105[0m
[0;31mE (3977) LED_CTRL: LED controller not initialized[0m
[0;32mI (3982) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection[0m
[0;32mI (6946) HOTPIN_MAIN: Initializing button handler...[0m
[0;32mI (6946) BUTTON: Initializing button handler on GPIO 4[0m
[0;32mI (6946) gpio: GPIO[4]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3 [0m
[0;32mI (6956) BUTTON: Button FSM task started[0m
[0;32mI (6961) BUTTON: Button handler initialized successfully[0m
[0;32mI (6966) HOTPIN_MAIN: In[0;32mI (6980) SERIAL_CMD: Serial command task started on Core 0[0m

========================================
  HotPin Serial Command Interface
========================================
Commands:
  s - Toggle voice recording (start/stop)
  c - Capture image
  l - Long press (shutdown simulation)
  d - Toggle debug mode
  h - Show this help
========================================

[0;32mI (7003) SERIAL_CMD: âœ… Serial command interface initialized[0m
[0;32mI (7010) HOTPIN_MAIN: Initializing LED controller...[0m
[0;32mI (7015) LED_CTRL: Initializing LED controller on GPIO 33[0m
[0;32mI (7022) gpio: GPIO[33]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m
[0;32mI (7032) LED_CTRL: LED task started[0m
[0;32mI (7033) LED_CTRL: LED controller initialized[0m
[0;32mI (7040) LED_CTRL: LED state changed: 0 -> 1[0m
[0;32mI (7045) HOTPIN_MAIN: Initializing WebSocket client...[0m
[0;32mI (7051) WEBSOCKET: Initializing WebSocket client...[0m
[0;32mI (7057) WEBSOCKET: Server URI: ws://10.87.102.58:8000/ws[0m
[0;32mI (7063) WEBSOCKET: Authorization header configured[0m
[0;32mI (7069) WEBSOCKET: âœ… WebSocket client initialized[0m
[0;32mI (7074) WEBSOCKET: Status callback registered[0m
[0;32mI (7079) HOTPIN_MAIN: WebSocket status callback registered[0m
[0;32mI (7085) HOTPIN_MAIN: Initializing HTTP client...[0m
[0;32mI (7090) HTTP_CLIENT: Initializing HTTP client[0m
[0;32mI (7096) HTTP_CLIENT: Authorization token configured[0m
[0;32mI (7101) HTTP_CLIENT: HTTP client initialized (server: http://10.87.102.58:8000)[0m
[0;32mI (7109) HOTPIN_MAIN: Initializing STT pipeline...[0m
[0;32mI (7115) STT: Initializing STT pipeline...[0m
[0;32mI (7120) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (7138) STT: â•‘ STT Ring Buffer Allocation (PSRAM)[0m
[0;32mI (7143) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (7162) STT: [MEMORY] Pre-allocation state:[0m
[0;32mI (7167) STT:   Free internal RAM: 199791 bytes[0m
[0;32mI (7172) STT:   Free DMA-capable: 180179 bytes[0m
[0;32mI (7177) STT:   Free PSRAM: 4189764 bytes[0m
[0;32mI (7182) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...[0m
[0;32mI (7189) STT:   âœ“ Ring buffer allocated at 0x3f8011c0 (PSRAM address)[0m
[0;32mI (7197) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)[0m
[0;32mI (7205) STT: [MEMORY] Post-allocation state:[0m
[0;32mI (7210) STT:   Free internal RAM: 199791 bytes[0m
[0;32mI (7216) STT:   Free DMA-capable: 180179 bytes[0m
[0;32mI (7221) STT:   Free PSRAM: 4124224 bytes[0m
[0;32mI (7232) STT: âœ… STT pipeline initialized[0m
[0;32mI (7233) HOTPIN_MAIN: Initializing TTS decoder...[0m
[0;32mI (7236) TTS: Initializing TTS decoder...[0m
[0;32mI (7240) WEBSOCKET: Audio callback registered[0m
[0;32mI (7245) TTS: âœ… TTS decoder initialized[0m
[0;32mI (7250) HOTPIN_MAIN: Camera and audio initialization deferred to state manager[0m
[0;32mI (7258) HOTPIN_MAIN: Creating FreeRTOS tasks...[0m
[0;32mI (7263) HOTPIN_MAIN: State manager task created on Core 1[0m
[0;32mI (7263) STATE_MGR: State manager task started on Core 1[0m
[0;32mI (7269) HOTPIN_MAIN: WebSocket connection task started on Core 0[0m
[0;32mI (7275) STATE_MGR: Priority: 10[0m
[0;32mI (7282) HOTPIN_MAIN: Waiting for WiFi connection...[0m
[0;32mI (7286) STATE_MGR: Starting in camera mode...[0m
[0;32mI (7292) HOTPIN_MAIN: WiFi connected! Starting WebSocket connection...[0m
[0;32mI (7297) STATE_MGR: === TRANSITION TO CAMERA MODE ===[0m
[0;32mI (7310) STATE_MGR: Acquiring I2S mutex...[0m
[0;32mI (7306) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 1)...[0m
[0;32mI (7315) STATE_MGR: Initializing camera...[0m
[0;32mI (7322) WEBSOCKET: Connecting to WebSocket server...[0m
[0;32mI (7327) CAMERA: Initializing camera...[0m
[0;31mE (7337) gpio: gpio_install_isr_service(503): GPIO isr service already installed[0m
[0;32mI (7340) websocket_client: Started[0m
[0;33mW (7345) CAMERA: GPIO ISR service already installed (OK)[0m
[0;32mI (7349) WEBSOCKET: WebSocket client started[0m
[0;32mI (7355) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2 [0m
[0;32mI (7360) HOTPIN_MAIN: âœ… WebSocket connection initiated successfully[0m
[0;31mE (7370) gpio: gpio_install_isr_service(503): GPIO isr service already installed[0m
[0;32mI (7269) HOTPIN_MAIN: WebSocket connection task created on Core 0[0m
[0;32mI (7385) cam_hal: cam init ok[0m
[0;32mI (7391) HOTPIN_MAIN: Initializing task watchdog (30s timeout)...[0m
[0;32mI (7396) sccb-ng: pin_sda 26 pin_scl 27[0m
[0;31mE (7402) task_wdt: esp_task_wdt_init(515): TWDT already initialized[0m
[0;32mI (7406) sccb-ng: sccb_i2c_port=1[0m
[0;32mI (7413) HOTPIN_MAIN: State manager task added to watchdog[0m
[0;32mI (7418) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0 [0m
[0;32mI (7423) HOTPIN_MAIN: ====================================[0m
[0;32mI (7439) HOTPIN_MAIN: System initialization complete![0m
[0;32mI (7445) HOTPIN_MAIN: Entering camera standby mode...[0m
[0;32mI (7450) HOTPIN_MAIN: ====================================[0m
[0;32mI (7457) HOTPIN_MAIN: Main task exiting - system running[0m
[0;32mI (7463) main_task: Returned from app_main()[0m
[0;32mI (7467) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2[0m
[0;32mI (7474) camera: Detected OV2640 camera[0m
[0;32mI (7479) camera: Detected camera at address=0x30[0m
[0;32mI (7561) cam_hal: PSRAM DMA mode disabled[0m
[0;32mI (7561) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15[0m
[0;32mI (7566) cam_hal: Allocating 61440 Byte frame buffer in PSRAM[0m
[0;32mI (7572) cam_hal: Allocating 61440 Byte frame buffer in PSRAM[0m
[0;32mI (7579) cam_hal: cam config ok[0m
[0;32mI (7582) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8[0m
[0;32mI (7664) CAMERA: Camera initialized successfully[0m
[0;32mI (7664) STATE_MGR: I2S mutex released[0m
[0;32mI (7664) STATE_MGR: âœ… Camera mode transition complete[0m
[0;32mI (7669) STATE_MGR: âœ… Entered CAMERA_STANDBY state[0m
[0;32mI (8221) WEBSOCKET: âœ… WebSocket connected to server[0m
[0;32mI (8222) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}[0m
[0;32mI (8227) WEBSOCKET: Handshake sent successfully[0m
[0;32mI (8229) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED[0m
[0;32mI (9510) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}[0m
[0;32mI (9510) WEBSOCKET: Server status: connected[0m
[0;32mI (10377) HOTPIN_MAIN: ğŸ‰ WebSocket connected and verified![0m
[0;32mI (10377) HOTPIN_MAIN: âœ… WebSocket connection established![0m
[0;32mI (10379) HOTPIN_MAIN: ğŸ“¡ WebSocket monitoring task running...[0m
ğŸ“¢ Voice mode STARTED (recording...)
[0;32mI (12433) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY[0m
[0;32mI (12434) SERIAL_CMD: Simulated SHORT PRESS - Voice START[0m
[0;32mI (12434) STATE_MGR: Single click - mode toggle requested[0m
[0;32mI (12445) STATE_MGR: Switching: Camera â†’ Voice (count: 1)[0m
[0;32mI (12451) STATE_MGR: === TRANSITION TO VOICE MODE ===[0m
[0;32mI (12457) STATE_MGR: Stopping camera...[0m
[0;32mI (12462) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (12478) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex[0m
[0;32mI (12485) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (12501) STATE_MGR:   Timeout: 5000 ms[0m
[0;32mI (12505) STATE_MGR:   Timestamp: 10987 ms[0m
[0;32mI (12510) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)[0m
[0;32mI (12516) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (12532) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware[0m
[0;32mI (12539) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (12555) STATE_MGR:   Free heap before: 4086192 bytes[0m
[0;32mI (12561) STATE_MGR:   Free PSRAM before: 3999772 bytes[0m
[0;32mI (12567) CAMERA: Deinitializing camera...[0m
[0;32mI (12572) CAMERA: Camera deinitialized[0m
[0;32mI (12576) STATE_MGR:   âœ“ Camera deinitialized (took 9 ms)[0m
[0;32mI (12582) STATE_MGR:   Free heap after: 4247888 bytes[0m
[0;32mI (12588) STATE_MGR:   Free PSRAM after: 4124088 bytes[0m
[0;32mI (12594) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (12610) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL[0m
[0;32mI (12616) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (12632) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts[0m
[0;32mI (12740) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins[0m
[0;32mI (12840) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state[0m
[0;32mI (12890) STATE_MGR:   âœ“ Total stabilization: 250ms[0m
[0;32mI (12890) STATE_MGR:   Timestamp: 11372 ms[0m
[0;32mI (12890) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (12906) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers[0m
[0;32mI (12913) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (12929) STATE_MGR:   Free heap before: 4247884 bytes[0m
[0;32mI (12935) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (12953) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)[0m
[0;32mI (12960) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (12978) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...[0m
[0;32mI (12985) AUDIO:   âœ“ I2S access mutex created successfully[0m
[0;32mI (12991) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (13009) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)[0m
[0;32mI (13017) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (13034) AUDIO: [DIAG] Pre-init state:[0m
[0;32mI (13039) AUDIO:   Free heap: 4247784 bytes[0m
[0;32mI (13044) AUDIO:   Free internal RAM: 175107 bytes[0m
[0;32mI (13049) AUDIO:   Free DMA-capable: 155495 bytes[0m
[0;32mI (13055) AUDIO:   Free PSRAM: 4124088 bytes[0m
[0;32mI (13060) AUDIO:   Timestamp: 11541 ms[0m
[0;32mI (13064) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...[0m
[0;32mI (13071) AUDIO:   Using I2S_NUM_0 for both channels (full-duplex mode)[0m
[0;32mI (13078) AUDIO:   DMA config: 4 buffers x 1200 samples = 4800 total samples[0m
[0;32mI (13086) AUDIO:   DMA memory: 9600 bytes (2 bytes/sample)[0m
[0;32mI (13092) AUDIO: âœ… I2S channels created (took 0 ms)[0m
[0;32mI (13098) AUDIO:   TX handle: 0x3ffafca0 | RX handle: 0x3ffbd3dc[0m
[0;32mI (13105) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...[0m
[0;32mI (13111) AUDIO:   Sample rate: 16000 Hz[0m
[0;32mI (13116) AUDIO:   MCLK: DISABLED[0m
[0;32mI (13120) AUDIO:   BCLK: GPIO14 (shared)[0m
[0;32mI (13124) AUDIO:   WS:   GPIO15 (shared)[0m
[0;32mI (13129) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)[0m
[0;32mI (13136) AUDIO: âœ… TX channel configured (took 1 ms)[0m
[0;32mI (13140) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...[0m
[0;32mI (13147) AUDIO:   Sample rate: 16000 Hz[0m
[0;32mI (13152) AUDIO:   MCLK: DISABLED[0m
[0;32mI (13156) AUDIO:   BCLK: GPIO14 (shared)[0m
[0;32mI (13160) AUDIO:   WS:   GPIO15 (shared)[0m
[0;32mI (13165) AUDIO:   DIN:  GPIO2 (INMP441 microphone)[0m
[0;32mI (13171) AUDIO: âœ… RX channel configured (took 0 ms)[0m
[0;32mI (13176) AUDIO: [STEP 4/6] Enabling TX channel...[0m
[0;32mI (13182) AUDIO: âœ… TX channel enabled (took 0 ms)[0m
[0;32mI (13187) AUDIO: [STEP 5/6] Enabling RX channel...[0m
[0;32mI (13193) AUDIO: âœ… RX channel enabled (took 0 ms)[0m
[0;32mI (13198) AUDIO: [STEP 6/6] Hardware stabilization...[0m
[0;32mI (13204) AUDIO:   Phase 1: Initial settle (50ms)[0m
[0;32mI (13259) AUDIO:   Phase 2: DMA verification[0m
[0;32mI (13259) AUDIO:   âœ“ DMA TX operational (128 bytes)[0m
[0;32mI (13260) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA[0m
[0;32mI (13416) AUDIO: [DIAG] Post-init state:[0m
[0;32mI (13416) AUDIO:   Free heap: 4243972 bytes[0m
[0;32mI (13416) AUDIO:   Free internal RAM: 154243 bytes[0m
[0;32mI (13420) AUDIO:   Free DMA-capable: 134631 bytes[0m
[0;32mI (13425) AUDIO:   Free PSRAM: 4124088 bytes[0m
[0;32mI (13430) AUDIO:   Timestamp: 11912 ms[0m
[0;32mI (13435) AUDIO:   Total init time: 201 ms[0m
[0;32mI (13440) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (13458) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY[0m
[0;32mI (13464) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)[0m
[0;32mI (13469) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: 16-bit mono[0m
[0;32mI (13477) AUDIO: â•‘ This should eliminate LoadStoreError crashes![0m
[0;32mI (13484) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (13502) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (13520) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED[0m
[0;32mI (13526) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)[0m
[0;32mI (13533) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2[0m
[0;32mI (13540) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15[0m
[0;32mI (13546) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (13564) STATE_MGR:   âœ“ Audio initialized (took 629 ms)[0m
[0;32mI (13570) STATE_MGR:   Free heap after: 4243972 bytes[0m
[0;32mI (13576) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (13592) STATE_MGR: â•‘ STEP 5: I2S mutex released[0m
[0;32mI (13597) STATE_MGR: â•‘ Total transition time: 888 ms[0m
[0;32mI (13603) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (13619) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (13636) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines[0m
[0;32mI (13642) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (13658) STT: Starting STT pipeline...[0m
[0;32mI (13663) STT: Initializing STT pipeline...[0m
[0;33mW (13668) STT: STT pipeline already initialized[0m
[0;32mI (13673) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)[0m
[0;32mI (13682) STT: âœ… STT pipeline started[0m
[0;32mI (13682) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (13686) TTS: Starting TTS decoder...[0m
[0;32mI (13682) STT: Audio streaming task started on Core 0[0m
[0;32mI (13707) TTS: Initializing TTS decoder...[0m
[0;32mI (13703) STT: â•‘ Audio Capture Task Started on Core 0[0m
[0;33mW (13718) TTS: TTS decoder already initialized[0m
[0;32mI (13713) STT:   âœ“ Stream buffer allocated at 0x3ffc61d8[0m
[0;32mI (13729) TTS: [CORE AFFINITY] Creating TTS playback task on Core 0 (co-located with Wi-Fi and STT)[0m
[0;32mI (13723) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (13745) TTS: âœ… TTS decoder started[0m
[0;32mI (13735) STT: Starting audio streaming to server...[0m
[0;32mI (13765) STATE_MGR: âœ… Voice mode transition complete[0m
[0;32mI (13761) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...[0m
[0;32mI (13777) STATE_MGR: âœ… Entered VOICE_ACTIVE state[0m
[0;32mI (13784) STT:   Current time: 12265 ms[0m
[0;32mI (13794) STT:   Free heap: 4239516 bytes[0m
[0;32mI (13761) TTS: TTS playback task started on Core 0[0m
[0;32mI (13998) STT: [STABILIZATION] Phase 2: Verify audio driver state...[0m
[0;32mI (13998) STT:   âœ“ Audio driver initialized[0m
[0;32mI (13999) STT: [STABILIZATION] Phase 3: Additional 100ms settle...[0m
[0;32mI (14106) STT:   Total stabilization: 300ms[0m
[0;32mI (14106) STT:   Timestamp: 12588 ms[0m
[0;32mI (14106) STT: [BUFFER] Allocating 1024 byte capture buffer...[0m
[0;32mI (14110) STT:   âœ“ DMA-capable buffer allocated at 0x3ffc7340[0m
[0;32mI (14117) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (14133) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE[0m
[0;32mI (14138) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms[0m
[0;32mI (14145) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[0m
[0;32mI (14161) STT: [FIRST READ] Completed:[0m
[0;32mI (14165) STT:   Result: ESP_OK[0m
[0;32mI (14169) STT:   Bytes read: 1024 / 1024[0m
[0;32mI (14174) STT:   Duration: 0 ms[0m
[0;32mI (14177) STT:   Timestamp: 12643 ms[0m
[0;32mI (14183) STT:   First 16 bytes: 4b fe 4b fe 4b fe 4b fe 4c fe 4c fe 4c fe 4c fe[0m
[0;32mI (14243) STT: [CAPTURE] Read #10: 1024 bytes (total: 10240 bytes, 10.0 KB)[0m
[0;32mI (14244) STT:   Avg read time: 51 ms | Errors: 0[0m
[0;32mI (14543) STT: [CAPTURE] Read #20: 1024 bytes (total: 20480 bytes, 20.0 KB)[0m
[0;32mI (14544) STT:   Avg read time: 0 ms | Errors: 0[0m
[0;32mI (14843) STT: [CAPTURE] Read #30: 1024 bytes (total: 30720 bytes, 30.0 KB)[0m
[0;32mI (14845) STT:   Avg read time: 0 ms | Errors: 0[0m
[0;32mI (15218) STT: [CAPTURE] Read #40: 1024 bytes (total: 40960 bytes, 40.0 KB)[0m
[0;32mI (15219) STT:   Avg read time: 74 ms | Errors: 0[0m
[0;32mI (15518) STT: [CAPTURE] Read #50: 1024 bytes (total: 51200 bytes, 50.0 KB)[0m
[0;32mI (15519) STT:   Avg read time: 74 ms | Errors: 0[0m
[0;32mI (15818) STT: [CAPTURE] Read #60: 1024 bytes (total: 61440 bytes, 60.0 KB)[0m
[0;32mI (15819) STT:   Avg read time: 0 ms | Errors: 0[0m
[0;32mI (16119) STT: [CAPTURE] Read #70: 1024 bytes (total: 71680 bytes, 70.0 KB)[0m
[0;32mI (16121) STT:   Avg read time: 0 ms | Errors: 0[0m
[0;32mI (16493) STT: [CAPTURE] Read #80: 1024 bytes (total: 81920 bytes, 80.0 KB)[0m
[0;32mI (16494) STT:   Avg read time: 74 ms | Errors: 0[0m
ğŸ”‡ Voice mode STOPPED
[0;32mI (16732) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE[0m
[0;32mI (16732) SERIAL_CMD: Simulated SHORT PRESS - Voice STOP[0m
[0;32mI (16733) STATE_MGR: Single click - mode toggle requested[0m
[0;32mI (16742) STATE_MGR: Switching: Voice â†’ Camera (count: 2)[0m
[0;32mI (16749) STATE_MGR: === TRANSITION TO CAMERA MODE ===[0m
[0;32mI (16754) STATE_MGR: Stopping voice mode components...[0m
[0;32mI (16760) STT: Stopping STT pipeline...[0m
[0;32mI (16765) STT: Sending EOS signal...[0m
[0;32mI (16769) WEBSOCKET: Sending EOS signal[0m
[0;32mI (16782) STT: Audio streaming task stopped (streamed 90112 bytes in 22 chunks)[0m
[0;32mI (16793) STT: [CAPTURE] Read #90: 1024 bytes (total: 92160 bytes, 90.0 KB)[0m
[0;32mI (16794) STT:   Avg read time: 74 ms | Errors: 0[0m
[0;32mI (16796) STT: Audio capture task stopped (captured 92160 bytes total)[0m
[0;32mI (16946) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}[0m
[0;32mI (16946) WEBSOCKET: Server status: processing[0m
Guru Meditation Error: Core  1 panic'ed (StoreProhibited). Exception was unhandled.
Core  1 register dump:
PC      : 0x4008ee60  PS      : 0x00060433  A0      : 0x800900a1  A1      : 0x3ffdcfb0  
A2      : 0x3ffbe01c  A3      : 0xffffffff  A4      : 0x00003b7b  A5      : 0x00060423  
A6      : 0x3ffb6e20  A7      : 0x0000abab  A8      : 0x00000000  A9      : 0x00000040  
A10     : 0x3ffbe044  A11     : 0x0000008e  A12     : 0xb33fffff  A13     : 0x3f423a78  
A14     : 0x3f4065b6  A15     : 0x3f406f41  SAR     : 0x00000002  EXCCAUSE: 0x0000001d  
EXCVADDR: 0x00000044  LBEG    : 0x4008a098  LEND    : 0x4008a0b4  LCOUNT  : 0xffffffff  
Backtrace: 0x4008ee5d:0x3ffdcfb0 0x4009009e:0x3ffdcfd0 0x400dede2:0x3ffdcff0 0x400dd335:0x3ffdd010 0x400ddff6:0x3ffdd030
ELF file SHA256: 95f23381d
Rebooting...