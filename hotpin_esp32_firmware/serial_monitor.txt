I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Oct 12 2025 02:57:53
I (29) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=361c4h (221636) map
I (181) esp_image: segment 1: paddr=000461ec vaddr=3ff80000 size=0001ch (    28) load
I (181) esp_image: segment 2: paddr=00046210 vaddr=3ffb0000 size=068bch ( 26812) load
I (195) esp_image: segment 3: paddr=0004cad4 vaddr=40080000 size=03544h ( 13636) load
I (200) esp_image: segment 4: paddr=00050020 vaddr=400d0020 size=bb830h (768048) map
I (463) esp_image: segment 5: paddr=0010b858 vaddr=40083544 size=17e50h ( 97872) load
I (515) boot: Loaded app from partition at offset 0x10000
I (515) boot: Disabling RNG early entropy source...
I (525) quad_psram: This chip is ESP32-D0WD
I (526) esp_psram: Found 4MB PSRAM device
I (526) esp_psram: Speed: 40MHz
I (529) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (536) cpu_start: Multicore app
I (1430) esp_psram: SPI SRAM memory test OK
I (1438) cpu_start: Pro cpu start user code
I (1438) cpu_start: cpu freq: 240000000 Hz
I (1438) app_init: Application information:
I (1442) app_init: Project name:     hotpin_esp32_firmware
I (1448) app_init: App version:      c94192c-dirty
I (1453) app_init: Compile time:     Oct 12 2025 02:57:31
I (1459) app_init: ELF file SHA256:  6d94f735f...
I (1465) app_init: ESP-IDF:          v5.4.2-dirty
I (1470) efuse_init: Min chip rev:     v0.0
I (1475) efuse_init: Max chip rev:     v3.99
I (1480) efuse_init: Chip rev:         v3.1
I (1485) heap_init: Initializing. RAM available for dynamic allocation:
I (1492) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1498) heap_init: At 3FFC38F0 len 0001C710 (113 KiB): DRAM
I (1505) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1511) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1518) heap_init: At 4009B394 len 00004C6C (19 KiB): IRAM
I (1524) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1532) spi_flash: detected chip: generic
I (1536) spi_flash: flash io: dio
W (1540) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1555) main_task: Started on CPU0
I (1558) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1567) main_task: Calling app_main()
I (1571) HOTPIN_MAIN: ====================================
I (1577) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1583) HOTPIN_MAIN: ====================================
W (1589) HOTPIN_MAIN: Brownout detector disabled
I (1594) HOTPIN_MAIN: Validating PSRAM...
I (1599) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1605) HOTPIN_MAIN: PSRAM validation passed
I (1610) HOTPIN_MAIN: ====================================
I (1617) HOTPIN_MAIN: System Information:
I (1621) HOTPIN_MAIN: Chip: esp32
I (1625) HOTPIN_MAIN: Cores: 2
I (1629) HOTPIN_MAIN: Silicon revision: 301
I (1634) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1639) HOTPIN_MAIN: Flash: 2 MB external
I (1644) HOTPIN_MAIN: Free heap: 4388284 bytes
I (1649) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1654) HOTPIN_MAIN: ====================================
I (1660) HOTPIN_MAIN: Initializing NVS...
I (1689) HOTPIN_MAIN: NVS initialized successfully
I (1690) HOTPIN_MAIN: Synchronization primitives created
I (1690) HOTPIN_MAIN: Initializing WiFi...
I (1699) wifi:wifi driver task: 3ffd4654, prio:23, stack:6656, core=0
I (1712) wifi:wifi firmware version: bea31f3
I (1712) wifi:wifi certification version: v7.0
I (1712) wifi:config NVS flash: enabled
I (1713) wifi:config nano formatting: disabled
I (1717) wifi:Init data frame dynamic rx buffer num: 32
I (1722) wifi:Init static rx mgmt buffer num: 5
I (1726) wifi:Init management short buffer num: 32
I (1731) wifi:Init dynamic tx buffer num: 32
I (1735) wifi:Init static rx buffer size: 1600
I (1739) wifi:Init static rx buffer num: 16
I (1743) wifi:Init dynamic rx buffer num: 32
I (1748) wifi_init: rx ba win: 6
I (1751) wifi_init: accept mbox: 6
I (1755) wifi_init: tcpip mbox: 32
I (1759) wifi_init: udp mbox: 6
I (1763) wifi_init: tcp mbox: 6
I (1766) wifi_init: tcp tx win: 5760
I (1771) wifi_init: tcp rx win: 5760
I (1775) wifi_init: tcp mss: 1440
I (1779) wifi_init: WiFi IRAM OP enabled
I (1784) wifi_init: WiFi RX IRAM OP enabled
I (1790) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (1859) wifi:mode : sta (80:f3:da:99:8c:64)
I (1860) wifi:enable tsf
I (1863) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (1863) HOTPIN_MAIN: Waiting for WiFi connection...
I (1864) HOTPIN_MAIN: WiFi station started, connecting...
I (1887) wifi:new:<6,0>, old:<1,0>, ap:<255,255>, sta:<6,0>, prof:1, snd_ch_cfg:0x0
I (1888) wifi:state: init -> auth (0xb0)
I (1897) wifi:state: auth -> assoc (0x0)
I (1908) wifi:state: assoc -> run (0x10)
I (1958) wifi:connected with wifi, aid = 7, channel 6, BW20, bssid = 0e:3e:a6:66:6a:49
I (1959) wifi:security: WPA2-PSK, phy: bgn, rssi: -79
I (1963) wifi:pm start, type: 1

I (1963) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (1975) HOTPIN_MAIN: WiFi connected to AP
I (2007) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (2007) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (3011) esp_netif_handlers: sta ip: 10.140.180.214, mask: 255.255.255.0, gw: 10.140.180.121
I (3012) HOTPIN_MAIN: âœ… Got IP address: 10.140.180.214
I (3016) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (6877) HOTPIN_MAIN: Initializing button handler...
I (6877) BUTTON: Initializing button handler on GPIO 4
I (6878) gpio: GPIO[4]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (6887) BUTTON: Button FSM task started
I (6892) BUTTON: Button handler initialized successfully
I (6897) HOTPIN_MAIN: InI (6911) SERIAL_CMD: Serial command task started on Core 0

========================================
  HotPin Serial Command Interface
========================================
Commands:
  s - Toggle voice recording (start/stop)
  c - Capture image
  l - Long press (shutdown simulation)
  d - Toggle debug mode
  h - Show this help
========================================

I (6935) SERIAL_CMD: âœ… Serial command interface initialized
I (6941) HOTPIN_MAIN: Initializing LED controller...
I (6947) LED_CTRL: Initializing LED controller on GPIO 33
I (6954) LED_CTRL: LED controller ready
I (6957) LED_CTRL: LED pattern -> 2
I (6961) HOTPIN_MAIN: Initializing WebSocket client...
I (6967) WEBSOCKET: Initializing WebSocket client...
I (6973) WEBSOCKET: Server URI: ws://10.140.180.58:8000/ws
I (6979) WEBSOCKET: Authorization header configured
I (6985) WEBSOCKET: âœ… WebSocket client initialized
I (6990) WEBSOCKET: Status callback registered
I (6995) HOTPIN_MAIN: WebSocket status callback registered
I (7001) HOTPIN_MAIN: Initializing HTTP client...
I (7007) HTTP_CLIENT: Initializing HTTP client
I (7012) HTTP_CLIENT: Authorization token configured
I (7018) HTTP_CLIENT: HTTP client initialized (server: http://10.140.180.58:8000)
I (7026) HOTPIN_MAIN: Initializing STT pipeline...
I (7031) STT: Initializing STT pipeline...
I (7036) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7054) STT: â•‘ STT Ring Buffer Allocation (PSRAM)
I (7060) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7078) STT: [MEMORY] Pre-allocation state:
I (7083) STT:   Free internal RAM: 168267 bytes
I (7088) STT:   Free DMA-capable: 149439 bytes
I (7093) STT:   Free PSRAM: 4189764 bytes
I (7098) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (7106) STT:   âœ“ Ring buffer allocated at 0x3f8011c0 (PSRAM address)
I (7113) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (7122) STT: [MEMORY] Post-allocation state:
I (7127) STT:   Free internal RAM: 168267 bytes
I (7132) STT:   Free DMA-capable: 149439 bytes
I (7137) STT:   Free PSRAM: 4124224 bytes
I (7149) STT: âœ… STT pipeline initialized
I (7150) HOTPIN_MAIN: Initializing TTS decoder...
I (7152) TTS: Initializing TTS decoder...
I (7157) WEBSOCKET: Audio callback registered
I (7162) TTS: âœ… TTS decoder initialized
I (7166) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (7174) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (7180) HOTPIN_MAIN: State manager task created on Core 1
I (7180) STATE_MGR: State manager task started on Core 1
I (7186) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (7192) STATE_MGR: Priority: 10
I (7199) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 1)...
I (7202) STATE_MGR: Starting in camera mode...
I (7210) WEBSOCKET: Connecting to WebSocket server...
I (7215) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (7227) STATE_MGR: Acquiring I2S mutex...
I (7231) websocket_client: Started
I (7231) STATE_MGR: Initializing camera...
I (7235) WEBSOCKET: WebSocket client started
I (7240) CAMERA: Initializing camera...
I (7186) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (7250) CAMERA: GPIO ISR service already active (shared)
I (7256) HOTPIN_MAIN: Initializing task watchdog (30s timeout)...
I (7263) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
I (7270) HOTPIN_MAIN: State manager task added to watchdog
E (7279) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (7285) HOTPIN_MAIN: ====================================
I (7293) cam_hal: cam init ok
I (7299) HOTPIN_MAIN: System initialization complete!
I (7303) sccb-ng: pin_sda 26 pin_scl 27
I (7308) HOTPIN_MAIN: Entering camera standby mode...
I (7313) sccb-ng: sccb_i2c_port=1
I (7319) HOTPIN_MAIN: ====================================
I (7324) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (7372) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (7372) camera: Detected OV2640 camera
I (7372) camera: Detected camera at address=0x30
I (7453) cam_hal: PSRAM DMA mode disabled
I (7454) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (7458) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (7465) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (7471) cam_hal: cam config ok
I (7475) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (7557) CAMERA: Camera initialized successfully
I (7557) STATE_MGR: I2S mutex released
I (7557) STATE_MGR: âœ… Camera mode transition complete
I (7557) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7562) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (7580) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (7585) LED_CTRL: LED pattern -> 3
I (7592) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7614) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (7621) AUDIO:   âœ“ I2S access mutex created successfully
I (7628) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7646) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (7653) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7671) AUDIO: [DIAG] Pre-init state:
I (7675) AUDIO:   Free heap: 4076928 bytes
I (7680) AUDIO:   Free internal RAM: 100715 bytes
I (7685) AUDIO:   Free DMA-capable: 81887 bytes
I (7691) AUDIO:   Free PSRAM: 3999772 bytes
I (7695) AUDIO:   Timestamp: 6171 ms
I (7700) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (7706) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (7714) AUDIO:   DMA config: 4 buffers x 1200 samples = 4800 total samples
I (7722) AUDIO:   DMA memory: 9600 bytes (2 bytes/sample)
I (7728) AUDIO: âœ… I2S channels created (took 0 ms)
I (7734) AUDIO:   TX handle: 0x3ffce0e8 | RX handle: 0x3ffce29c
I (7740) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (7747) AUDIO:   Sample rate: 16000 Hz
I (7751) AUDIO:   MCLK: DISABLED
I (7755) AUDIO:   BCLK: GPIO14 (shared)
I (7760) AUDIO:   WS:   GPIO15 (shared)
I (7764) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (7771) AUDIO: âœ… TX channel configured (took 1 ms)
I (7775) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (7782) AUDIO:   Sample rate: 16000 Hz
I (7787) AUDIO:   MCLK: DISABLED
I (7790) AUDIO:   BCLK: GPIO14 (shared)
I (7795) AUDIO:   WS:   GPIO15 (shared)
I (7800) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (7806) AUDIO: âœ… RX channel configured (took 0 ms)
I (7811) AUDIO: [STEP 4/6] Enabling TX channel...
I (7816) AUDIO: âœ… TX channel enabled (took 0 ms)
I (7822) AUDIO: [STEP 5/6] Enabling RX channel...
I (7827) AUDIO: âœ… RX channel enabled (took 0 ms)
I (7832) AUDIO: [STEP 6/6] Hardware stabilization...
I (7838) AUDIO:   Phase 1: Initial settle (50ms)
I (7853) wifi:<ba-add>idx:0 (ifx:0, 0e:3e:a6:66:6a:49), tid:0, ssn:4, winSize:64
I (7895) AUDIO:   Phase 2: DMA verification
I (7895) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (7895) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (8052) AUDIO: [DIAG] Post-init state:
I (8052) AUDIO:   Free heap: 4058092 bytes
I (8052) AUDIO:   Free internal RAM: 77979 bytes
I (8055) AUDIO:   Free DMA-capable: 58679 bytes
I (8057) WEBSOCKET: âœ… WebSocket connected to server
I (8061) AUDIO:   Free PSRAM: 3999908 bytes
I (8067) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (8071) AUDIO:   Timestamp: 6547 ms
I (8082) WEBSOCKET: Handshake sent successfully
I (8083) AUDIO:   Total init time: 201 ms
I (8088) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (8093) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8117) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (8123) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (8129) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: 16-bit mono
I (8136) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (8143) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8161) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8179) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (8185) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (8192) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (8198) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (8204) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8274) HOTPIN_MAIN: ğŸ‰ WebSocket connected and verified!
I (8274) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - entering monitor loop
I (8287) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (8287) WEBSOCKET: Server status: connected
I (9384) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9391) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (9398) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9416) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (9423) AUDIO: âœ… RX channel disabled (took 0 ms)
I (9428) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (9435) AUDIO: âœ… TX channel disabled (took 0 ms)
I (9440) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (9497) AUDIO: [STEP 4/5] Deleting RX channel...
I (9497) AUDIO: âœ… RX channel deleted (took 0 ms)
I (9497) AUDIO: [STEP 5/5] Deleting TX channel...
I (9502) AUDIO: âœ… TX channel deleted (took 0 ms)
I (9507) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (9565) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9571) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (9578) AUDIO: â•‘ Camera Can Now Initialize
I (9583) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9601) HOTPIN_MAIN: Main task exiting - system running
I (9607) main_task: Returned from app_main()
I (11272) STATE_MGR: Button event received: 3 in state CAMERA_STANDBY
I (11272) BUTTON: Long press detected (2999 ms)
W (11272) STATE_MGR: Long press - shutdown requested
W (11279) STATE_MGR: Shutdown state reached
W (11284) STATE_MGR: === SYSTEM SHUTDOWN ===
I (11289) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11307) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (11314) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11332) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11350) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (11357) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11375) AUDIO: [DIAG] Pre-init state:
I (11379) AUDIO:   Free heap: 4081780 bytes
I (11384) AUDIO:   Free internal RAM: 105311 bytes
I (11390) AUDIO:   Free DMA-capable: 86483 bytes
I (11395) AUDIO:   Free PSRAM: 3999772 bytes
I (11400) AUDIO:   Timestamp: 9876 ms
I (11404) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (11411) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (11419) AUDIO:   DMA config: 4 buffers x 1200 samples = 4800 total samples
I (11427) AUDIO:   DMA memory: 9600 bytes (2 bytes/sample)
I (11433) AUDIO: âœ… I2S channels created (took 0 ms)
I (11439) AUDIO:   TX handle: 0x3ffafc64 | RX handle: 0x3ffc4c60
I (11445) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (11452) AUDIO:   Sample rate: 16000 Hz
I (11457) AUDIO:   MCLK: DISABLED
I (11461) AUDIO:   BCLK: GPIO14 (shared)
I (11465) AUDIO:   WS:   GPIO15 (shared)
I (11470) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (11477) AUDIO: âœ… TX channel configured (took 1 ms)
I (11481) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (11488) AUDIO:   Sample rate: 16000 Hz
I (11493) AUDIO:   MCLK: DISABLED
I (11497) AUDIO:   BCLK: GPIO14 (shared)
I (11501) AUDIO:   WS:   GPIO15 (shared)
I (11506) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (11512) AUDIO: âœ… RX channel configured (took 0 ms)
I (11517) AUDIO: [STEP 4/6] Enabling TX channel...
I (11523) AUDIO: âœ… TX channel enabled (took 0 ms)
I (11528) AUDIO: [STEP 5/6] Enabling RX channel...
I (11534) AUDIO: âœ… RX channel enabled (took 0 ms)
I (11539) AUDIO: [STEP 6/6] Hardware stabilization...
I (11545) AUDIO:   Phase 1: Initial settle (50ms)
I (11600) AUDIO:   Phase 2: DMA verification
I (11600) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (11600) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (11757) AUDIO: [DIAG] Post-init state:
I (11757) AUDIO:   Free heap: 4063216 bytes
I (11757) AUDIO:   Free internal RAM: 84311 bytes
I (11761) AUDIO:   Free DMA-capable: 65483 bytes
I (11766) AUDIO:   Free PSRAM: 3999772 bytes
I (11771) AUDIO:   Timestamp: 10247 ms
I (11776) AUDIO:   Total init time: 201 ms
I (11780) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11798) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (11804) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (11810) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: 16-bit mono
I (11818) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (11825) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11843) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (11861) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (11867) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (11874) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (11881) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (11887) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13071) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13078) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (13086) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13104) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (13111) AUDIO: âœ… RX channel disabled (took 0 ms)
I (13116) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (13123) AUDIO: âœ… TX channel disabled (took 0 ms)
I (13128) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (13185) AUDIO: [STEP 4/5] Deleting RX channel...
I (13186) AUDIO: âœ… RX channel deleted (took 0 ms)
I (13186) AUDIO: [STEP 5/5] Deleting TX channel...
I (13191) AUDIO: âœ… TX channel deleted (took 0 ms)
I (13196) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (13254) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13261) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (13268) AUDIO: â•‘ Camera Can Now Initialize
I (13273) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13291) LED_CTRL: LED pattern -> 1
I (13895) LED_CTRL: LED pattern -> 3
I (15095) LED_CTRL: LED pattern -> 0
I (15095) STATE_MGR: Stopping all subsystems...
I (15095) STATE_MGR: Shutting down camera...
I (15099) CAMERA: Deinitializing camera...
I (15104) CAMERA: Camera deinitialized
I (15108) STT: Stopping STT pipeline...
W (15112) STT: STT pipeline not running
I (15117) TTS: Stopping TTS decoder...
W (15121) TTS: TTS decoder not running
I (15126) STATE_MGR: Requesting WebSocket shutdown
I (15131) HOTPIN_MAIN: WebSocket connection task shutting down
I (15138) HOTPIN_MAIN: Initiating WebSocket client disconnect
I (15144) WEBSOCKET: Disconnecting from WebSocket server...
W (15432) websocket_client: Client was not started
W (15433) WEBSOCKET: WebSocket client stop reported ESP_FAIL, continuing cleanup
I (15435) WEBSOCKET: WebSocket disconnected
I (15440) HOTPIN_MAIN: WebSocket disconnect acknowledged
I (15481) STATE_MGR: âœ… Shutdown complete