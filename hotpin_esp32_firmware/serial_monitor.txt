PS F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_firmware> idf.py fullclean build flash monitor
Executing action: fullclean
Executing action: remove_managed_components
Executing action: all (aliases: build)
Running cmake in directory 'F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_firmware\build'
Executing "cmake -G Ninja -DPYTHON_DEPS_CHECKED=1 -DPYTHON=C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe -DESP_PLATFORM=1 -DCCACHE_ENABLE=1 'F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_firmware'"...
-- IDF_TARGET is not set, guessed 'esp32' from sdkconfig 'F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig'
-- Found Git: C:/Espressif/tools/idf-git/2.44.0/cmd/git.exe (found version "2.44.0.windows.1")
-- ccache will be used for faster recompilation
-- The C compiler identification is GNU 14.2.0
-- The CXX compiler identification is GNU 14.2.0
-- The ASM compiler identification is GNU
-- Found assembler: C:/Espressif/tools/xtensa-esp-elf/esp-14.2.0_20241119/xtensa-esp-elf/bin/xtensa-esp32-elf-gcc.exe
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: C:/Espressif/tools/xtensa-esp-elf/esp-14.2.0_20241119/xtensa-esp-elf/bin/xtensa-esp32-elf-gcc.exe - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: C:/Espressif/tools/xtensa-esp-elf/esp-14.2.0_20241119/xtensa-esp-elf/bin/xtensa-esp32-elf-g++.exe - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Building ESP-IDF components for target esp32
NOTICE:
Following dependencies have new versions available:
Dependency "espressif/esp32-camera": "2.1.2" -> "2.1.3"
Consider running "idf.py update-dependencies" to update your lock file.
NOTICE: Processing 4 dependencies:
NOTICE: [1/4] espressif/esp32-camera (2.1.2)
NOTICE: [2/4] espressif/esp_jpeg (1.3.1)
NOTICE: [3/4] espressif/esp_websocket_client (1.5.0)
NOTICE: [4/4] idf (5.4.2)
-- Project sdkconfig file F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig
Loading defaults file F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults...
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults:7 CONFIG_ESP32_DEFAULT_CPU_FREQ_240 was replaced with CONFIG_ESP_DEFAULT_CPU_FREQ_MHZ_240
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults:8 CONFIG_ESP32_DEFAULT_CPU_FREQ_MHZ was replaced with CONFIG_ESP_DEFAULT_CPU_FREQ_MHZ
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults:13 CONFIG_ESP32_SPIRAM_SUPPORT was replaced with CONFIG_SPIRAM
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults:26 CONFIG_ESP32_WIFI_DYNAMIC_RX_BUFFER_NUM was replaced with CONFIG_ESP_WIFI_DYNAMIC_RX_BUFFER_NUM
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults:27 CONFIG_ESP32_WIFI_DYNAMIC_TX_BUFFER_NUM was replaced with CONFIG_ESP_WIFI_DYNAMIC_TX_BUFFER_NUM
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults:28 CONFIG_ESP32_WIFI_STATIC_RX_BUFFER_NUM was replaced with CONFIG_ESP_WIFI_STATIC_RX_BUFFER_NUM
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults:29 CONFIG_ESP32_WIFI_STATIC_TX_BUFFER_NUM was replaced with CONFIG_ESP_WIFI_STATIC_TX_BUFFER_NUM
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults:63 CONFIG_ESP32_WIFI_AMPDU_TX_ENABLED was replaced with CONFIG_ESP_WIFI_AMPDU_TX_ENABLED
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults:64 CONFIG_ESP32_WIFI_AMPDU_RX_ENABLED was replaced with CONFIG_ESP_WIFI_AMPDU_RX_ENABLED
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults:65 CONFIG_ESP32_WIFI_NVS_ENABLED was replaced with CONFIG_ESP_WIFI_NVS_ENABLED
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults:70 CONFIG_ESP_TASK_WDT was replaced with CONFIG_ESP_TASK_WDT_INIT
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults:77 CONFIG_ESP32_BROWNOUT_DET was replaced with CONFIG_ESP_BROWNOUT_DET
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults:103 CONFIG_COMPILER_OPTIMIZATION_LEVEL_RELEASE was replaced with CONFIG_COMPILER_OPTIMIZATION_SIZE
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:4 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:6 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:10 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:12 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:23 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:25 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:31 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:33 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:38 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:40 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:43 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:45 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:51 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:53 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:60 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:62 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:67 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:69 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:74 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:76 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:79 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:81 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:86 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:88 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:92 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:94 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:99 line was updated to # ===========================n
C:\Users\VIGHNE~1\AppData\Local\Temp\kconfgen_tmpl73_bfrh:101 line was updated to # ===========================n
warning: unknown kconfig symbol 'SPIRAM_SIZE' assigned to '4194304' in F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults
warning: unknown kconfig symbol 'SPIRAM_ALLOW_DMA' assigned to 'y' in F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults
warning: unknown kconfig symbol 'ENABLE_SDMMC_HOST' assigned to 'n' in F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults
warning: unknown kconfig symbol 'WS_TRANSPORT_MAX_MESSAGE_SIZE' assigned to '8192' in F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig.defaults
-- Compiler supported targets: xtensa-esp-elf
-- Found Python3: C:/Espressif/python_env/idf5.4_py3.11_env/Scripts/python.exe (found version "3.11.2") found components: Interpreter
-- Performing Test CMAKE_HAVE_LIBC_PTHREAD
-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success
-- Found Threads: TRUE
-- Performing Test C_COMPILER_SUPPORTS_WFORMAT_SIGNEDNESS
-- Performing Test C_COMPILER_SUPPORTS_WFORMAT_SIGNEDNESS - Success
-- USING O3
-- App "hotpin_esp32_firmware" version: bda02c8-dirty
-- Adding linker script F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/build/esp-idf/esp_system/ld/memory.ld
-- Adding linker script F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/build/esp-idf/esp_system/ld/sections.ld.in
-- Adding linker script C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_rom/esp32/ld/esp32.rom.ld
-- Adding linker script C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_rom/esp32/ld/esp32.rom.api.ld
-- Adding linker script C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_rom/esp32/ld/esp32.rom.libgcc.ld
-- Adding linker script C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_rom/esp32/ld/esp32.rom.newlib-data.ld
-- Adding linker script C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_rom/esp32/ld/esp32.rom.syscalls.ld
-- Adding linker script C:/Espressif/frameworks/esp-idf-v5.4.2/components/soc/esp32/ld/esp32.peripherals.ld
-- Components: app_trace app_update bootloader bootloader_support bt cmock console cxx driver efuse esp-tls esp_adc esp_app_format esp_bootloader_format esp_coex esp_common esp_driver_ana_cmpr esp_driver_cam esp_driver_dac esp_driver_gpio esp_driver_gptimer esp_driver_i2c esp_driver_i2s esp_driver_isp esp_driver_jpeg esp_driver_ledc esp_driver_mcpwm esp_driver_parlio esp_driver_pcnt esp_driver_ppa esp_driver_rmt esp_driver_sdio esp_driver_sdm esp_driver_sdmmc esp_driver_sdspi esp_driver_spi esp_driver_touch_sens esp_driver_tsens esp_driver_uart esp_driver_usb_serial_jtag esp_eth esp_event esp_gdbstub esp_hid esp_http_client esp_http_server esp_https_ota esp_https_server esp_hw_support esp_lcd esp_local_ctrl esp_mm esp_netif esp_netif_stack esp_partition esp_phy esp_pm esp_psram esp_ringbuf esp_rom esp_security esp_system esp_timer esp_vfs_console esp_wifi espcoredump espressif__esp32-camera espressif__esp_jpeg espressif__esp_websocket_client esptool_py fatfs freertos hal heap http_parser idf_test ieee802154 json log lwip main mbedtls mqtt newlib nvs_flash nvs_sec_provider openthread partition_table perfmon protobuf-c protocomm pthread rt sdmmc soc spi_flash spiffs tcp_transport ulp unity usb vfs wear_levelling wifi_provisioning wpa_supplicant xtensa
-- Component paths: C:/Espressif/frameworks/esp-idf-v5.4.2/components/app_trace C:/Espressif/frameworks/esp-idf-v5.4.2/components/app_update C:/Espressif/frameworks/esp-idf-v5.4.2/components/bootloader C:/Espressif/frameworks/esp-idf-v5.4.2/components/bootloader_support C:/Espressif/frameworks/esp-idf-v5.4.2/components/bt C:/Espressif/frameworks/esp-idf-v5.4.2/components/cmock C:/Espressif/frameworks/esp-idf-v5.4.2/components/console C:/Espressif/frameworks/esp-idf-v5.4.2/components/cxx C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver C:/Espressif/frameworks/esp-idf-v5.4.2/components/efuse C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp-tls C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_adc C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_app_format C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_bootloader_format C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_coex C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_common C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_ana_cmpr C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_cam C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_dac C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_gpio C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_gptimer C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_i2c C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_i2s C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_isp C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_jpeg C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_ledc C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_mcpwm C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_parlio C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_pcnt C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_ppa C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_rmt C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_sdio C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_sdm C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_sdmmc C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_sdspi C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_spi C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_touch_sens C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_tsens C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_uart C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_driver_usb_serial_jtag C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_eth C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_event C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_gdbstub C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_hid C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_http_client C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_http_server C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_https_ota C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_https_server C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_hw_support C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_lcd C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_local_ctrl C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_mm C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_netif C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_netif_stack C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_partition C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_phy C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_pm C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_psram C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_ringbuf C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_rom C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_security C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_timer C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_vfs_console C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_wifi C:/Espressif/frameworks/esp-idf-v5.4.2/components/espcoredump F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/managed_components/espressif__esp32-camera F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/managed_components/espressif__esp_jpeg F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/managed_components/espressif__esp_websocket_client C:/Espressif/frameworks/esp-idf-v5.4.2/components/esptool_py C:/Espressif/frameworks/esp-idf-v5.4.2/components/fatfs C:/Espressif/frameworks/esp-idf-v5.4.2/components/freertos C:/Espressif/frameworks/esp-idf-v5.4.2/components/hal C:/Espressif/frameworks/esp-idf-v5.4.2/components/heap C:/Espressif/frameworks/esp-idf-v5.4.2/components/http_parser C:/Espressif/frameworks/esp-idf-v5.4.2/components/idf_test C:/Espressif/frameworks/esp-idf-v5.4.2/components/ieee802154 C:/Espressif/frameworks/esp-idf-v5.4.2/components/json C:/Espressif/frameworks/esp-idf-v5.4.2/components/log C:/Espressif/frameworks/esp-idf-v5.4.2/components/lwip F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main C:/Espressif/frameworks/esp-idf-v5.4.2/components/mbedtls C:/Espressif/frameworks/esp-idf-v5.4.2/components/mqtt C:/Espressif/frameworks/esp-idf-v5.4.2/components/newlib C:/Espressif/frameworks/esp-idf-v5.4.2/components/nvs_flash C:/Espressif/frameworks/esp-idf-v5.4.2/components/nvs_sec_provider C:/Espressif/frameworks/esp-idf-v5.4.2/components/openthread C:/Espressif/frameworks/esp-idf-v5.4.2/components/partition_table C:/Espressif/frameworks/esp-idf-v5.4.2/components/perfmon C:/Espressif/frameworks/esp-idf-v5.4.2/components/protobuf-c C:/Espressif/frameworks/esp-idf-v5.4.2/components/protocomm C:/Espressif/frameworks/esp-idf-v5.4.2/components/pthread C:/Espressif/frameworks/esp-idf-v5.4.2/components/rt C:/Espressif/frameworks/esp-idf-v5.4.2/components/sdmmc C:/Espressif/frameworks/esp-idf-v5.4.2/components/soc C:/Espressif/frameworks/esp-idf-v5.4.2/components/spi_flash C:/Espressif/frameworks/esp-idf-v5.4.2/components/spiffs C:/Espressif/frameworks/esp-idf-v5.4.2/components/tcp_transport C:/Espressif/frameworks/esp-idf-v5.4.2/components/ulp C:/Espressif/frameworks/esp-idf-v5.4.2/components/unity C:/Espressif/frameworks/esp-idf-v5.4.2/components/usb C:/Espressif/frameworks/esp-idf-v5.4.2/components/vfs C:/Espressif/frameworks/esp-idf-v5.4.2/components/wear_levelling C:/Espressif/frameworks/esp-idf-v5.4.2/components/wifi_provisioning C:/Espressif/frameworks/esp-idf-v5.4.2/components/wpa_supplicant C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa
-- Configuring done (12.9s)
-- Generating done (1.2s)
-- Build files have been written to: F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/build
Running ninja in directory 'F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_firmware\build'
Executing "ninja all"...
[30/1050] Generating ../../partition_table/partition-table.bin
Partition table binary generated. Contents:
*******************************************************************************
# ESP-IDF Partition Table
# Name, Type, SubType, Offset, Size, Flags
nvs,data,nvs,0x9000,16K,
otadata,data,ota,0xd000,8K,
phy_init,data,phy,0xf000,4K,
factory,app,factory,0x10000,1536K,
storage,data,fat,0x190000,448K,
*******************************************************************************
[1009/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/button_handler.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/button_handler.c:7:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/button_handler.c:193:1: warning: ignoring attribute 'section (".iram1.1")' because it conflicts with previous 'section (".iram1.0")' [-Wattributes]
  193 | static void IRAM_ATTR button_isr_handler(void *arg) {
      | ^~~~~~
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/button_handler.c:44:23: note: previous declaration here
   44 | static void IRAM_ATTR button_isr_handler(void *arg);
      |                       ^~~~~~~~~~~~~~~~~~
[1010/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/camera_controller.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/camera_controller.c:7:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
[1011/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/feedback_player.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/feedback_player.c:8:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
[1012/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/audio_feedback.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/audio_feedback.c:8:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
[1013/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/audio_driver.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/audio_driver.c:16:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
[1015/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/tts_decoder.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/tts_decoder.c:13:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
[1016/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/http_client.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/http_client.c:7:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
[1017/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/json_protocol.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/json_protocol.c:7:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
[1020/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/led_controller.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/led_controller.c:7:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
[1021/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/serial_commands.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/serial_commands.c:8:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
[1037/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/stt_pipeline.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/stt_pipeline.c:13:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/stt_pipeline.c:639:15: warning: 'ring_buffer_available_space' defined but not used [-Wunused-function]
  639 | static size_t ring_buffer_available_space(void) {
      |               ^~~~~~~~~~~~~~~~~~~~~~~~~~~
[1038/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/main.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/main.c:35:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
[1039/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/websocket_client.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/websocket_client.c:15:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
[1040/1050] Building C object esp-idf/main/CMakeFiles/__idf_main.dir/state_manager.c.obj
In file included from C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:23,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/include/config.h:18,
                 from F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/state_manager.c:12:
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/adc.h:19:2: warning: #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively" [-Wcpp]
   19 | #warning "legacy adc driver is deprecated, please migrate to use esp_adc/adc_oneshot.h and esp_adc/adc_continuous.h for oneshot mode and continuous mode drivers respectively"
      |  ^~~~~~~
C:/Espressif/frameworks/esp-idf-v5.4.2/components/driver/deprecated/driver/i2s.h:27:2: warning: #warning "This set of I2S APIs has been deprecated, please include 'driver/i2s_std.h', 'driver/i2s_pdm.h' or 'driver/i2s_tdm.h' instead. if you want to keep using the old APIs and ignore this warning, you can enable 'Suppress legacy driver deprecated warning' option under 'I2S Configuration' menu in Kconfig" [-Wcpp]
   27 | #warning "This set of I2S APIs has been deprecated, \
      |  ^~~~~~~
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/state_manager.c:50:21: warning: 'tts_task_handle' defined but not used [-Wunused-variable]
   50 | static TaskHandle_t tts_task_handle = NULL;
      |                     ^~~~~~~~~~~~~~~
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/state_manager.c:49:21: warning: 'stt_task_handle' defined but not used [-Wunused-variable]
   49 | static TaskHandle_t stt_task_handle = NULL;
      |                     ^~~~~~~~~~~~~~~
F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/main/state_manager.c:48:21: warning: 'camera_task_handle' defined but not used [-Wunused-variable]
   48 | static TaskHandle_t camera_task_handle = NULL;
      |                     ^~~~~~~~~~~~~~~~~~
[1042/1050] Performing configure step for 'bootloader'
-- Found Git: C:/Espressif/tools/idf-git/2.44.0/cmd/git.exe (found version "2.44.0.windows.1")
-- The C compiler identification is GNU 14.2.0
-- The CXX compiler identification is GNU 14.2.0
-- The ASM compiler identification is GNU
-- Found assembler: C:/Espressif/tools/xtensa-esp-elf/esp-14.2.0_20241119/xtensa-esp-elf/bin/xtensa-esp32-elf-gcc.exe
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: C:/Espressif/tools/xtensa-esp-elf/esp-14.2.0_20241119/xtensa-esp-elf/bin/xtensa-esp32-elf-gcc.exe - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: C:/Espressif/tools/xtensa-esp-elf/esp-14.2.0_20241119/xtensa-esp-elf/bin/xtensa-esp32-elf-g++.exe - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Building ESP-IDF components for target esp32
-- Project sdkconfig file F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/sdkconfig
-- Compiler supported targets: xtensa-esp-elf
-- Adding linker script C:/Espressif/frameworks/esp-idf-v5.4.2/components/soc/esp32/ld/esp32.peripherals.ld
-- Bootloader project name: "bootloader" version: 1
-- Adding linker script C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_rom/esp32/ld/esp32.rom.ld
-- Adding linker script C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_rom/esp32/ld/esp32.rom.api.ld
-- Adding linker script C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_rom/esp32/ld/esp32.rom.libgcc.ld
-- Adding linker script C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_rom/esp32/ld/esp32.rom.newlib-funcs.ld
-- Adding linker script C:/Espressif/frameworks/esp-idf-v5.4.2/components/bootloader/subproject/main/ld/esp32/bootloader.ld
-- Adding linker script C:/Espressif/frameworks/esp-idf-v5.4.2/components/bootloader/subproject/main/ld/esp32/bootloader.rom.ld
-- Components: bootloader bootloader_support efuse esp_app_format esp_bootloader_format esp_common esp_hw_support esp_rom esp_security esp_system esptool_py freertos hal log main micro-ecc newlib partition_table soc spi_flash xtensa
-- Component paths: C:/Espressif/frameworks/esp-idf-v5.4.2/components/bootloader C:/Espressif/frameworks/esp-idf-v5.4.2/components/bootloader_support C:/Espressif/frameworks/esp-idf-v5.4.2/components/efuse C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_app_format C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_bootloader_format C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_common C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_hw_support C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_rom C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_security C:/Espressif/frameworks/esp-idf-v5.4.2/components/esp_system C:/Espressif/frameworks/esp-idf-v5.4.2/components/esptool_py C:/Espressif/frameworks/esp-idf-v5.4.2/components/freertos C:/Espressif/frameworks/esp-idf-v5.4.2/components/hal C:/Espressif/frameworks/esp-idf-v5.4.2/components/log C:/Espressif/frameworks/esp-idf-v5.4.2/components/bootloader/subproject/main C:/Espressif/frameworks/esp-idf-v5.4.2/components/bootloader/subproject/components/micro-ecc C:/Espressif/frameworks/esp-idf-v5.4.2/components/newlib C:/Espressif/frameworks/esp-idf-v5.4.2/components/partition_table C:/Espressif/frameworks/esp-idf-v5.4.2/components/soc C:/Espressif/frameworks/esp-idf-v5.4.2/components/spi_flash C:/Espressif/frameworks/esp-idf-v5.4.2/components/xtensa
-- Configuring done (9.4s)
-- Generating done (0.1s)
-- Build files have been written to: F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/build/bootloader
[110/111] Generating binary image from built executable
esptool.py v4.8.1
Creating esp32 image...
Merged 2 ELF sections
Successfully created esp32 image.
Generated F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/build/bootloader/bootloader.bin
[111/111] C:\WINDOWS\system32\cmd.exe /C "cd /D "F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_firm...er 0x1000 "F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/build/bootloader/bootloader.bin"
Bootloader binary size 0x6570 bytes. 0xa90 bytes (9%) free.
[1049/1050] Generating binary image from built executable
esptool.py v4.8.1
Creating esp32 image...
Merged 2 ELF sections
Successfully created esp32 image.
Generated F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/build/hotpin_esp32_firmware.bin
[1050/1050] C:\WINDOWS\system32\cmd.exe /C "cd /D "F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_fi...able.bin" "F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/build/hotpin_esp32_firmware.bin"
hotpin_esp32_firmware.bin binary size 0x120e70 bytes. Smallest app partition is 0x180000 bytes. 0x5f190 bytes (25%) free.
Executing action: flash
Serial port COM7
Connecting....
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP32
Running ninja in directory 'F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_firmware\build'
Executing "ninja flash"...
[1/5] C:\WINDOWS\system32\cmd.exe /C "cd /D "F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_firmware...able.bin" "F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/build/hotpin_esp32_firmware.bin"
hotpin_esp32_firmware.bin binary size 0x120e70 bytes. Smallest app partition is 0x180000 bytes. 0x5f190 bytes (25%) free.
[1/1] C:\WINDOWS\system32\cmd.exe /C "cd /D "F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_firmware...er 0x1000 "F:/Documents/College/6th Semester/Project/ESP_Warp/hotpin_esp32_firmware/build/bootloader/bootloader.bin"
Bootloader binary size 0x6570 bytes. 0xa90 bytes (9%) free.
[4/5] C:\WINDOWS\system32\cmd.exe /C "cd /D C:\Espressif\frameworks\esp-idf-v5.4.2\components\esptool_py && C:\Espres...p/hotpin_esp32_firmware/build" -P C:/Espressif/frameworks/esp-idf-v5.4.2/components/esptool_py/run_serial_tool.cmake
esptool.py --chip esp32 -p COM7 -b 460800 --before=default_reset --after=hard_reset write_flash --flash_mode dio --flash_freq 40m --flash_size 2MB 0x1000 bootloader/bootloader.bin 0x10000 hotpin_esp32_firmware.bin 0x8000 partition_table/partition-table.bin 0xd000 ota_data_initial.bin
esptool.py v4.8.1
Serial port COM7
Connecting...
Chip is ESP32-D0WD-V3 (revision v3.1)
Features: WiFi, BT, Dual Core, 240MHz, VRef calibration in efuse, Coding Scheme None
Crystal is 40MHz
MAC: 80:f3:da:99:8c:64
Uploading stub...
Running stub...
Stub running...
Changing baud rate to 460800
Changed.
Configuring flash size...
Flash will be erased from 0x00001000 to 0x00007fff...
Flash will be erased from 0x00010000 to 0x00130fff...
Flash will be erased from 0x00008000 to 0x00008fff...
Flash will be erased from 0x0000d000 to 0x0000efff...
SHA digest in image updated
Compressed 25968 bytes to 16370...
Writing at 0x00001000... (100 %)
Wrote 25968 bytes (16370 compressed) at 0x00001000 in 0.8 seconds (effective 270.7 kbit/s)...
Hash of data verified.
Compressed 1183344 bytes to 700555...
Writing at 0x00010000... (2 %)
Writing at 0x00020352... (4 %)
Writing at 0x0002fdb0... (6 %)
Writing at 0x00039818... (9 %)
Writing at 0x000427d1... (11 %)
Writing at 0x000534b9... (13 %)
Writing at 0x00058691... (16 %)
Writing at 0x0005df66... (18 %)
Writing at 0x0006383b... (20 %)
Writing at 0x00069baa... (23 %)
Writing at 0x000701e5... (25 %)
Writing at 0x00075d7e... (27 %)
Writing at 0x0007b8ff... (30 %)
Writing at 0x00081323... (32 %)
Writing at 0x00086e19... (34 %)
Writing at 0x0008c1c7... (37 %)
Writing at 0x00091928... (39 %)
Writing at 0x00097061... (41 %)
Writing at 0x0009cd01... (44 %)
Writing at 0x000a2089... (46 %)
Writing at 0x000a75fe... (48 %)
Writing at 0x000ace05... (51 %)
Writing at 0x000b2b3c... (53 %)
Writing at 0x000b83cf... (55 %)
Writing at 0x000bd9d1... (58 %)
Writing at 0x000c350b... (60 %)
Writing at 0x000c91a5... (62 %)
Writing at 0x000ce428... (65 %)
Writing at 0x000d3a2e... (67 %)
Writing at 0x000d8ffe... (69 %)
Writing at 0x000de401... (72 %)
Writing at 0x000e358c... (74 %)
Writing at 0x000e87f8... (76 %)
Writing at 0x000ee0ce... (79 %)
Writing at 0x000f37eb... (81 %)
Writing at 0x000fb029... (83 %)
Writing at 0x00104f92... (86 %)
Writing at 0x0010a908... (88 %)
Writing at 0x00116901... (90 %)
Writing at 0x0011c05c... (93 %)
Writing at 0x0012192e... (95 %)
Writing at 0x001274f1... (97 %)
Writing at 0x0012cb34... (100 %)
Wrote 1183344 bytes (700555 compressed) at 0x00010000 in 16.7 seconds (effective 568.3 kbit/s)...
Hash of data verified.
Compressed 3072 bytes to 137...
Writing at 0x00008000... (100 %)
Wrote 3072 bytes (137 compressed) at 0x00008000 in 0.1 seconds (effective 380.8 kbit/s)...
Hash of data verified.
Compressed 8192 bytes to 31...
Writing at 0x0000d000... (100 %)
Wrote 8192 bytes (31 compressed) at 0x0000d000 in 0.0 seconds (effective 2129.0 kbit/s)...
Hash of data verified.

Leaving...
Hard resetting via RTS pin...
Executing action: monitor
Running idf_monitor in directory 'F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_firmware'
Executing "C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe C:\Espressif\frameworks\esp-idf-v5.4.2\tools/idf_monitor.py -p COM7 -b 115200 --toolchain-prefix xtensa-esp32-elf- --target esp32 --revision 0 'F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_firmware\build\hotpin_esp32_firmware.elf' --force-color -m 'C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe' 'C:\Espressif\frameworks\esp-idf-v5.4.2\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM7 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM7 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:2
load:0x3fff0030,len:6276
load:0x40078000,len:15736
load:0x40080400,len:4
--- 0x40080400: _init at ??:?
load:0x40080404,len:3860
entry 0x4008063c
I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Oct 12 2025 06:40:14
I (30) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=373c4h (226244) map
I (183) esp_image: segment 1: paddr=000473ec vaddr=3ff80000 size=0001ch (    28) load
I (183) esp_image: segment 2: paddr=00047410 vaddr=3ffb0000 size=08c08h ( 35848) load
I (200) esp_image: segment 3: paddr=00050020 vaddr=400d0020 size=bc9cch (772556) map
I (464) esp_image: segment 4: paddr=0010c9f4 vaddr=3ffb8c08 size=090bch ( 37052) load
I (478) esp_image: segment 5: paddr=00115ab8 vaddr=40080000 size=1b394h (111508) load
I (537) boot: Loaded app from partition at offset 0x10000
I (538) boot: Disabling RNG early entropy source...
I (548) quad_psram: This chip is ESP32-D0WD
I (548) esp_psram: Found 4MB PSRAM device
I (548) esp_psram: Speed: 40MHz
I (552) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (559) cpu_start: Multicore app
I (1453) esp_psram: SPI SRAM memory test OK
I (1461) cpu_start: Pro cpu start user code
I (1461) cpu_start: cpu freq: 240000000 Hz
I (1462) app_init: Application information:
I (1465) app_init: Project name:     hotpin_esp32_firmware
I (1471) app_init: App version:      bda02c8-dirty
I (1476) app_init: Compile time:     Oct 12 2025 06:40:02
I (1482) app_init: ELF file SHA256:  21d226e86...
I (1488) app_init: ESP-IDF:          v5.4.2-dirty
I (1493) efuse_init: Min chip rev:     v0.0
I (1498) efuse_init: Max chip rev:     v3.99
I (1503) efuse_init: Chip rev:         v3.1
I (1508) heap_init: Initializing. RAM available for dynamic allocation:
I (1515) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1521) heap_init: At 3FFC9318 len 00016CE8 (91 KiB): DRAM
I (1528) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1534) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1541) heap_init: At 4009B394 len 00004C6C (19 KiB): IRAM
I (1547) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1555) spi_flash: detected chip: generic
I (1559) spi_flash: flash io: dio
W (1563) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1578) main_task: Started on CPU0
I (1581) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1590) main_task: Calling app_main()
I (1594) HOTPIN_MAIN: ====================================
I (1600) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1606) HOTPIN_MAIN: ====================================
W (1612) HOTPIN_MAIN: Brownout detector disabled
I (1617) HOTPIN_MAIN: Validating PSRAM...
I (1622) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1628) HOTPIN_MAIN: PSRAM validation passed
I (1634) HOTPIN_MAIN: ====================================
I (1640) HOTPIN_MAIN: System Information:
I (1644) HOTPIN_MAIN: Chip: esp32
I (1648) HOTPIN_MAIN: Cores: 2
I (1652) HOTPIN_MAIN: Silicon revision: 301
I (1657) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1662) HOTPIN_MAIN: Flash: 2 MB external
I (1667) HOTPIN_MAIN: Free heap: 4365204 bytes
I (1672) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1677) HOTPIN_MAIN: ====================================
I (1683) HOTPIN_MAIN: Initializing NVS...
I (1712) HOTPIN_MAIN: NVS initialized successfully
I (1713) event_dispatcher: System event queue ready (16 entries)
I (1714) HOTPIN_MAIN: Synchronization primitives created
I (1720) HOTPIN_MAIN: Initializing WiFi...
I (1729) wifi:wifi driver task: 3ffd9f10, prio:23, stack:6656, core=0
I (1741) wifi:wifi firmware version: bea31f3
I (1741) wifi:wifi certification version: v7.0
I (1742) wifi:config NVS flash: enabled
I (1742) wifi:config nano formatting: disabled
I (1747) wifi:Init data frame dynamic rx buffer num: 32
I (1752) wifi:Init static rx mgmt buffer num: 5
I (1756) wifi:Init management short buffer num: 32
I (1760) wifi:Init dynamic tx buffer num: 32
I (1764) wifi:Init static rx buffer size: 1600
I (1769) wifi:Init static rx buffer num: 16
I (1772) wifi:Init dynamic rx buffer num: 32
I (1777) wifi_init: rx ba win: 6
I (1780) wifi_init: accept mbox: 6
I (1784) wifi_init: tcpip mbox: 32
I (1788) wifi_init: udp mbox: 6
I (1792) wifi_init: tcp mbox: 6
I (1796) wifi_init: tcp tx win: 5760
I (1800) wifi_init: tcp rx win: 5760
I (1804) wifi_init: tcp mss: 1440
I (1808) wifi_init: WiFi IRAM OP enabled
I (1813) wifi_init: WiFi RX IRAM OP enabled
I (1819) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (1890) wifi:mode : sta (80:f3:da:99:8c:64)
I (1891) wifi:enable tsf
I (1894) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (1894) HOTPIN_MAIN: Waiting for WiFi connection...
I (1894) HOTPIN_MAIN: WiFi station started, connecting...
I (1917) wifi:new:<11,0>, old:<1,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (1919) wifi:state: init -> auth (0xb0)
I (6434) wifi:state: auth -> init (0x200)
I (6439) wifi:new:<11,0>, old:<11,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
W (6440) HOTPIN_MAIN: WiFi disconnected, retrying...
I (6908) HOTPIN_MAIN: Initializing button handler...
I (6908) BUTTON: Initializing button handler on GPIO 4
I (6909) gpio: GPIO[4]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (6918) BUTTON: Button FSM task started
W (6923) BUTTON: Button input low at init - waiting for release before enabling detection
I (6931) BUTTON: Button handler initialized successfully (initial level=0, primed=0)
I (6939) HOTPIN_MAIN: IniI (6953) SERIAL_CMD: Serial command task started on Core 0

========================================
  HotPin Serial Command Interface
========================================
Commands:
  s - Toggle voice recording (start/stop)
  c - Capture image
  l - Long press (shutdown simulation)
  d - Toggle debug mode
  h - Show this help
========================================

I (6977) SERIAL_CMD:  Serial command interface initialized
I (6983) HOTPIN_MAIN: Initializing LED controller...
I (6989) LED_CTRL: Initializing LED controller on GPIO 33
I (6996) LED_CTRL: LED controller ready
I (7000) LED_CTRL: LED pattern -> 2
I (7004) HOTPIN_MAIN: Initializing WebSocket client...
I (7010) WEBSOCKET: Initializing WebSocket client...
I (7015) WEBSOCKET: Server URI: ws://10.87.102.58:8000/ws
I (7022) WEBSOCKET: Authorization header configured
I (7028) WEBSOCKET:  WebSocket client initialized
I (7033) WEBSOCKET: Status callback registered
I (7038) HOTPIN_MAIN: WebSocket status callback registered
I (7044) HOTPIN_MAIN: Initializing HTTP client...
I (7049) HTTP_CLIENT: Initializing HTTP client
I (7054) HTTP_CLIENT: Authorization token configured
I (7060) HTTP_CLIENT: HTTP client initialized (server: http://10.87.102.58:8000)
I (7068) HOTPIN_MAIN: Initializing STT pipeline...
I (7073) STT: Initializing STT pipeline...
I (7078) STT: 
I (7096) STT:  STT Ring Buffer Allocation (PSRAM)
I (7102) STT: 
I (7120) STT: [MEMORY] Pre-allocation state:
I (7125) STT:   Free internal RAM: 146055 bytes
I (7130) STT:   Free DMA-capable: 127227 bytes
I (7136) STT:   Free PSRAM: 4189764 bytes
I (7140) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (7148) STT:    Ring buffer allocated at 0x3f8011c0 (PSRAM address)
I (7155) STT:    Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (7164) STT: [MEMORY] Post-allocation state:
I (7169) STT:   Free internal RAM: 146055 bytes
I (7174) STT:   Free DMA-capable: 127227 bytes
I (7179) STT:   Free PSRAM: 4124224 bytes
I (7191) STT:  STT pipeline initialized
I (7192) HOTPIN_MAIN: Initializing TTS decoder...
I (7194) TTS: Initializing TTS decoder...
I (7199) WEBSOCKET: Audio callback registered
I (7204) TTS:  TTS decoder initialized
I (7209) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (7217) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (7222) HOTPIN_MAIN: State manager task created on Core 1
I (7222) STATE_MGR: State manager task started on Core 1
I (7228) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (7234) STATE_MGR: Priority: 10
I (7228) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (7245) STATE_MGR: Starting in camera mode...
I (7251) HOTPIN_MAIN: Initializing task watchdog (30s timeout)...
I (7257) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (7264) HOTPIN_MAIN: State manager task added to watchdog
I (7269) STATE_MGR: Acquiring I2S mutex...
I (7275) HOTPIN_MAIN: ====================================
I (7280) STATE_MGR: Initializing camera...
I (7286) HOTPIN_MAIN: System initialization complete!
I (7291) CAMERA: Initializing camera...
I (7297) HOTPIN_MAIN: Entering camera standby mode...
I (7301) CAMERA: GPIO ISR service already active (shared)
I (7307) HOTPIN_MAIN: ====================================
I (7313) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (7329) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (7337) cam_hal: cam init ok
I (7341) sccb-ng: pin_sda 26 pin_scl 27
I (7345) sccb-ng: sccb_i2c_port=1
I (7350) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (7392) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (7392) camera: Detected OV2640 camera
I (7392) camera: Detected camera at address=0x30
I (7472) cam_hal: PSRAM DMA mode disabled
I (7473) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (7477) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (7484) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (7490) cam_hal: cam config ok
I (7494) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (7576) CAMERA: Camera initialized successfully
I (7576) STATE_MGR: I2S mutex released
I (7576) AUDIO: 
I (7576) STATE_MGR:  Camera mode transition complete
I (7593) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (7599) STATE_MGR:  Entered CAMERA_STANDBY state
I (7606) AUDIO: 
I (7611) LED_CTRL: LED pattern -> 3
I (7629) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (7640) AUDIO:    I2S access mutex created successfully
I (7647) AUDIO: 
I (7665) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (7672) AUDIO: 
I (7690) AUDIO: [DIAG] Pre-init state:
I (7694) AUDIO:   Free heap: 4075548 bytes
I (7699) AUDIO:   Free internal RAM: 94475 bytes
I (7704) AUDIO:   Free DMA-capable: 75647 bytes
I (7709) AUDIO:   Free PSRAM: 3999908 bytes
I (7714) AUDIO:   Timestamp: 6167 ms
I (7718) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (7725) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (7733) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (7741) AUDIO:   DMA frame num (per desc): 1020
I (7747) AUDIO:   DMA total samples (effective): 4080
I (7752) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (7759) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (7766) AUDIO:  I2S channels created (took 0 ms)
I (7771) AUDIO:   TX handle: 0x3ffed8c0 | RX handle: 0x3ffeda74
I (7778) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (7784) AUDIO:   Sample rate: 16000 Hz
I (7789) AUDIO:   MCLK: DISABLED
I (7792) AUDIO:   BCLK: GPIO14 (shared)
I (7797) AUDIO:   WS:   GPIO15 (shared)
I (7801) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (7809) AUDIO:  TX channel configured (took 1 ms)
I (7813) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (7819) AUDIO:   Sample rate: 16000 Hz
I (7824) AUDIO:   MCLK: DISABLED
I (7828) AUDIO:   BCLK: GPIO14 (shared)
I (7832) AUDIO:   WS:   GPIO15 (shared)
I (7837) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (7843) AUDIO:  RX channel configured (took 0 ms)
I (7848) AUDIO: [STEP 4/6] Enabling TX channel...
I (7854) AUDIO:  TX channel enabled (took 0 ms)
I (7859) AUDIO: [STEP 5/6] Enabling RX channel...
I (7864) AUDIO:  RX channel enabled (took 0 ms)
I (7870) AUDIO: [STEP 6/6] Hardware stabilization...
I (7875) AUDIO:   Phase 1: Initial settle (50ms)
I (7931) AUDIO:   Phase 2: DMA verification
I (7931) AUDIO:    DMA TX operational (128 bytes)
I (7931) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (8088) AUDIO: [DIAG] Post-init state:
I (8088) AUDIO:   Free heap: 4049348 bytes
I (8088) AUDIO:   Free internal RAM: 68275 bytes
I (8091) AUDIO:   Free DMA-capable: 49447 bytes
I (8096) AUDIO:   Free PSRAM: 3999908 bytes
I (8101) AUDIO:   Timestamp: 6554 ms
I (8105) AUDIO:   Total init time: 201 ms
I (8110) AUDIO: 
I (8128) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (8134) AUDIO:  Driver: i2s_std (NOT legacy!)
I (8139) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (8148) AUDIO:  This should eliminate LoadStoreError crashes!
I (8155) AUDIO: 
I (8173) AUDIO: 
I (8190) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (8196) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (8203) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (8210) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (8216) AUDIO: 
W (8867) HOTPIN_MAIN: WiFi disconnected, retrying...
I (8867) LED_CTRL: LED pattern -> 2
I (9500) AUDIO: 
I (9507) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (9514) AUDIO: 
I (9532) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (9539) AUDIO:  RX channel disabled (took 0 ms)
I (9544) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (9551) AUDIO:  TX channel disabled (took 0 ms)
I (9556) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (9613) AUDIO: [STEP 4/5] Deleting RX channel...
I (9613) AUDIO:  RX channel deleted (took 0 ms)
I (9613) AUDIO: [STEP 5/5] Deleting TX channel...
I (9618) AUDIO:  TX channel deleted (took 0 ms)
I (9623) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (9681) AUDIO: 
I (9687) AUDIO:   Modern I2S STD Driver Deinitialized
I (9694) AUDIO:  Camera Can Now Initialize
I (9699) AUDIO: 
I (9717) LED_CTRL: LED pattern -> 3
I (9721) HOTPIN_MAIN: Main task exiting - system running
I (9727) main_task: Returned from app_main()
W (11288) HOTPIN_MAIN: WiFi disconnected, retrying...
I (11288) LED_CTRL: LED pattern -> 2
W (13707) HOTPIN_MAIN: WiFi disconnected, retrying...
I (13815) wifi:new:<11,0>, old:<11,0>, ap:<255,255>, sta:<11,0>, prof:1, snd_ch_cfg:0x0
I (13816) wifi:state: init -> auth (0xb0)
I (15886) wifi:state: auth -> assoc (0x0)
I (15962) wifi:state: assoc -> run (0x10)
I (16276) wifi:connected with wifi, aid = 2, channel 11, BW20, bssid = ee:d4:b9:ed:90:50
I (16277) wifi:security: WPA3-SAE, phy: bgn, rssi: -57
I (16281) wifi:pm start, type: 1

I (16281) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (16293) HOTPIN_MAIN: WiFi connected to AP
I (16347) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (16347) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (16456) wifi:<ba-add>idx:0 (ifx:0, ee:d4:b9:ed:90:50), tid:0, ssn:0, winSize:64
I (17587) esp_netif_handlers: sta ip: 10.87.102.214, mask: 255.255.255.0, gw: 10.87.102.121
I (17588) HOTPIN_MAIN:  Got IP address: 10.87.102.214
I (17592) LED_CTRL: LED pattern -> 3
I (17596) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (17605) HOTPIN_MAIN:  Attempting WebSocket connection (attempt 1)...
I (17613) WEBSOCKET: Connecting to WebSocket server...
I (17624) websocket_client: Started
I (17624) WEBSOCKET: WebSocket client started
I (18513) WEBSOCKET:  WebSocket connected to server
I (18514) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (18520) WEBSOCKET: Handshake sent successfully
I (18521) HOTPIN_MAIN:  WebSocket status callback: CONNECTED
I (18521) STATE_MGR: WebSocket connected
I (18578) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (18578) WEBSOCKET: Server status: connected
I (18628) HOTPIN_MAIN:  WebSocket connected and verified!
I (18628) HOTPIN_MAIN:  WebSocket connection active - entering monitor loop
 Image capture triggered!
I (24888) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (24888) SERIAL_CMD: Simulated DOUBLE CLICK - Camera capture
I (24888) STATE_MGR: Double-click detected - triggering capture sequence
I (24900) STATE_MGR: Starting camera capture sequence
I (24906) LED_CTRL: LED pattern -> 6
I (24910) AUDIO: 
I (24928) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (24935) AUDIO: 
I (24953) AUDIO: 
I (24971) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (24979) AUDIO: 
I (24997) AUDIO: [DIAG] Pre-init state:
I (25001) AUDIO:   Free heap: 4062748 bytes
I (25006) AUDIO:   Free internal RAM: 81847 bytes
I (25011) AUDIO:   Free DMA-capable: 63019 bytes
I (25017) AUDIO:   Free PSRAM: 3999772 bytes
I (25022) AUDIO:   Timestamp: 23474 ms
I (25026) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (25033) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (25041) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (25049) AUDIO:   DMA frame num (per desc): 1020
I (25054) AUDIO:   DMA total samples (effective): 4080
I (25060) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (25067) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (25074) AUDIO:  I2S channels created (took 0 ms)
I (25079) AUDIO:   TX handle: 0x3ffcafa8 | RX handle: 0x3ffcb14c
I (25086) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (25092) AUDIO:   Sample rate: 16000 Hz
I (25097) AUDIO:   MCLK: DISABLED
I (25101) AUDIO:   BCLK: GPIO14 (shared)
I (25106) AUDIO:   WS:   GPIO15 (shared)
I (25110) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (25117) AUDIO:  TX channel configured (took 1 ms)
I (25122) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (25128) AUDIO:   Sample rate: 16000 Hz
I (25133) AUDIO:   MCLK: DISABLED
I (25137) AUDIO:   BCLK: GPIO14 (shared)
I (25142) AUDIO:   WS:   GPIO15 (shared)
I (25146) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (25152) AUDIO:  RX channel configured (took 0 ms)
I (25158) AUDIO: [STEP 4/6] Enabling TX channel...
I (25163) AUDIO:  TX channel enabled (took 0 ms)
I (25169) AUDIO: [STEP 5/6] Enabling RX channel...
I (25174) AUDIO:  RX channel enabled (took 0 ms)
I (25180) AUDIO: [STEP 6/6] Hardware stabilization...
I (25185) AUDIO:   Phase 1: Initial settle (50ms)
I (25241) AUDIO:   Phase 2: DMA verification
I (25241) AUDIO:    DMA TX operational (128 bytes)
I (25242) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (25398) AUDIO: [DIAG] Post-init state:
I (25398) AUDIO:   Free heap: 4036780 bytes
I (25398) AUDIO:   Free internal RAM: 55879 bytes
I (25402) AUDIO:   Free DMA-capable: 37051 bytes
I (25407) AUDIO:   Free PSRAM: 3999772 bytes
I (25412) AUDIO:   Timestamp: 23865 ms
I (25417) AUDIO:   Total init time: 201 ms
I (25421) AUDIO: 
I (25439) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (25446) AUDIO:  Driver: i2s_std (NOT legacy!)
I (25451) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (25460) AUDIO:  This should eliminate LoadStoreError crashes!
I (25466) AUDIO: 
I (25484) AUDIO: 
I (25502) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (25509) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (25515) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (25522) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (25528) AUDIO: 
I (25878) AUDIO: 
I (25885) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (25893) AUDIO: 
I (25911) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (25918) AUDIO:  RX channel disabled (took 0 ms)
I (25923) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (25930) AUDIO:  TX channel disabled (took 0 ms)
I (25935) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (25992) AUDIO: [STEP 4/5] Deleting RX channel...
I (25993) AUDIO:  RX channel deleted (took 0 ms)
I (25993) AUDIO: [STEP 5/5] Deleting TX channel...
I (25998) AUDIO:  TX channel deleted (took 0 ms)
I (26003) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (26061) AUDIO: 
I (26068) AUDIO:   Modern I2S STD Driver Deinitialized
I (26075) AUDIO:  Camera Can Now Initialize
I (26080) AUDIO: 
I (26098) STATE_MGR: Capturing frame from camera
I (26103) STATE_MGR: Frame captured: 8651 bytes
I (26109) JSON_PROTO: Generated session ID: hotpin-998C64-24
I (26114) STATE_MGR: Uploading image using session hotpin-998C64-24
I (26121) HTTP_CLIENT: Uploading image: session=hotpin-998C64-24, size=8651 bytes
I (26131) HTTP_CLIENT: POST body assembled: 8908 bytes
I (26137) HTTP_CLIENT: Sending POST request to http://10.87.102.58:8000/image
I (26378) HTTP_CLIENT: HTTP POST Status = 200, content_length = 198
I (26378) HTTP_CLIENT: Image uploaded successfully
I (26379) HTTP_CLIENT: Server response: {"status":"success","message":"Image received successfully","session":"hotpin-998C64-24","filename":"image.jpg","size_bytes":8651,"saved_path":"captured_images/hotpin-998C64-24_20251012_064123.jpg"}
I (26403) STATE_MGR: Image uploaded successfully
I (26407) LED_CTRL: LED pattern -> 3
I (26411) STATE_MGR: Camera capture sequence complete
I (26426) STATE_MGR: Capture complete event: success=1 (ESP_OK)
 Voice mode STARTED (recording...)
I (29620) SERIAL_CMD: Simulated SHORT PRESS - Voice START
I (29627) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (29628) STATE_MGR: Single click - mode toggle requested
I (29632) STATE_MGR: Switching: Camera  Voice (count: 1)
I (29638) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (29644) STATE_MGR: Stopping camera...
I (29648) STATE_MGR: 
I (29664) STATE_MGR:  STEP 2: Acquiring I2S configuration mutex
I (29671) STATE_MGR: 
I (29688) STATE_MGR:   Timeout: 5000 ms
I (29692) STATE_MGR:   Timestamp: 28145 ms
I (29697) STATE_MGR:    Mutex acquired (took 0 ms)
I (29703) STATE_MGR: 
I (29719) STATE_MGR:  STEP 3: Deinitializing camera hardware
I (29725) STATE_MGR: 
I (29742) STATE_MGR:   Free heap before: 4062376 bytes
I (29747) STATE_MGR:   Free PSRAM before: 3999772 bytes
I (29753) CAMERA: Deinitializing camera...
I (29759) CAMERA: Camera deinitialized
I (29763) STATE_MGR:    Camera deinitialized (took 9 ms)
I (29769) STATE_MGR:   Free heap after: 4224456 bytes
I (29775) STATE_MGR:   Free PSRAM after: 4124088 bytes
I (29780) STATE_MGR: 
I (29797) STATE_MGR:  HARDWARE STABILIZATION - CRITICAL
I (29803) STATE_MGR: 
I (29819) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (29927) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (30027) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (30077) STATE_MGR:    Total stabilization: 250ms
I (30077) STATE_MGR:   Timestamp: 28530 ms
I (30077) STATE_MGR: 
I (30093) STATE_MGR:  STEP 4: Initializing I2S audio drivers
I (30100) STATE_MGR: 
I (30116) STATE_MGR:   Free heap before: 4224456 bytes
I (30122) AUDIO: 
I (30140) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (30147) AUDIO: 
I (30165) AUDIO: 
I (30183) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (30190) AUDIO: 
I (30208) AUDIO: [DIAG] Pre-init state:
I (30212) AUDIO:   Free heap: 4224456 bytes
I (30217) AUDIO:   Free internal RAM: 119567 bytes
I (30223) AUDIO:   Free DMA-capable: 100739 bytes
I (30228) AUDIO:   Free PSRAM: 4124088 bytes
I (30233) AUDIO:   Timestamp: 28686 ms
I (30237) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (30244) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (30252) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (30260) AUDIO:   DMA frame num (per desc): 1020
I (30266) AUDIO:   DMA total samples (effective): 4080
I (30272) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (30279) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (30285) AUDIO:  I2S channels created (took 0 ms)
I (30291) AUDIO:   TX handle: 0x3ffcb274 | RX handle: 0x3ffcb068
I (30297) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (30304) AUDIO:   Sample rate: 16000 Hz
I (30308) AUDIO:   MCLK: DISABLED
I (30312) AUDIO:   BCLK: GPIO14 (shared)
I (30317) AUDIO:   WS:   GPIO15 (shared)
I (30322) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (30329) AUDIO:  TX channel configured (took 1 ms)
I (30333) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (30340) AUDIO:   Sample rate: 16000 Hz
I (30344) AUDIO:   MCLK: DISABLED
I (30348) AUDIO:   BCLK: GPIO14 (shared)
I (30353) AUDIO:   WS:   GPIO15 (shared)
I (30358) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (30364) AUDIO:  RX channel configured (took 0 ms)
I (30369) AUDIO: [STEP 4/6] Enabling TX channel...
I (30375) AUDIO:  TX channel enabled (took 0 ms)
I (30380) AUDIO: [STEP 5/6] Enabling RX channel...
I (30386) AUDIO:  RX channel enabled (took 0 ms)
I (30391) AUDIO: [STEP 6/6] Hardware stabilization...
I (30397) AUDIO:   Phase 1: Initial settle (50ms)
I (30452) AUDIO:   Phase 2: DMA verification
I (30452) AUDIO:    DMA TX operational (128 bytes)
I (30453) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (30609) AUDIO: [DIAG] Post-init state:
I (30609) AUDIO:   Free heap: 4198496 bytes
I (30609) AUDIO:   Free internal RAM: 93607 bytes
I (30613) AUDIO:   Free DMA-capable: 74779 bytes
I (30618) AUDIO:   Free PSRAM: 4124088 bytes
I (30623) AUDIO:   Timestamp: 29076 ms
I (30628) AUDIO:   Total init time: 201 ms
I (30632) AUDIO: 
I (30650) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (30657) AUDIO:  Driver: i2s_std (NOT legacy!)
I (30662) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (30671) AUDIO:  This should eliminate LoadStoreError crashes!
I (30677) AUDIO: 
I (30695) AUDIO: 
I (30713) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (30720) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (30726) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (30733) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (30739) AUDIO: 
I (30757) STATE_MGR:    Audio initialized (took 635 ms)
I (30763) STATE_MGR:   Free heap after: 4198496 bytes
I (30769) STATE_MGR: 
I (30785) STATE_MGR:  STEP 5: I2S mutex released
I (30791) STATE_MGR:  Total transition time: 894 ms
I (30797) STATE_MGR: 
I (30813) STATE_MGR: 
I (30829) STATE_MGR:  STEP 6: Starting STT/TTS pipelines
I (30836) STATE_MGR: 
I (30852) STT: Starting STT pipeline...
I (30856) STT: Initializing STT pipeline...
W (30861) STT: STT pipeline already initialized
I (30866) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (30875) STT: 
I (30876) STT:  STT pipeline started
I (30892) STT:  Audio Capture Task Started on Core 0
I (30896) TTS: Starting TTS decoder...
I (30892) STT: Audio streaming task started on Core 0
I (30907) TTS: Initializing TTS decoder...
I (30902) STT: 
W (30917) TTS: TTS decoder already initialized
I (30912) STT:    Stream buffer allocated at 0x3ffe8ed4
I (30938) TTS: [CORE AFFINITY] Creating TTS playback task on Core 0 (co-located with Wi-Fi and STT)
I (30933) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (30954) TTS:  TTS decoder started
I (30945) STT: Starting audio streaming to server...
I (30961) STT:   Current time: 29414 ms
I (30976) STT:   Free heap: 4181028 bytes
I (30961) TTS: TTS playback task started on Core 0
I (31181) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (31181) STT:    Audio driver initialized
I (31182) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (31241) LED_CTRL: LED pattern -> 1
I (31242) STATE_MGR:  Voice mode transition complete
I (31242) STATE_MGR:  Entered VOICE_ACTIVE state
I (31256) STATE_MGR: STT pipeline reported start
I (31266) STATE_MGR: TTS playback start event received
I (31289) STT:   Total stabilization: 300ms
I (31289) STT:   Timestamp: 29741 ms
I (31289) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (31293) STT:    DMA-capable buffer allocated at 0x3fff18a8
I (31300) STT: 
I (31316) STT:   STARTING AUDIO CAPTURE
I (31321) STT:  Chunk size: 1024 bytes | Timeout: 100 ms
I (31327) STT: 
I (31344) STT: [FIRST READ] Completed:
I (31348) STT:   Result: ESP_OK
I (31352) STT:   Bytes read: 1024 / 1024
I (31356) STT:   Duration: 0 ms
I (31360) STT:   Timestamp: 29796 ms
I (31365) STT:   First 16 bytes: d8 ff d8 ff b6 ff b6 ff ac ff ac ff 52 00 52 00
I (31533) STT: [CAPTURE] Read #10: 1024 bytes (total: 10240 bytes, 10.0 KB)
I (31535) STT:   Avg read time: 63 ms | Errors: 0
I (31852) STT: [CAPTURE] Read #20: 1024 bytes (total: 20480 bytes, 20.0 KB)
I (31853) STT:   Avg read time: 63 ms | Errors: 0
I (32171) STT: [CAPTURE] Read #30: 1024 bytes (total: 30720 bytes, 30.0 KB)
I (32172) STT:   Avg read time: 63 ms | Errors: 0
I (32490) STT: [CAPTURE] Read #40: 1024 bytes (total: 40960 bytes, 40.0 KB)
I (32491) STT:   Avg read time: 63 ms | Errors: 0
I (32808) STT: [CAPTURE] Read #50: 1024 bytes (total: 51200 bytes, 50.0 KB)
I (32810) STT:   Avg read time: 63 ms | Errors: 0
I (33127) STT: [CAPTURE] Read #60: 1024 bytes (total: 61440 bytes, 60.0 KB)
I (33128) STT:   Avg read time: 63 ms | Errors: 0
I (33446) STT: [CAPTURE] Read #70: 1024 bytes (total: 71680 bytes, 70.0 KB)
I (33447) STT:   Avg read time: 63 ms | Errors: 0
I (33765) STT: [CAPTURE] Read #80: 1024 bytes (total: 81920 bytes, 80.0 KB)
I (33766) STT:   Avg read time: 63 ms | Errors: 0
 Voice mode STOPPED
I (33951) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
W (33952) STATE_MGR: Guardrail soft override: stopping voice pipeline while busy
I (33957) STATE_MGR: Single click - mode toggle requested
I (33951) SERIAL_CMD: Simulated SHORT PRESS - Voice STOP
I (33964) STATE_MGR: Switching: Voice  Camera (count: 2)
I (33976) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (33982) STATE_MGR: Stopping voice mode components...
I (33987) STT: Stopping STT pipeline...
I (33992) STT: Sending EOS signal...
I (33996) WEBSOCKET: Sending EOS signal
I (34000) STT: Audio streaming task stopped (streamed 86016 bytes in 21 chunks)
I (34020) STT: Audio capture task stopped (captured 90112 bytes total)
I (34024) STT: STT pipeline stopped
I (34060) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (34061) WEBSOCKET: Server status: processing
I (34064) WEBSOCKET: Server stage: transcription
I (34069) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (34580) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hello"}
I (34580) WEBSOCKET: Server status: processing
I (34585) WEBSOCKET: Server stage: llm
I (34589) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (35194) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "Hello! How can I help you today?"}
I (35196) WEBSOCKET: Server status: processing
I (35201) WEBSOCKET: Server stage: tts
I (35205) WEBSOCKET: Pipeline stage changed: llm -> tts
I (35381) WEBSOCKET: Received binary audio data: 4096 bytes
I (35382) TTS:  WAV header parsed successfully
I (35382) TTS: === WAV File Info ===
I (35386) TTS: Sample Rate: 16000 Hz
I (35387) WEBSOCKET: Received binary audio data: 4096 bytes
I (35391) TTS: Channels: 1
I (35401) WEBSOCKET: Received binary audio data: 4096 bytes
I (35401) TTS: Bits per Sample: 16
I (35410) WEBSOCKET: Received binary audio data: 4096 bytes
I (35421) TTS: Audio Format: 1 (PCM)
I (35422) WEBSOCKET: Received binary audio data: 4096 bytes
I (35427) TTS: Declared Data Size: 111524 bytes
I (35431) WEBSOCKET: Received binary audio data: 4096 bytes
I (35436) TTS: Block Align: 2
I (35442) TTS: Byte Rate: 32000
I (35442) WEBSOCKET: Received binary audio data: 4096 bytes
I (35448) TTS: ====================
I (35456) WEBSOCKET: Received binary audio data: 4096 bytes
I (35467) WEBSOCKET: Received binary audio data: 4096 bytes
I (35474) WEBSOCKET: Received binary audio data: 4096 bytes
I (35480) WEBSOCKET: Received binary audio data: 303 bytes
I (35483) WEBSOCKET: Received binary audio data: 3793 bytes
I (35495) TTS:  Playback start feedback dispatched (bytes_received=41263)
I (35496) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block)
I (35542) WEBSOCKET: Received binary audio data: 4096 bytes
I (35669) WEBSOCKET: Received binary audio data: 4096 bytes
I (35797) WEBSOCKET: Received binary audio data: 4096 bytes
I (35924) WEBSOCKET: Received binary audio data: 4096 bytes
I (36052) WEBSOCKET: Received binary audio data: 4096 bytes
I (36178) WEBSOCKET: Received binary audio data: 4096 bytes
I (36307) WEBSOCKET: Received binary audio data: 4096 bytes
I (36435) WEBSOCKET: Received binary audio data: 4096 bytes
I (36562) WEBSOCKET: Received binary audio data: 4096 bytes
I (36689) WEBSOCKET: Received binary audio data: 4096 bytes
W (36690) TTS: Mono chunk size 303 not aligned to 16-bit samples - writing raw
W (36695) TTS: Mono chunk size 3793 not aligned to 16-bit samples - writing raw
I (36698) WEBSOCKET: Received binary audio data: 4096 bytes
I (36753) WEBSOCKET: Received binary audio data: 4096 bytes
I (36880) WEBSOCKET: Received binary audio data: 4096 bytes
I (37007) WEBSOCKET: Received binary audio data: 4096 bytes
I (37135) WEBSOCKET: Received binary audio data: 4096 bytes
I (37262) WEBSOCKET: Received binary audio data: 4096 bytes
I (37388) WEBSOCKET: Received binary audio data: 976 bytes
I (37516) WEBSOCKET: Received text message: {"status": "complete"}
I (37516) WEBSOCKET: Server status: complete
I (37517) WEBSOCKET: Pipeline stage changed: tts -> complete
I (37526) STATE_MGR: Voice pipeline reported COMPLETE
I (37529) STATE_MGR: Waiting for TTS playback drain (~41980 bytes pending, timeout 5000 ms)
W (42538) STATE_MGR: TTS playback drain timed out; proceeding with shutdown
I (42539) TTS: Stopping TTS decoder...
I (42539) TTS: Playback stop signal received
I (42635) TTS:  Playback completion feedback dispatched (total bytes: 111524)
I (42635) TTS: TTS playback task stopped
I (42639) TTS: TTS decoder stopped (played 111524 bytes)
I (42743) STATE_MGR: Acquiring I2S mutex...
I (42743) STATE_MGR: Deinitializing audio drivers...
I (42743) AUDIO: 
I (42761) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (42768) AUDIO: 
I (42786) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (42793) AUDIO:  RX channel disabled (took 0 ms)
I (42799) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (42805) AUDIO:  TX channel disabled (took 0 ms)
I (42811) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (42867) AUDIO: [STEP 4/5] Deleting RX channel...
I (42868) AUDIO:  RX channel deleted (took 0 ms)
I (42868) AUDIO: [STEP 5/5] Deleting TX channel...
I (42873) AUDIO:  TX channel deleted (took 0 ms)
I (42878) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (42936) AUDIO: 
I (42943) AUDIO:   Modern I2S STD Driver Deinitialized
I (42949) AUDIO:  Camera Can Now Initialize
I (42955) AUDIO: 
I (42973) STATE_MGR: Initializing camera...
I (42977) CAMERA: Initializing camera...
I (42982) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (42992) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (43000) cam_hal: cam init ok
W (43004) ledc: GPIO 0 is not usable, maybe conflict with others
I (43010) sccb-ng: pin_sda 26 pin_scl 27
I (43015) sccb-ng: sccb_i2c_port=1
I (43020) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (43062) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (43062) camera: Detected OV2640 camera
I (43062) camera: Detected camera at address=0x30
I (43142) cam_hal: PSRAM DMA mode disabled
I (43143) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (43147) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (43154) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (43161) cam_hal: cam config ok
I (43164) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (43247) CAMERA: Camera initialized successfully
I (43247) STATE_MGR: I2S mutex released
I (43247) STATE_MGR:  Camera mode transition complete
I (43252) AUDIO: 
I (43270) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (43277) AUDIO: 
I (43295) AUDIO: 
I (43313) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (43320) AUDIO: 
I (43338) AUDIO: [DIAG] Pre-init state:
I (43343) AUDIO:   Free heap: 4054176 bytes
I (43348) AUDIO:   Free internal RAM: 73311 bytes
I (43353) AUDIO:   Free DMA-capable: 54483 bytes
I (43358) AUDIO:   Free PSRAM: 3999772 bytes
I (43363) AUDIO:   Timestamp: 41816 ms
I (43368) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (43374) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (43382) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (43391) AUDIO:   DMA frame num (per desc): 1020
I (43396) AUDIO:   DMA total samples (effective): 4080
I (43402) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (43409) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (43415) AUDIO:  I2S channels created (took 0 ms)
I (43421) AUDIO:   TX handle: 0x3ffcb08c | RX handle: 0x3ffcb568
I (43427) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (43434) AUDIO:   Sample rate: 16000 Hz
I (43439) AUDIO:   MCLK: DISABLED
I (43443) AUDIO:   BCLK: GPIO14 (shared)
I (43447) AUDIO:   WS:   GPIO15 (shared)
I (43452) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (43458) AUDIO:  TX channel configured (took 1 ms)
I (43463) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (43470) AUDIO:   Sample rate: 16000 Hz
I (43475) AUDIO:   MCLK: DISABLED
I (43479) AUDIO:   BCLK: GPIO14 (shared)
I (43483) AUDIO:   WS:   GPIO15 (shared)
I (43488) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (43494) AUDIO:  RX channel configured (took 0 ms)
I (43499) AUDIO: [STEP 4/6] Enabling TX channel...
I (43505) AUDIO:  TX channel enabled (took 0 ms)
I (43510) AUDIO: [STEP 5/6] Enabling RX channel...
I (43516) AUDIO:  RX channel enabled (took 0 ms)
I (43521) AUDIO: [STEP 6/6] Hardware stabilization...
I (43527) AUDIO:   Phase 1: Initial settle (50ms)
I (43582) AUDIO:   Phase 2: DMA verification
I (43582) AUDIO:    DMA TX operational (128 bytes)
I (43583) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (43739) AUDIO: [DIAG] Post-init state:
I (43739) AUDIO:   Free heap: 4028276 bytes
I (43739) AUDIO:   Free internal RAM: 47339 bytes
I (43743) AUDIO:   Free DMA-capable: 28511 bytes
I (43748) AUDIO:   Free PSRAM: 3999772 bytes
I (43753) AUDIO:   Timestamp: 42206 ms
I (43757) AUDIO:   Total init time: 201 ms
I (43762) AUDIO: 
I (43780) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (43786) AUDIO:  Driver: i2s_std (NOT legacy!)
I (43792) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (43800) AUDIO:  This should eliminate LoadStoreError crashes!
I (43807) AUDIO: 
I (43825) AUDIO: 
I (43843) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (43849) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (43856) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (43863) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (43869) AUDIO: 
I (44170) AUDIO: 
I (44177) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (44185) AUDIO: 
I (44203) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (44210) AUDIO:  RX channel disabled (took 0 ms)
I (44215) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (44222) AUDIO:  TX channel disabled (took 0 ms)
I (44227) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (44284) AUDIO: [STEP 4/5] Deleting RX channel...
I (44285) AUDIO:  RX channel deleted (took 0 ms)
I (44285) AUDIO: [STEP 5/5] Deleting TX channel...
I (44290) AUDIO:  TX channel deleted (took 0 ms)
I (44295) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (44353) AUDIO: 
I (44360) AUDIO:   Modern I2S STD Driver Deinitialized
I (44367) AUDIO:  Camera Can Now Initialize
I (44372) AUDIO: 
I (44390) LED_CTRL: LED pattern -> 3
I (44394) STATE_MGR:  Entered CAMERA_STANDBY state
I (44409) STATE_MGR: STT pipeline reported stop
I (44419) STATE_MGR: Pipeline stage event: transcription
I (44429) STATE_MGR: Pipeline stage event: llm
I (44439) STATE_MGR: Pipeline stage event: tts
I (44449) STATE_MGR: Pipeline stage event: complete
I (44459) STATE_MGR: TTS playback finished successfully
 Voice mode STARTED (recording...)
I (49600) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (49600) SERIAL_CMD: Simulated SHORT PRESS - Voice START
I (49600) STATE_MGR: Single click - mode toggle requested
I (49611) STATE_MGR: Switching: Camera  Voice (count: 3)
I (49618) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (49623) STATE_MGR: Stopping camera...
I (49628) STATE_MGR: 
I (49644) STATE_MGR:  STEP 2: Acquiring I2S configuration mutex
I (49651) STATE_MGR: 
I (49667) STATE_MGR:   Timeout: 5000 ms
I (49672) STATE_MGR:   Timestamp: 48124 ms
I (49677) STATE_MGR:    Mutex acquired (took 0 ms)
I (49682) STATE_MGR: 
I (49699) STATE_MGR:  STEP 3: Deinitializing camera hardware
I (49705) STATE_MGR: 
I (49721) STATE_MGR:   Free heap before: 4054176 bytes
I (49727) STATE_MGR:   Free PSRAM before: 3999772 bytes
I (49733) CAMERA: Deinitializing camera...
I (49739) CAMERA: Camera deinitialized
I (49742) STATE_MGR:    Camera deinitialized (took 9 ms)
I (49749) STATE_MGR:   Free heap after: 4216260 bytes
I (49754) STATE_MGR:   Free PSRAM after: 4124088 bytes
I (49760) STATE_MGR: 
I (49776) STATE_MGR:  HARDWARE STABILIZATION - CRITICAL
I (49782) STATE_MGR: 
I (49799) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (49907) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (50007) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (50057) STATE_MGR:    Total stabilization: 250ms
I (50057) STATE_MGR:   Timestamp: 48510 ms
I (50057) STATE_MGR: 
I (50073) STATE_MGR:  STEP 4: Initializing I2S audio drivers
I (50080) STATE_MGR: 
I (50096) STATE_MGR:   Free heap before: 4216260 bytes
I (50102) AUDIO: 
I (50120) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (50127) AUDIO: 
I (50145) AUDIO: 
I (50163) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (50170) AUDIO: 
I (50188) AUDIO: [DIAG] Pre-init state:
I (50192) AUDIO:   Free heap: 4216260 bytes
I (50197) AUDIO:   Free internal RAM: 111371 bytes
I (50203) AUDIO:   Free DMA-capable: 92543 bytes
I (50208) AUDIO:   Free PSRAM: 4124088 bytes
I (50213) AUDIO:   Timestamp: 48666 ms
I (50217) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (50224) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (50232) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (50240) AUDIO:   DMA frame num (per desc): 1020
I (50246) AUDIO:   DMA total samples (effective): 4080
I (50252) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (50259) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (50265) AUDIO:  I2S channels created (took 0 ms)
I (50270) AUDIO:   TX handle: 0x3ffcb274 | RX handle: 0x3ffcb068
I (50277) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (50284) AUDIO:   Sample rate: 16000 Hz
I (50288) AUDIO:   MCLK: DISABLED
I (50292) AUDIO:   BCLK: GPIO14 (shared)
I (50297) AUDIO:   WS:   GPIO15 (shared)
I (50302) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (50308) AUDIO:  TX channel configured (took 1 ms)
I (50313) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (50320) AUDIO:   Sample rate: 16000 Hz
I (50324) AUDIO:   MCLK: DISABLED
I (50328) AUDIO:   BCLK: GPIO14 (shared)
I (50333) AUDIO:   WS:   GPIO15 (shared)
I (50338) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (50344) AUDIO:  RX channel configured (took 0 ms)
I (50349) AUDIO: [STEP 4/6] Enabling TX channel...
I (50354) AUDIO:  TX channel enabled (took 0 ms)
I (50360) AUDIO: [STEP 5/6] Enabling RX channel...
I (50366) AUDIO:  RX channel enabled (took 0 ms)
I (50371) AUDIO: [STEP 6/6] Hardware stabilization...
I (50377) AUDIO:   Phase 1: Initial settle (50ms)
I (50432) AUDIO:   Phase 2: DMA verification
I (50432) AUDIO:    DMA TX operational (128 bytes)
I (50432) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (50589) AUDIO: [DIAG] Post-init state:
I (50589) AUDIO:   Free heap: 4190300 bytes
I (50589) AUDIO:   Free internal RAM: 85411 bytes
I (50593) AUDIO:   Free DMA-capable: 66583 bytes
I (50598) AUDIO:   Free PSRAM: 4124088 bytes
I (50603) AUDIO:   Timestamp: 49056 ms
I (50608) AUDIO:   Total init time: 201 ms
I (50612) AUDIO: 
I (50630) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (50637) AUDIO:  Driver: i2s_std (NOT legacy!)
I (50642) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (50651) AUDIO:  This should eliminate LoadStoreError crashes!
I (50657) AUDIO: 
I (50675) AUDIO: 
I (50693) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (50700) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (50706) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (50713) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (50719) AUDIO: 
I (50737) STATE_MGR:    Audio initialized (took 635 ms)
I (50743) STATE_MGR:   Free heap after: 4190300 bytes
I (50749) STATE_MGR: 
I (50765) STATE_MGR:  STEP 5: I2S mutex released
I (50771) STATE_MGR:  Total transition time: 894 ms
I (50777) STATE_MGR: 
I (50793) STATE_MGR: 
I (50809) STATE_MGR:  STEP 6: Starting STT/TTS pipelines
I (50816) STATE_MGR: 
I (50832) STT: Starting STT pipeline...
I (50836) STT: Initializing STT pipeline...
W (50841) STT: STT pipeline already initialized
I (50846) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (50855) STT: 
I (50856) STT:  STT pipeline started
I (50872) STT:  Audio Capture Task Started on Core 0
I (50876) TTS: Starting TTS decoder...
I (50872) STT: Audio streaming task started on Core 0
I (50887) TTS: Initializing TTS decoder...
I (50882) STT: 
W (50897) TTS: TTS decoder already initialized
I (50892) STT:    Stream buffer allocated at 0x3ffe7ed0
I (50918) TTS: [CORE AFFINITY] Creating TTS playback task on Core 0 (co-located with Wi-Fi and STT)
I (50913) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (50934) TTS:  TTS decoder started
I (50925) STT: Starting audio streaming to server...
I (50941) STT:   Current time: 49394 ms
I (50956) STT:   Free heap: 4172832 bytes
I (50941) TTS: TTS playback task started on Core 0
I (51161) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (51161) STT:    Audio driver initialized
I (51162) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (51221) LED_CTRL: LED pattern -> 1
I (51222) STATE_MGR:  Voice mode transition complete
I (51222) STATE_MGR:  Entered VOICE_ACTIVE state
I (51236) STATE_MGR: STT pipeline reported start
I (51246) STATE_MGR: TTS playback start event received
I (51269) STT:   Total stabilization: 300ms
I (51269) STT:   Timestamp: 49721 ms
I (51269) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (51273) STT:    DMA-capable buffer allocated at 0x3fff18a8
I (51280) STT: 
I (51296) STT:   STARTING AUDIO CAPTURE
I (51301) STT:  Chunk size: 1024 bytes | Timeout: 100 ms
I (51307) STT: 
I (51324) STT: [FIRST READ] Completed:
I (51328) STT:   Result: ESP_OK
I (51332) STT:   Bytes read: 1024 / 1024
I (51337) STT:   Duration: 0 ms
I (51340) STT:   Timestamp: 49776 ms
I (51346) STT:   First 16 bytes: 32 00 32 00 b0 ff b0 ff e8 ff e8 ff 38 00 38 00
I (51513) STT: [CAPTURE] Read #10: 1024 bytes (total: 10240 bytes, 10.0 KB)
I (51514) STT:   Avg read time: 63 ms | Errors: 0
I (51577) STT: [CAPTURE]  Alive... 100 reads completed (Free Heap: 4171548 bytes)
I (51832) STT: [CAPTURE] Read #20: 1024 bytes (total: 20480 bytes, 20.0 KB)
I (51833) STT:   Avg read time: 63 ms | Errors: 0
I (52151) STT: [CAPTURE] Read #30: 1024 bytes (total: 30720 bytes, 30.0 KB)
I (52152) STT:   Avg read time: 63 ms | Errors: 0
I (52469) STT: [CAPTURE] Read #40: 1024 bytes (total: 40960 bytes, 40.0 KB)
I (52471) STT:   Avg read time: 63 ms | Errors: 0
I (52788) STT: [CAPTURE] Read #50: 1024 bytes (total: 51200 bytes, 50.0 KB)
I (52789) STT:   Avg read time: 63 ms | Errors: 0
I (53107) STT: [CAPTURE] Read #60: 1024 bytes (total: 61440 bytes, 60.0 KB)
I (53108) STT:   Avg read time: 63 ms | Errors: 0
I (53426) STT: [CAPTURE] Read #70: 1024 bytes (total: 71680 bytes, 70.0 KB)
I (53427) STT:   Avg read time: 63 ms | Errors: 0
I (53744) STT: [CAPTURE] Read #80: 1024 bytes (total: 81920 bytes, 80.0 KB)
I (53746) STT:   Avg read time: 63 ms | Errors: 0
I (54063) STT: [CAPTURE] Read #90: 1024 bytes (total: 92160 bytes, 90.0 KB)
I (54064) STT:   Avg read time: 63 ms | Errors: 0
I (54382) STT: [CAPTURE] Read #100: 1024 bytes (total: 102400 bytes, 100.0 KB)
I (54383) STT:   Avg read time: 63 ms | Errors: 0
W (54392) STT: [STREAM] Dropping audio chunk (session busy). dropped_not_ready=25 buffer=1024
 Voice mode STOPPED
I (54436) SERIAL_CMD: Simulated SHORT PRESS - Voice STOP
I (54436) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
W (54440) STATE_MGR: Guardrail soft override: stopping voice pipeline while busy
I (54448) STATE_MGR: Single click - mode toggle requested
I (54454) STATE_MGR: Switching: Voice  Camera (count: 4)
I (54460) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (54466) STATE_MGR: Stopping voice mode components...
I (54472) STT: Stopping STT pipeline...
I (54477) STT: Sending EOS signal...
I (54481) WEBSOCKET: Sending EOS signal
I (54504) STT: Audio streaming task stopped (streamed 0 bytes in 0 chunks)
I (54510) STT: Audio capture task stopped (captured 106496 bytes total)
I (54529) STT: STT pipeline stopped
I (54530) TTS: Stopping TTS decoder...
I (54530) TTS: Playback stop signal received
I (54532) TTS: TTS playback task stopped
I (54540) TTS: TTS decoder stopped (played 0 bytes)
I (54642) STATE_MGR: Acquiring I2S mutex...
I (54642) STATE_MGR: Deinitializing audio drivers...
I (54642) AUDIO: 
I (54660) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (54667) AUDIO: 
I (54685) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (54692) AUDIO:  RX channel disabled (took 0 ms)
I (54698) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (54704) AUDIO:  TX channel disabled (took 0 ms)
I (54710) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (54766) AUDIO: [STEP 4/5] Deleting RX channel...
I (54767) AUDIO:  RX channel deleted (took 0 ms)
I (54767) AUDIO: [STEP 5/5] Deleting TX channel...
I (54772) AUDIO:  TX channel deleted (took 0 ms)
I (54777) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (54835) AUDIO: 
I (54842) AUDIO:   Modern I2S STD Driver Deinitialized
I (54849) AUDIO:  Camera Can Now Initialize
I (54854) AUDIO: 
I (54872) STATE_MGR: Initializing camera...
I (54876) CAMERA: Initializing camera...
I (54881) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (54891) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (54899) cam_hal: cam init ok
W (54903) ledc: GPIO 0 is not usable, maybe conflict with others
I (54909) sccb-ng: pin_sda 26 pin_scl 27
I (54914) sccb-ng: sccb_i2c_port=1
I (54919) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (54961) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (54961) camera: Detected OV2640 camera
I (54961) camera: Detected camera at address=0x30
I (55041) cam_hal: PSRAM DMA mode disabled
I (55042) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (55046) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (55053) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (55060) cam_hal: cam config ok
I (55063) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (55146) CAMERA: Camera initialized successfully
I (55146) STATE_MGR: I2S mutex released
I (55146) STATE_MGR:  Camera mode transition complete
I (55151) AUDIO: 
I (55169) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (55176) AUDIO: 
I (55194) AUDIO: 
I (55212) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (55219) AUDIO: 
I (55237) AUDIO: [DIAG] Pre-init state:
I (55242) AUDIO:   Free heap: 4054176 bytes
I (55247) AUDIO:   Free internal RAM: 73311 bytes
I (55252) AUDIO:   Free DMA-capable: 54483 bytes
I (55257) AUDIO:   Free PSRAM: 3999772 bytes
I (55262) AUDIO:   Timestamp: 53715 ms
I (55267) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (55273) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (55281) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (55290) AUDIO:   DMA frame num (per desc): 1020
I (55295) AUDIO:   DMA total samples (effective): 4080
I (55301) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (55308) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (55314) AUDIO:  I2S channels created (took 0 ms)
I (55320) AUDIO:   TX handle: 0x3ffcb08c | RX handle: 0x3ffcb568
I (55326) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (55333) AUDIO:   Sample rate: 16000 Hz
I (55338) AUDIO:   MCLK: DISABLED
I (55342) AUDIO:   BCLK: GPIO14 (shared)
I (55346) AUDIO:   WS:   GPIO15 (shared)
I (55351) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (55357) AUDIO:  TX channel configured (took 1 ms)
I (55362) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (55369) AUDIO:   Sample rate: 16000 Hz
I (55374) AUDIO:   MCLK: DISABLED
I (55378) AUDIO:   BCLK: GPIO14 (shared)
I (55382) AUDIO:   WS:   GPIO15 (shared)
I (55387) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (55393) AUDIO:  RX channel configured (took 0 ms)
I (55398) AUDIO: [STEP 4/6] Enabling TX channel...
I (55404) AUDIO:  TX channel enabled (took 0 ms)
I (55409) AUDIO: [STEP 5/6] Enabling RX channel...
I (55415) AUDIO:  RX channel enabled (took 0 ms)
I (55420) AUDIO: [STEP 6/6] Hardware stabilization...
I (55426) AUDIO:   Phase 1: Initial settle (50ms)
I (55481) AUDIO:   Phase 2: DMA verification
I (55481) AUDIO:    DMA TX operational (128 bytes)
I (55482) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (55639) AUDIO: [DIAG] Post-init state:
I (55639) AUDIO:   Free heap: 4028276 bytes
I (55639) AUDIO:   Free internal RAM: 47339 bytes
I (55643) AUDIO:   Free DMA-capable: 28511 bytes
I (55648) AUDIO:   Free PSRAM: 3999772 bytes
I (55653) AUDIO:   Timestamp: 54106 ms
I (55658) AUDIO:   Total init time: 201 ms
I (55662) AUDIO: 
I (55680) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (55687) AUDIO:  Driver: i2s_std (NOT legacy!)
I (55692) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (55701) AUDIO:  This should eliminate LoadStoreError crashes!
I (55707) AUDIO: 
I (55725) AUDIO: 
I (55743) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (55750) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (55756) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (55763) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (55769) AUDIO: 
I (56070) AUDIO: 
I (56077) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (56085) AUDIO: 
I (56103) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (56110) AUDIO:  RX channel disabled (took 0 ms)
I (56115) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (56122) AUDIO:  TX channel disabled (took 0 ms)
I (56127) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (56184) AUDIO: [STEP 4/5] Deleting RX channel...
I (56185) AUDIO:  RX channel deleted (took 0 ms)
I (56185) AUDIO: [STEP 5/5] Deleting TX channel...
I (56190) AUDIO:  TX channel deleted (took 0 ms)
I (56195) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (56253) AUDIO: 
I (56260) AUDIO:   Modern I2S STD Driver Deinitialized
I (56267) AUDIO:  Camera Can Now Initialize
I (56272) AUDIO: 
I (56290) LED_CTRL: LED pattern -> 3
I (56294) STATE_MGR:  Entered CAMERA_STANDBY state
I (56310) STATE_MGR: STT pipeline reported stop
I (56320) STATE_MGR: TTS playback finished successfully
 Voice mode STARTED (recording...)
I (63436) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (63437) SERIAL_CMD: Simulated SHORT PRESS - Voice START
I (63437) STATE_MGR: Single click - mode toggle requested
I (63448) STATE_MGR: Switching: Camera  Voice (count: 5)
I (63455) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (63460) STATE_MGR: Stopping camera...
I (63465) STATE_MGR: 
I (63481) STATE_MGR:  STEP 2: Acquiring I2S configuration mutex
I (63488) STATE_MGR: 
I (63504) STATE_MGR:   Timeout: 5000 ms
I (63509) STATE_MGR:   Timestamp: 61961 ms
I (63513) STATE_MGR:    Mutex acquired (took 0 ms)
I (63519) STATE_MGR: 
I (63535) STATE_MGR:  STEP 3: Deinitializing camera hardware
I (63542) STATE_MGR: 
I (63558) STATE_MGR:   Free heap before: 4054176 bytes
I (63564) STATE_MGR:   Free PSRAM before: 3999772 bytes
I (63570) CAMERA: Deinitializing camera...
I (63575) CAMERA: Camera deinitialized
I (63579) STATE_MGR:    Camera deinitialized (took 9 ms)
I (63585) STATE_MGR:   Free heap after: 4216260 bytes
I (63591) STATE_MGR:   Free PSRAM after: 4124088 bytes
I (63597) STATE_MGR: 
I (63613) STATE_MGR:  HARDWARE STABILIZATION - CRITICAL
I (63619) STATE_MGR: 
I (63636) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (63744) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (63844) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (63894) STATE_MGR:    Total stabilization: 250ms
I (63894) STATE_MGR:   Timestamp: 62347 ms
I (63894) STATE_MGR: 
I (63910) STATE_MGR:  STEP 4: Initializing I2S audio drivers
I (63917) STATE_MGR: 
I (63933) STATE_MGR:   Free heap before: 4216260 bytes
I (63939) AUDIO: 
I (63957) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (63964) AUDIO: 
I (63982) AUDIO: 
I (64000) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (64007) AUDIO: 
I (64025) AUDIO: [DIAG] Pre-init state:
I (64029) AUDIO:   Free heap: 4216260 bytes
I (64034) AUDIO:   Free internal RAM: 111371 bytes
I (64040) AUDIO:   Free DMA-capable: 92543 bytes
I (64045) AUDIO:   Free PSRAM: 4124088 bytes
I (64050) AUDIO:   Timestamp: 62503 ms
I (64054) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (64061) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (64069) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (64077) AUDIO:   DMA frame num (per desc): 1020
I (64083) AUDIO:   DMA total samples (effective): 4080
I (64089) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (64096) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (64102) AUDIO:  I2S channels created (took 0 ms)
I (64107) AUDIO:   TX handle: 0x3ffcb274 | RX handle: 0x3ffcb068
I (64114) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (64121) AUDIO:   Sample rate: 16000 Hz
I (64125) AUDIO:   MCLK: DISABLED
I (64129) AUDIO:   BCLK: GPIO14 (shared)
I (64134) AUDIO:   WS:   GPIO15 (shared)
I (64139) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (64145) AUDIO:  TX channel configured (took 1 ms)
I (64150) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (64157) AUDIO:   Sample rate: 16000 Hz
I (64161) AUDIO:   MCLK: DISABLED
I (64165) AUDIO:   BCLK: GPIO14 (shared)
I (64170) AUDIO:   WS:   GPIO15 (shared)
I (64175) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (64181) AUDIO:  RX channel configured (took 0 ms)
I (64186) AUDIO: [STEP 4/6] Enabling TX channel...
I (64192) AUDIO:  TX channel enabled (took 0 ms)
I (64197) AUDIO: [STEP 5/6] Enabling RX channel...
I (64203) AUDIO:  RX channel enabled (took 0 ms)
I (64208) AUDIO: [STEP 6/6] Hardware stabilization...
I (64214) AUDIO:   Phase 1: Initial settle (50ms)
I (64269) AUDIO:   Phase 2: DMA verification
I (64269) AUDIO:    DMA TX operational (128 bytes)
I (64269) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (64426) AUDIO: [DIAG] Post-init state:
I (64426) AUDIO:   Free heap: 4190300 bytes
I (64426) AUDIO:   Free internal RAM: 85411 bytes
I (64430) AUDIO:   Free DMA-capable: 66583 bytes
I (64435) AUDIO:   Free PSRAM: 4124088 bytes
I (64440) AUDIO:   Timestamp: 62893 ms
I (64445) AUDIO:   Total init time: 201 ms
I (64449) AUDIO: 
I (64467) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (64474) AUDIO:  Driver: i2s_std (NOT legacy!)
I (64479) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (64488) AUDIO:  This should eliminate LoadStoreError crashes!
I (64494) AUDIO: 
I (64512) AUDIO: 
I (64530) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (64537) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (64543) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (64550) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (64556) AUDIO: 
I (64574) STATE_MGR:    Audio initialized (took 635 ms)
I (64580) STATE_MGR:   Free heap after: 4190300 bytes
I (64586) STATE_MGR: 
I (64602) STATE_MGR:  STEP 5: I2S mutex released
I (64608) STATE_MGR:  Total transition time: 894 ms
I (64614) STATE_MGR: 
I (64630) STATE_MGR: 
I (64646) STATE_MGR:  STEP 6: Starting STT/TTS pipelines
I (64653) STATE_MGR: 
I (64669) STT: Starting STT pipeline...
I (64673) STT: Initializing STT pipeline...
W (64678) STT: STT pipeline already initialized
I (64683) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (64692) STT: 
I (64693) STT:  STT pipeline started
I (64709) STT:  Audio Capture Task Started on Core 0
I (64713) TTS: Starting TTS decoder...
I (64709) STT: Audio streaming task started on Core 0
I (64724) TTS: Initializing TTS decoder...
I (64719) STT: 
W (64734) TTS: TTS decoder already initialized
I (64729) STT:    Stream buffer allocated at 0x3ffe7ed0
I (64755) TTS: [CORE AFFINITY] Creating TTS playback task on Core 0 (co-located with Wi-Fi and STT)
I (64750) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (64771) TTS:  TTS decoder started
I (64762) STT: Starting audio streaming to server...
I (64778) STT:   Current time: 63231 ms
I (64793) STT:   Free heap: 4172832 bytes
I (64778) TTS: TTS playback task started on Core 0
I (64998) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (64998) STT:    Audio driver initialized
I (64999) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (65058) LED_CTRL: LED pattern -> 1
I (65059) STATE_MGR:  Voice mode transition complete
I (65059) STATE_MGR:  Entered VOICE_ACTIVE state
I (65073) STATE_MGR: STT pipeline reported start
I (65083) STATE_MGR: TTS playback start event received
I (65106) STT:   Total stabilization: 300ms
I (65106) STT:   Timestamp: 63559 ms
I (65106) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (65110) STT:    DMA-capable buffer allocated at 0x3fff18a8
I (65117) STT: 
I (65133) STT:   STARTING AUDIO CAPTURE
I (65138) STT:  Chunk size: 1024 bytes | Timeout: 100 ms
I (65145) STT: 
I (65161) STT: [FIRST READ] Completed:
I (65165) STT:   Result: ESP_OK
I (65169) STT:   Bytes read: 1024 / 1024
I (65174) STT:   Duration: 0 ms
I (65177) STT:   Timestamp: 63614 ms
I (65183) STT:   First 16 bytes: 2e 00 2e 00 a6 ff a6 ff d8 ff d8 ff 38 00 38 00
I (65286) STT: [CAPTURE]  Alive... 200 reads completed (Free Heap: 4171804 bytes)
I (65350) STT: [CAPTURE] Read #10: 1024 bytes (total: 10240 bytes, 10.0 KB)
I (65351) STT:   Avg read time: 63 ms | Errors: 0
I (65669) STT: [CAPTURE] Read #20: 1024 bytes (total: 20480 bytes, 20.0 KB)
I (65670) STT:   Avg read time: 63 ms | Errors: 0
I (65988) STT: [CAPTURE] Read #30: 1024 bytes (total: 30720 bytes, 30.0 KB)
I (65989) STT:   Avg read time: 63 ms | Errors: 0
I (66306) STT: [CAPTURE] Read #40: 1024 bytes (total: 40960 bytes, 40.0 KB)
I (66308) STT:   Avg read time: 63 ms | Errors: 0
I (66625) STT: [CAPTURE] Read #50: 1024 bytes (total: 51200 bytes, 50.0 KB)
I (66626) STT:   Avg read time: 63 ms | Errors: 0
I (66944) STT: [CAPTURE] Read #60: 1024 bytes (total: 61440 bytes, 60.0 KB)
I (66945) STT:   Avg read time: 63 ms | Errors: 0
I (67172) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
 Voice mode STOPPED
W (67172) STATE_MGR: Guardrail soft override: stopping voice pipeline while busy
I (67172) SERIAL_CMD: Simulated SHORT PRESS - Voice STOP
I (67178) STATE_MGR: Single click - mode toggle requested
I (67190) STATE_MGR: Switching: Voice  Camera (count: 6)
I (67196) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (67202) STATE_MGR: Stopping voice mode components...
I (67208) STT: Stopping STT pipeline...
I (67212) STT: Sending EOS signal...
I (67216) WEBSOCKET: Sending EOS signal
I (67249) STT: Audio streaming task stopped (streamed 0 bytes in 0 chunks)
I (67263) STT: [CAPTURE] Read #70: 1024 bytes (total: 71680 bytes, 70.0 KB)
I (67264) STT:   Avg read time: 63 ms | Errors: 0
I (67265) STT: Audio capture task stopped (captured 71680 bytes total)
I (67285) STT: STT pipeline stopped
I (67286) TTS: Stopping TTS decoder...
I (67286) TTS: Playback stop signal received
I (67288) TTS: TTS playback task stopped
I (67296) TTS: TTS decoder stopped (played 0 bytes)
I (67398) STATE_MGR: Acquiring I2S mutex...
I (67399) STATE_MGR: Deinitializing audio drivers...
I (67399) AUDIO: 
I (67416) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (67424) AUDIO: 
I (67441) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (67448) AUDIO:  RX channel disabled (took 0 ms)
I (67454) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (67460) AUDIO:  TX channel disabled (took 0 ms)
I (67466) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (67523) AUDIO: [STEP 4/5] Deleting RX channel...
I (67524) AUDIO:  RX channel deleted (took 0 ms)
I (67524) AUDIO: [STEP 5/5] Deleting TX channel...
I (67529) AUDIO:  TX channel deleted (took 0 ms)
I (67534) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (67592) AUDIO: 
I (67599) AUDIO:   Modern I2S STD Driver Deinitialized
I (67606) AUDIO:  Camera Can Now Initialize
I (67611) AUDIO: 
I (67629) STATE_MGR: Initializing camera...
I (67634) CAMERA: Initializing camera...
I (67638) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (67648) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (67656) cam_hal: cam init ok
W (67660) ledc: GPIO 0 is not usable, maybe conflict with others
I (67666) sccb-ng: pin_sda 26 pin_scl 27
I (67671) sccb-ng: sccb_i2c_port=1
I (67676) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (67718) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (67718) camera: Detected OV2640 camera
I (67718) camera: Detected camera at address=0x30
I (67799) cam_hal: PSRAM DMA mode disabled
I (67800) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (67804) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (67811) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (67818) cam_hal: cam config ok
I (67821) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (67904) CAMERA: Camera initialized successfully
I (67904) STATE_MGR: I2S mutex released
I (67904) STATE_MGR:  Camera mode transition complete
I (67909) AUDIO: 
I (67927) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (67934) AUDIO: 
I (67952) AUDIO: 
I (67970) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (67977) AUDIO: 
I (67995) AUDIO: [DIAG] Pre-init state:
I (68000) AUDIO:   Free heap: 4054176 bytes
I (68005) AUDIO:   Free internal RAM: 73311 bytes
I (68010) AUDIO:   Free DMA-capable: 54483 bytes
I (68015) AUDIO:   Free PSRAM: 3999772 bytes
I (68020) AUDIO:   Timestamp: 66473 ms
I (68025) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (68031) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (68039) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (68048) AUDIO:   DMA frame num (per desc): 1020
I (68053) AUDIO:   DMA total samples (effective): 4080
I (68059) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (68066) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (68072) AUDIO:  I2S channels created (took 0 ms)
I (68078) AUDIO:   TX handle: 0x3ffcb08c | RX handle: 0x3ffcb568
I (68084) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (68091) AUDIO:   Sample rate: 16000 Hz
I (68096) AUDIO:   MCLK: DISABLED
I (68100) AUDIO:   BCLK: GPIO14 (shared)
I (68104) AUDIO:   WS:   GPIO15 (shared)
I (68109) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (68116) AUDIO:  TX channel configured (took 1 ms)
I (68120) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (68127) AUDIO:   Sample rate: 16000 Hz
I (68132) AUDIO:   MCLK: DISABLED
I (68136) AUDIO:   BCLK: GPIO14 (shared)
I (68140) AUDIO:   WS:   GPIO15 (shared)
I (68145) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (68151) AUDIO:  RX channel configured (took 0 ms)
I (68156) AUDIO: [STEP 4/6] Enabling TX channel...
I (68162) AUDIO:  TX channel enabled (took 0 ms)
I (68167) AUDIO: [STEP 5/6] Enabling RX channel...
I (68173) AUDIO:  RX channel enabled (took 0 ms)
I (68178) AUDIO: [STEP 6/6] Hardware stabilization...
I (68184) AUDIO:   Phase 1: Initial settle (50ms)
I (68239) AUDIO:   Phase 2: DMA verification
I (68239) AUDIO:    DMA TX operational (128 bytes)
I (68239) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (68396) AUDIO: [DIAG] Post-init state:
I (68396) AUDIO:   Free heap: 4028276 bytes
I (68396) AUDIO:   Free internal RAM: 47339 bytes
I (68400) AUDIO:   Free DMA-capable: 28511 bytes
I (68405) AUDIO:   Free PSRAM: 3999772 bytes
I (68410) AUDIO:   Timestamp: 66863 ms
I (68415) AUDIO:   Total init time: 201 ms
I (68419) AUDIO: 
I (68437) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (68444) AUDIO:  Driver: i2s_std (NOT legacy!)
I (68449) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (68458) AUDIO:  This should eliminate LoadStoreError crashes!
I (68464) AUDIO: 
I (68482) AUDIO: 
I (68500) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (68507) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (68513) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (68520) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (68526) AUDIO: 
I (68827) AUDIO: 
I (68834) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (68842) AUDIO: 
I (68860) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (68867) AUDIO:  RX channel disabled (took 0 ms)
I (68872) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (68879) AUDIO:  TX channel disabled (took 0 ms)
I (68884) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (68941) AUDIO: [STEP 4/5] Deleting RX channel...
I (68942) AUDIO:  RX channel deleted (took 0 ms)
I (68942) AUDIO: [STEP 5/5] Deleting TX channel...
I (68947) AUDIO:  TX channel deleted (took 0 ms)
I (68952) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (69010) AUDIO: 
I (69017) AUDIO:   Modern I2S STD Driver Deinitialized
I (69024) AUDIO:  Camera Can Now Initialize
I (69029) AUDIO: 
I (69047) LED_CTRL: LED pattern -> 3
I (69051) STATE_MGR:  Entered CAMERA_STANDBY state
I (69067) STATE_MGR: STT pipeline reported stop
I (69077) STATE_MGR: TTS playback finished successfully
 Image capture triggered!
I (79955) STATE_MGR: Button event received: 2 in state CAMERA_STANDBY
I (79955) SERIAL_CMD: Simulated DOUBLE CLICK - Camera capture
I (79955) STATE_MGR: Double-click detected - triggering capture sequence
I (79967) STATE_MGR: Starting camera capture sequence
I (79973) LED_CTRL: LED pattern -> 6
I (79977) AUDIO: 
I (79995) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (80002) AUDIO: 
I (80020) AUDIO: 
I (80038) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (80046) AUDIO: 
I (80064) AUDIO: [DIAG] Pre-init state:
I (80068) AUDIO:   Free heap: 4054176 bytes
I (80073) AUDIO:   Free internal RAM: 73311 bytes
I (80078) AUDIO:   Free DMA-capable: 54483 bytes
I (80084) AUDIO:   Free PSRAM: 3999772 bytes
I (80089) AUDIO:   Timestamp: 78541 ms
I (80093) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (80100) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (80108) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (80116) AUDIO:   DMA frame num (per desc): 1020
I (80121) AUDIO:   DMA total samples (effective): 4080
I (80127) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (80134) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (80141) AUDIO:  I2S channels created (took 0 ms)
I (80146) AUDIO:   TX handle: 0x3ffcb08c | RX handle: 0x3ffcb568
I (80153) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (80159) AUDIO:   Sample rate: 16000 Hz
I (80164) AUDIO:   MCLK: DISABLED
I (80168) AUDIO:   BCLK: GPIO14 (shared)
I (80173) AUDIO:   WS:   GPIO15 (shared)
I (80177) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (80184) AUDIO:  TX channel configured (took 1 ms)
I (80189) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (80195) AUDIO:   Sample rate: 16000 Hz
I (80200) AUDIO:   MCLK: DISABLED
I (80204) AUDIO:   BCLK: GPIO14 (shared)
I (80209) AUDIO:   WS:   GPIO15 (shared)
I (80213) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (80219) AUDIO:  RX channel configured (took 0 ms)
I (80225) AUDIO: [STEP 4/6] Enabling TX channel...
I (80230) AUDIO:  TX channel enabled (took 0 ms)
I (80236) AUDIO: [STEP 5/6] Enabling RX channel...
I (80241) AUDIO:  RX channel enabled (took 0 ms)
I (80247) AUDIO: [STEP 6/6] Hardware stabilization...
I (80252) AUDIO:   Phase 1: Initial settle (50ms)
I (80308) AUDIO:   Phase 2: DMA verification
I (80308) AUDIO:    DMA TX operational (128 bytes)
I (80308) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (80465) AUDIO: [DIAG] Post-init state:
I (80465) AUDIO:   Free heap: 4028276 bytes
I (80465) AUDIO:   Free internal RAM: 47339 bytes
I (80469) AUDIO:   Free DMA-capable: 28511 bytes
I (80474) AUDIO:   Free PSRAM: 3999772 bytes
I (80479) AUDIO:   Timestamp: 78932 ms
I (80484) AUDIO:   Total init time: 201 ms
I (80488) AUDIO: 
I (80506) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (80513) AUDIO:  Driver: i2s_std (NOT legacy!)
I (80518) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (80527) AUDIO:  This should eliminate LoadStoreError crashes!
I (80533) AUDIO: 
I (80551) AUDIO: 
I (80569) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (80576) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (80582) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (80589) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (80595) AUDIO: 
I (80945) AUDIO: 
I (80952) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (80960) AUDIO: 
I (80978) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (80985) AUDIO:  RX channel disabled (took 0 ms)
I (80990) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (80997) AUDIO:  TX channel disabled (took 0 ms)
I (81002) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (81059) AUDIO: [STEP 4/5] Deleting RX channel...
I (81060) AUDIO:  RX channel deleted (took 0 ms)
I (81060) AUDIO: [STEP 5/5] Deleting TX channel...
I (81065) AUDIO:  TX channel deleted (took 0 ms)
I (81070) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (81128) AUDIO: 
I (81135) AUDIO:   Modern I2S STD Driver Deinitialized
I (81142) AUDIO:  Camera Can Now Initialize
I (81147) AUDIO: 
I (81165) STATE_MGR: Capturing frame from camera
I (81170) STATE_MGR: Frame captured: 7150 bytes
I (81176) JSON_PROTO: Generated session ID: hotpin-998C64-79
I (81181) STATE_MGR: Uploading image using session hotpin-998C64-79
I (81188) HTTP_CLIENT: Uploading image: session=hotpin-998C64-79, size=7150 bytes
I (81198) HTTP_CLIENT: POST body assembled: 7407 bytes
I (81204) HTTP_CLIENT: Sending POST request to http://10.87.102.58:8000/image
I (81637) HTTP_CLIENT: HTTP POST Status = 200, content_length = 198
I (81638) HTTP_CLIENT: Image uploaded successfully
I (81639) HTTP_CLIENT: Server response: {"status":"success","message":"Image received successfully","session":"hotpin-998C64-79","filename":"image.jpg","size_bytes":7150,"saved_path":"captured_images/hotpin-998C64-79_20251012_064218.jpg"}
I (81663) STATE_MGR: Image uploaded successfully
I (81666) LED_CTRL: LED pattern -> 3
I (81671) STATE_MGR: Camera capture sequence complete
I (81686) STATE_MGR: Capture complete event: success=1 (ESP_OK)
 Voice mode STARTED (recording...)
I (101935) SERIAL_CMD: Simulated SHORT PRESS - Voice START
I (101937) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (101941) STATE_MGR: Single click - mode toggle requested
I (101947) STATE_MGR: Switching: Camera  Voice (count: 7)
I (101953) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (101959) STATE_MGR: Stopping camera...
I (101963) STATE_MGR: 
I (101980) STATE_MGR:  STEP 2: Acquiring I2S configuration mutex
I (101987) STATE_MGR: 
I (102003) STATE_MGR:   Timeout: 5000 ms
I (102008) STATE_MGR:   Timestamp: 100460 ms
I (102013) STATE_MGR:    Mutex acquired (took 0 ms)
I (102018) STATE_MGR: 
I (102035) STATE_MGR:  STEP 3: Deinitializing camera hardware
I (102041) STATE_MGR: 
I (102058) STATE_MGR:   Free heap before: 4053964 bytes
I (102064) STATE_MGR:   Free PSRAM before: 3999772 bytes
I (102070) CAMERA: Deinitializing camera...
I (102075) CAMERA: Camera deinitialized
I (102079) STATE_MGR:    Camera deinitialized (took 9 ms)
I (102085) STATE_MGR:   Free heap after: 4216048 bytes
I (102091) STATE_MGR:   Free PSRAM after: 4124088 bytes
I (102097) STATE_MGR: 
I (102113) STATE_MGR:  HARDWARE STABILIZATION - CRITICAL
I (102120) STATE_MGR: 
I (102136) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (102244) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (102344) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (102394) STATE_MGR:    Total stabilization: 250ms
I (102394) STATE_MGR:   Timestamp: 100847 ms
I (102394) STATE_MGR: 
I (102410) STATE_MGR:  STEP 4: Initializing I2S audio drivers
I (102417) STATE_MGR: 
I (102433) STATE_MGR:   Free heap before: 4216048 bytes
I (102439) AUDIO: 
I (102457) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (102464) AUDIO: 
I (102483) AUDIO: 
I (102501) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (102508) AUDIO: 
I (102526) AUDIO: [DIAG] Pre-init state:
I (102531) AUDIO:   Free heap: 4216048 bytes
I (102536) AUDIO:   Free internal RAM: 111159 bytes
I (102541) AUDIO:   Free DMA-capable: 92331 bytes
I (102546) AUDIO:   Free PSRAM: 4124088 bytes
I (102552) AUDIO:   Timestamp: 101004 ms
I (102556) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (102563) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (102571) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (102579) AUDIO:   DMA frame num (per desc): 1020
I (102585) AUDIO:   DMA total samples (effective): 4080
I (102591) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (102598) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (102604) AUDIO:  I2S channels created (took 0 ms)
I (102610) AUDIO:   TX handle: 0x3ffcb274 | RX handle: 0x3ffcb068
I (102617) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (102623) AUDIO:   Sample rate: 16000 Hz
I (102628) AUDIO:   MCLK: DISABLED
I (102632) AUDIO:   BCLK: GPIO14 (shared)
I (102637) AUDIO:   WS:   GPIO15 (shared)
I (102642) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (102648) AUDIO:  TX channel configured (took 1 ms)
I (102653) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (102660) AUDIO:   Sample rate: 16000 Hz
I (102665) AUDIO:   MCLK: DISABLED
I (102669) AUDIO:   BCLK: GPIO14 (shared)
I (102673) AUDIO:   WS:   GPIO15 (shared)
I (102678) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (102684) AUDIO:  RX channel configured (took 0 ms)
I (102690) AUDIO: [STEP 4/6] Enabling TX channel...
I (102695) AUDIO:  TX channel enabled (took 0 ms)
I (102701) AUDIO: [STEP 5/6] Enabling RX channel...
I (102707) AUDIO:  RX channel enabled (took 0 ms)
I (102712) AUDIO: [STEP 6/6] Hardware stabilization...
I (102718) AUDIO:   Phase 1: Initial settle (50ms)
I (102773) AUDIO:   Phase 2: DMA verification
I (102773) AUDIO:    DMA TX operational (128 bytes)
I (102774) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (102931) AUDIO: [DIAG] Post-init state:
I (102931) AUDIO:   Free heap: 4190088 bytes
I (102931) AUDIO:   Free internal RAM: 85199 bytes
I (102935) AUDIO:   Free DMA-capable: 66371 bytes
I (102941) AUDIO:   Free PSRAM: 4124088 bytes
I (102946) AUDIO:   Timestamp: 101398 ms
I (102950) AUDIO:   Total init time: 201 ms
I (102955) AUDIO: 
I (102973) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (102979) AUDIO:  Driver: i2s_std (NOT legacy!)
I (102985) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (102994) AUDIO:  This should eliminate LoadStoreError crashes!
I (103001) AUDIO: 
I (103019) AUDIO: 
I (103037) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (103043) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (103050) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (103057) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (103063) AUDIO: 
I (103081) STATE_MGR:    Audio initialized (took 641 ms)
I (103087) STATE_MGR:   Free heap after: 4190088 bytes
I (103093) STATE_MGR: 
I (103109) STATE_MGR:  STEP 5: I2S mutex released
I (103115) STATE_MGR:  Total transition time: 900 ms
I (103121) STATE_MGR: 
I (103137) STATE_MGR: 
I (103154) STATE_MGR:  STEP 6: Starting STT/TTS pipelines
I (103160) STATE_MGR: 
I (103176) STT: Starting STT pipeline...
I (103181) STT: Initializing STT pipeline...
W (103186) STT: STT pipeline already initialized
I (103191) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (103200) STT: 
I (103201) STT:  STT pipeline started
I (103217) STT:  Audio Capture Task Started on Core 0
I (103221) TTS: Starting TTS decoder...
I (103201) STT: Audio streaming task started on Core 0
I (103232) TTS: Initializing TTS decoder...
I (103227) STT: 
W (103242) TTS: TTS decoder already initialized
I (103238) STT:    Stream buffer allocated at 0x3ffe7ed0
I (103264) TTS: [CORE AFFINITY] Creating TTS playback task on Core 0 (co-located with Wi-Fi and STT)
I (103259) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (103280) TTS:  TTS decoder started
I (103270) STT: Starting audio streaming to server...
I (103287) STT:   Current time: 101740 ms
I (103302) STT:   Free heap: 4172620 bytes
I (103287) TTS: TTS playback task started on Core 0
I (103507) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (103507) STT:    Audio driver initialized
I (103508) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (103567) LED_CTRL: LED pattern -> 1
I (103568) STATE_MGR:  Voice mode transition complete
I (103568) STATE_MGR:  Entered VOICE_ACTIVE state
I (103582) STATE_MGR: STT pipeline reported start
I (103592) STATE_MGR: TTS playback start event received
I (103615) STT:   Total stabilization: 300ms
I (103615) STT:   Timestamp: 102067 ms
I (103615) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (103620) STT:    DMA-capable buffer allocated at 0x3fff18a8
I (103626) STT: 
I (103643) STT:   STARTING AUDIO CAPTURE
I (103648) STT:  Chunk size: 1024 bytes | Timeout: 100 ms
I (103654) STT: 
I (103670) STT: [FIRST READ] Completed:
I (103675) STT:   Result: ESP_OK
I (103679) STT:   Bytes read: 1024 / 1024
I (103683) STT:   Duration: 0 ms
I (103687) STT:   Timestamp: 102123 ms
I (103693) STT:   First 16 bytes: b6 ff b6 ff d6 ff d6 ff 32 00 32 00 d8 ff d8 ff
I (103854) STT: [CAPTURE] Read #10: 1024 bytes (total: 10240 bytes, 10.0 KB)
I (103856) STT:   Avg read time: 63 ms | Errors: 0
I (104173) STT: [CAPTURE] Read #20: 1024 bytes (total: 20480 bytes, 20.0 KB)
I (104174) STT:   Avg read time: 63 ms | Errors: 0
I (104492) STT: [CAPTURE] Read #30: 1024 bytes (total: 30720 bytes, 30.0 KB)
I (104493) STT:   Avg read time: 63 ms | Errors: 0
I (104747) STT: [CAPTURE]  Alive... 300 reads completed (Free Heap: 4171336 bytes)
I (104810) STT: [CAPTURE] Read #40: 1024 bytes (total: 40960 bytes, 40.0 KB)
I (104811) STT:   Avg read time: 62 ms | Errors: 0
I (105129) STT: [CAPTURE] Read #50: 1024 bytes (total: 51200 bytes, 50.0 KB)
I (105130) STT:   Avg read time: 63 ms | Errors: 0
I (105448) STT: [CAPTURE] Read #60: 1024 bytes (total: 61440 bytes, 60.0 KB)
I (105449) STT:   Avg read time: 63 ms | Errors: 0
I (105767) STT: [CAPTURE] Read #70: 1024 bytes (total: 71680 bytes, 70.0 KB)
I (105768) STT:   Avg read time: 63 ms | Errors: 0
I (105966) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
 Voice mode STOPPED
W (105966) STATE_MGR: Guardrail soft override: stopping voice pipeline while busy
I (105972) STATE_MGR: Single click - mode toggle requested
I (105966) SERIAL_CMD: Simulated SHORT PRESS - Voice STOP
I (105978) STATE_MGR: Switching: Voice  Camera (count: 8)
I (105991) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (105997) STATE_MGR: Stopping voice mode components...
I (106003) STT: Stopping STT pipeline...
I (106007) STT: Sending EOS signal...
I (106012) WEBSOCKET: Sending EOS signal
I (106022) STT: Audio capture task stopped (captured 79872 bytes total)
I (106045) STT: Audio streaming task stopped (streamed 0 bytes in 0 chunks)
I (106060) STT: STT pipeline stopped
I (106061) TTS: Stopping TTS decoder...
I (106061) TTS: Playback stop signal received
I (106063) TTS: TTS playback task stopped
I (106071) TTS: TTS decoder stopped (played 0 bytes)
I (106174) STATE_MGR: Acquiring I2S mutex...
I (106174) STATE_MGR: Deinitializing audio drivers...
I (106174) AUDIO: 
I (106192) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (106200) AUDIO: 
I (106218) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (106225) AUDIO:  RX channel disabled (took 0 ms)
I (106230) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (106237) AUDIO:  TX channel disabled (took 0 ms)
I (106243) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (106299) AUDIO: [STEP 4/5] Deleting RX channel...
I (106300) AUDIO:  RX channel deleted (took 0 ms)
I (106300) AUDIO: [STEP 5/5] Deleting TX channel...
I (106305) AUDIO:  TX channel deleted (took 0 ms)
I (106311) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (106368) AUDIO: 
I (106375) AUDIO:   Modern I2S STD Driver Deinitialized
I (106382) AUDIO:  Camera Can Now Initialize
I (106387) AUDIO: 
I (106405) STATE_MGR: Initializing camera...
I (106410) CAMERA: Initializing camera...
I (106415) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (106424) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (106433) cam_hal: cam init ok
W (106437) ledc: GPIO 0 is not usable, maybe conflict with others
I (106443) sccb-ng: pin_sda 26 pin_scl 27
I (106448) sccb-ng: sccb_i2c_port=1
I (106453) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (106496) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (106496) camera: Detected OV2640 camera
I (106496) camera: Detected camera at address=0x30
I (106577) cam_hal: PSRAM DMA mode disabled
I (106578) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (106582) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (106589) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (106596) cam_hal: cam config ok
I (106600) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (106682) CAMERA: Camera initialized successfully
I (106683) STATE_MGR: I2S mutex released
I (106683) STATE_MGR:  Camera mode transition complete
I (106688) AUDIO: 
I (106706) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (106713) AUDIO: 
I (106731) AUDIO: 
I (106749) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (106756) AUDIO: 
I (106775) AUDIO: [DIAG] Pre-init state:
I (106779) AUDIO:   Free heap: 4053840 bytes
I (106784) AUDIO:   Free internal RAM: 72975 bytes
I (106790) AUDIO:   Free DMA-capable: 54147 bytes
I (106795) AUDIO:   Free PSRAM: 3999772 bytes
I (106800) AUDIO:   Timestamp: 105253 ms
I (106805) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (106812) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (106820) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (106828) AUDIO:   DMA frame num (per desc): 1020
I (106833) AUDIO:   DMA total samples (effective): 4080
I (106839) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (106846) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (106853) AUDIO:  I2S channels created (took 0 ms)
I (106858) AUDIO:   TX handle: 0x3ffcb508 | RX handle: 0x3ffcb5ec
I (106865) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (106872) AUDIO:   Sample rate: 16000 Hz
I (106877) AUDIO:   MCLK: DISABLED
I (106881) AUDIO:   BCLK: GPIO14 (shared)
I (106885) AUDIO:   WS:   GPIO15 (shared)
I (106890) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (106897) AUDIO:  TX channel configured (took 1 ms)
I (106902) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (106908) AUDIO:   Sample rate: 16000 Hz
I (106913) AUDIO:   MCLK: DISABLED
I (106917) AUDIO:   BCLK: GPIO14 (shared)
I (106922) AUDIO:   WS:   GPIO15 (shared)
I (106927) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (106933) AUDIO:  RX channel configured (took 0 ms)
I (106938) AUDIO: [STEP 4/6] Enabling TX channel...
I (106944) AUDIO:  TX channel enabled (took 0 ms)
I (106949) AUDIO: [STEP 5/6] Enabling RX channel...
I (106955) AUDIO:  RX channel enabled (took 0 ms)
I (106961) AUDIO: [STEP 6/6] Hardware stabilization...
I (106966) AUDIO:   Phase 1: Initial settle (50ms)
I (107022) AUDIO:   Phase 2: DMA verification
I (107022) AUDIO:    DMA TX operational (128 bytes)
I (107023) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (107180) AUDIO: [DIAG] Post-init state:
I (107180) AUDIO:   Free heap: 4028020 bytes
I (107180) AUDIO:   Free internal RAM: 47083 bytes
I (107184) AUDIO:   Free DMA-capable: 28255 bytes
I (107190) AUDIO:   Free PSRAM: 3999772 bytes
I (107195) AUDIO:   Timestamp: 105647 ms
I (107199) AUDIO:   Total init time: 201 ms
I (107204) AUDIO: 
I (107222) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (107228) AUDIO:  Driver: i2s_std (NOT legacy!)
I (107234) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (107243) AUDIO:  This should eliminate LoadStoreError crashes!
I (107250) AUDIO: 
I (107268) AUDIO: 
I (107286) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (107292) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (107299) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (107306) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (107312) AUDIO: 
I (107613) AUDIO: 
I (107620) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (107628) AUDIO: 
I (107646) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (107653) AUDIO:  RX channel disabled (took 0 ms)
I (107659) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (107665) AUDIO:  TX channel disabled (took 0 ms)
I (107671) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (107728) AUDIO: [STEP 4/5] Deleting RX channel...
I (107729) AUDIO:  RX channel deleted (took 0 ms)
I (107729) AUDIO: [STEP 5/5] Deleting TX channel...
I (107734) AUDIO:  TX channel deleted (took 0 ms)
I (107740) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (107797) AUDIO: 
I (107804) AUDIO:   Modern I2S STD Driver Deinitialized
I (107811) AUDIO:  Camera Can Now Initialize
I (107816) AUDIO: 
I (107834) LED_CTRL: LED pattern -> 3
I (107838) STATE_MGR:  Entered CAMERA_STANDBY state
I (107854) STATE_MGR: STT pipeline reported stop
I (107864) STATE_MGR: TTS playback finished successfully
 Voice mode STARTED (recording...)
I (114636) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (114636) SERIAL_CMD: Simulated SHORT PRESS - Voice START
I (114637) STATE_MGR: Single click - mode toggle requested
I (114648) STATE_MGR: Switching: Camera  Voice (count: 9)
I (114655) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (114660) STATE_MGR: Stopping camera...
I (114665) STATE_MGR: 
I (114681) STATE_MGR:  STEP 2: Acquiring I2S configuration mutex
I (114688) STATE_MGR: 
I (114705) STATE_MGR:   Timeout: 5000 ms
I (114709) STATE_MGR:   Timestamp: 113162 ms
I (114714) STATE_MGR:    Mutex acquired (took 0 ms)
I (114720) STATE_MGR: 
I (114736) STATE_MGR:  STEP 3: Deinitializing camera hardware
I (114743) STATE_MGR: 
I (114759) STATE_MGR:   Free heap before: 4053964 bytes
I (114765) STATE_MGR:   Free PSRAM before: 3999772 bytes
I (114771) CAMERA: Deinitializing camera...
I (114777) CAMERA: Camera deinitialized
I (114781) STATE_MGR:    Camera deinitialized (took 9 ms)
I (114787) STATE_MGR:   Free heap after: 4216048 bytes
I (114793) STATE_MGR:   Free PSRAM after: 4124088 bytes
I (114799) STATE_MGR: 
I (114815) STATE_MGR:  HARDWARE STABILIZATION - CRITICAL
I (114821) STATE_MGR: 
I (114838) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (114946) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (115046) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (115096) STATE_MGR:    Total stabilization: 250ms
I (115096) STATE_MGR:   Timestamp: 113549 ms
I (115096) STATE_MGR: 
I (115112) STATE_MGR:  STEP 4: Initializing I2S audio drivers
I (115119) STATE_MGR: 
I (115135) STATE_MGR:   Free heap before: 4216048 bytes
I (115141) AUDIO: 
I (115159) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (115166) AUDIO: 
I (115185) AUDIO: 
I (115203) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (115210) AUDIO: 
I (115228) AUDIO: [DIAG] Pre-init state:
I (115233) AUDIO:   Free heap: 4216048 bytes
I (115238) AUDIO:   Free internal RAM: 111159 bytes
I (115243) AUDIO:   Free DMA-capable: 92331 bytes
I (115248) AUDIO:   Free PSRAM: 4124088 bytes
I (115254) AUDIO:   Timestamp: 113706 ms
I (115258) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (115265) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (115273) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (115281) AUDIO:   DMA frame num (per desc): 1020
I (115287) AUDIO:   DMA total samples (effective): 4080
I (115293) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (115300) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (115306) AUDIO:  I2S channels created (took 0 ms)
I (115312) AUDIO:   TX handle: 0x3ffcb274 | RX handle: 0x3ffcb068
I (115319) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (115325) AUDIO:   Sample rate: 16000 Hz
I (115330) AUDIO:   MCLK: DISABLED
I (115334) AUDIO:   BCLK: GPIO14 (shared)
I (115339) AUDIO:   WS:   GPIO15 (shared)
I (115344) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (115350) AUDIO:  TX channel configured (took 1 ms)
I (115355) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (115362) AUDIO:   Sample rate: 16000 Hz
I (115367) AUDIO:   MCLK: DISABLED
I (115371) AUDIO:   BCLK: GPIO14 (shared)
I (115375) AUDIO:   WS:   GPIO15 (shared)
I (115380) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (115386) AUDIO:  RX channel configured (took 0 ms)
I (115392) AUDIO: [STEP 4/6] Enabling TX channel...
I (115397) AUDIO:  TX channel enabled (took 0 ms)
I (115403) AUDIO: [STEP 5/6] Enabling RX channel...
I (115409) AUDIO:  RX channel enabled (took 0 ms)
I (115414) AUDIO: [STEP 6/6] Hardware stabilization...
I (115420) AUDIO:   Phase 1: Initial settle (50ms)
I (115475) AUDIO:   Phase 2: DMA verification
I (115475) AUDIO:    DMA TX operational (128 bytes)
I (115475) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (115633) AUDIO: [DIAG] Post-init state:
I (115633) AUDIO:   Free heap: 4190088 bytes
I (115633) AUDIO:   Free internal RAM: 85199 bytes
I (115637) AUDIO:   Free DMA-capable: 66371 bytes
I (115643) AUDIO:   Free PSRAM: 4124088 bytes
I (115648) AUDIO:   Timestamp: 114100 ms
I (115652) AUDIO:   Total init time: 201 ms
I (115657) AUDIO: 
I (115675) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (115681) AUDIO:  Driver: i2s_std (NOT legacy!)
I (115687) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (115696) AUDIO:  This should eliminate LoadStoreError crashes!
I (115703) AUDIO: 
I (115721) AUDIO: 
I (115739) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (115745) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (115752) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (115759) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (115765) AUDIO: 
I (115783) STATE_MGR:    Audio initialized (took 641 ms)
I (115789) STATE_MGR:   Free heap after: 4190088 bytes
I (115795) STATE_MGR: 
I (115811) STATE_MGR:  STEP 5: I2S mutex released
I (115817) STATE_MGR:  Total transition time: 900 ms
I (115823) STATE_MGR: 
I (115839) STATE_MGR: 
I (115856) STATE_MGR:  STEP 6: Starting STT/TTS pipelines
I (115862) STATE_MGR: 
I (115878) STT: Starting STT pipeline...
I (115883) STT: Initializing STT pipeline...
W (115888) STT: STT pipeline already initialized
I (115893) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (115902) STT: 
I (115903) STT:  STT pipeline started
I (115903) STT: Audio streaming task started on Core 0
I (115923) TTS: Starting TTS decoder...
I (115919) STT:  Audio Capture Task Started on Core 0
I (115934) TTS: Initializing TTS decoder...
I (115929) STT:    Stream buffer allocated at 0x3ffe7ed0
W (115944) TTS: TTS decoder already initialized
I (115940) STT: 
I (115956) TTS: [CORE AFFINITY] Creating TTS playback task on Core 0 (co-located with Wi-Fi and STT)
I (115951) STT: Starting audio streaming to server...
I (115982) TTS:  TTS decoder started
I (115972) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (115999) STT:   Current time: 114452 ms
I (116004) STT:   Free heap: 4172620 bytes
I (115988) TTS: TTS playback task started on Core 0
I (116209) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (116209) STT:    Audio driver initialized
I (116210) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (116267) LED_CTRL: LED pattern -> 1
I (116267) STATE_MGR:  Voice mode transition complete
I (116268) STATE_MGR:  Entered VOICE_ACTIVE state
I (116282) STATE_MGR: STT pipeline reported start
I (116292) STATE_MGR: TTS playback start event received
I (116317) STT:   Total stabilization: 300ms
I (116317) STT:   Timestamp: 114770 ms
I (116317) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (116322) STT:    DMA-capable buffer allocated at 0x3fff18a8
I (116328) STT: 
I (116345) STT:   STARTING AUDIO CAPTURE
I (116350) STT:  Chunk size: 1024 bytes | Timeout: 100 ms
I (116356) STT: 
I (116373) STT: [FIRST READ] Completed:
I (116377) STT:   Result: ESP_OK
I (116381) STT:   Bytes read: 1024 / 1024
I (116386) STT:   Duration: 0 ms
I (116390) STT:   Timestamp: 114825 ms
I (116395) STT:   First 16 bytes: ba ff aa ff 02 00 ba ff a0 ff 02 00 ec ff a0 ff
I (116556) STT: [CAPTURE] Read #10: 1024 bytes (total: 10240 bytes, 10.0 KB)
I (116557) STT:   Avg read time: 63 ms | Errors: 0
I (116875) STT: [CAPTURE] Read #20: 1024 bytes (total: 20480 bytes, 20.0 KB)
I (116876) STT:   Avg read time: 63 ms | Errors: 0
I (117194) STT: [CAPTURE] Read #30: 1024 bytes (total: 30720 bytes, 30.0 KB)
I (117195) STT:   Avg read time: 63 ms | Errors: 0
I (117512) STT: [CAPTURE] Read #40: 1024 bytes (total: 40960 bytes, 40.0 KB)
I (117515) STT:   Avg read time: 63 ms | Errors: 0
I (117831) STT: [CAPTURE] Read #50: 1024 bytes (total: 51200 bytes, 50.0 KB)
I (117832) STT:   Avg read time: 63 ms | Errors: 0
I (118150) STT: [CAPTURE]  Alive... 400 reads completed (Free Heap: 4171336 bytes)
I (118151) STT: [CAPTURE] Read #60: 1024 bytes (total: 61440 bytes, 60.0 KB)
I (118156) STT:   Avg read time: 63 ms | Errors: 0
I (118469) STT: [CAPTURE] Read #70: 1024 bytes (total: 71680 bytes, 70.0 KB)
I (118470) STT:   Avg read time: 63 ms | Errors: 0
I (118788) STT: [CAPTURE] Read #80: 1024 bytes (total: 81920 bytes, 80.0 KB)
I (118789) STT:   Avg read time: 63 ms | Errors: 0
I (119106) STT: [CAPTURE] Read #90: 1024 bytes (total: 92160 bytes, 90.0 KB)
I (119107) STT:   Avg read time: 63 ms | Errors: 0
I (119425) STT: [CAPTURE] Read #100: 1024 bytes (total: 102400 bytes, 100.0 KB)
I (119426) STT:   Avg read time: 63 ms | Errors: 0
W (119429) STT: [STREAM] Dropping audio chunk (session busy). dropped_not_ready=25 buffer=1024
I (119744) STT: [CAPTURE] Read #110: 1024 bytes (total: 112640 bytes, 110.0 KB)
I (119745) STT:   Avg read time: 63 ms | Errors: 0
I (119972) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
 Voice mode STOPPED
W (119973) STATE_MGR: Guardrail soft override: stopping voice pipeline while busy
I (119973) SERIAL_CMD: Simulated SHORT PRESS - Voice STOP
I (119979) STATE_MGR: Single click - mode toggle requested
I (119991) STATE_MGR: Switching: Voice  Camera (count: 10)
I (119997) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (120003) STATE_MGR: Stopping voice mode components...
I (120009) STT: Stopping STT pipeline...
I (120014) STT: Sending EOS signal...
I (120018) WEBSOCKET: Sending EOS signal
I (120038) STT: Audio streaming task stopped (streamed 0 bytes in 0 chunks)
I (120062) STT: [CAPTURE] Read #120: 1024 bytes (total: 122880 bytes, 120.0 KB)
I (120063) STT:   Avg read time: 63 ms | Errors: 0
I (120066) STT: Audio capture task stopped (captured 122880 bytes total)
I (120087) STT: STT pipeline stopped
I (120088) TTS: Stopping TTS decoder...
I (120088) TTS: Playback stop signal received
I (120090) TTS: TTS playback task stopped
I (120098) TTS: TTS decoder stopped (played 0 bytes)
I (120201) STATE_MGR: Acquiring I2S mutex...
I (120202) STATE_MGR: Deinitializing audio drivers...
I (120202) AUDIO: 
I (120219) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (120227) AUDIO: 
I (120245) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (120252) AUDIO:  RX channel disabled (took 0 ms)
I (120257) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (120264) AUDIO:  TX channel disabled (took 0 ms)
I (120270) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (120326) AUDIO: [STEP 4/5] Deleting RX channel...
I (120327) AUDIO:  RX channel deleted (took 0 ms)
I (120327) AUDIO: [STEP 5/5] Deleting TX channel...
I (120332) AUDIO:  TX channel deleted (took 0 ms)
I (120338) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (120395) AUDIO: 
I (120402) AUDIO:   Modern I2S STD Driver Deinitialized
I (120409) AUDIO:  Camera Can Now Initialize
I (120414) AUDIO: 
I (120432) STATE_MGR: Initializing camera...
I (120437) CAMERA: Initializing camera...
I (120442) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (120451) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (120460) cam_hal: cam init ok
W (120464) ledc: GPIO 0 is not usable, maybe conflict with others
I (120470) sccb-ng: pin_sda 26 pin_scl 27
I (120475) sccb-ng: sccb_i2c_port=1
I (120480) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
E (120521) camera: Detected camera not supported.
E (120521) camera: Camera probe failed with error 0x106(ESP_ERR_NOT_SUPPORTED)
E (120524) CAMERA: Camera init failed: ESP_ERR_NOT_SUPPORTED
E (120530) STATE_MGR: Failed to init camera: ESP_ERR_NOT_SUPPORTED
E (120537) STATE_MGR:  Camera mode transition failed
I (120543) AUDIO: 
I (120560) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (120568) AUDIO: 
I (120586) AUDIO: 
I (120604) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (120611) AUDIO: 
I (120629) AUDIO: [DIAG] Pre-init state:
I (120634) AUDIO:   Free heap: 4215924 bytes
I (120639) AUDIO:   Free internal RAM: 111035 bytes
I (120644) AUDIO:   Free DMA-capable: 92207 bytes
I (120650) AUDIO:   Free PSRAM: 4124088 bytes
I (120655) AUDIO:   Timestamp: 119107 ms
I (120659) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (120666) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (120674) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (120683) AUDIO:   DMA frame num (per desc): 1020
I (120688) AUDIO:   DMA total samples (effective): 4080
I (120694) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (120701) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (120708) AUDIO:  I2S channels created (took 0 ms)
I (120713) AUDIO:   TX handle: 0x3ffcafa8 | RX handle: 0x3ffcb0ec
I (120720) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (120727) AUDIO:   Sample rate: 16000 Hz
I (120731) AUDIO:   MCLK: DISABLED
I (120735) AUDIO:   BCLK: GPIO14 (shared)
I (120740) AUDIO:   WS:   GPIO15 (shared)
I (120745) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (120752) AUDIO:  TX channel configured (took 1 ms)
I (120756) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (120763) AUDIO:   Sample rate: 16000 Hz
I (120768) AUDIO:   MCLK: DISABLED
I (120772) AUDIO:   BCLK: GPIO14 (shared)
I (120777) AUDIO:   WS:   GPIO15 (shared)
I (120781) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (120788) AUDIO:  RX channel configured (took 0 ms)
I (120793) AUDIO: [STEP 4/6] Enabling TX channel...
I (120799) AUDIO:  TX channel enabled (took 0 ms)
I (120804) AUDIO: [STEP 5/6] Enabling RX channel...
I (120810) AUDIO:  RX channel enabled (took 0 ms)
I (120815) AUDIO: [STEP 6/6] Hardware stabilization...
I (120821) AUDIO:   Phase 1: Initial settle (50ms)
I (120877) AUDIO:   Phase 2: DMA verification
I (120877) AUDIO:    DMA TX operational (128 bytes)
I (120878) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (121035) AUDIO: [DIAG] Post-init state:
I (121035) AUDIO:   Free heap: 4190076 bytes
I (121035) AUDIO:   Free internal RAM: 85187 bytes
I (121039) AUDIO:   Free DMA-capable: 66359 bytes
I (121045) AUDIO:   Free PSRAM: 4124088 bytes
I (121050) AUDIO:   Timestamp: 119502 ms
I (121054) AUDIO:   Total init time: 201 ms
I (121059) AUDIO: 
I (121077) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (121083) AUDIO:  Driver: i2s_std (NOT legacy!)
I (121089) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (121098) AUDIO:  This should eliminate LoadStoreError crashes!
I (121105) AUDIO: 
I (121123) AUDIO: 
I (121141) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (121147) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (121154) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (121161) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (121167) AUDIO: 
I (122553) AUDIO: 
I (122560) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (122568) AUDIO: 
I (122586) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (122593) AUDIO:  RX channel disabled (took 0 ms)
I (122599) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (122605) AUDIO:  TX channel disabled (took 0 ms)
I (122611) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (122668) AUDIO: [STEP 4/5] Deleting RX channel...
I (122669) AUDIO:  RX channel deleted (took 0 ms)
I (122669) AUDIO: [STEP 5/5] Deleting TX channel...
I (122674) AUDIO:  TX channel deleted (took 0 ms)
I (122680) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (122737) AUDIO: 
I (122744) AUDIO:   Modern I2S STD Driver Deinitialized
I (122751) AUDIO:  Camera Can Now Initialize
I (122756) AUDIO: 
E (122774) STATE_MGR: System in ERROR state (previous: VOICE_ACTIVE)
I (122781) LED_CTRL: LED pattern -> 5
I (122785) AUDIO: 
I (122803) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (122811) AUDIO: 
I (122829) AUDIO: 
I (122847) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (122854) AUDIO: 
I (122872) AUDIO: [DIAG] Pre-init state:
I (122877) AUDIO:   Free heap: 4216048 bytes
I (122882) AUDIO:   Free internal RAM: 111159 bytes
I (122887) AUDIO:   Free DMA-capable: 92331 bytes
I (122893) AUDIO:   Free PSRAM: 4124088 bytes
I (122898) AUDIO:   Timestamp: 121350 ms
I (122902) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (122909) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (122917) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (122926) AUDIO:   DMA frame num (per desc): 1020
I (122931) AUDIO:   DMA total samples (effective): 4080
I (122937) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (122944) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (122951) AUDIO:  I2S channels created (took 0 ms)
I (122956) AUDIO:   TX handle: 0x3ffcb274 | RX handle: 0x3ffcb068
I (122963) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (122970) AUDIO:   Sample rate: 16000 Hz
I (122974) AUDIO:   MCLK: DISABLED
I (122978) AUDIO:   BCLK: GPIO14 (shared)
I (122983) AUDIO:   WS:   GPIO15 (shared)
I (122988) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (122994) AUDIO:  TX channel configured (took 0 ms)
I (122999) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (123006) AUDIO:   Sample rate: 16000 Hz
I (123011) AUDIO:   MCLK: DISABLED
I (123015) AUDIO:   BCLK: GPIO14 (shared)
I (123020) AUDIO:   WS:   GPIO15 (shared)
I (123024) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (123030) AUDIO:  RX channel configured (took 0 ms)
I (123036) AUDIO: [STEP 4/6] Enabling TX channel...
I (123041) AUDIO:  TX channel enabled (took 0 ms)
I (123047) AUDIO: [STEP 5/6] Enabling RX channel...
I (123053) AUDIO:  RX channel enabled (took 0 ms)
I (123058) AUDIO: [STEP 6/6] Hardware stabilization...
I (123064) AUDIO:   Phase 1: Initial settle (50ms)
I (123120) AUDIO:   Phase 2: DMA verification
I (123120) AUDIO:    DMA TX operational (128 bytes)
I (123120) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (123278) AUDIO: [DIAG] Post-init state:
I (123278) AUDIO:   Free heap: 4190088 bytes
I (123278) AUDIO:   Free internal RAM: 85199 bytes
I (123282) AUDIO:   Free DMA-capable: 66371 bytes
I (123288) AUDIO:   Free PSRAM: 4124088 bytes
I (123293) AUDIO:   Timestamp: 121745 ms
I (123297) AUDIO:   Total init time: 200 ms
I (123302) AUDIO: 
I (123320) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (123326) AUDIO:  Driver: i2s_std (NOT legacy!)
I (123332) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (123341) AUDIO:  This should eliminate LoadStoreError crashes!
I (123348) AUDIO: 
I (123366) AUDIO: 
I (123384) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (123390) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (123397) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (123404) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (123410) AUDIO: 
I (124796) AUDIO: 
I (124803) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (124811) AUDIO: 
I (124829) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (124836) AUDIO:  RX channel disabled (took 0 ms)
I (124842) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (124848) AUDIO:  TX channel disabled (took 0 ms)
I (124854) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (124911) AUDIO: [STEP 4/5] Deleting RX channel...
I (124912) AUDIO:  RX channel deleted (took 0 ms)
I (124912) AUDIO: [STEP 5/5] Deleting TX channel...
I (124917) AUDIO:  TX channel deleted (took 0 ms)
I (124923) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (124980) AUDIO: 
I (124987) AUDIO:   Modern I2S STD Driver Deinitialized
I (124994) AUDIO:  Camera Can Now Initialize
I (124999) AUDIO: 
W (125017) STATE_MGR: Attempting recovery (attempt 1/3)...
I (125023) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (125029) STATE_MGR: Stopping voice mode components...
I (125035) STT: Stopping STT pipeline...
W (125040) STT: STT pipeline already stopped
I (125045) TTS: Stopping TTS decoder...
W (125049) TTS: TTS decoder not running
I (125153) STATE_MGR: Acquiring I2S mutex...
I (125153) STATE_MGR: Initializing camera...
I (125153) CAMERA: Initializing camera...
I (125157) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (125166) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (125175) cam_hal: cam init ok
W (125179) ledc: GPIO 0 is not usable, maybe conflict with others
I (125185) sccb-ng: pin_sda 26 pin_scl 27
I (125190) sccb-ng: sccb_i2c_port=1
I (125195) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
E (125237) camera: Detected camera not supported.
E (125237) camera: Camera probe failed with error 0x106(ESP_ERR_NOT_SUPPORTED)
E (125240) CAMERA: Camera init failed: ESP_ERR_NOT_SUPPORTED
E (125246) STATE_MGR: Failed to init camera: ESP_ERR_NOT_SUPPORTED
E (125252) STATE_MGR:  Recovery failed
I (126267) STATE_MGR: STT pipeline reported stop
E (126267) STATE_MGR: System in ERROR state (previous: VOICE_ACTIVE)
I (126269) AUDIO: 
I (126287) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (126294) AUDIO: 
I (126312) AUDIO: 
I (126330) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (126337) AUDIO: 
I (126355) AUDIO: [DIAG] Pre-init state:
I (126360) AUDIO:   Free heap: 4216048 bytes
I (126365) AUDIO:   Free internal RAM: 111159 bytes
I (126371) AUDIO:   Free DMA-capable: 92331 bytes
I (126376) AUDIO:   Free PSRAM: 4124088 bytes
I (126381) AUDIO:   Timestamp: 124834 ms
I (126386) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (126393) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (126401) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (126409) AUDIO:   DMA frame num (per desc): 1020
I (126414) AUDIO:   DMA total samples (effective): 4080
I (126420) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (126427) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (126434) AUDIO:  I2S channels created (took 0 ms)
I (126439) AUDIO:   TX handle: 0x3ffcb274 | RX handle: 0x3ffcb068
I (126446) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (126453) AUDIO:   Sample rate: 16000 Hz
I (126458) AUDIO:   MCLK: DISABLED
I (126462) AUDIO:   BCLK: GPIO14 (shared)
I (126466) AUDIO:   WS:   GPIO15 (shared)
I (126471) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (126478) AUDIO:  TX channel configured (took 1 ms)
I (126483) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (126489) AUDIO:   Sample rate: 16000 Hz
I (126494) AUDIO:   MCLK: DISABLED
I (126498) AUDIO:   BCLK: GPIO14 (shared)
I (126503) AUDIO:   WS:   GPIO15 (shared)
I (126508) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (126514) AUDIO:  RX channel configured (took 0 ms)
I (126519) AUDIO: [STEP 4/6] Enabling TX channel...
I (126524) AUDIO:  TX channel enabled (took 0 ms)
I (126530) AUDIO: [STEP 5/6] Enabling RX channel...
I (126536) AUDIO:  RX channel enabled (took 0 ms)
I (126542) AUDIO: [STEP 6/6] Hardware stabilization...
I (126547) AUDIO:   Phase 1: Initial settle (50ms)
I (126603) AUDIO:   Phase 2: DMA verification
I (126603) AUDIO:    DMA TX operational (128 bytes)
I (126604) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (126761) AUDIO: [DIAG] Post-init state:
I (126761) AUDIO:   Free heap: 4190108 bytes
I (126761) AUDIO:   Free internal RAM: 85219 bytes
I (126765) AUDIO:   Free DMA-capable: 66391 bytes
I (126771) AUDIO:   Free PSRAM: 4124088 bytes
I (126776) AUDIO:   Timestamp: 125228 ms
I (126780) AUDIO:   Total init time: 201 ms
I (126785) AUDIO: 
I (126803) AUDIO:   MODERN I2S STD FULL-DUPLEX READY
I (126809) AUDIO:  Driver: i2s_std (NOT legacy!)
I (126815) AUDIO:  Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (126824) AUDIO:  This should eliminate LoadStoreError crashes!
I (126831) AUDIO: 
I (126849) AUDIO: 
I (126867) AUDIO:   MODERN I2S STD DRIVER INITIALIZED
I (126873) AUDIO:  Mode: Full-duplex (separate TX + RX channels)
I (126880) AUDIO:  TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (126887) AUDIO:  Shared Clock: BCLK=GPIO14, WS=GPIO15
I (126893) AUDIO: 
I (128279) AUDIO: 
I (128286) AUDIO:  Deinitializing Modern I2S STD Driver for Camera Capture
I (128294) AUDIO: 
I (128312) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (128319) AUDIO:  RX channel disabled (took 0 ms)
I (128325) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (128331) AUDIO:  TX channel disabled (took 0 ms)
I (128337) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (128394) AUDIO: [STEP 4/5] Deleting RX channel...
I (128395) AUDIO:  RX channel deleted (took 0 ms)
I (128395) AUDIO: [STEP 5/5] Deleting TX channel...
I (128400) AUDIO:  TX channel deleted (took 0 ms)
I (128406) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (128463) AUDIO: 
I (128470) AUDIO:   Modern I2S STD Driver Deinitialized
I (128477) AUDIO:  Camera Can Now Initialize
I (128482) AUDIO: 
W (128500) STATE_MGR: Attempting recovery (attempt 2/3)...
I (128506) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (128512) STATE_MGR: Stopping voice mode components...
I (128518) STT: Stopping STT pipeline...
W (128523) STT: STT pipeline already stopped
I (128527) TTS: Stopping TTS decoder...
W (128532) TTS: TTS decoder not running
I (128636) STATE_MGR: Acquiring I2S mutex...
I (128636) STATE_MGR: Initializing camera...
I (128636) CAMERA: Initializing camera...
I (128640) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (128649) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (128658) cam_hal: cam init ok
W (128662) ledc: GPIO 0 is not usable, maybe conflict with others
I (128668) sccb-ng: pin_sda 26 pin_scl 27
I (128673) sccb-ng: sccb_i2c_port=1
I (128678) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
E (128720) camera: Detected camera not supported.
E (128720) camera: Camera probe failed with error 0x106(ESP_ERR_NOT_SUPPORTED)
E (128723) CAMERA: Camera init failed: ESP_ERR_NOT_SUPPORTED
E (128729) STATE_MGR: Failed to init camera: ESP_ERR_NOT_SUPPORTED
E (128735) STATE_MGR:  Recovery failed
I (129282) BUTTON: Button release detected - input primed
I (129750) STATE_MGR: TTS playback finished successfully
E (129751) STATE_MGR: System in ERROR state (previous: VOICE_ACTIVE)
I (129752) AUDIO: 
I (129770) AUDIO:  Initializing Modern I2S STD Driver (Full-Duplex)
I (129778) AUDIO: 
I (129796) AUDIO: 
I (129814) AUDIO:  Configuring Modern I2S STD Driver (Separate TX/RX)
I (129821) AUDIO: 
I (129839) AUDIO: [DIAG] Pre-init state:
I (129844) AUDIO:   Free heap: 4216068 bytes
I (129849) AUDIO:   Free internal RAM: 111179 bytes
I (129854) AUDIO:   Free DMA-capable: 92351 bytes
I (129860) AUDIO:   Free PSRAM: 4124088 bytes
I (129865) AUDIO:   Timestamp: 128317 ms
I (129869) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (129876) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (129884) AUDIO>~