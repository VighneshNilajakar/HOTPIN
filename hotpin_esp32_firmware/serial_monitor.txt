PS F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_firmware> idf.py monitor
Executing action: monitor
Serial port COM7
Connecting....
Detecting chip type... Unsupported detection protocol, switching and trying again...
Connecting...
Detecting chip type... ESP32
Running idf_monitor in directory 'F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_firmware'
Executing "C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe C:\Espressif\frameworks\esp-idf-v5.4.2\tools/idf_monitor.py -p COM7 -b 115200 --toolchain-prefix xtensa-esp32-elf- --target esp32 --revision 0 'F:\Documents\College\6th Semester\Project\ESP_Warp\hotpin_esp32_firmware\build\hotpin_esp32_firmware.elf' --force-color -m 'C:\Espressif\python_env\idf5.4_py3.11_env\Scripts\python.exe' 'C:\Espressif\frameworks\esp-idf-v5.4.2\tools\idf.py'"...
--- Warning: GDB cannot open serial ports accessed as COMx
--- Using \\.\COM7 instead...
--- esp-idf-monitor 1.7.0 on \\.\COM7 115200
--- Quit: Ctrl+] | Menu: Ctrl+T | Help: Ctrl+T followed by Ctrl+H
ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x3 (DOWNLOAD_BOOT(UART0/UART1/SDIO_REI_REO_V2))
waiting for download
ets Jul 29 2019 12:21:46

rst:0x1 (POWERON_RESET),boot:0x13 (SPI_FAST_FLASH_BOOT)
configsip: 0, SPIWP:0xee
clk_drv:0x00,q_drv:0x00,d_drv:0x00,cs0_drv:0x00,hd_drv:0x00,wp_drv:0x00
mode:DIO, clock div:2
load:0x3fff0030,len:6276
load:0x40078000,len:15736
load:0x40080400,len:4
--- 0x40080400: _init at ??:?
load:0x40080404,len:3860
entry 0x4008063c
I (29) boot: ESP-IDF v5.4.2-dirty 2nd stage bootloader
I (29) boot: compile time Oct 12 2025 10:50:26
I (29) boot: Multicore bootloader
I (31) boot: chip revision: v3.1
I (34) boot.esp32: SPI Speed      : 40MHz
I (38) boot.esp32: SPI Mode       : DIO
I (41) boot.esp32: SPI Flash Size : 2MB
I (45) boot: Enabling RNG early entropy source...
I (49) boot: Partition Table:
I (52) boot: ## Label            Usage          Type ST Offset   Length
I (58) boot:  0 nvs              WiFi data        01 02 00009000 00004000
I (65) boot:  1 otadata          OTA data         01 00 0000d000 00002000
I (71) boot:  2 phy_init         RF data          01 01 0000f000 00001000
I (78) boot:  3 factory          factory app      00 00 00010000 00180000
I (84) boot:  4 storage          Unknown data     01 81 00190000 00070000
I (91) boot: End of partition table
I (94) boot: Defaulting to factory image
I (98) esp_image: segment 0: paddr=00010020 vaddr=3f400020 size=375c4h (226756) map
I (183) esp_image: segment 1: paddr=000475ec vaddr=3ff80000 size=0001ch (    28) load
I (183) esp_image: segment 2: paddr=00047610 vaddr=3ffb0000 size=08a08h ( 35336) load
I (200) esp_image: segment 3: paddr=00050020 vaddr=400d0020 size=bcbd0h (773072) map
I (464) esp_image: segment 4: paddr=0010cbf8 vaddr=3ffb8a08 size=092bch ( 37564) load
I (478) esp_image: segment 5: paddr=00115ebc vaddr=40080000 size=1b394h (111508) load
I (538) boot: Loaded app from partition at offset 0x10000
I (538) boot: Disabling RNG early entropy source...
I (548) quad_psram: This chip is ESP32-D0WD
I (549) esp_psram: Found 4MB PSRAM device
I (549) esp_psram: Speed: 40MHz
I (552) esp_psram: PSRAM initialized, cache is in low/high (2-core) mode.
I (560) cpu_start: Multicore app
I (1454) esp_psram: SPI SRAM memory test OK
I (1462) cpu_start: Pro cpu start user code
I (1462) cpu_start: cpu freq: 240000000 Hz
I (1462) app_init: Application information:
I (1465) app_init: Project name:     hotpin_esp32_firmware
I (1471) app_init: App version:      4fea7d8-dirty
I (1477) app_init: Compile time:     Oct 12 2025 10:50:06
I (1483) app_init: ELF file SHA256:  9c0af80bc...
I (1488) app_init: ESP-IDF:          v5.4.2-dirty
I (1494) efuse_init: Min chip rev:     v0.0
I (1498) efuse_init: Max chip rev:     v3.99
I (1503) efuse_init: Chip rev:         v3.1
I (1509) heap_init: Initializing. RAM available for dynamic allocation:
I (1516) heap_init: At 3FFAE6E0 len 00001920 (6 KiB): DRAM
I (1522) heap_init: At 3FFC9320 len 00016CE0 (91 KiB): DRAM
I (1528) heap_init: At 3FFE0440 len 00003AE0 (14 KiB): D/IRAM
I (1534) heap_init: At 3FFE4350 len 0001BCB0 (111 KiB): D/IRAM
I (1541) heap_init: At 4009B394 len 00004C6C (19 KiB): IRAM
I (1548) esp_psram: Adding pool of 4096K of PSRAM memory to heap allocator
I (1556) spi_flash: detected chip: generic
I (1560) spi_flash: flash io: dio
W (1564) spi_flash: Detected size(4096k) larger than the size in the binary image header(2048k). Using the size in the binary image header.
I (1578) main_task: Started on CPU0
I (1581) esp_psram: Reserving pool of 32K of internal memory for DMA/internal allocations
I (1590) main_task: Calling app_main()
I (1594) HOTPIN_MAIN: ====================================
I (1600) HOTPIN_MAIN: HotPin ESP32-CAM AI Agent Starting
I (1606) HOTPIN_MAIN: ====================================
W (1612) HOTPIN_MAIN: Brownout detector disabled
I (1617) HOTPIN_MAIN: Validating PSRAM...
I (1622) HOTPIN_MAIN: PSRAM detected: 4194304 bytes (4.00 MB)
I (1629) HOTPIN_MAIN: PSRAM validation passed
I (1634) HOTPIN_MAIN: ====================================
I (1640) HOTPIN_MAIN: System Information:
I (1644) HOTPIN_MAIN: Chip: esp32
I (1648) HOTPIN_MAIN: Cores: 2
I (1652) HOTPIN_MAIN: Silicon revision: 301
I (1657) HOTPIN_MAIN: CPU Frequency: 240 MHz
I (1662) HOTPIN_MAIN: Flash: 2 MB external
I (1667) HOTPIN_MAIN: Free heap: 4365196 bytes
I (1672) HOTPIN_MAIN: PSRAM: 4194304 bytes
I (1677) HOTPIN_MAIN: ====================================
I (1683) HOTPIN_MAIN: Initializing NVS...
I (1712) HOTPIN_MAIN: NVS initialized successfully
I (1713) event_dispatcher: System event queue ready (16 entries)
I (1713) HOTPIN_MAIN: Synchronization primitives created
I (1719) HOTPIN_MAIN: Initializing WiFi...
I (1728) wifi:wifi driver task: 3ffd9f18, prio:23, stack:6656, core=0
I (1741) wifi:wifi firmware version: bea31f3
I (1741) wifi:wifi certification version: v7.0
I (1741) wifi:config NVS flash: enabled
I (1742) wifi:config nano formatting: disabled
I (1746) wifi:Init data frame dynamic rx buffer num: 32
I (1751) wifi:Init static rx mgmt buffer num: 5
I (1755) wifi:Init management short buffer num: 32
I (1760) wifi:Init dynamic tx buffer num: 32
I (1764) wifi:Init static rx buffer size: 1600
I (1768) wifi:Init static rx buffer num: 16
I (1772) wifi:Init dynamic rx buffer num: 32
I (1777) wifi_init: rx ba win: 6
I (1780) wifi_init: accept mbox: 6
I (1784) wifi_init: tcpip mbox: 32
I (1788) wifi_init: udp mbox: 6
I (1792) wifi_init: tcp mbox: 6
I (1796) wifi_init: tcp tx win: 5760
I (1800) wifi_init: tcp rx win: 5760
I (1804) wifi_init: tcp mss: 1440
I (1808) wifi_init: WiFi IRAM OP enabled
I (1813) wifi_init: WiFi RX IRAM OP enabled
I (1819) phy_init: phy_version 4860,6b7a6e5,Feb  6 2025,14:47:07
I (1888) wifi:mode : sta (80:f3:da:99:8c:64)
I (1889) wifi:enable tsf
I (1891) HOTPIN_MAIN: WiFi initialization complete, connecting to wifi...
I (1892) HOTPIN_MAIN: Waiting for WiFi connection...
I (1892) HOTPIN_MAIN: WiFi station started, connecting...
I (1915) wifi:new:<6,0>, old:<1,0>, ap:<255,255>, sta:<6,0>, prof:1, snd_ch_cfg:0x0
I (1917) wifi:state: init -> auth (0xb0)
I (1926) wifi:state: auth -> assoc (0x0)
I (1939) wifi:state: assoc -> run (0x10)
I (1958) wifi:connected with wifi, aid = 16, channel 6, BW20, bssid = 2a:2f:0f:5c:80:a1
I (1959) wifi:security: WPA2-PSK, phy: bgn, rssi: -73
I (1963) wifi:pm start, type: 1

I (1963) wifi:dp: 1, bi: 102400, li: 3, scale listen interval from 307200 us to 307200 us
I (1973) wifi:dp: 2, bi: 102400, li: 4, scale listen interval from 307200 us to 409600 us
I (1979) wifi:AP's beacon interval = 102400 us, DTIM period = 2
I (1987) HOTPIN_MAIN: WiFi connected to AP
I (3012) esp_netif_handlers: sta ip: 172.24.158.214, mask: 255.255.255.0, gw: 172.24.158.191
I (3013) HOTPIN_MAIN: âœ… Got IP address: 172.24.158.214
I (3017) HOTPIN_MAIN: WiFi ready - WebSocket connection task will handle server connection
I (6906) HOTPIN_MAIN: Initializing button handler...
I (6906) BUTTON: Initializing button handler on GPIO 4
I (6907) gpio: GPIO[4]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:3
I (6916) BUTTON: Button FSM task started
W (6921) BUTTON: Button input low at init - waiting for release before enabling detection
I (6929) BUTTON: Button handler initialized successfully (initial level=0, primed=0)
I (6937) HOTPIN_MAIN: InI (6951) SERIAL_CMD: Serial command task started on Core 0

========================================
  HotPin Serial Command Interface
========================================
Commands:
  s - Toggle voice recording (start/stop)
  c - Capture image
  l - Long press (shutdown simulation)
  d - Toggle debug mode
  h - Show this help
========================================

I (6975) SERIAL_CMD: âœ… Serial command interface initialized
I (6981) HOTPIN_MAIN: Initializing LED controller...
I (6987) LED_CTRL: Initializing LED controller on GPIO 33
I (6994) LED_CTRL: LED controller ready
I (6998) LED_CTRL: LED pattern -> 2
I (7002) HOTPIN_MAIN: Initializing WebSocket client...
I (7007) WEBSOCKET: Initializing WebSocket client...
I (7013) WEBSOCKET: Server URI: ws://172.24.158.58:8000/ws
I (7020) WEBSOCKET: Authorization header configured
I (7026) WEBSOCKET: âœ… WebSocket client initialized
I (7030) WEBSOCKET: Status callback registered
I (7036) HOTPIN_MAIN: WebSocket status callback registered
I (7042) HOTPIN_MAIN: Initializing HTTP client...
I (7047) HTTP_CLIENT: Initializing HTTP client
I (7052) HTTP_CLIENT: Authorization token configured
I (7058) HTTP_CLIENT: HTTP client initialized (server: http://172.24.158.58:8000)
I (7066) HOTPIN_MAIN: Initializing STT pipeline...
I (7072) STT: Initializing STT pipeline...
I (7076) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7095) STT: â•‘ STT Ring Buffer Allocation (PSRAM)
I (7100) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7118) STT: [MEMORY] Pre-allocation state:
I (7123) STT:   Free internal RAM: 145523 bytes
I (7129) STT:   Free DMA-capable: 126695 bytes
I (7134) STT:   Free PSRAM: 4189764 bytes
I (7138) STT: [ALLOCATION] Allocating 64 KB ring buffer in external PSRAM...
I (7146) STT:   âœ“ Ring buffer allocated at 0x3f8011c0 (PSRAM address)
I (7153) STT:   âœ“ Confirmed: Buffer is in PSRAM address range (0x3F800000-0x3FC00000)
I (7162) STT: [MEMORY] Post-allocation state:
I (7167) STT:   Free internal RAM: 145523 bytes
I (7172) STT:   Free DMA-capable: 126695 bytes
I (7177) STT:   Free PSRAM: 4124224 bytes
I (7189) STT: [CORE AFFINITY] Creating persistent audio streaming task on Core 0
I (7190) STT: Persistent audio streaming task started on Core 0
I (7198) STT:   âœ“ Stream buffer allocated at 0x3ffd3904
I (7203) STT: âœ… STT pipeline initialized
I (7208) HOTPIN_MAIN: Initializing TTS decoder...
I (7213) TTS: Initializing TTS decoder...
I (7218) WEBSOCKET: Audio callback registered
I (7223) TTS: âœ… TTS decoder initialized
I (7227) HOTPIN_MAIN: Camera and audio initialization deferred to state manager
I (7235) HOTPIN_MAIN: Creating FreeRTOS tasks...
I (7241) HOTPIN_MAIN: State manager task created on Core 1
I (7241) STATE_MGR: State manager task started on Core 1
I (7247) HOTPIN_MAIN: WebSocket connection task started on Core 0
I (7253) STATE_MGR: Priority: 10
I (7260) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 1)...
I (7264) STATE_MGR: Starting in camera mode...
I (7271) WEBSOCKET: Connecting to WebSocket server...
I (7276) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (7288) STATE_MGR: Acquiring I2S mutex...
I (7289) websocket_client: Started
I (7292) STATE_MGR: Initializing camera...
I (7296) WEBSOCKET: WebSocket client started
I (7301) CAMERA: Initializing camera...
I (7247) HOTPIN_MAIN: WebSocket connection task created on Core 0
I (7311) CAMERA: GPIO ISR service already active (shared)
I (7317) HOTPIN_MAIN: Initializing task watchdog (30s timeout)...
I (7324) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
I (7331) HOTPIN_MAIN: State manager task added to watchdog
E (7340) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (7346) HOTPIN_MAIN: ====================================
I (7354) cam_hal: cam init ok
I (7360) HOTPIN_MAIN: System initialization complete!
I (7364) sccb-ng: pin_sda 26 pin_scl 27
I (7369) HOTPIN_MAIN: Entering camera standby mode...
I (7374) sccb-ng: sccb_i2c_port=1
I (7380) HOTPIN_MAIN: ====================================
I (7385) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (7433) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (7433) camera: Detected OV2640 camera
I (7433) camera: Detected camera at address=0x30
I (7513) cam_hal: PSRAM DMA mode disabled
I (7514) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (7518) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (7524) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (7531) cam_hal: cam config ok
I (7535) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (7620) CAMERA: Camera initialized successfully
I (7620) STATE_MGR: I2S mutex released
I (7620) STATE_MGR: âœ… Camera mode transition complete
I (7620) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7625) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (7643) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (7648) LED_CTRL: LED pattern -> 3
I (7655) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7677) AUDIO: [MUTEX] Creating I2S access mutex for thread safety...
I (7685) AUDIO:   âœ“ I2S access mutex created successfully
I (7691) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7709) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (7716) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (7734) AUDIO: [DIAG] Pre-init state:
I (7738) AUDIO:   Free heap: 4050288 bytes
I (7743) AUDIO:   Free internal RAM: 69351 bytes
I (7748) AUDIO:   Free DMA-capable: 50523 bytes
I (7753) AUDIO:   Free PSRAM: 3999772 bytes
I (7758) AUDIO:   Timestamp: 6211 ms
I (7763) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (7769) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (7777) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (7785) AUDIO:   DMA frame num (per desc): 1020
I (7791) AUDIO:   DMA total samples (effective): 4080
I (7796) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (7803) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (7812) AUDIO: âœ… I2S channels created (took 0 ms)
I (7816) AUDIO:   TX handle: 0x3ffe3bac | RX handle: 0x3ffe3cf8
I (7822) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (7828) AUDIO:   Sample rate: 16000 Hz
I (7833) AUDIO:   MCLK: DISABLED
I (7836) AUDIO:   BCLK: GPIO14 (shared)
I (7841) AUDIO:   WS:   GPIO15 (shared)
I (7817) wifi:I (7845) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
<ba-add>idx:0 (ifx:0, 2a:2f:0f:5c:80:a1), tid:0, ssn:3, winSize:64
I (7856) AUDIO: âœ… TX channel configured (took 3 ms)
I (7864) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (7871) AUDIO:   Sample rate: 16000 Hz
I (7875) AUDIO:   MCLK: DISABLED
I (7879) AUDIO:   BCLK: GPIO14 (shared)
I (7884) AUDIO:   WS:   GPIO15 (shared)
I (7888) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (7894) AUDIO: âœ… RX channel configured (took 0 ms)
I (7899) AUDIO: [STEP 4/6] Enabling TX channel...
I (7905) AUDIO: âœ… TX channel enabled (took 0 ms)
I (7910) AUDIO: [STEP 5/6] Enabling RX channel...
I (7916) AUDIO: âœ… RX channel enabled (took 0 ms)
I (7921) AUDIO: [STEP 6/6] Hardware stabilization...
I (7927) AUDIO:   Phase 1: Initial settle (50ms)
I (7936) WEBSOCKET: âœ… WebSocket connected to server
I (7938) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (7950) WEBSOCKET: Handshake sent successfully
I (7950) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (7950) STATE_MGR: WebSocket connected
I (7982) AUDIO:   Phase 2: DMA verification
I (7982) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (7982) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (8014) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (8015) WEBSOCKET: Server status: connected
I (8133) HOTPIN_MAIN: ğŸ‰ WebSocket connected and verified!
I (8133) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - entering monitor loop
I (8139) AUDIO: [DIAG] Post-init state:
I (8141) AUDIO:   Free heap: 4024092 bytes
I (8145) AUDIO:   Free internal RAM: 43155 bytes
I (8151) AUDIO:   Free DMA-capable: 24327 bytes
I (8156) AUDIO:   Free PSRAM: 3999772 bytes
I (8161) AUDIO:   Timestamp: 6613 ms
I (8165) AUDIO:   Total init time: 203 ms
I (8170) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8187) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (8193) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (8199) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (8207) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (8214) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8232) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (8250) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (8256) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (8263) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (8270) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (8276) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9551) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9558) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (9565) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9583) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (9590) AUDIO: âœ… RX channel disabled (took 0 ms)
I (9595) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (9602) AUDIO: âœ… TX channel disabled (took 0 ms)
I (9607) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (9664) AUDIO: [STEP 4/5] Deleting RX channel...
I (9664) AUDIO: âœ… RX channel deleted (took 0 ms)
I (9664) AUDIO: [STEP 5/5] Deleting TX channel...
I (9669) AUDIO: âœ… TX channel deleted (took 0 ms)
I (9674) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (9732) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9738) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (9745) AUDIO: â•‘ Camera Can Now Initialize
I (9750) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (9768) HOTPIN_MAIN: Main task exiting - system running
I (9774) main_task: Returned from app_main()
ğŸ“¢ Voice mode STARTED (recording...)
I (12568) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (12568) SERIAL_CMD: Simulated SHORT PRESS - Voice START
I (12568) STATE_MGR: Single click - mode toggle requested
I (12579) STATE_MGR: Switching: Camera â†’ Voice (count: 1)
I (12586) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (12591) STATE_MGR: Stopping camera...
I (12596) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (12612) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (12619) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (12635) STATE_MGR:   Timeout: 5000 ms
I (12640) STATE_MGR:   Timestamp: 11092 ms
I (12645) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (12650) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (12667) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (12673) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (12689) STATE_MGR:   Free heap before: 4054892 bytes
I (12695) STATE_MGR:   Free PSRAM before: 3999772 bytes
I (12701) CAMERA: Deinitializing camera...
I (12707) CAMERA: Camera deinitialized
I (12710) STATE_MGR:   âœ“ Camera deinitialized (took 9 ms)
I (12717) STATE_MGR:   Free heap after: 4217296 bytes
I (12722) STATE_MGR:   Free PSRAM after: 4124088 bytes
I (12728) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (12744) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (12750) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (12767) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (12875) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (12975) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (13025) STATE_MGR:   âœ“ Total stabilization: 250ms
I (13025) STATE_MGR:   Timestamp: 11478 ms
I (13025) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13041) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (13048) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13064) STATE_MGR:   Free heap before: 4217296 bytes
I (13070) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13088) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (13095) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13113) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13131) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (13138) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13156) AUDIO: [DIAG] Pre-init state:
I (13160) AUDIO:   Free heap: 4217296 bytes
I (13165) AUDIO:   Free internal RAM: 112043 bytes
I (13171) AUDIO:   Free DMA-capable: 93215 bytes
I (13176) AUDIO:   Free PSRAM: 4124088 bytes
I (13181) AUDIO:   Timestamp: 11634 ms
I (13185) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (13192) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (13200) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (13208) AUDIO:   DMA frame num (per desc): 1020
I (13214) AUDIO:   DMA total samples (effective): 4080
I (13220) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (13227) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (13233) AUDIO: âœ… I2S channels created (took 0 ms)
I (13238) AUDIO:   TX handle: 0x3ffafc3c | RX handle: 0x3ffca690
I (13245) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (13252) AUDIO:   Sample rate: 16000 Hz
I (13256) AUDIO:   MCLK: DISABLED
I (13260) AUDIO:   BCLK: GPIO14 (shared)
I (13265) AUDIO:   WS:   GPIO15 (shared)
I (13270) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (13276) AUDIO: âœ… TX channel configured (took 1 ms)
I (13281) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (13288) AUDIO:   Sample rate: 16000 Hz
I (13292) AUDIO:   MCLK: DISABLED
I (13296) AUDIO:   BCLK: GPIO14 (shared)
I (13301) AUDIO:   WS:   GPIO15 (shared)
I (13306) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (13312) AUDIO: âœ… RX channel configured (took 0 ms)
I (13317) AUDIO: [STEP 4/6] Enabling TX channel...
I (13323) AUDIO: âœ… TX channel enabled (took 0 ms)
I (13328) AUDIO: [STEP 5/6] Enabling RX channel...
I (13334) AUDIO: âœ… RX channel enabled (took 0 ms)
I (13339) AUDIO: [STEP 6/6] Hardware stabilization...
I (13345) AUDIO:   Phase 1: Initial settle (50ms)
I (13400) AUDIO:   Phase 2: DMA verification
I (13400) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (13401) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (13558) AUDIO: [DIAG] Post-init state:
I (13558) AUDIO:   Free heap: 4191320 bytes
I (13559) AUDIO:   Free internal RAM: 86067 bytes
I (13562) AUDIO:   Free DMA-capable: 67239 bytes
I (13567) AUDIO:   Free PSRAM: 4124088 bytes
I (13572) AUDIO:   Timestamp: 12025 ms
I (13577) AUDIO:   Total init time: 201 ms
I (13581) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13599) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (13606) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (13611) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (13620) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (13626) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13644) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13662) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (13669) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (13675) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (13682) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (13688) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13706) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (13712) STATE_MGR:   Free heap after: 4191320 bytes
I (13718) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13734) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (13740) STATE_MGR: â•‘ Total transition time: 895 ms
I (13746) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13762) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13778) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (13785) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13801) STT: Starting STT pipeline...
I (13805) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (13815) STT: âœ… STT pipeline started
I (13814) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13819) TTS: Starting TTS decoder...
I (13815) STT: Audio streaming session activated
I (13840) TTS: Initializing TTS decoder...
I (13835) STT: â•‘ Audio Capture Task Started on Core 0
W (13850) TTS: TTS decoder already initialized
I (13845) STT: Starting audio streaming to server...
I (13861) TTS: [CORE AFFINITY] Creating TTS playback task on Core 0 (co-located with Wi-Fi and STT)
I (13856) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (13876) TTS: âœ… TTS decoder started
I (13892) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (13904) STT:   Current time: 12356 ms
I (13908) STT:   Free heap: 4182408 bytes
I (13892) TTS: TTS playback task started on Core 0
I (14113) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (14113) STT:   âœ“ Audio driver initialized
I (14114) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (14172) LED_CTRL: LED pattern -> 1
I (14173) STATE_MGR: âœ… Voice mode transition complete
I (14173) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (14187) STATE_MGR: STT pipeline reported start
I (14198) STATE_MGR: TTS playback start event received
I (14221) STT:   Total stabilization: 300ms
I (14221) STT:   Timestamp: 12674 ms
I (14221) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (14225) STT:   âœ“ DMA-capable buffer allocated at 0x3ffff9f4
I (14232) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14248) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (14253) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (14260) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (14276) STT: [FIRST READ] Completed:
I (14280) STT:   Result: ESP_OK
I (14284) STT:   Bytes read: 1024 / 1024
I (14289) STT:   Duration: 0 ms
I (14292) STT:   Timestamp: 12729 ms
I (14298) STT:   First 16 bytes: e4 fe e4 fe 14 ff 14 ff 34 ff 34 ff 60 ff 60 ff
I (14418) STT: [CAPTURE] Read #10: 1024 bytes (total: 10240 bytes, 10.0 KB)
I (14419) STT:   Avg read time: 63 ms | Errors: 0
I (14736) STT: [CAPTURE] Read #20: 1024 bytes (total: 20480 bytes, 20.0 KB)
I (14737) STT:   Avg read time: 63 ms | Errors: 0
I (15055) STT: [CAPTURE] Read #30: 1024 bytes (total: 30720 bytes, 30.0 KB)
I (15056) STT:   Avg read time: 63 ms | Errors: 0
I (15374) STT: [CAPTURE] Read #40: 1024 bytes (total: 40960 bytes, 40.0 KB)
I (15375) STT:   Avg read time: 63 ms | Errors: 0
I (15693) STT: [CAPTURE] Read #50: 1024 bytes (total: 51200 bytes, 50.0 KB)
I (15694) STT:   Avg read time: 63 ms | Errors: 0
I (16011) STT: [CAPTURE] Read #60: 1024 bytes (total: 61440 bytes, 60.0 KB)
I (16013) STT:   Avg read time: 63 ms | Errors: 0
I (16330) STT: [CAPTURE] Read #70: 1024 bytes (total: 71680 bytes, 70.0 KB)
I (16331) STT:   Avg read time: 63 ms | Errors: 0
I (16649) STT: [CAPTURE] Read #80: 1024 bytes (total: 81920 bytes, 80.0 KB)
I (16650) STT:   Avg read time: 63 ms | Errors: 0
ğŸ”‡ Voice mode STOPPED
I (16698) STATE_MGR: Button event received: 1 in state VOICE_ACTIVE
I (16698) SERIAL_CMD: Simulated SHORT PRESS - Voice STOP
W (16698) STATE_MGR: Guardrail soft override: stopping voice pipeline while busy
I (16710) STATE_MGR: Single click - mode toggle requested
I (16716) STATE_MGR: Switching: Voice â†’ Camera (count: 2)
I (16722) STATE_MGR: === TRANSITION TO CAMERA MODE ===
I (16728) STATE_MGR: Stopping voice mode components...
I (16734) STT: Stopping STT pipeline...
I (16770) STT: Streaming task received stop signal
I (16770) STT: Sending EOS signal...
I (16770) WEBSOCKET: Sending EOS signal
I (16776) STT: Audio streaming session complete (streamed 81920 bytes in 20 chunks)
I (16778) STT: Audio capture task stopped (captured 86016 bytes total)
I (16799) STT: STT pipeline stopped
I (16835) WEBSOCKET: Received text message: {"status": "processing", "stage": "transcription"}
I (16836) WEBSOCKET: Server status: processing
I (16839) WEBSOCKET: Server stage: transcription
I (16844) WEBSOCKET: Pipeline stage changed: idle -> transcription
I (17647) WEBSOCKET: Received text message: {"status": "processing", "stage": "llm", "transcript": "hello"}
I (17647) WEBSOCKET: Server status: processing
I (17651) WEBSOCKET: Server stage: llm
I (17656) WEBSOCKET: Pipeline stage changed: transcription -> llm
I (18055) WEBSOCKET: Received text message: {"status": "processing", "stage": "tts", "response": "Hello! How can I help you today?"}
I (18057) WEBSOCKET: Server status: processing
I (18062) WEBSOCKET: Server stage: tts
I (18067) WEBSOCKET: Pipeline stage changed: llm -> tts
I (18299) WEBSOCKET: Received binary audio data: 4096 bytes
I (18301) TTS: âœ… WAV header parsed successfully
I (18301) TTS: === WAV File Info ===
I (18305) TTS: Sample Rate: 16000 Hz
I (18309) TTS: Channels: 1
I (18317) TTS: Bits per Sample: 16
I (18317) TTS: Audio Format: 1 (PCM)
I (18317) WEBSOCKET: Received binary audio data: 4096 bytes
I (18325) TTS: Declared Data Size: 111524 bytes
I (18331) WEBSOCKET: Received binary audio data: 4096 bytes
I (18341) TTS: Block Align: 2
I (18342) TTS: Byte Rate: 32000
I (18343) WEBSOCKET: Received binary audio data: 4096 bytes
I (18356) TTS: ====================
I (18357) WEBSOCKET: Received binary audio data: 4096 bytes
I (18368) WEBSOCKET: Received binary audio data: 4096 bytes
I (18372) WEBSOCKET: Received binary audio data: 1096 bytes
I (18379) WEBSOCKET: Received binary audio data: 3000 bytes
I (18386) WEBSOCKET: Received binary audio data: 4096 bytes
I (18392) WEBSOCKET: Received binary audio data: 1536 bytes
I (18396) TTS: ğŸ”” Playback start feedback dispatched (bytes_received=34304)
I (18404) TTS: [PCM DUP] Scratch buffer ready: 8192 bytes (2048 samples per block)
I (18405) WEBSOCKET: Received binary audio data: 2560 bytes
I (18421) WEBSOCKET: Received binary audio data: 4096 bytes
I (18426) WEBSOCKET: Received binary audio data: 536 bytes
I (18551) WEBSOCKET: Received binary audio data: 3560 bytes
I (18680) WEBSOCKET: Received binary audio data: 4096 bytes
I (18807) WEBSOCKET: Received binary audio data: 976 bytes
I (18933) WEBSOCKET: Received binary audio data: 3120 bytes
I (19063) WEBSOCKET: Received binary audio data: 4096 bytes
I (19127) WEBSOCKET: Received binary audio data: 4096 bytes
I (19190) WEBSOCKET: Received binary audio data: 4096 bytes
I (19318) WEBSOCKET: Received binary audio data: 4096 bytes
I (19381) WEBSOCKET: Received binary audio data: 4096 bytes
I (19446) WEBSOCKET: Received binary audio data: 4096 bytes
W (19446) TTS: DMA-capable alloc failed, attempting fallback for 4096-byte chunk
E (19449) TTS: Failed to allocate memory for audio chunk (4096 bytes)
I (19461) WEBSOCKET: Received binary audio data: 4096 bytes
I (19573) WEBSOCKET: Received binary audio data: 4096 bytes
I (19637) WEBSOCKET: Received binary audio data: 4096 bytes
W (19637) TTS: DMA-capable alloc failed, attempting fallback for 4096-byte chunk
E (19640) TTS: Failed to allocate memory for audio chunk (4096 bytes)
I (19653) WEBSOCKET: Received binary audio data: 4096 bytes
W (19654) TTS: DMA-capable alloc failed, attempting fallback for 4096-byte chunk
E (19662) TTS: Failed to allocate memory for audio chunk (4096 bytes)
I (19673) WEBSOCKET: Received binary audio data: 4096 bytes
W (19675) TTS: DMA-capable alloc failed, attempting fallback for 4096-byte chunk
E (19683) TTS: Failed to allocate memory for audio chunk (4096 bytes)
I (19694) WEBSOCKET: Received binary audio data: 4096 bytes
I (19700) WEBSOCKET: Received binary audio data: 956 bytes
I (19826) WEBSOCKET: Received binary audio data: 3140 bytes
I (19891) WEBSOCKET: Received binary audio data: 4096 bytes
W (19892) TTS: DMA-capable alloc failed, attempting fallback for 4096-byte chunk
E (19895) TTS: Failed to allocate memory for audio chunk (4096 bytes)
I (19905) WEBSOCKET: Received binary audio data: 976 bytes
I (19954) WEBSOCKET: Received text message: {"status": "complete"}
I (19955) WEBSOCKET: Server status: complete
I (19955) WEBSOCKET: Pipeline stage changed: tts -> complete
I (20000) STATE_MGR: Voice pipeline reported COMPLETE
I (20000) STATE_MGR: Waiting for TTS playback drain (~37884 bytes pending, timeout 5000 ms)
W (25004) STATE_MGR: TTS playback drain timed out; proceeding with shutdown
I (25004) TTS: Stopping TTS decoder...
I (25005) TTS: Playback stop signal received
I (25101) TTS: ğŸ”” Playback completion feedback dispatched (total bytes: 91044)
I (25101) TTS: TTS playback task stopped
I (25105) TTS: TTS decoder stopped (played 91044 bytes)
I (25208) STATE_MGR: Acquiring I2S mutex...
I (25208) STATE_MGR: Deinitializing audio drivers...
I (25208) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25226) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (25233) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25251) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (25258) AUDIO: âœ… RX channel disabled (took 0 ms)
I (25264) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (25270) AUDIO: âœ… TX channel disabled (took 0 ms)
I (25276) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (25332) AUDIO: [STEP 4/5] Deleting RX channel...
I (25333) AUDIO: âœ… RX channel deleted (took 0 ms)
I (25333) AUDIO: [STEP 5/5] Deleting TX channel...
I (25338) AUDIO: âœ… TX channel deleted (took 0 ms)
I (25343) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (25401) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25408) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (25415) AUDIO: â•‘ Camera Can Now Initialize
I (25420) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25438) STATE_MGR: Initializing camera...
I (25442) CAMERA: Initializing camera...
I (25447) gpio: GPIO[25]| InputEn: 1| OutputEn: 0| OpenDrain: 0| Pullup: 1| Pulldown: 0| Intr:2
E (25457) gpio: gpio_install_isr_service(503): GPIO isr service already installed
I (25465) cam_hal: cam init ok
W (25469) ledc: GPIO 0 is not usable, maybe conflict with others
I (25475) sccb-ng: pin_sda 26 pin_scl 27
I (25480) sccb-ng: sccb_i2c_port=1
I (25485) gpio: GPIO[32]| InputEn: 0| OutputEn: 1| OpenDrain: 0| Pullup: 0| Pulldown: 0| Intr:0
I (25527) camera: Camera PID=0x26 VER=0x42 MIDL=0x7f MIDH=0xa2
I (25527) camera: Detected OV2640 camera
I (25527) camera: Detected camera at address=0x30
I (25607) cam_hal: PSRAM DMA mode disabled
I (25608) cam_hal: buffer_size: 32768, half_buffer_size: 4096, node_buffer_size: 2048, node_cnt: 16, total_cnt: 15
I (25612) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (25619) cam_hal: Allocating 61440 Byte frame buffer in PSRAM
I (25626) cam_hal: cam config ok
I (25629) ov2640: Set PLL: clk_2x: 0, clk_div: 0, pclk_auto: 0, pclk_div: 8
I (25711) CAMERA: Camera initialized successfully
I (25711) STATE_MGR: I2S mutex released
I (25711) STATE_MGR: âœ… Camera mode transition complete
I (25716) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25734) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (25741) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25759) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25777) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (25784) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (25802) AUDIO: [DIAG] Pre-init state:
I (25807) AUDIO:   Free heap: 4046544 bytes
I (25812) AUDIO:   Free internal RAM: 65607 bytes
I (25817) AUDIO:   Free DMA-capable: 46779 bytes
I (25822) AUDIO:   Free PSRAM: 3999772 bytes
I (25827) AUDIO:   Timestamp: 24280 ms
I (25832) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (25838) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (25846) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (25855) AUDIO:   DMA frame num (per desc): 1020
I (25860) AUDIO:   DMA total samples (effective): 4080
I (25866) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (25873) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (25879) AUDIO: âœ… I2S channels created (took 0 ms)
I (25885) AUDIO:   TX handle: 0x3ffcb5bc | RX handle: 0x3ffca914
I (25891) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (25898) AUDIO:   Sample rate: 16000 Hz
I (25903) AUDIO:   MCLK: DISABLED
I (25907) AUDIO:   BCLK: GPIO14 (shared)
I (25911) AUDIO:   WS:   GPIO15 (shared)
I (25916) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (25922) AUDIO: âœ… TX channel configured (took 1 ms)
I (25927) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (25934) AUDIO:   Sample rate: 16000 Hz
I (25939) AUDIO:   MCLK: DISABLED
I (25943) AUDIO:   BCLK: GPIO14 (shared)
I (25947) AUDIO:   WS:   GPIO15 (shared)
I (25952) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (25958) AUDIO: âœ… RX channel configured (took 0 ms)
I (25963) AUDIO: [STEP 4/6] Enabling TX channel...
I (25969) AUDIO: âœ… TX channel enabled (took 0 ms)
I (25974) AUDIO: [STEP 5/6] Enabling RX channel...
I (25980) AUDIO: âœ… RX channel enabled (took 0 ms)
I (25985) AUDIO: [STEP 6/6] Hardware stabilization...
I (25991) AUDIO:   Phase 1: Initial settle (50ms)
I (26046) AUDIO:   Phase 2: DMA verification
I (26046) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (26047) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (26204) AUDIO: [DIAG] Post-init state:
I (26204) AUDIO:   Free heap: 4020564 bytes
I (26204) AUDIO:   Free internal RAM: 39627 bytes
I (26208) AUDIO:   Free DMA-capable: 20799 bytes
I (26213) AUDIO:   Free PSRAM: 3999772 bytes
I (26218) AUDIO:   Timestamp: 24671 ms
I (26222) AUDIO:   Total init time: 201 ms
I (26227) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26245) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (26251) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (26257) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (26265) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (26272) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26290) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26308) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (26314) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (26321) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (26328) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (26334) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26635) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26642) AUDIO: â•‘ Deinitializing Modern I2S STD Driver for Camera Capture
I (26650) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26668) AUDIO: [STEP 1/5] Disabling RX (microphone) channel...
I (26675) AUDIO: âœ… RX channel disabled (took 0 ms)
I (26680) AUDIO: [STEP 2/5] Disabling TX (speaker) channel...
I (26687) AUDIO: âœ… TX channel disabled (took 0 ms)
I (26692) AUDIO: [STEP 3/5] Waiting for DMA completion (50ms)...
I (26749) AUDIO: [STEP 4/5] Deleting RX channel...
I (26750) AUDIO: âœ… RX channel deleted (took 0 ms)
I (26750) AUDIO: [STEP 5/5] Deleting TX channel...
I (26755) AUDIO: âœ… TX channel deleted (took 0 ms)
I (26760) AUDIO: Additional settling time (50ms) for interrupt/GPIO matrix...
I (26818) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26825) AUDIO: â•‘ âœ… Modern I2S STD Driver Deinitialized
I (26832) AUDIO: â•‘ Camera Can Now Initialize
I (26837) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (26855) LED_CTRL: LED pattern -> 3
I (26859) STATE_MGR: âœ… Entered CAMERA_STANDBY state
I (26875) STATE_MGR: STT pipeline reported stop
I (26886) STATE_MGR: Pipeline stage event: transcription
I (26896) STATE_MGR: Pipeline stage event: llm
I (26906) STATE_MGR: Pipeline stage event: tts
I (26916) STATE_MGR: Pipeline stage event: complete
I (26926) STATE_MGR: TTS playback finished successfully
ğŸ“¢ Voice mode STARTED (recording...)
I (31311) STATE_MGR: Button event received: 1 in state CAMERA_STANDBY
I (31312) SERIAL_CMD: Simulated SHORT PRESS - Voice START
I (31312) STATE_MGR: Single click - mode toggle requested
I (31323) STATE_MGR: Switching: Camera â†’ Voice (count: 3)
I (31330) STATE_MGR: === TRANSITION TO VOICE MODE ===
I (31335) STATE_MGR: Stopping camera...
I (31340) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31356) STATE_MGR: â•‘ STEP 2: Acquiring I2S configuration mutex
I (31363) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31379) STATE_MGR:   Timeout: 5000 ms
I (31384) STATE_MGR:   Timestamp: 29836 ms
I (31388) STATE_MGR:   âœ“ Mutex acquired (took 0 ms)
I (31394) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31410) STATE_MGR: â•‘ STEP 3: Deinitializing camera hardware
I (31417) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31433) STATE_MGR:   Free heap before: 4046528 bytes
I (31439) STATE_MGR:   Free PSRAM before: 3999772 bytes
I (31445) CAMERA: Deinitializing camera...
I (31450) CAMERA: Camera deinitialized
I (31454) STATE_MGR:   âœ“ Camera deinitialized (took 9 ms)
I (31460) STATE_MGR:   Free heap after: 4208940 bytes
I (31466) STATE_MGR:   Free PSRAM after: 4124088 bytes
I (31472) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31488) STATE_MGR: â•‘ HARDWARE STABILIZATION - CRITICAL
I (31494) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31511) STATE_MGR:   Phase 1: Initial settle (100ms) - Free camera interrupts
I (31619) STATE_MGR:   Phase 2: GPIO matrix settle (100ms) - Reconfigure pins
I (31719) STATE_MGR:   Phase 3: Final settle (50ms) - Stabilize state
I (31769) STATE_MGR:   âœ“ Total stabilization: 250ms
I (31769) STATE_MGR:   Timestamp: 30222 ms
I (31769) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31785) STATE_MGR: â•‘ STEP 4: Initializing I2S audio drivers
I (31792) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31808) STATE_MGR:   Free heap before: 4208940 bytes
I (31814) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31832) AUDIO: â•‘ Initializing Modern I2S STD Driver (Full-Duplex)
I (31839) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31857) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31875) AUDIO: â•‘ Configuring Modern I2S STD Driver (Separate TX/RX)
I (31882) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (31900) AUDIO: [DIAG] Pre-init state:
I (31904) AUDIO:   Free heap: 4208940 bytes
I (31909) AUDIO:   Free internal RAM: 103687 bytes
I (31915) AUDIO:   Free DMA-capable: 84859 bytes
I (31920) AUDIO:   Free PSRAM: 4124088 bytes
I (31925) AUDIO:   Timestamp: 30378 ms
I (31929) AUDIO: [STEP 1/6] Creating I2S channel pair (TX + RX)...
I (31936) AUDIO:   Using I2S controller 1 for both channels (full-duplex mode)
I (31944) AUDIO:   DMA config request: 4 buffers x 1020 samples (requested = 4080)
I (31952) AUDIO:   DMA frame num (per desc): 1020
I (31958) AUDIO:   DMA total samples (effective): 4080
I (31964) AUDIO:   DMA memory committed: 8160 bytes (2 bytes/sample)
I (31971) AUDIO:   DMA memory: 8160 bytes (2 bytes/sample)
I (31977) AUDIO: âœ… I2S channels created (took 0 ms)
I (31983) AUDIO:   TX handle: 0x3ffafc3c | RX handle: 0x3ffcb490
I (31989) AUDIO: [STEP 2/6] Configuring TX (speaker) channel...
I (31996) AUDIO:   Sample rate: 16000 Hz
I (32000) AUDIO:   MCLK: DISABLED
I (32004) AUDIO:   BCLK: GPIO14 (shared)
I (32009) AUDIO:   WS:   GPIO15 (shared)
I (32014) AUDIO:   DOUT: GPIO13 (MAX98357A speaker)
I (32020) AUDIO: âœ… TX channel configured (took 1 ms)
I (32025) AUDIO: [STEP 3/6] Configuring RX (microphone) channel...
I (32032) AUDIO:   Sample rate: 16000 Hz
I (32036) AUDIO:   MCLK: DISABLED
I (32040) AUDIO:   BCLK: GPIO14 (shared)
I (32045) AUDIO:   WS:   GPIO15 (shared)
I (32050) AUDIO:   DIN:  GPIO2 (INMP441 microphone)
I (32056) AUDIO: âœ… RX channel configured (took 0 ms)
I (32061) AUDIO: [STEP 4/6] Enabling TX channel...
I (32067) AUDIO: âœ… TX channel enabled (took 0 ms)
I (32072) AUDIO: [STEP 5/6] Enabling RX channel...
I (32078) AUDIO: âœ… RX channel enabled (took 0 ms)
I (32083) AUDIO: [STEP 6/6] Hardware stabilization...
I (32089) AUDIO:   Phase 1: Initial settle (50ms)
I (32144) AUDIO:   Phase 2: DMA verification
I (32144) AUDIO:   âœ“ DMA TX operational (128 bytes)
I (32145) AUDIO:   Phase 3: Additional settle (150ms) - CRITICAL for RX DMA
I (32302) AUDIO: [DIAG] Post-init state:
I (32302) AUDIO:   Free heap: 4182952 bytes
I (32303) AUDIO:   Free internal RAM: 77699 bytes
I (32306) AUDIO:   Free DMA-capable: 58871 bytes
I (32311) AUDIO:   Free PSRAM: 4124088 bytes
I (32316) AUDIO:   Timestamp: 30769 ms
I (32321) AUDIO:   Total init time: 201 ms
I (32325) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32343) AUDIO: â•‘ âœ… MODERN I2S STD FULL-DUPLEX READY
I (32350) AUDIO: â•‘ Driver: i2s_std (NOT legacy!)
I (32355) AUDIO: â•‘ Mode: Master TX+RX | Rate: 16000 Hz | Format: TX stereo / RX mono
I (32364) AUDIO: â•‘ This should eliminate LoadStoreError crashes!
I (32370) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32388) AUDIO: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32406) AUDIO: â•‘ âœ… MODERN I2S STD DRIVER INITIALIZED
I (32413) AUDIO: â•‘ Mode: Full-duplex (separate TX + RX channels)
I (32419) AUDIO: â•‘ TX (Speaker): GPIO13 | RX (Microphone): GPIO2
I (32426) AUDIO: â•‘ Shared Clock: BCLK=GPIO14, WS=GPIO15
I (32432) AUDIO: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32450) STATE_MGR:   âœ“ Audio initialized (took 636 ms)
I (32456) STATE_MGR:   Free heap after: 4182952 bytes
I (32462) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32478) STATE_MGR: â•‘ STEP 5: I2S mutex released
I (32484) STATE_MGR: â•‘ Total transition time: 895 ms
I (32490) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32506) STATE_MGR: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32522) STATE_MGR: â•‘ STEP 6: Starting STT/TTS pipelines
I (32529) STATE_MGR: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32545) STT: Starting STT pipeline...
I (32549) STT: [CORE AFFINITY] Creating audio capture task on Core 0 (co-located with Wi-Fi)
I (32559) STT: âœ… STT pipeline started
I (32558) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32563) TTS: Starting TTS decoder...
I (32559) STT: Audio streaming session activated
I (32584) TTS: Initializing TTS decoder...
I (32579) STT: â•‘ Audio Capture Task Started on Core 0
W (32594) TTS: TTS decoder already initialized
I (32589) STT: Starting audio streaming to server...
I (32605) TTS: [CORE AFFINITY] Creating TTS playback task on Core 0 (co-located with Wi-Fi and STT)
I (32600) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32620) TTS: âœ… TTS decoder started
I (32636) STT: [STABILIZATION] Phase 1: Waiting 200ms for I2S DMA...
I (32648) STT:   Current time: 31100 ms
I (32652) STT:   Free heap: 4174040 bytes
I (32636) TTS: TTS playback task started on Core 0
I (32857) STT: [STABILIZATION] Phase 2: Verify audio driver state...
I (32857) STT:   âœ“ Audio driver initialized
I (32858) STT: [STABILIZATION] Phase 3: Additional 100ms settle...
I (32916) LED_CTRL: LED pattern -> 1
I (32917) STATE_MGR: âœ… Voice mode transition complete
I (32917) STATE_MGR: âœ… Entered VOICE_ACTIVE state
I (32931) STATE_MGR: STT pipeline reported start
I (32942) STATE_MGR: TTS playback start event received
I (32965) STT:   Total stabilization: 300ms
I (32965) STT:   Timestamp: 31417 ms
I (32965) STT: [BUFFER] Allocating 1024 byte capture buffer...
I (32969) STT:   âœ“ DMA-capable buffer allocated at 0x3fffd9ec
I (32976) STT: â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (32992) STT: â•‘ ğŸ¤ STARTING AUDIO CAPTURE
I (32997) STT: â•‘ Chunk size: 1024 bytes | Timeout: 100 ms
I (33003) STT: â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
I (33020) STT: [FIRST READ] Completed:
I (33024) STT:   Result: ESP_OK
I (33028) STT:   Bytes read: 1024 / 1024
I (33032) STT:   Duration: 0 ms
I (33036) STT:   Timestamp: 31472 ms
I (33041) STT:   First 16 bytes: 33 ff 33 ff 27 00 27 00 a8 ff a8 ff e3 fe e3 fe
I (33162) STT: [CAPTURE] Read #10: 1024 bytes (total: 10240 bytes, 10.0 KB)
I (33163) STT:   Avg read time: 63 ms | Errors: 0
I (33353) STT: [CAPTURE] âœ… Alive... 100 reads completed (Free Heap: 4166416 bytes)
E (33370) transport_ws: Error transport_poll_write
E (33371) websocket_client: esp_transport_write() returned 0, transport_error=ESP_OK, tls_error_code=0, tls_flags=0, errno=0
E (33376) WEBSOCKET: âŒ WebSocket error occurred
E (33382) HOTPIN_MAIN: âŒ WebSocket status callback: ERROR
E (33382) STATE_MGR: WebSocket error signalled
I (33393) LED_CTRL: LED pattern -> 5
I (33391) websocket_client: Reconnect after 5000 ms
E (33392) websocket_client: esp_transport_poll_read() returned -1, transport_error=ESP_OK, tls_error_code=0, tls_flags=0, errno=9
W (33403) WEBSOCKET: âš ï¸ WebSocket disconnected
W (33421) STATE_MGR: WebSocket disconnected
W (33421) HOTPIN_MAIN: âš ï¸ WebSocket status callback: DISCONNECTED
I (33425) LED_CTRL: LED pattern -> 4
E (33433) WEBSOCKET: âŒ WebSocket error occurred
E (33442) HOTPIN_MAIN: âŒ WebSocket status callback: ERROR
E (33447) STATE_MGR: WebSocket error signalled
I (33449) websocket_client: Reconnect after 5000 ms
I (33454) LED_CTRL: LED pattern -> 5
W (33459) WEBSOCKET: âš ï¸ WebSocket disconnected
E (33433) STT: WebSocket disconnected during streaming
W (33469) HOTPIN_MAIN: âš ï¸ WebSocket status callback: DISCONNECTED
W (33473) STATE_MGR: WebSocket disconnected
I (33482) STT: [CAPTURE] Read #20: 1024 bytes (total: 20480 bytes, 20.0 KB)
I (33487) LED_CTRL: LED pattern -> 4
I (33482) STT: Streaming task received stop signal
W (33504) STT: Audio streaming aborted due to transport errors
I (33494) STT:   Avg read time: 60 ms | Errors: 0
I (33516) STT: Audio capture task stopped (captured 20480 bytes total)
W (33512) STT: Skipping EOS - WebSocket disconnected
I (33529) STT: Audio streaming session complete (streamed 8192 bytes in 2 chunks)
I (33537) STATE_MGR: STT pipeline reported stop
I (33542) LED_CTRL: LED pattern -> 1
W (38136) HOTPIN_MAIN: WebSocket disconnected - restarting connection sequence
I (38136) HOTPIN_MAIN: ğŸ”Œ Attempting WebSocket connection (attempt 1)...
I (38140) WEBSOCKET: Connecting to WebSocket server...
E (38146) websocket_client: The client has started
E (38152) WEBSOCKET: Failed to start WebSocket client: ESP_FAIL
E (38158) HOTPIN_MAIN: âŒ WebSocket connection failed: ESP_FAIL
I (38570) WEBSOCKET: âœ… WebSocket connected to server
I (38571) WEBSOCKET: Sending handshake: {"session_id":"esp32-cam-hotpin"}
I (38576) WEBSOCKET: Handshake sent successfully
I (38578) HOTPIN_MAIN: ğŸ‰ WebSocket status callback: CONNECTED
I (38585) STATE_MGR: WebSocket connected
I (38746) WEBSOCKET: Received text message: {"status": "connected", "session_id": "esp32-cam-hotpin"}
I (38747) WEBSOCKET: Server status: connected
I (38767) HOTPIN_MAIN: ğŸ‰ WebSocket connected and verified!
I (38767) HOTPIN_MAIN: ğŸ“¡ WebSocket connection active - entering monitor loop
ï¿½